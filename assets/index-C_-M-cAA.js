var F7=Object.defineProperty;var eI=e=>{throw TypeError(e)};var L7=(e,t,r)=>t in e?F7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var le=(e,t,r)=>L7(e,typeof t!="symbol"?t+"":t,r),xw=(e,t,r)=>t.has(e)||eI("Cannot "+r);var Be=(e,t,r)=>(xw(e,t,"read from private field"),r?r.call(e):t.get(e)),hr=(e,t,r)=>t.has(e)?eI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ht=(e,t,r,n)=>(xw(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),hi=(e,t,r)=>(xw(e,t,"access private method"),r);var Mg=(e,t,r,n)=>({set _(i){Ht(e,t,i,r)},get _(){return Be(e,t,n)}});function N7(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var BB={exports:{}},Ay={},UB={exports:{}},nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm=Symbol.for("react.element"),R7=Symbol.for("react.portal"),z7=Symbol.for("react.fragment"),B7=Symbol.for("react.strict_mode"),U7=Symbol.for("react.profiler"),W7=Symbol.for("react.provider"),V7=Symbol.for("react.context"),G7=Symbol.for("react.forward_ref"),H7=Symbol.for("react.suspense"),K7=Symbol.for("react.memo"),q7=Symbol.for("react.lazy"),tI=Symbol.iterator;function X7(e){return e===null||typeof e!="object"?null:(e=tI&&e[tI]||e["@@iterator"],typeof e=="function"?e:null)}var WB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VB=Object.assign,GB={};function Jd(e,t,r){this.props=e,this.context=t,this.refs=GB,this.updater=r||WB}Jd.prototype.isReactComponent={};Jd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function HB(){}HB.prototype=Jd.prototype;function FP(e,t,r){this.props=e,this.context=t,this.refs=GB,this.updater=r||WB}var LP=FP.prototype=new HB;LP.constructor=FP;VB(LP,Jd.prototype);LP.isPureReactComponent=!0;var rI=Array.isArray,KB=Object.prototype.hasOwnProperty,NP={current:null},qB={key:!0,ref:!0,__self:!0,__source:!0};function XB(e,t,r){var n,i={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)KB.call(t,n)&&!qB.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:lm,type:e,key:o,ref:a,props:i,_owner:NP.current}}function Q7(e,t){return{$$typeof:lm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function RP(e){return typeof e=="object"&&e!==null&&e.$$typeof===lm}function Y7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nI=/\/+/g;function Mw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Y7(""+e.key):t.toString(36)}function w_(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case lm:case R7:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+Mw(a,0):n,rI(i)?(r="",e!=null&&(r=e.replace(nI,"$&/")+"/"),w_(i,t,r,"",function(u){return u})):i!=null&&(RP(i)&&(i=Q7(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(nI,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",rI(e))for(var s=0;s<e.length;s++){o=e[s];var l=n+Mw(o,s);a+=w_(o,t,r,l,i)}else if(l=X7(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=n+Mw(o,s++),a+=w_(o,t,r,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Pg(e,t,r){if(e==null)return e;var n=[],i=0;return w_(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Z7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fi={current:null},x_={transition:null},J7={ReactCurrentDispatcher:Fi,ReactCurrentBatchConfig:x_,ReactCurrentOwner:NP};function QB(){throw Error("act(...) is not supported in production builds of React.")}nr.Children={map:Pg,forEach:function(e,t,r){Pg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Pg(e,function(){t++}),t},toArray:function(e){return Pg(e,function(t){return t})||[]},only:function(e){if(!RP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nr.Component=Jd;nr.Fragment=z7;nr.Profiler=U7;nr.PureComponent=FP;nr.StrictMode=B7;nr.Suspense=H7;nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J7;nr.act=QB;nr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=VB({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=NP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)KB.call(t,l)&&!qB.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];n.children=s}return{$$typeof:lm,type:e.type,key:i,ref:o,props:n,_owner:a}};nr.createContext=function(e){return e={$$typeof:V7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:W7,_context:e},e.Consumer=e};nr.createElement=XB;nr.createFactory=function(e){var t=XB.bind(null,e);return t.type=e,t};nr.createRef=function(){return{current:null}};nr.forwardRef=function(e){return{$$typeof:G7,render:e}};nr.isValidElement=RP;nr.lazy=function(e){return{$$typeof:q7,_payload:{_status:-1,_result:e},_init:Z7}};nr.memo=function(e,t){return{$$typeof:K7,type:e,compare:t===void 0?null:t}};nr.startTransition=function(e){var t=x_.transition;x_.transition={};try{e()}finally{x_.transition=t}};nr.unstable_act=QB;nr.useCallback=function(e,t){return Fi.current.useCallback(e,t)};nr.useContext=function(e){return Fi.current.useContext(e)};nr.useDebugValue=function(){};nr.useDeferredValue=function(e){return Fi.current.useDeferredValue(e)};nr.useEffect=function(e,t){return Fi.current.useEffect(e,t)};nr.useId=function(){return Fi.current.useId()};nr.useImperativeHandle=function(e,t,r){return Fi.current.useImperativeHandle(e,t,r)};nr.useInsertionEffect=function(e,t){return Fi.current.useInsertionEffect(e,t)};nr.useLayoutEffect=function(e,t){return Fi.current.useLayoutEffect(e,t)};nr.useMemo=function(e,t){return Fi.current.useMemo(e,t)};nr.useReducer=function(e,t,r){return Fi.current.useReducer(e,t,r)};nr.useRef=function(e){return Fi.current.useRef(e)};nr.useState=function(e){return Fi.current.useState(e)};nr.useSyncExternalStore=function(e,t,r){return Fi.current.useSyncExternalStore(e,t,r)};nr.useTransition=function(){return Fi.current.useTransition()};nr.version="18.3.1";UB.exports=nr;var N=UB.exports;const ie=xr(N),zP=N7({__proto__:null,default:ie},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eX=N,tX=Symbol.for("react.element"),rX=Symbol.for("react.fragment"),nX=Object.prototype.hasOwnProperty,iX=eX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oX={key:!0,ref:!0,__self:!0,__source:!0};function YB(e,t,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)nX.call(t,n)&&!oX.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:tX,type:e,key:o,ref:a,props:i,_owner:iX.current}}Ay.Fragment=rX;Ay.jsx=YB;Ay.jsxs=YB;BB.exports=Ay;var L=BB.exports,ZB={exports:{}},_o={},JB={exports:{}},e4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,Y){var te=W.length;W.push(Y);e:for(;0<te;){var V=te-1>>>1,I=W[V];if(0<i(I,Y))W[V]=Y,W[te]=I,te=V;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var Y=W[0],te=W.pop();if(te!==Y){W[0]=te;e:for(var V=0,I=W.length,K=I>>>1;V<K;){var ae=2*(V+1)-1,pe=W[ae],de=ae+1,be=W[de];if(0>i(pe,te))de<I&&0>i(be,pe)?(W[V]=be,W[de]=te,V=de):(W[V]=pe,W[ae]=te,V=ae);else if(de<I&&0>i(be,te))W[V]=be,W[de]=te,V=de;else break e}}return Y}function i(W,Y){var te=W.sortIndex-Y.sortIndex;return te!==0?te:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],d=1,c=null,f=3,p=!1,h=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var Y=r(u);Y!==null;){if(Y.callback===null)n(u);else if(Y.startTime<=W)n(u),Y.sortIndex=Y.expirationTime,t(l,Y);else break;Y=r(u)}}function w(W){if(m=!1,b(W),!h)if(r(l)!==null)h=!0,G(y);else{var Y=r(u);Y!==null&&H(w,Y.startTime-W)}}function y(W,Y){h=!1,m&&(m=!1,g(T),T=-1),p=!0;var te=f;try{for(b(Y),c=r(l);c!==null&&(!(c.expirationTime>Y)||W&&!k());){var V=c.callback;if(typeof V=="function"){c.callback=null,f=c.priorityLevel;var I=V(c.expirationTime<=Y);Y=e.unstable_now(),typeof I=="function"?c.callback=I:c===r(l)&&n(l),b(Y)}else n(l);c=r(l)}if(c!==null)var K=!0;else{var ae=r(u);ae!==null&&H(w,ae.startTime-Y),K=!1}return K}finally{c=null,f=te,p=!1}}var x=!1,M=null,T=-1,S=5,$=-1;function k(){return!(e.unstable_now()-$<S)}function F(){if(M!==null){var W=e.unstable_now();$=W;var Y=!0;try{Y=M(!0,W)}finally{Y?j():(x=!1,M=null)}}else x=!1}var j;if(typeof _=="function")j=function(){_(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,z=U.port2;U.port1.onmessage=F,j=function(){z.postMessage(null)}}else j=function(){v(F,0)};function G(W){M=W,x||(x=!0,j())}function H(W,Y){T=v(function(){W(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,G(y))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(W){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var te=f;f=Y;try{return W()}finally{f=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=f;f=W;try{return Y()}finally{f=te}},e.unstable_scheduleCallback=function(W,Y,te){var V=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?V+te:V):te=V,W){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=te+I,W={id:d++,callback:Y,priorityLevel:W,startTime:te,expirationTime:I,sortIndex:-1},te>V?(W.sortIndex=te,t(u,W),r(l)===null&&W===r(u)&&(m?(g(T),T=-1):m=!0,H(w,te-V))):(W.sortIndex=I,t(l,W),h||p||(h=!0,G(y))),W},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(W){var Y=f;return function(){var te=f;f=Y;try{return W.apply(this,arguments)}finally{f=te}}}})(e4);JB.exports=e4;var aX=JB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sX=N,go=aX;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t4=new Set,eh={};function Yu(e,t){gd(e,t),gd(e+"Capture",t)}function gd(e,t){for(eh[e]=t,e=0;e<t.length;e++)t4.add(t[e])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),O1=Object.prototype.hasOwnProperty,lX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iI={},oI={};function uX(e){return O1.call(oI,e)?!0:O1.call(iI,e)?!1:lX.test(e)?oI[e]=!0:(iI[e]=!0,!1)}function cX(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dX(e,t,r,n){if(t===null||typeof t>"u"||cX(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Li(e,t,r,n,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ai={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ai[e]=new Li(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ai[t]=new Li(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new Li(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ai[e]=new Li(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ai[e]=new Li(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new Li(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ai[e]=new Li(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ai[e]=new Li(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ai[e]=new Li(e,5,!1,e.toLowerCase(),null,!1,!1)});var BP=/[\-:]([a-z])/g;function UP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(BP,UP);ai[t]=new Li(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(BP,UP);ai[t]=new Li(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(BP,UP);ai[t]=new Li(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ai[e]=new Li(e,1,!1,e.toLowerCase(),null,!1,!1)});ai.xlinkHref=new Li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ai[e]=new Li(e,1,!1,e.toLowerCase(),null,!0,!0)});function WP(e,t,r,n){var i=ai.hasOwnProperty(t)?ai[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dX(t,r,i,n)&&(r=null),n||i===null?uX(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ks=sX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eg=Symbol.for("react.element"),$c=Symbol.for("react.portal"),Ac=Symbol.for("react.fragment"),VP=Symbol.for("react.strict_mode"),k1=Symbol.for("react.profiler"),r4=Symbol.for("react.provider"),n4=Symbol.for("react.context"),GP=Symbol.for("react.forward_ref"),I1=Symbol.for("react.suspense"),D1=Symbol.for("react.suspense_list"),HP=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),i4=Symbol.for("react.offscreen"),aI=Symbol.iterator;function qf(e){return e===null||typeof e!="object"?null:(e=aI&&e[aI]||e["@@iterator"],typeof e=="function"?e:null)}var an=Object.assign,Tw;function Tp(e){if(Tw===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Tw=t&&t[1]||""}return`
`+Tw+e}var Pw=!1;function Ew(e,t){if(!e||Pw)return"";Pw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{Pw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Tp(e):""}function fX(e){switch(e.tag){case 5:return Tp(e.type);case 16:return Tp("Lazy");case 13:return Tp("Suspense");case 19:return Tp("SuspenseList");case 0:case 2:case 15:return e=Ew(e.type,!1),e;case 11:return e=Ew(e.type.render,!1),e;case 1:return e=Ew(e.type,!0),e;default:return""}}function j1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ac:return"Fragment";case $c:return"Portal";case k1:return"Profiler";case VP:return"StrictMode";case I1:return"Suspense";case D1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case n4:return(e.displayName||"Context")+".Consumer";case r4:return(e._context.displayName||"Context")+".Provider";case GP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HP:return t=e.displayName||null,t!==null?t:j1(e.type)||"Memo";case Js:t=e._payload,e=e._init;try{return j1(e(t))}catch{}}return null}function pX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j1(t);case 8:return t===VP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ml(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function o4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hX(e){var t=o4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sg(e){e._valueTracker||(e._valueTracker=hX(e))}function a4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=o4(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function B_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function F1(e,t){var r=t.checked;return an({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sI(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ml(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function s4(e,t){t=t.checked,t!=null&&WP(e,"checked",t,!1)}function L1(e,t){s4(e,t);var r=Ml(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?N1(e,t.type,r):t.hasOwnProperty("defaultValue")&&N1(e,t.type,Ml(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lI(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function N1(e,t,r){(t!=="number"||B_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pp=Array.isArray;function qc(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ml(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function R1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return an({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uI(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Qe(92));if(Pp(r)){if(1<r.length)throw Error(Qe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ml(r)}}function l4(e,t){var r=Ml(t.value),n=Ml(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function cI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function u4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?u4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Cg,c4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Cg=Cg||document.createElement("div"),Cg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Cg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function th(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mX=["Webkit","ms","Moz","O"];Object.keys(jp).forEach(function(e){mX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jp[t]=jp[e]})});function d4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jp.hasOwnProperty(e)&&jp[e]?(""+t).trim():t+"px"}function f4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=d4(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var gX=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B1(e,t){if(t){if(gX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function U1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W1=null;function KP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var V1=null,Xc=null,Qc=null;function dI(e){if(e=dm(e)){if(typeof V1!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=jy(t),V1(e.stateNode,e.type,t))}}function p4(e){Xc?Qc?Qc.push(e):Qc=[e]:Xc=e}function h4(){if(Xc){var e=Xc,t=Qc;if(Qc=Xc=null,dI(e),t)for(e=0;e<t.length;e++)dI(t[e])}}function m4(e,t){return e(t)}function g4(){}var Sw=!1;function _4(e,t,r){if(Sw)return e(t,r);Sw=!0;try{return m4(e,t,r)}finally{Sw=!1,(Xc!==null||Qc!==null)&&(g4(),h4())}}function rh(e,t){var r=e.stateNode;if(r===null)return null;var n=jy(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Qe(231,t,typeof r));return r}var G1=!1;if(Ms)try{var Xf={};Object.defineProperty(Xf,"passive",{get:function(){G1=!0}}),window.addEventListener("test",Xf,Xf),window.removeEventListener("test",Xf,Xf)}catch{G1=!1}function _X(e,t,r,n,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Fp=!1,U_=null,W_=!1,H1=null,vX={onError:function(e){Fp=!0,U_=e}};function yX(e,t,r,n,i,o,a,s,l){Fp=!1,U_=null,_X.apply(vX,arguments)}function bX(e,t,r,n,i,o,a,s,l){if(yX.apply(this,arguments),Fp){if(Fp){var u=U_;Fp=!1,U_=null}else throw Error(Qe(198));W_||(W_=!0,H1=u)}}function Zu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function v4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fI(e){if(Zu(e)!==e)throw Error(Qe(188))}function wX(e){var t=e.alternate;if(!t){if(t=Zu(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return fI(i),e;if(o===n)return fI(i),t;o=o.sibling}throw Error(Qe(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Qe(189))}}if(r.alternate!==n)throw Error(Qe(190))}if(r.tag!==3)throw Error(Qe(188));return r.stateNode.current===r?e:t}function y4(e){return e=wX(e),e!==null?b4(e):null}function b4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=b4(e);if(t!==null)return t;e=e.sibling}return null}var w4=go.unstable_scheduleCallback,pI=go.unstable_cancelCallback,xX=go.unstable_shouldYield,MX=go.unstable_requestPaint,wn=go.unstable_now,TX=go.unstable_getCurrentPriorityLevel,qP=go.unstable_ImmediatePriority,x4=go.unstable_UserBlockingPriority,V_=go.unstable_NormalPriority,PX=go.unstable_LowPriority,M4=go.unstable_IdlePriority,Oy=null,Na=null;function EX(e){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(Oy,e,void 0,(e.current.flags&128)===128)}catch{}}var ma=Math.clz32?Math.clz32:$X,SX=Math.log,CX=Math.LN2;function $X(e){return e>>>=0,e===0?32:31-(SX(e)/CX|0)|0}var $g=64,Ag=4194304;function Ep(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function G_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=Ep(s):(o&=a,o!==0&&(n=Ep(o)))}else a=r&~i,a!==0?n=Ep(a):o!==0&&(n=Ep(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ma(t),i=1<<r,n|=e[r],t&=~i;return n}function AX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OX(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-ma(o),s=1<<a,l=i[a];l===-1?(!(s&r)||s&n)&&(i[a]=AX(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function K1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T4(){var e=$g;return $g<<=1,!($g&4194240)&&($g=64),e}function Cw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function um(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ma(t),e[t]=r}function kX(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ma(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function XP(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ma(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Tr=0;function P4(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var E4,QP,S4,C4,$4,q1=!1,Og=[],hl=null,ml=null,gl=null,nh=new Map,ih=new Map,rl=[],IX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hI(e,t){switch(e){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(t.pointerId)}}function Qf(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=dm(t),t!==null&&QP(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function DX(e,t,r,n,i){switch(t){case"focusin":return hl=Qf(hl,e,t,r,n,i),!0;case"dragenter":return ml=Qf(ml,e,t,r,n,i),!0;case"mouseover":return gl=Qf(gl,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return nh.set(o,Qf(nh.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ih.set(o,Qf(ih.get(o)||null,e,t,r,n,i)),!0}return!1}function A4(e){var t=gu(e.target);if(t!==null){var r=Zu(t);if(r!==null){if(t=r.tag,t===13){if(t=v4(r),t!==null){e.blockedOn=t,$4(e.priority,function(){S4(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function M_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=X1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);W1=n,r.target.dispatchEvent(n),W1=null}else return t=dm(r),t!==null&&QP(t),e.blockedOn=r,!1;t.shift()}return!0}function mI(e,t,r){M_(e)&&r.delete(t)}function jX(){q1=!1,hl!==null&&M_(hl)&&(hl=null),ml!==null&&M_(ml)&&(ml=null),gl!==null&&M_(gl)&&(gl=null),nh.forEach(mI),ih.forEach(mI)}function Yf(e,t){e.blockedOn===t&&(e.blockedOn=null,q1||(q1=!0,go.unstable_scheduleCallback(go.unstable_NormalPriority,jX)))}function oh(e){function t(i){return Yf(i,e)}if(0<Og.length){Yf(Og[0],e);for(var r=1;r<Og.length;r++){var n=Og[r];n.blockedOn===e&&(n.blockedOn=null)}}for(hl!==null&&Yf(hl,e),ml!==null&&Yf(ml,e),gl!==null&&Yf(gl,e),nh.forEach(t),ih.forEach(t),r=0;r<rl.length;r++)n=rl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rl.length&&(r=rl[0],r.blockedOn===null);)A4(r),r.blockedOn===null&&rl.shift()}var Yc=ks.ReactCurrentBatchConfig,H_=!0;function FX(e,t,r,n){var i=Tr,o=Yc.transition;Yc.transition=null;try{Tr=1,YP(e,t,r,n)}finally{Tr=i,Yc.transition=o}}function LX(e,t,r,n){var i=Tr,o=Yc.transition;Yc.transition=null;try{Tr=4,YP(e,t,r,n)}finally{Tr=i,Yc.transition=o}}function YP(e,t,r,n){if(H_){var i=X1(e,t,r,n);if(i===null)Nw(e,t,n,K_,r),hI(e,n);else if(DX(i,e,t,r,n))n.stopPropagation();else if(hI(e,n),t&4&&-1<IX.indexOf(e)){for(;i!==null;){var o=dm(i);if(o!==null&&E4(o),o=X1(e,t,r,n),o===null&&Nw(e,t,n,K_,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Nw(e,t,n,null,r)}}var K_=null;function X1(e,t,r,n){if(K_=null,e=KP(n),e=gu(e),e!==null)if(t=Zu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=v4(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return K_=e,null}function O4(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TX()){case qP:return 1;case x4:return 4;case V_:case PX:return 16;case M4:return 536870912;default:return 16}default:return 16}}var cl=null,ZP=null,T_=null;function k4(){if(T_)return T_;var e,t=ZP,r=t.length,n,i="value"in cl?cl.value:cl.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[o-n];n++);return T_=i.slice(e,1<n?1-n:void 0)}function P_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kg(){return!0}function gI(){return!1}function vo(e){function t(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kg:gI,this.isPropagationStopped=gI,this}return an(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kg)},persist:function(){},isPersistent:kg}),t}var ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JP=vo(ef),cm=an({},ef,{view:0,detail:0}),NX=vo(cm),$w,Aw,Zf,ky=an({},cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zf&&(Zf&&e.type==="mousemove"?($w=e.screenX-Zf.screenX,Aw=e.screenY-Zf.screenY):Aw=$w=0,Zf=e),$w)},movementY:function(e){return"movementY"in e?e.movementY:Aw}}),_I=vo(ky),RX=an({},ky,{dataTransfer:0}),zX=vo(RX),BX=an({},cm,{relatedTarget:0}),Ow=vo(BX),UX=an({},ef,{animationName:0,elapsedTime:0,pseudoElement:0}),WX=vo(UX),VX=an({},ef,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),GX=vo(VX),HX=an({},ef,{data:0}),vI=vo(HX),KX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=XX[e])?!!t[e]:!1}function eE(){return QX}var YX=an({},cm,{key:function(e){if(e.key){var t=KX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=P_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eE,charCode:function(e){return e.type==="keypress"?P_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?P_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ZX=vo(YX),JX=an({},ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yI=vo(JX),eQ=an({},cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eE}),tQ=vo(eQ),rQ=an({},ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),nQ=vo(rQ),iQ=an({},ky,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oQ=vo(iQ),aQ=[9,13,27,32],tE=Ms&&"CompositionEvent"in window,Lp=null;Ms&&"documentMode"in document&&(Lp=document.documentMode);var sQ=Ms&&"TextEvent"in window&&!Lp,I4=Ms&&(!tE||Lp&&8<Lp&&11>=Lp),bI=" ",wI=!1;function D4(e,t){switch(e){case"keyup":return aQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j4(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oc=!1;function lQ(e,t){switch(e){case"compositionend":return j4(t);case"keypress":return t.which!==32?null:(wI=!0,bI);case"textInput":return e=t.data,e===bI&&wI?null:e;default:return null}}function uQ(e,t){if(Oc)return e==="compositionend"||!tE&&D4(e,t)?(e=k4(),T_=ZP=cl=null,Oc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I4&&t.locale!=="ko"?null:t.data;default:return null}}var cQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cQ[e.type]:t==="textarea"}function F4(e,t,r,n){p4(n),t=q_(t,"onChange"),0<t.length&&(r=new JP("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Np=null,ah=null;function dQ(e){K4(e,0)}function Iy(e){var t=Dc(e);if(a4(t))return e}function fQ(e,t){if(e==="change")return t}var L4=!1;if(Ms){var kw;if(Ms){var Iw="oninput"in document;if(!Iw){var MI=document.createElement("div");MI.setAttribute("oninput","return;"),Iw=typeof MI.oninput=="function"}kw=Iw}else kw=!1;L4=kw&&(!document.documentMode||9<document.documentMode)}function TI(){Np&&(Np.detachEvent("onpropertychange",N4),ah=Np=null)}function N4(e){if(e.propertyName==="value"&&Iy(ah)){var t=[];F4(t,ah,e,KP(e)),_4(dQ,t)}}function pQ(e,t,r){e==="focusin"?(TI(),Np=t,ah=r,Np.attachEvent("onpropertychange",N4)):e==="focusout"&&TI()}function hQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Iy(ah)}function mQ(e,t){if(e==="click")return Iy(t)}function gQ(e,t){if(e==="input"||e==="change")return Iy(t)}function _Q(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ya=typeof Object.is=="function"?Object.is:_Q;function sh(e,t){if(ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!O1.call(t,i)||!ya(e[i],t[i]))return!1}return!0}function PI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function EI(e,t){var r=PI(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PI(r)}}function R4(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?R4(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function z4(){for(var e=window,t=B_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=B_(e.document)}return t}function rE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vQ(e){var t=z4(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&R4(r.ownerDocument.documentElement,r)){if(n!==null&&rE(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=EI(r,o);var a=EI(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yQ=Ms&&"documentMode"in document&&11>=document.documentMode,kc=null,Q1=null,Rp=null,Y1=!1;function SI(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Y1||kc==null||kc!==B_(n)||(n=kc,"selectionStart"in n&&rE(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rp&&sh(Rp,n)||(Rp=n,n=q_(Q1,"onSelect"),0<n.length&&(t=new JP("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=kc)))}function Ig(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ic={animationend:Ig("Animation","AnimationEnd"),animationiteration:Ig("Animation","AnimationIteration"),animationstart:Ig("Animation","AnimationStart"),transitionend:Ig("Transition","TransitionEnd")},Dw={},B4={};Ms&&(B4=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Dy(e){if(Dw[e])return Dw[e];if(!Ic[e])return e;var t=Ic[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in B4)return Dw[e]=t[r];return e}var U4=Dy("animationend"),W4=Dy("animationiteration"),V4=Dy("animationstart"),G4=Dy("transitionend"),H4=new Map,CI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(e,t){H4.set(e,t),Yu(t,[e])}for(var jw=0;jw<CI.length;jw++){var Fw=CI[jw],bQ=Fw.toLowerCase(),wQ=Fw[0].toUpperCase()+Fw.slice(1);Cl(bQ,"on"+wQ)}Cl(U4,"onAnimationEnd");Cl(W4,"onAnimationIteration");Cl(V4,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(G4,"onTransitionEnd");gd("onMouseEnter",["mouseout","mouseover"]);gd("onMouseLeave",["mouseout","mouseover"]);gd("onPointerEnter",["pointerout","pointerover"]);gd("onPointerLeave",["pointerout","pointerover"]);Yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sp));function $I(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,bX(n,t,void 0,e),e.currentTarget=null}function K4(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;$I(i,s,u),o=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;$I(i,s,u),o=l}}}if(W_)throw e=H1,W_=!1,H1=null,e}function Vr(e,t){var r=t[rM];r===void 0&&(r=t[rM]=new Set);var n=e+"__bubble";r.has(n)||(q4(t,e,2,!1),r.add(n))}function Lw(e,t,r){var n=0;t&&(n|=4),q4(r,e,n,t)}var Dg="_reactListening"+Math.random().toString(36).slice(2);function lh(e){if(!e[Dg]){e[Dg]=!0,t4.forEach(function(r){r!=="selectionchange"&&(xQ.has(r)||Lw(r,!1,e),Lw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dg]||(t[Dg]=!0,Lw("selectionchange",!1,t))}}function q4(e,t,r,n){switch(O4(t)){case 1:var i=FX;break;case 4:i=LX;break;default:i=YP}r=i.bind(null,t,r,e),i=void 0,!G1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Nw(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=gu(s),a===null)return;if(l=a.tag,l===5||l===6){n=o=a;continue e}s=s.parentNode}}n=n.return}_4(function(){var u=o,d=KP(r),c=[];e:{var f=H4.get(e);if(f!==void 0){var p=JP,h=e;switch(e){case"keypress":if(P_(r)===0)break e;case"keydown":case"keyup":p=ZX;break;case"focusin":h="focus",p=Ow;break;case"focusout":h="blur",p=Ow;break;case"beforeblur":case"afterblur":p=Ow;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_I;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tQ;break;case U4:case W4:case V4:p=WX;break;case G4:p=nQ;break;case"scroll":p=NX;break;case"wheel":p=oQ;break;case"copy":case"cut":case"paste":p=GX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yI}var m=(t&4)!==0,v=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var _=u,b;_!==null;){b=_;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,g!==null&&(w=rh(_,g),w!=null&&m.push(uh(_,w,b)))),v)break;_=_.return}0<m.length&&(f=new p(f,h,null,r,d),c.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==W1&&(h=r.relatedTarget||r.fromElement)&&(gu(h)||h[Ts]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=r.relatedTarget||r.toElement,p=u,h=h?gu(h):null,h!==null&&(v=Zu(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(m=_I,w="onMouseLeave",g="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(m=yI,w="onPointerLeave",g="onPointerEnter",_="pointer"),v=p==null?f:Dc(p),b=h==null?f:Dc(h),f=new m(w,_+"leave",p,r,d),f.target=v,f.relatedTarget=b,w=null,gu(d)===u&&(m=new m(g,_+"enter",h,r,d),m.target=b,m.relatedTarget=v,w=m),v=w,p&&h)t:{for(m=p,g=h,_=0,b=m;b;b=wc(b))_++;for(b=0,w=g;w;w=wc(w))b++;for(;0<_-b;)m=wc(m),_--;for(;0<b-_;)g=wc(g),b--;for(;_--;){if(m===g||g!==null&&m===g.alternate)break t;m=wc(m),g=wc(g)}m=null}else m=null;p!==null&&AI(c,f,p,m,!1),h!==null&&v!==null&&AI(c,v,h,m,!0)}}e:{if(f=u?Dc(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var y=fQ;else if(xI(f))if(L4)y=gQ;else{y=hQ;var x=pQ}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(y=mQ);if(y&&(y=y(e,u))){F4(c,y,r,d);break e}x&&x(e,f,u),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&N1(f,"number",f.value)}switch(x=u?Dc(u):window,e){case"focusin":(xI(x)||x.contentEditable==="true")&&(kc=x,Q1=u,Rp=null);break;case"focusout":Rp=Q1=kc=null;break;case"mousedown":Y1=!0;break;case"contextmenu":case"mouseup":case"dragend":Y1=!1,SI(c,r,d);break;case"selectionchange":if(yQ)break;case"keydown":case"keyup":SI(c,r,d)}var M;if(tE)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Oc?D4(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(I4&&r.locale!=="ko"&&(Oc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Oc&&(M=k4()):(cl=d,ZP="value"in cl?cl.value:cl.textContent,Oc=!0)),x=q_(u,T),0<x.length&&(T=new vI(T,e,null,r,d),c.push({event:T,listeners:x}),M?T.data=M:(M=j4(r),M!==null&&(T.data=M)))),(M=sQ?lQ(e,r):uQ(e,r))&&(u=q_(u,"onBeforeInput"),0<u.length&&(d=new vI("onBeforeInput","beforeinput",null,r,d),c.push({event:d,listeners:u}),d.data=M))}K4(c,t)})}function uh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function q_(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=rh(e,r),o!=null&&n.unshift(uh(e,o,i)),o=rh(e,t),o!=null&&n.push(uh(e,o,i))),e=e.return}return n}function wc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function AI(e,t,r,n,i){for(var o=t._reactName,a=[];r!==null&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(l!==null&&l===n)break;s.tag===5&&u!==null&&(s=u,i?(l=rh(r,o),l!=null&&a.unshift(uh(r,l,s))):i||(l=rh(r,o),l!=null&&a.push(uh(r,l,s)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var MQ=/\r\n?/g,TQ=/\u0000|\uFFFD/g;function OI(e){return(typeof e=="string"?e:""+e).replace(MQ,`
`).replace(TQ,"")}function jg(e,t,r){if(t=OI(t),OI(e)!==t&&r)throw Error(Qe(425))}function X_(){}var Z1=null,J1=null;function eM(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tM=typeof setTimeout=="function"?setTimeout:void 0,PQ=typeof clearTimeout=="function"?clearTimeout:void 0,kI=typeof Promise=="function"?Promise:void 0,EQ=typeof queueMicrotask=="function"?queueMicrotask:typeof kI<"u"?function(e){return kI.resolve(null).then(e).catch(SQ)}:tM;function SQ(e){setTimeout(function(){throw e})}function Rw(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),oh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);oh(t)}function _l(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function II(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tf=Math.random().toString(36).slice(2),ja="__reactFiber$"+tf,ch="__reactProps$"+tf,Ts="__reactContainer$"+tf,rM="__reactEvents$"+tf,CQ="__reactListeners$"+tf,$Q="__reactHandles$"+tf;function gu(e){var t=e[ja];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ts]||r[ja]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=II(e);e!==null;){if(r=e[ja])return r;e=II(e)}return t}e=r,r=e.parentNode}return null}function dm(e){return e=e[ja]||e[Ts],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function jy(e){return e[ch]||null}var nM=[],jc=-1;function $l(e){return{current:e}}function Kr(e){0>jc||(e.current=nM[jc],nM[jc]=null,jc--)}function Lr(e,t){jc++,nM[jc]=e.current,e.current=t}var Tl={},Mi=$l(Tl),Hi=$l(!1),Du=Tl;function _d(e,t){var r=e.type.contextTypes;if(!r)return Tl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ki(e){return e=e.childContextTypes,e!=null}function Q_(){Kr(Hi),Kr(Mi)}function DI(e,t,r){if(Mi.current!==Tl)throw Error(Qe(168));Lr(Mi,t),Lr(Hi,r)}function X4(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Qe(108,pX(e)||"Unknown",i));return an({},r,n)}function Y_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tl,Du=Mi.current,Lr(Mi,e),Lr(Hi,Hi.current),!0}function jI(e,t,r){var n=e.stateNode;if(!n)throw Error(Qe(169));r?(e=X4(e,t,Du),n.__reactInternalMemoizedMergedChildContext=e,Kr(Hi),Kr(Mi),Lr(Mi,e)):Kr(Hi),Lr(Hi,r)}var ds=null,Fy=!1,zw=!1;function Q4(e){ds===null?ds=[e]:ds.push(e)}function AQ(e){Fy=!0,Q4(e)}function Al(){if(!zw&&ds!==null){zw=!0;var e=0,t=Tr;try{var r=ds;for(Tr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ds=null,Fy=!1}catch(i){throw ds!==null&&(ds=ds.slice(e+1)),w4(qP,Al),i}finally{Tr=t,zw=!1}}return null}var Fc=[],Lc=0,Z_=null,J_=0,$o=[],Ao=0,ju=null,hs=1,ms="";function su(e,t){Fc[Lc++]=J_,Fc[Lc++]=Z_,Z_=e,J_=t}function Y4(e,t,r){$o[Ao++]=hs,$o[Ao++]=ms,$o[Ao++]=ju,ju=e;var n=hs;e=ms;var i=32-ma(n)-1;n&=~(1<<i),r+=1;var o=32-ma(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,hs=1<<32-ma(t)+i|r<<i|n,ms=o+e}else hs=1<<o|r<<i|n,ms=e}function nE(e){e.return!==null&&(su(e,1),Y4(e,1,0))}function iE(e){for(;e===Z_;)Z_=Fc[--Lc],Fc[Lc]=null,J_=Fc[--Lc],Fc[Lc]=null;for(;e===ju;)ju=$o[--Ao],$o[Ao]=null,ms=$o[--Ao],$o[Ao]=null,hs=$o[--Ao],$o[Ao]=null}var co=null,uo=null,Yr=!1,da=null;function Z4(e,t){var r=Io(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function FI(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,co=e,uo=_l(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,co=e,uo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ju!==null?{id:hs,overflow:ms}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Io(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,co=e,uo=null,!0):!1;default:return!1}}function iM(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oM(e){if(Yr){var t=uo;if(t){var r=t;if(!FI(e,t)){if(iM(e))throw Error(Qe(418));t=_l(r.nextSibling);var n=co;t&&FI(e,t)?Z4(n,r):(e.flags=e.flags&-4097|2,Yr=!1,co=e)}}else{if(iM(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,Yr=!1,co=e}}}function LI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;co=e}function Fg(e){if(e!==co)return!1;if(!Yr)return LI(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eM(e.type,e.memoizedProps)),t&&(t=uo)){if(iM(e))throw J4(),Error(Qe(418));for(;t;)Z4(e,t),t=_l(t.nextSibling)}if(LI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){uo=_l(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}uo=null}}else uo=co?_l(e.stateNode.nextSibling):null;return!0}function J4(){for(var e=uo;e;)e=_l(e.nextSibling)}function vd(){uo=co=null,Yr=!1}function oE(e){da===null?da=[e]:da.push(e)}var OQ=ks.ReactCurrentBatchConfig;function Jf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Qe(309));var n=r.stateNode}if(!n)throw Error(Qe(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Qe(284));if(!r._owner)throw Error(Qe(290,e))}return e}function Lg(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NI(e){var t=e._init;return t(e._payload)}function eU(e){function t(g,_){if(e){var b=g.deletions;b===null?(g.deletions=[_],g.flags|=16):b.push(_)}}function r(g,_){if(!e)return null;for(;_!==null;)t(g,_),_=_.sibling;return null}function n(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=wl(g,_),g.index=0,g.sibling=null,g}function o(g,_,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<_?(g.flags|=2,_):b):(g.flags|=2,_)):(g.flags|=1048576,_)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function s(g,_,b,w){return _===null||_.tag!==6?(_=Kw(b,g.mode,w),_.return=g,_):(_=i(_,b),_.return=g,_)}function l(g,_,b,w){var y=b.type;return y===Ac?d(g,_,b.props.children,w,b.key):_!==null&&(_.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Js&&NI(y)===_.type)?(w=i(_,b.props),w.ref=Jf(g,_,b),w.return=g,w):(w=k_(b.type,b.key,b.props,null,g.mode,w),w.ref=Jf(g,_,b),w.return=g,w)}function u(g,_,b,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=qw(b,g.mode,w),_.return=g,_):(_=i(_,b.children||[]),_.return=g,_)}function d(g,_,b,w,y){return _===null||_.tag!==7?(_=Ou(b,g.mode,w,y),_.return=g,_):(_=i(_,b),_.return=g,_)}function c(g,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Kw(""+_,g.mode,b),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eg:return b=k_(_.type,_.key,_.props,null,g.mode,b),b.ref=Jf(g,null,_),b.return=g,b;case $c:return _=qw(_,g.mode,b),_.return=g,_;case Js:var w=_._init;return c(g,w(_._payload),b)}if(Pp(_)||qf(_))return _=Ou(_,g.mode,b,null),_.return=g,_;Lg(g,_)}return null}function f(g,_,b,w){var y=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return y!==null?null:s(g,_,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eg:return b.key===y?l(g,_,b,w):null;case $c:return b.key===y?u(g,_,b,w):null;case Js:return y=b._init,f(g,_,y(b._payload),w)}if(Pp(b)||qf(b))return y!==null?null:d(g,_,b,w,null);Lg(g,b)}return null}function p(g,_,b,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(b)||null,s(_,g,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Eg:return g=g.get(w.key===null?b:w.key)||null,l(_,g,w,y);case $c:return g=g.get(w.key===null?b:w.key)||null,u(_,g,w,y);case Js:var x=w._init;return p(g,_,b,x(w._payload),y)}if(Pp(w)||qf(w))return g=g.get(b)||null,d(_,g,w,y,null);Lg(_,w)}return null}function h(g,_,b,w){for(var y=null,x=null,M=_,T=_=0,S=null;M!==null&&T<b.length;T++){M.index>T?(S=M,M=null):S=M.sibling;var $=f(g,M,b[T],w);if($===null){M===null&&(M=S);break}e&&M&&$.alternate===null&&t(g,M),_=o($,_,T),x===null?y=$:x.sibling=$,x=$,M=S}if(T===b.length)return r(g,M),Yr&&su(g,T),y;if(M===null){for(;T<b.length;T++)M=c(g,b[T],w),M!==null&&(_=o(M,_,T),x===null?y=M:x.sibling=M,x=M);return Yr&&su(g,T),y}for(M=n(g,M);T<b.length;T++)S=p(M,g,T,b[T],w),S!==null&&(e&&S.alternate!==null&&M.delete(S.key===null?T:S.key),_=o(S,_,T),x===null?y=S:x.sibling=S,x=S);return e&&M.forEach(function(k){return t(g,k)}),Yr&&su(g,T),y}function m(g,_,b,w){var y=qf(b);if(typeof y!="function")throw Error(Qe(150));if(b=y.call(b),b==null)throw Error(Qe(151));for(var x=y=null,M=_,T=_=0,S=null,$=b.next();M!==null&&!$.done;T++,$=b.next()){M.index>T?(S=M,M=null):S=M.sibling;var k=f(g,M,$.value,w);if(k===null){M===null&&(M=S);break}e&&M&&k.alternate===null&&t(g,M),_=o(k,_,T),x===null?y=k:x.sibling=k,x=k,M=S}if($.done)return r(g,M),Yr&&su(g,T),y;if(M===null){for(;!$.done;T++,$=b.next())$=c(g,$.value,w),$!==null&&(_=o($,_,T),x===null?y=$:x.sibling=$,x=$);return Yr&&su(g,T),y}for(M=n(g,M);!$.done;T++,$=b.next())$=p(M,g,T,$.value,w),$!==null&&(e&&$.alternate!==null&&M.delete($.key===null?T:$.key),_=o($,_,T),x===null?y=$:x.sibling=$,x=$);return e&&M.forEach(function(F){return t(g,F)}),Yr&&su(g,T),y}function v(g,_,b,w){if(typeof b=="object"&&b!==null&&b.type===Ac&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Eg:e:{for(var y=b.key,x=_;x!==null;){if(x.key===y){if(y=b.type,y===Ac){if(x.tag===7){r(g,x.sibling),_=i(x,b.props.children),_.return=g,g=_;break e}}else if(x.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Js&&NI(y)===x.type){r(g,x.sibling),_=i(x,b.props),_.ref=Jf(g,x,b),_.return=g,g=_;break e}r(g,x);break}else t(g,x);x=x.sibling}b.type===Ac?(_=Ou(b.props.children,g.mode,w,b.key),_.return=g,g=_):(w=k_(b.type,b.key,b.props,null,g.mode,w),w.ref=Jf(g,_,b),w.return=g,g=w)}return a(g);case $c:e:{for(x=b.key;_!==null;){if(_.key===x)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){r(g,_.sibling),_=i(_,b.children||[]),_.return=g,g=_;break e}else{r(g,_);break}else t(g,_);_=_.sibling}_=qw(b,g.mode,w),_.return=g,g=_}return a(g);case Js:return x=b._init,v(g,_,x(b._payload),w)}if(Pp(b))return h(g,_,b,w);if(qf(b))return m(g,_,b,w);Lg(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(r(g,_.sibling),_=i(_,b),_.return=g,g=_):(r(g,_),_=Kw(b,g.mode,w),_.return=g,g=_),a(g)):r(g,_)}return v}var yd=eU(!0),tU=eU(!1),ev=$l(null),tv=null,Nc=null,aE=null;function sE(){aE=Nc=tv=null}function lE(e){var t=ev.current;Kr(ev),e._currentValue=t}function aM(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Zc(e,t){tv=e,aE=Nc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vi=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(aE!==e)if(e={context:e,memoizedValue:t,next:null},Nc===null){if(tv===null)throw Error(Qe(308));Nc=e,tv.dependencies={lanes:0,firstContext:e}}else Nc=Nc.next=e;return t}var _u=null;function uE(e){_u===null?_u=[e]:_u.push(e)}function rU(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,uE(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ps(e,n)}function Ps(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var el=!1;function cE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nU(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,cr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ps(e,r)}return i=n.interleaved,i===null?(t.next=t,uE(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ps(e,r)}function E_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,XP(e,r)}}function RI(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rv(e,t,r,n){var i=e.updateQueue;el=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(o!==null){var c=i.baseState;a=0,d=u=l=null,s=o;do{var f=s.lane,p=s.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=r,m.tag){case 1:if(h=m.payload,typeof h=="function"){c=h.call(p,c,f);break e}c=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,f=typeof h=="function"?h.call(p,c,f):h,f==null)break e;c=an({},c,f);break e;case 2:el=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=p,l=c):d=d.next=p,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Lu|=a,e.lanes=a,e.memoizedState=c}}function zI(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Qe(191,i));i.call(n)}}}var fm={},Ra=$l(fm),dh=$l(fm),fh=$l(fm);function vu(e){if(e===fm)throw Error(Qe(174));return e}function dE(e,t){switch(Lr(fh,t),Lr(dh,e),Lr(Ra,fm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:z1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=z1(t,e)}Kr(Ra),Lr(Ra,t)}function bd(){Kr(Ra),Kr(dh),Kr(fh)}function iU(e){vu(fh.current);var t=vu(Ra.current),r=z1(t,e.type);t!==r&&(Lr(dh,e),Lr(Ra,r))}function fE(e){dh.current===e&&(Kr(Ra),Kr(dh))}var nn=$l(0);function nv(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bw=[];function pE(){for(var e=0;e<Bw.length;e++)Bw[e]._workInProgressVersionPrimary=null;Bw.length=0}var S_=ks.ReactCurrentDispatcher,Uw=ks.ReactCurrentBatchConfig,Fu=0,on=null,zn=null,Qn=null,iv=!1,zp=!1,ph=0,kQ=0;function mi(){throw Error(Qe(321))}function hE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ya(e[r],t[r]))return!1;return!0}function mE(e,t,r,n,i,o){if(Fu=o,on=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S_.current=e===null||e.memoizedState===null?FQ:LQ,e=r(n,i),zp){o=0;do{if(zp=!1,ph=0,25<=o)throw Error(Qe(301));o+=1,Qn=zn=null,t.updateQueue=null,S_.current=NQ,e=r(n,i)}while(zp)}if(S_.current=ov,t=zn!==null&&zn.next!==null,Fu=0,Qn=zn=on=null,iv=!1,t)throw Error(Qe(300));return e}function gE(){var e=ph!==0;return ph=0,e}function Oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?on.memoizedState=Qn=e:Qn=Qn.next=e,Qn}function No(){if(zn===null){var e=on.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=Qn===null?on.memoizedState:Qn.next;if(t!==null)Qn=t,zn=e;else{if(e===null)throw Error(Qe(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Qn===null?on.memoizedState=Qn=e:Qn=Qn.next=e}return Qn}function hh(e,t){return typeof t=="function"?t(e):t}function Ww(e){var t=No(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var n=zn,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,l=null,u=o;do{var d=u.lane;if((Fu&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=c,a=n):l=l.next=c,on.lanes|=d,Lu|=d}u=u.next}while(u!==null&&u!==o);l===null?a=n:l.next=s,ya(n,t.memoizedState)||(Vi=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,on.lanes|=o,Lu|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vw(e){var t=No(),r=t.queue;if(r===null)throw Error(Qe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ya(o,t.memoizedState)||(Vi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function oU(){}function aU(e,t){var r=on,n=No(),i=t(),o=!ya(n.memoizedState,i);if(o&&(n.memoizedState=i,Vi=!0),n=n.queue,_E(uU.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Qn!==null&&Qn.memoizedState.tag&1){if(r.flags|=2048,mh(9,lU.bind(null,r,n,i,t),void 0,null),Zn===null)throw Error(Qe(349));Fu&30||sU(r,t,i)}return i}function sU(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=on.updateQueue,t===null?(t={lastEffect:null,stores:null},on.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lU(e,t,r,n){t.value=r,t.getSnapshot=n,cU(t)&&dU(e)}function uU(e,t,r){return r(function(){cU(t)&&dU(e)})}function cU(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ya(e,r)}catch{return!0}}function dU(e){var t=Ps(e,1);t!==null&&ga(t,e,1,-1)}function BI(e){var t=Oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:e},t.queue=e,e=e.dispatch=jQ.bind(null,on,e),[t.memoizedState,e]}function mh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=on.updateQueue,t===null?(t={lastEffect:null,stores:null},on.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fU(){return No().memoizedState}function C_(e,t,r,n){var i=Oa();on.flags|=e,i.memoizedState=mh(1|t,r,void 0,n===void 0?null:n)}function Ly(e,t,r,n){var i=No();n=n===void 0?null:n;var o=void 0;if(zn!==null){var a=zn.memoizedState;if(o=a.destroy,n!==null&&hE(n,a.deps)){i.memoizedState=mh(t,r,o,n);return}}on.flags|=e,i.memoizedState=mh(1|t,r,o,n)}function UI(e,t){return C_(8390656,8,e,t)}function _E(e,t){return Ly(2048,8,e,t)}function pU(e,t){return Ly(4,2,e,t)}function hU(e,t){return Ly(4,4,e,t)}function mU(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gU(e,t,r){return r=r!=null?r.concat([e]):null,Ly(4,4,mU.bind(null,t,e),r)}function vE(){}function _U(e,t){var r=No();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hE(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function vU(e,t){var r=No();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hE(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function yU(e,t,r){return Fu&21?(ya(r,t)||(r=T4(),on.lanes|=r,Lu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vi=!0),e.memoizedState=r)}function IQ(e,t){var r=Tr;Tr=r!==0&&4>r?r:4,e(!0);var n=Uw.transition;Uw.transition={};try{e(!1),t()}finally{Tr=r,Uw.transition=n}}function bU(){return No().memoizedState}function DQ(e,t,r){var n=bl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},wU(e))xU(t,r);else if(r=rU(e,t,r,n),r!==null){var i=ji();ga(r,e,n,i),MU(r,t,n)}}function jQ(e,t,r){var n=bl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(wU(e))xU(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,ya(s,a)){var l=t.interleaved;l===null?(i.next=i,uE(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=rU(e,t,i,n),r!==null&&(i=ji(),ga(r,e,n,i),MU(r,t,n))}}function wU(e){var t=e.alternate;return e===on||t!==null&&t===on}function xU(e,t){zp=iv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function MU(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,XP(e,r)}}var ov={readContext:Lo,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},FQ={readContext:Lo,useCallback:function(e,t){return Oa().memoizedState=[e,t===void 0?null:t],e},useContext:Lo,useEffect:UI,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,C_(4194308,4,mU.bind(null,t,e),r)},useLayoutEffect:function(e,t){return C_(4194308,4,e,t)},useInsertionEffect:function(e,t){return C_(4,2,e,t)},useMemo:function(e,t){var r=Oa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Oa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=DQ.bind(null,on,e),[n.memoizedState,e]},useRef:function(e){var t=Oa();return e={current:e},t.memoizedState=e},useState:BI,useDebugValue:vE,useDeferredValue:function(e){return Oa().memoizedState=e},useTransition:function(){var e=BI(!1),t=e[0];return e=IQ.bind(null,e[1]),Oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=on,i=Oa();if(Yr){if(r===void 0)throw Error(Qe(407));r=r()}else{if(r=t(),Zn===null)throw Error(Qe(349));Fu&30||sU(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,UI(uU.bind(null,n,o,e),[e]),n.flags|=2048,mh(9,lU.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Oa(),t=Zn.identifierPrefix;if(Yr){var r=ms,n=hs;r=(n&~(1<<32-ma(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ph++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=kQ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LQ={readContext:Lo,useCallback:_U,useContext:Lo,useEffect:_E,useImperativeHandle:gU,useInsertionEffect:pU,useLayoutEffect:hU,useMemo:vU,useReducer:Ww,useRef:fU,useState:function(){return Ww(hh)},useDebugValue:vE,useDeferredValue:function(e){var t=No();return yU(t,zn.memoizedState,e)},useTransition:function(){var e=Ww(hh)[0],t=No().memoizedState;return[e,t]},useMutableSource:oU,useSyncExternalStore:aU,useId:bU,unstable_isNewReconciler:!1},NQ={readContext:Lo,useCallback:_U,useContext:Lo,useEffect:_E,useImperativeHandle:gU,useInsertionEffect:pU,useLayoutEffect:hU,useMemo:vU,useReducer:Vw,useRef:fU,useState:function(){return Vw(hh)},useDebugValue:vE,useDeferredValue:function(e){var t=No();return zn===null?t.memoizedState=e:yU(t,zn.memoizedState,e)},useTransition:function(){var e=Vw(hh)[0],t=No().memoizedState;return[e,t]},useMutableSource:oU,useSyncExternalStore:aU,useId:bU,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){t=an({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sM(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:an({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ny={isMounted:function(e){return(e=e._reactInternals)?Zu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ji(),i=bl(e),o=ys(n,i);o.payload=t,r!=null&&(o.callback=r),t=vl(e,o,i),t!==null&&(ga(t,e,i,n),E_(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ji(),i=bl(e),o=ys(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=vl(e,o,i),t!==null&&(ga(t,e,i,n),E_(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ji(),n=bl(e),i=ys(r,n);i.tag=2,t!=null&&(i.callback=t),t=vl(e,i,n),t!==null&&(ga(t,e,n,r),E_(t,e,n))}};function WI(e,t,r,n,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!sh(r,n)||!sh(i,o):!0}function TU(e,t,r){var n=!1,i=Tl,o=t.contextType;return typeof o=="object"&&o!==null?o=Lo(o):(i=Ki(t)?Du:Mi.current,n=t.contextTypes,o=(n=n!=null)?_d(e,i):Tl),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ny,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function VI(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ny.enqueueReplaceState(t,t.state,null)}function lM(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},cE(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Lo(o):(o=Ki(t)?Du:Mi.current,i.context=_d(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(sM(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ny.enqueueReplaceState(i,i.state,null),rv(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wd(e,t){try{var r="",n=t;do r+=fX(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Gw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uM(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var RQ=typeof WeakMap=="function"?WeakMap:Map;function PU(e,t,r){r=ys(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){sv||(sv=!0,yM=n),uM(e,t)},r}function EU(e,t,r){r=ys(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){uM(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){uM(e,t),typeof n!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function GI(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new RQ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=JQ.bind(null,e,t,r),t.then(e,e))}function HI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function KI(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ys(-1,1),t.tag=2,vl(r,t,1))),r.lanes|=1),e)}var zQ=ks.ReactCurrentOwner,Vi=!1;function Ai(e,t,r,n){t.child=e===null?tU(t,null,r,n):yd(t,e.child,r,n)}function qI(e,t,r,n,i){r=r.render;var o=t.ref;return Zc(t,i),n=mE(e,t,r,n,o,i),r=gE(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Es(e,t,i)):(Yr&&r&&nE(t),t.flags|=1,Ai(e,t,n,i),t.child)}function XI(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!EE(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,SU(e,t,o,n,i)):(e=k_(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:sh,r(a,n)&&e.ref===t.ref)return Es(e,t,i)}return t.flags|=1,e=wl(o,n),e.ref=t.ref,e.return=t,t.child=e}function SU(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(sh(o,n)&&e.ref===t.ref)if(Vi=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Vi=!0);else return t.lanes=e.lanes,Es(e,t,i)}return cM(e,t,r,n,i)}function CU(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lr(zc,to),to|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Lr(zc,to),to|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Lr(zc,to),to|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Lr(zc,to),to|=n;return Ai(e,t,i,r),t.child}function $U(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function cM(e,t,r,n,i){var o=Ki(r)?Du:Mi.current;return o=_d(t,o),Zc(t,i),r=mE(e,t,r,n,o,i),n=gE(),e!==null&&!Vi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Es(e,t,i)):(Yr&&n&&nE(t),t.flags|=1,Ai(e,t,r,i),t.child)}function QI(e,t,r,n,i){if(Ki(r)){var o=!0;Y_(t)}else o=!1;if(Zc(t,i),t.stateNode===null)$_(e,t),TU(t,r,n),lM(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Lo(u):(u=Ki(r)?Du:Mi.current,u=_d(t,u));var d=r.getDerivedStateFromProps,c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||l!==u)&&VI(t,a,n,u),el=!1;var f=t.memoizedState;a.state=f,rv(t,n,a,i),l=t.memoizedState,s!==n||f!==l||Hi.current||el?(typeof d=="function"&&(sM(t,r,d,n),l=t.memoizedState),(s=el||WI(t,r,s,n,f,l,u))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,nU(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ia(t.type,s),a.props=u,c=t.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Lo(l):(l=Ki(r)?Du:Mi.current,l=_d(t,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==c||f!==l)&&VI(t,a,n,l),el=!1,f=t.memoizedState,a.state=f,rv(t,n,a,i);var h=t.memoizedState;s!==c||f!==h||Hi.current||el?(typeof p=="function"&&(sM(t,r,p,n),h=t.memoizedState),(u=el||WI(t,r,u,n,f,h,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,h,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,h,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return dM(e,t,r,n,o,i)}function dM(e,t,r,n,i,o){$U(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&jI(t,r,!1),Es(e,t,o);n=t.stateNode,zQ.current=t;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=yd(t,e.child,null,o),t.child=yd(t,null,s,o)):Ai(e,t,s,o),t.memoizedState=n.state,i&&jI(t,r,!0),t.child}function AU(e){var t=e.stateNode;t.pendingContext?DI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&DI(e,t.context,!1),dE(e,t.containerInfo)}function YI(e,t,r,n,i){return vd(),oE(i),t.flags|=256,Ai(e,t,r,n),t.child}var fM={dehydrated:null,treeContext:null,retryLane:0};function pM(e){return{baseLanes:e,cachePool:null,transitions:null}}function OU(e,t,r){var n=t.pendingProps,i=nn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Lr(nn,i&1),e===null)return oM(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=By(a,n,0,null),e=Ou(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=pM(r),t.memoizedState=fM,e):yE(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return BQ(e,t,a,n,s,i,r);if(o){o=n.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=wl(i,l),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=wl(s,o):(o=Ou(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?pM(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=fM,n}return o=e.child,e=o.sibling,n=wl(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yE(e,t){return t=By({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ng(e,t,r,n){return n!==null&&oE(n),yd(t,e.child,null,r),e=yE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function BQ(e,t,r,n,i,o,a){if(r)return t.flags&256?(t.flags&=-257,n=Gw(Error(Qe(422))),Ng(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=By({mode:"visible",children:n.children},i,0,null),o=Ou(o,i,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&yd(t,e.child,null,a),t.child.memoizedState=pM(a),t.memoizedState=fM,o);if(!(t.mode&1))return Ng(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(Qe(419)),n=Gw(o,n,void 0),Ng(e,t,a,n)}if(s=(a&e.childLanes)!==0,Vi||s){if(n=Zn,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ps(e,i),ga(n,e,i,-1))}return PE(),n=Gw(Error(Qe(421))),Ng(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eY.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,uo=_l(i.nextSibling),co=t,Yr=!0,da=null,e!==null&&($o[Ao++]=hs,$o[Ao++]=ms,$o[Ao++]=ju,hs=e.id,ms=e.overflow,ju=t),t=yE(t,n.children),t.flags|=4096,t)}function ZI(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),aM(e.return,t,r)}function Hw(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function kU(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ai(e,t,n.children,r),n=nn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ZI(e,r,t);else if(e.tag===19)ZI(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Lr(nn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&nv(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Hw(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&nv(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Hw(t,!0,r,null,o);break;case"together":Hw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Lu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,r=wl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function UQ(e,t,r){switch(t.tag){case 3:AU(t),vd();break;case 5:iU(t);break;case 1:Ki(t.type)&&Y_(t);break;case 4:dE(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Lr(ev,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Lr(nn,nn.current&1),t.flags|=128,null):r&t.child.childLanes?OU(e,t,r):(Lr(nn,nn.current&1),e=Es(e,t,r),e!==null?e.sibling:null);Lr(nn,nn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return kU(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Lr(nn,nn.current),n)break;return null;case 22:case 23:return t.lanes=0,CU(e,t,r)}return Es(e,t,r)}var IU,hM,DU,jU;IU=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hM=function(){};DU=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,vu(Ra.current);var o=null;switch(r){case"input":i=F1(e,i),n=F1(e,n),o=[];break;case"select":i=an({},i,{value:void 0}),n=an({},n,{value:void 0}),o=[];break;case"textarea":i=R1(e,i),n=R1(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=X_)}B1(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(eh.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(s=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(eh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Vr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};jU=function(e,t,r,n){r!==n&&(t.flags|=4)};function ep(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function WQ(e,t,r){var n=t.pendingProps;switch(iE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(t),null;case 1:return Ki(t.type)&&Q_(),gi(t),null;case 3:return n=t.stateNode,bd(),Kr(Hi),Kr(Mi),pE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,da!==null&&(xM(da),da=null))),hM(e,t),gi(t),null;case 5:fE(t);var i=vu(fh.current);if(r=t.type,e!==null&&t.stateNode!=null)DU(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Qe(166));return gi(t),null}if(e=vu(Ra.current),Fg(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ja]=t,n[ch]=o,e=(t.mode&1)!==0,r){case"dialog":Vr("cancel",n),Vr("close",n);break;case"iframe":case"object":case"embed":Vr("load",n);break;case"video":case"audio":for(i=0;i<Sp.length;i++)Vr(Sp[i],n);break;case"source":Vr("error",n);break;case"img":case"image":case"link":Vr("error",n),Vr("load",n);break;case"details":Vr("toggle",n);break;case"input":sI(n,o),Vr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",n);break;case"textarea":uI(n,o),Vr("invalid",n)}B1(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&jg(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&jg(n.textContent,s,e),i=["children",""+s]):eh.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Vr("scroll",n)}switch(r){case"input":Sg(n),lI(n,o,!0);break;case"textarea":Sg(n),cI(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=X_)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=u4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ja]=t,e[ch]=n,IU(e,t,!1,!1),t.stateNode=e;e:{switch(a=U1(r,n),r){case"dialog":Vr("cancel",e),Vr("close",e),i=n;break;case"iframe":case"object":case"embed":Vr("load",e),i=n;break;case"video":case"audio":for(i=0;i<Sp.length;i++)Vr(Sp[i],e);i=n;break;case"source":Vr("error",e),i=n;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=n;break;case"details":Vr("toggle",e),i=n;break;case"input":sI(e,n),i=F1(e,n),Vr("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=an({},n,{value:void 0}),Vr("invalid",e);break;case"textarea":uI(e,n),i=R1(e,n),Vr("invalid",e);break;default:i=n}B1(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?f4(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&c4(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&th(e,l):typeof l=="number"&&th(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(eh.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Vr("scroll",e):l!=null&&WP(e,o,l,a))}switch(r){case"input":Sg(e),lI(e,n,!1);break;case"textarea":Sg(e),cI(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ml(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?qc(e,!!n.multiple,o,!1):n.defaultValue!=null&&qc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=X_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gi(t),null;case 6:if(e&&t.stateNode!=null)jU(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Qe(166));if(r=vu(fh.current),vu(Ra.current),Fg(t)){if(n=t.stateNode,r=t.memoizedProps,n[ja]=t,(o=n.nodeValue!==r)&&(e=co,e!==null))switch(e.tag){case 3:jg(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jg(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ja]=t,t.stateNode=n}return gi(t),null;case 13:if(Kr(nn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&uo!==null&&t.mode&1&&!(t.flags&128))J4(),vd(),t.flags|=98560,o=!1;else if(o=Fg(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Qe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Qe(317));o[ja]=t}else vd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gi(t),o=!1}else da!==null&&(xM(da),da=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||nn.current&1?Un===0&&(Un=3):PE())),t.updateQueue!==null&&(t.flags|=4),gi(t),null);case 4:return bd(),hM(e,t),e===null&&lh(t.stateNode.containerInfo),gi(t),null;case 10:return lE(t.type._context),gi(t),null;case 17:return Ki(t.type)&&Q_(),gi(t),null;case 19:if(Kr(nn),o=t.memoizedState,o===null)return gi(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)ep(o,!1);else{if(Un!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=nv(e),a!==null){for(t.flags|=128,ep(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Lr(nn,nn.current&1|2),t.child}e=e.sibling}o.tail!==null&&wn()>xd&&(t.flags|=128,n=!0,ep(o,!1),t.lanes=4194304)}else{if(!n)if(e=nv(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ep(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Yr)return gi(t),null}else 2*wn()-o.renderingStartTime>xd&&r!==1073741824&&(t.flags|=128,n=!0,ep(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=wn(),t.sibling=null,r=nn.current,Lr(nn,n?r&1|2:r&1),t):(gi(t),null);case 22:case 23:return TE(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?to&1073741824&&(gi(t),t.subtreeFlags&6&&(t.flags|=8192)):gi(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function VQ(e,t){switch(iE(t),t.tag){case 1:return Ki(t.type)&&Q_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bd(),Kr(Hi),Kr(Mi),pE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fE(t),null;case 13:if(Kr(nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));vd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kr(nn),null;case 4:return bd(),null;case 10:return lE(t.type._context),null;case 22:case 23:return TE(),null;case 24:return null;default:return null}}var Rg=!1,bi=!1,GQ=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Rc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hn(e,t,n)}else r.current=null}function mM(e,t,r){try{r()}catch(n){hn(e,t,n)}}var JI=!1;function HQ(e,t){if(Z1=H_,e=z4(),rE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,l=-1,u=0,d=0,c=e,f=null;t:for(;;){for(var p;c!==r||i!==0&&c.nodeType!==3||(s=a+i),c!==o||n!==0&&c.nodeType!==3||(l=a+n),c.nodeType===3&&(a+=c.nodeValue.length),(p=c.firstChild)!==null;)f=c,c=p;for(;;){if(c===e)break t;if(f===r&&++u===i&&(s=a),f===o&&++d===n&&(l=a),(p=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=p}r=s===-1||l===-1?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(J1={focusedElem:e,selectionRange:r},H_=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,v=h.memoizedState,g=t.stateNode,_=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ia(t.type,m),v);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(w){hn(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return h=JI,JI=!1,h}function Bp(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&mM(t,r,o)}i=i.next}while(i!==n)}}function Ry(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function gM(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function FU(e){var t=e.alternate;t!==null&&(e.alternate=null,FU(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ja],delete t[ch],delete t[rM],delete t[CQ],delete t[$Q])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LU(e){return e.tag===5||e.tag===3||e.tag===4}function eD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LU(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _M(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=X_));else if(n!==4&&(e=e.child,e!==null))for(_M(e,t,r),e=e.sibling;e!==null;)_M(e,t,r),e=e.sibling}function vM(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vM(e,t,r),e=e.sibling;e!==null;)vM(e,t,r),e=e.sibling}var ii=null,la=!1;function Hs(e,t,r){for(r=r.child;r!==null;)NU(e,t,r),r=r.sibling}function NU(e,t,r){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(Oy,r)}catch{}switch(r.tag){case 5:bi||Rc(r,t);case 6:var n=ii,i=la;ii=null,Hs(e,t,r),ii=n,la=i,ii!==null&&(la?(e=ii,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ii.removeChild(r.stateNode));break;case 18:ii!==null&&(la?(e=ii,r=r.stateNode,e.nodeType===8?Rw(e.parentNode,r):e.nodeType===1&&Rw(e,r),oh(e)):Rw(ii,r.stateNode));break;case 4:n=ii,i=la,ii=r.stateNode.containerInfo,la=!0,Hs(e,t,r),ii=n,la=i;break;case 0:case 11:case 14:case 15:if(!bi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&mM(r,t,a),i=i.next}while(i!==n)}Hs(e,t,r);break;case 1:if(!bi&&(Rc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){hn(r,t,s)}Hs(e,t,r);break;case 21:Hs(e,t,r);break;case 22:r.mode&1?(bi=(n=bi)||r.memoizedState!==null,Hs(e,t,r),bi=n):Hs(e,t,r);break;default:Hs(e,t,r)}}function tD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new GQ),t.forEach(function(n){var i=tY.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Qo(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:ii=s.stateNode,la=!1;break e;case 3:ii=s.stateNode.containerInfo,la=!0;break e;case 4:ii=s.stateNode.containerInfo,la=!0;break e}s=s.return}if(ii===null)throw Error(Qe(160));NU(o,a,i),ii=null,la=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){hn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RU(t,e),t=t.sibling}function RU(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qo(t,e),$a(e),n&4){try{Bp(3,e,e.return),Ry(3,e)}catch(m){hn(e,e.return,m)}try{Bp(5,e,e.return)}catch(m){hn(e,e.return,m)}}break;case 1:Qo(t,e),$a(e),n&512&&r!==null&&Rc(r,r.return);break;case 5:if(Qo(t,e),$a(e),n&512&&r!==null&&Rc(r,r.return),e.flags&32){var i=e.stateNode;try{th(i,"")}catch(m){hn(e,e.return,m)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&s4(i,o),U1(s,a);var u=U1(s,o);for(a=0;a<l.length;a+=2){var d=l[a],c=l[a+1];d==="style"?f4(i,c):d==="dangerouslySetInnerHTML"?c4(i,c):d==="children"?th(i,c):WP(i,d,c,u)}switch(s){case"input":L1(i,o);break;case"textarea":l4(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?qc(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?qc(i,!!o.multiple,o.defaultValue,!0):qc(i,!!o.multiple,o.multiple?[]:"",!1))}i[ch]=o}catch(m){hn(e,e.return,m)}}break;case 6:if(Qo(t,e),$a(e),n&4){if(e.stateNode===null)throw Error(Qe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){hn(e,e.return,m)}}break;case 3:if(Qo(t,e),$a(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{oh(t.containerInfo)}catch(m){hn(e,e.return,m)}break;case 4:Qo(t,e),$a(e);break;case 13:Qo(t,e),$a(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(xE=wn())),n&4&&tD(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(bi=(u=bi)||d,Qo(t,e),bi=u):Qo(t,e),$a(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(gt=e,d=e.child;d!==null;){for(c=gt=d;gt!==null;){switch(f=gt,p=f.child,f.tag){case 0:case 11:case 14:case 15:Bp(4,f,f.return);break;case 1:Rc(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(m){hn(n,r,m)}}break;case 5:Rc(f,f.return);break;case 22:if(f.memoizedState!==null){nD(c);continue}}p!==null?(p.return=f,gt=p):nD(c)}d=d.sibling}e:for(d=null,c=e;;){if(c.tag===5){if(d===null){d=c;try{i=c.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=c.stateNode,l=c.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=d4("display",a))}catch(m){hn(e,e.return,m)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(m){hn(e,e.return,m)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Qo(t,e),$a(e),n&4&&tD(e);break;case 21:break;default:Qo(t,e),$a(e)}}function $a(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(LU(r)){var n=r;break e}r=r.return}throw Error(Qe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(th(i,""),n.flags&=-33);var o=eD(e);vM(e,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=eD(e);_M(e,s,a);break;default:throw Error(Qe(161))}}catch(l){hn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KQ(e,t,r){gt=e,zU(e)}function zU(e,t,r){for(var n=(e.mode&1)!==0;gt!==null;){var i=gt,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Rg;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||bi;s=Rg;var u=bi;if(Rg=a,(bi=l)&&!u)for(gt=i;gt!==null;)a=gt,l=a.child,a.tag===22&&a.memoizedState!==null?iD(i):l!==null?(l.return=a,gt=l):iD(i);for(;o!==null;)gt=o,zU(o),o=o.sibling;gt=i,Rg=s,bi=u}rD(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,gt=o):rD(e)}}function rD(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bi||Ry(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!bi)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ia(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&zI(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zI(t,a,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&oh(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}bi||t.flags&512&&gM(t)}catch(f){hn(t,t.return,f)}}if(t===e){gt=null;break}if(r=t.sibling,r!==null){r.return=t.return,gt=r;break}gt=t.return}}function nD(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,gt=r;break}gt=t.return}}function iD(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ry(4,t)}catch(l){hn(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){hn(t,i,l)}}var o=t.return;try{gM(t)}catch(l){hn(t,o,l)}break;case 5:var a=t.return;try{gM(t)}catch(l){hn(t,a,l)}}}catch(l){hn(t,t.return,l)}if(t===e){gt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,gt=s;break}gt=t.return}}var qQ=Math.ceil,av=ks.ReactCurrentDispatcher,bE=ks.ReactCurrentOwner,jo=ks.ReactCurrentBatchConfig,cr=0,Zn=null,$n=null,oi=0,to=0,zc=$l(0),Un=0,gh=null,Lu=0,zy=0,wE=0,Up=null,Wi=null,xE=0,xd=1/0,us=null,sv=!1,yM=null,yl=null,zg=!1,dl=null,lv=0,Wp=0,bM=null,A_=-1,O_=0;function ji(){return cr&6?wn():A_!==-1?A_:A_=wn()}function bl(e){return e.mode&1?cr&2&&oi!==0?oi&-oi:OQ.transition!==null?(O_===0&&(O_=T4()),O_):(e=Tr,e!==0||(e=window.event,e=e===void 0?16:O4(e.type)),e):1}function ga(e,t,r,n){if(50<Wp)throw Wp=0,bM=null,Error(Qe(185));um(e,r,n),(!(cr&2)||e!==Zn)&&(e===Zn&&(!(cr&2)&&(zy|=r),Un===4&&nl(e,oi)),qi(e,n),r===1&&cr===0&&!(t.mode&1)&&(xd=wn()+500,Fy&&Al()))}function qi(e,t){var r=e.callbackNode;OX(e,t);var n=G_(e,e===Zn?oi:0);if(n===0)r!==null&&pI(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&pI(r),t===1)e.tag===0?AQ(oD.bind(null,e)):Q4(oD.bind(null,e)),EQ(function(){!(cr&6)&&Al()}),r=null;else{switch(P4(n)){case 1:r=qP;break;case 4:r=x4;break;case 16:r=V_;break;case 536870912:r=M4;break;default:r=V_}r=qU(r,BU.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function BU(e,t){if(A_=-1,O_=0,cr&6)throw Error(Qe(327));var r=e.callbackNode;if(Jc()&&e.callbackNode!==r)return null;var n=G_(e,e===Zn?oi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uv(e,n);else{t=n;var i=cr;cr|=2;var o=WU();(Zn!==e||oi!==t)&&(us=null,xd=wn()+500,Au(e,t));do try{YQ();break}catch(s){UU(e,s)}while(!0);sE(),av.current=o,cr=i,$n!==null?t=0:(Zn=null,oi=0,t=Un)}if(t!==0){if(t===2&&(i=K1(e),i!==0&&(n=i,t=wM(e,i))),t===1)throw r=gh,Au(e,0),nl(e,n),qi(e,wn()),r;if(t===6)nl(e,n);else{if(i=e.current.alternate,!(n&30)&&!XQ(i)&&(t=uv(e,n),t===2&&(o=K1(e),o!==0&&(n=o,t=wM(e,o))),t===1))throw r=gh,Au(e,0),nl(e,n),qi(e,wn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Qe(345));case 2:lu(e,Wi,us);break;case 3:if(nl(e,n),(n&130023424)===n&&(t=xE+500-wn(),10<t)){if(G_(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){ji(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=tM(lu.bind(null,e,Wi,us),t);break}lu(e,Wi,us);break;case 4:if(nl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ma(n);o=1<<a,a=t[a],a>i&&(i=a),n&=~o}if(n=i,n=wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qQ(n/1960))-n,10<n){e.timeoutHandle=tM(lu.bind(null,e,Wi,us),n);break}lu(e,Wi,us);break;case 5:lu(e,Wi,us);break;default:throw Error(Qe(329))}}}return qi(e,wn()),e.callbackNode===r?BU.bind(null,e):null}function wM(e,t){var r=Up;return e.current.memoizedState.isDehydrated&&(Au(e,t).flags|=256),e=uv(e,t),e!==2&&(t=Wi,Wi=r,t!==null&&xM(t)),e}function xM(e){Wi===null?Wi=e:Wi.push.apply(Wi,e)}function XQ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!ya(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nl(e,t){for(t&=~wE,t&=~zy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ma(t),n=1<<r;e[r]=-1,t&=~n}}function oD(e){if(cr&6)throw Error(Qe(327));Jc();var t=G_(e,0);if(!(t&1))return qi(e,wn()),null;var r=uv(e,t);if(e.tag!==0&&r===2){var n=K1(e);n!==0&&(t=n,r=wM(e,n))}if(r===1)throw r=gh,Au(e,0),nl(e,t),qi(e,wn()),r;if(r===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lu(e,Wi,us),qi(e,wn()),null}function ME(e,t){var r=cr;cr|=1;try{return e(t)}finally{cr=r,cr===0&&(xd=wn()+500,Fy&&Al())}}function Nu(e){dl!==null&&dl.tag===0&&!(cr&6)&&Jc();var t=cr;cr|=1;var r=jo.transition,n=Tr;try{if(jo.transition=null,Tr=1,e)return e()}finally{Tr=n,jo.transition=r,cr=t,!(cr&6)&&Al()}}function TE(){to=zc.current,Kr(zc)}function Au(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,PQ(r)),$n!==null)for(r=$n.return;r!==null;){var n=r;switch(iE(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Q_();break;case 3:bd(),Kr(Hi),Kr(Mi),pE();break;case 5:fE(n);break;case 4:bd();break;case 13:Kr(nn);break;case 19:Kr(nn);break;case 10:lE(n.type._context);break;case 22:case 23:TE()}r=r.return}if(Zn=e,$n=e=wl(e.current,null),oi=to=t,Un=0,gh=null,wE=zy=Lu=0,Wi=Up=null,_u!==null){for(t=0;t<_u.length;t++)if(r=_u[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}_u=null}return e}function UU(e,t){do{var r=$n;try{if(sE(),S_.current=ov,iv){for(var n=on.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}iv=!1}if(Fu=0,Qn=zn=on=null,zp=!1,ph=0,bE.current=null,r===null||r.return===null){Un=1,gh=t,$n=null;break}e:{var o=e,a=r.return,s=r,l=t;if(t=oi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=HI(a);if(p!==null){p.flags&=-257,KI(p,a,s,o,t),p.mode&1&&GI(o,u,t),t=p,l=u;var h=t.updateQueue;if(h===null){var m=new Set;m.add(l),t.updateQueue=m}else h.add(l);break e}else{if(!(t&1)){GI(o,u,t),PE();break e}l=Error(Qe(426))}}else if(Yr&&s.mode&1){var v=HI(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),KI(v,a,s,o,t),oE(wd(l,s));break e}}o=l=wd(l,s),Un!==4&&(Un=2),Up===null?Up=[o]:Up.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=PU(o,l,t);RI(o,g);break e;case 1:s=l;var _=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(yl===null||!yl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=EU(o,s,t);RI(o,w);break e}}o=o.return}while(o!==null)}GU(r)}catch(y){t=y,$n===r&&r!==null&&($n=r=r.return);continue}break}while(!0)}function WU(){var e=av.current;return av.current=ov,e===null?ov:e}function PE(){(Un===0||Un===3||Un===2)&&(Un=4),Zn===null||!(Lu&268435455)&&!(zy&268435455)||nl(Zn,oi)}function uv(e,t){var r=cr;cr|=2;var n=WU();(Zn!==e||oi!==t)&&(us=null,Au(e,t));do try{QQ();break}catch(i){UU(e,i)}while(!0);if(sE(),cr=r,av.current=n,$n!==null)throw Error(Qe(261));return Zn=null,oi=0,Un}function QQ(){for(;$n!==null;)VU($n)}function YQ(){for(;$n!==null&&!xX();)VU($n)}function VU(e){var t=KU(e.alternate,e,to);e.memoizedProps=e.pendingProps,t===null?GU(e):$n=t,bE.current=null}function GU(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=VQ(r,t),r!==null){r.flags&=32767,$n=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Un=6,$n=null;return}}else if(r=WQ(r,t,to),r!==null){$n=r;return}if(t=t.sibling,t!==null){$n=t;return}$n=t=e}while(t!==null);Un===0&&(Un=5)}function lu(e,t,r){var n=Tr,i=jo.transition;try{jo.transition=null,Tr=1,ZQ(e,t,r,n)}finally{jo.transition=i,Tr=n}return null}function ZQ(e,t,r,n){do Jc();while(dl!==null);if(cr&6)throw Error(Qe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(kX(e,o),e===Zn&&($n=Zn=null,oi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zg||(zg=!0,qU(V_,function(){return Jc(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=jo.transition,jo.transition=null;var a=Tr;Tr=1;var s=cr;cr|=4,bE.current=null,HQ(e,r),RU(r,e),vQ(J1),H_=!!Z1,J1=Z1=null,e.current=r,KQ(r),MX(),cr=s,Tr=a,jo.transition=o}else e.current=r;if(zg&&(zg=!1,dl=e,lv=i),o=e.pendingLanes,o===0&&(yl=null),EX(r.stateNode),qi(e,wn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(sv)throw sv=!1,e=yM,yM=null,e;return lv&1&&e.tag!==0&&Jc(),o=e.pendingLanes,o&1?e===bM?Wp++:(Wp=0,bM=e):Wp=0,Al(),null}function Jc(){if(dl!==null){var e=P4(lv),t=jo.transition,r=Tr;try{if(jo.transition=null,Tr=16>e?16:e,dl===null)var n=!1;else{if(e=dl,dl=null,lv=0,cr&6)throw Error(Qe(331));var i=cr;for(cr|=4,gt=e.current;gt!==null;){var o=gt,a=o.child;if(gt.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(gt=u;gt!==null;){var d=gt;switch(d.tag){case 0:case 11:case 15:Bp(8,d,o)}var c=d.child;if(c!==null)c.return=d,gt=c;else for(;gt!==null;){d=gt;var f=d.sibling,p=d.return;if(FU(d),d===u){gt=null;break}if(f!==null){f.return=p,gt=f;break}gt=p}}}var h=o.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}gt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,gt=a;else e:for(;gt!==null;){if(o=gt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Bp(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,gt=g;break e}gt=o.return}}var _=e.current;for(gt=_;gt!==null;){a=gt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,gt=b;else e:for(a=_;gt!==null;){if(s=gt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ry(9,s)}}catch(y){hn(s,s.return,y)}if(s===a){gt=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,gt=w;break e}gt=s.return}}if(cr=i,Al(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(Oy,e)}catch{}n=!0}return n}finally{Tr=r,jo.transition=t}}return!1}function aD(e,t,r){t=wd(r,t),t=PU(e,t,1),e=vl(e,t,1),t=ji(),e!==null&&(um(e,1,t),qi(e,t))}function hn(e,t,r){if(e.tag===3)aD(e,e,r);else for(;t!==null;){if(t.tag===3){aD(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yl===null||!yl.has(n))){e=wd(r,e),e=EU(t,e,1),t=vl(t,e,1),e=ji(),t!==null&&(um(t,1,e),qi(t,e));break}}t=t.return}}function JQ(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ji(),e.pingedLanes|=e.suspendedLanes&r,Zn===e&&(oi&r)===r&&(Un===4||Un===3&&(oi&130023424)===oi&&500>wn()-xE?Au(e,0):wE|=r),qi(e,t)}function HU(e,t){t===0&&(e.mode&1?(t=Ag,Ag<<=1,!(Ag&130023424)&&(Ag=4194304)):t=1);var r=ji();e=Ps(e,t),e!==null&&(um(e,t,r),qi(e,r))}function eY(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),HU(e,r)}function tY(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Qe(314))}n!==null&&n.delete(t),HU(e,r)}var KU;KU=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hi.current)Vi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vi=!1,UQ(e,t,r);Vi=!!(e.flags&131072)}else Vi=!1,Yr&&t.flags&1048576&&Y4(t,J_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$_(e,t),e=t.pendingProps;var i=_d(t,Mi.current);Zc(t,r),i=mE(null,t,n,e,i,r);var o=gE();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ki(n)?(o=!0,Y_(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cE(t),i.updater=Ny,t.stateNode=i,i._reactInternals=t,lM(t,n,e,r),t=dM(null,t,n,!0,o,r)):(t.tag=0,Yr&&o&&nE(t),Ai(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch($_(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=nY(n),e=ia(n,e),i){case 0:t=cM(null,t,n,e,r);break e;case 1:t=QI(null,t,n,e,r);break e;case 11:t=qI(null,t,n,e,r);break e;case 14:t=XI(null,t,n,ia(n.type,e),r);break e}throw Error(Qe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),cM(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),QI(e,t,n,i,r);case 3:e:{if(AU(t),e===null)throw Error(Qe(387));n=t.pendingProps,o=t.memoizedState,i=o.element,nU(e,t),rv(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=wd(Error(Qe(423)),t),t=YI(e,t,n,r,i);break e}else if(n!==i){i=wd(Error(Qe(424)),t),t=YI(e,t,n,r,i);break e}else for(uo=_l(t.stateNode.containerInfo.firstChild),co=t,Yr=!0,da=null,r=tU(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vd(),n===i){t=Es(e,t,r);break e}Ai(e,t,n,r)}t=t.child}return t;case 5:return iU(t),e===null&&oM(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,eM(n,i)?a=null:o!==null&&eM(n,o)&&(t.flags|=32),$U(e,t),Ai(e,t,a,r),t.child;case 6:return e===null&&oM(t),null;case 13:return OU(e,t,r);case 4:return dE(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=yd(t,null,n,r):Ai(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),qI(e,t,n,i,r);case 7:return Ai(e,t,t.pendingProps,r),t.child;case 8:return Ai(e,t,t.pendingProps.children,r),t.child;case 12:return Ai(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Lr(ev,n._currentValue),n._currentValue=a,o!==null)if(ya(o.value,a)){if(o.children===i.children&&!Hi.current){t=Es(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=ys(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),aM(o.return,r,t),s.lanes|=r;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Qe(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),aM(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ai(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Zc(t,r),i=Lo(i),n=n(i),t.flags|=1,Ai(e,t,n,r),t.child;case 14:return n=t.type,i=ia(n,t.pendingProps),i=ia(n.type,i),XI(e,t,n,i,r);case 15:return SU(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),$_(e,t),t.tag=1,Ki(n)?(e=!0,Y_(t)):e=!1,Zc(t,r),TU(t,n,i),lM(t,n,i,r),dM(null,t,n,!0,e,r);case 19:return kU(e,t,r);case 22:return CU(e,t,r)}throw Error(Qe(156,t.tag))};function qU(e,t){return w4(e,t)}function rY(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(e,t,r,n){return new rY(e,t,r,n)}function EE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nY(e){if(typeof e=="function")return EE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===GP)return 11;if(e===HP)return 14}return 2}function wl(e,t){var r=e.alternate;return r===null?(r=Io(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function k_(e,t,r,n,i,o){var a=2;if(n=e,typeof e=="function")EE(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ac:return Ou(r.children,i,o,t);case VP:a=8,i|=8;break;case k1:return e=Io(12,r,t,i|2),e.elementType=k1,e.lanes=o,e;case I1:return e=Io(13,r,t,i),e.elementType=I1,e.lanes=o,e;case D1:return e=Io(19,r,t,i),e.elementType=D1,e.lanes=o,e;case i4:return By(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r4:a=10;break e;case n4:a=9;break e;case GP:a=11;break e;case HP:a=14;break e;case Js:a=16,n=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=Io(a,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Ou(e,t,r,n){return e=Io(7,e,n,t),e.lanes=r,e}function By(e,t,r,n){return e=Io(22,e,n,t),e.elementType=i4,e.lanes=r,e.stateNode={isHidden:!1},e}function Kw(e,t,r){return e=Io(6,e,null,t),e.lanes=r,e}function qw(e,t,r){return t=Io(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iY(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cw(0),this.expirationTimes=Cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cw(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function SE(e,t,r,n,i,o,a,s,l){return e=new iY(e,t,r,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Io(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cE(o),e}function oY(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$c,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function XU(e){if(!e)return Tl;e=e._reactInternals;e:{if(Zu(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var r=e.type;if(Ki(r))return X4(e,r,t)}return t}function QU(e,t,r,n,i,o,a,s,l){return e=SE(r,n,!0,e,i,o,a,s,l),e.context=XU(null),r=e.current,n=ji(),i=bl(r),o=ys(n,i),o.callback=t??null,vl(r,o,i),e.current.lanes=i,um(e,i,n),qi(e,n),e}function Uy(e,t,r,n){var i=t.current,o=ji(),a=bl(i);return r=XU(r),t.context===null?t.context=r:t.pendingContext=r,t=ys(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=vl(i,t,a),e!==null&&(ga(e,i,a,o),E_(e,i,a)),a}function cv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function CE(e,t){sD(e,t),(e=e.alternate)&&sD(e,t)}function aY(){return null}var YU=typeof reportError=="function"?reportError:function(e){console.error(e)};function $E(e){this._internalRoot=e}Wy.prototype.render=$E.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));Uy(e,t,null,null)};Wy.prototype.unmount=$E.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nu(function(){Uy(null,e,null,null)}),t[Ts]=null}};function Wy(e){this._internalRoot=e}Wy.prototype.unstable_scheduleHydration=function(e){if(e){var t=C4();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rl.length&&t!==0&&t<rl[r].priority;r++);rl.splice(r,0,e),r===0&&A4(e)}};function AE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lD(){}function sY(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var u=cv(a);o.call(u)}}var a=QU(t,n,e,0,null,!1,!1,"",lD);return e._reactRootContainer=a,e[Ts]=a.current,lh(e.nodeType===8?e.parentNode:e),Nu(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var u=cv(l);s.call(u)}}var l=SE(e,0,!1,null,null,!1,!1,"",lD);return e._reactRootContainer=l,e[Ts]=l.current,lh(e.nodeType===8?e.parentNode:e),Nu(function(){Uy(t,l,r,n)}),l}function Gy(e,t,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=cv(a);s.call(l)}}Uy(t,a,e,i)}else a=sY(r,t,e,i,n);return cv(a)}E4=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ep(t.pendingLanes);r!==0&&(XP(t,r|1),qi(t,wn()),!(cr&6)&&(xd=wn()+500,Al()))}break;case 13:Nu(function(){var n=Ps(e,1);if(n!==null){var i=ji();ga(n,e,1,i)}}),CE(e,1)}};QP=function(e){if(e.tag===13){var t=Ps(e,134217728);if(t!==null){var r=ji();ga(t,e,134217728,r)}CE(e,134217728)}};S4=function(e){if(e.tag===13){var t=bl(e),r=Ps(e,t);if(r!==null){var n=ji();ga(r,e,t,n)}CE(e,t)}};C4=function(){return Tr};$4=function(e,t){var r=Tr;try{return Tr=e,t()}finally{Tr=r}};V1=function(e,t,r){switch(t){case"input":if(L1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=jy(n);if(!i)throw Error(Qe(90));a4(n),L1(n,i)}}}break;case"textarea":l4(e,r);break;case"select":t=r.value,t!=null&&qc(e,!!r.multiple,t,!1)}};m4=ME;g4=Nu;var lY={usingClientEntryPoint:!1,Events:[dm,Dc,jy,p4,h4,ME]},tp={findFiberByHostInstance:gu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uY={bundleType:tp.bundleType,version:tp.version,rendererPackageName:tp.rendererPackageName,rendererConfig:tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=y4(e),e===null?null:e.stateNode},findFiberByHostInstance:tp.findFiberByHostInstance||aY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bg.isDisabled&&Bg.supportsFiber)try{Oy=Bg.inject(uY),Na=Bg}catch{}}_o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lY;_o.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!AE(t))throw Error(Qe(200));return oY(e,t,null,r)};_o.createRoot=function(e,t){if(!AE(e))throw Error(Qe(299));var r=!1,n="",i=YU;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=SE(e,1,!1,null,null,r,!1,n,i),e[Ts]=t.current,lh(e.nodeType===8?e.parentNode:e),new $E(t)};_o.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=y4(t),e=e===null?null:e.stateNode,e};_o.flushSync=function(e){return Nu(e)};_o.hydrate=function(e,t,r){if(!Vy(t))throw Error(Qe(200));return Gy(null,e,t,!0,r)};_o.hydrateRoot=function(e,t,r){if(!AE(e))throw Error(Qe(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=YU;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=QU(t,null,e,1,r??null,i,!1,o,a),e[Ts]=t.current,lh(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Wy(t)};_o.render=function(e,t,r){if(!Vy(t))throw Error(Qe(200));return Gy(null,e,t,!1,r)};_o.unmountComponentAtNode=function(e){if(!Vy(e))throw Error(Qe(40));return e._reactRootContainer?(Nu(function(){Gy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ts]=null})}),!0):!1};_o.unstable_batchedUpdates=ME;_o.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vy(r))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return Gy(e,t,r,!1,n)};_o.version="18.3.1-next-f1338f8080-20240426";function ZU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZU)}catch(e){console.error(e)}}ZU(),ZB.exports=_o;var pm=ZB.exports;const JU=xr(pm);var eW,uD=pm;eW=uD.createRoot,uD.hydrateRoot;const cY=1,dY=1e6;let Xw=0;function fY(){return Xw=(Xw+1)%Number.MAX_SAFE_INTEGER,Xw.toString()}const Qw=new Map,cD=e=>{if(Qw.has(e))return;const t=setTimeout(()=>{Qw.delete(e),Vp({type:"REMOVE_TOAST",toastId:e})},dY);Qw.set(e,t)},pY=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,cY)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?cD(r):e.toasts.forEach(n=>{cD(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},I_=[];let D_={toasts:[]};function Vp(e){D_=pY(D_,e),I_.forEach(t=>{t(D_)})}function ed({...e}){const t=fY(),r=i=>Vp({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>Vp({type:"DISMISS_TOAST",toastId:t});return Vp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function tW(){const[e,t]=N.useState(D_);return N.useEffect(()=>(I_.push(t),()=>{const r=I_.indexOf(t);r>-1&&I_.splice(r,1)}),[e]),{...e,toast:ed,dismiss:r=>Vp({type:"DISMISS_TOAST",toastId:r})}}function qt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function dD(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function rW(...e){return t=>{let r=!1;const n=e.map(i=>{const o=dD(i,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let i=0;i<n.length;i++){const o=n[i];typeof o=="function"?o():dD(e[i],null)}}}}function Rr(...e){return N.useCallback(rW(...e),e)}function Is(e,t=[]){let r=[];function n(o,a){const s=N.createContext(a),l=r.length;r=[...r,a];const u=c=>{var g;const{scope:f,children:p,...h}=c,m=((g=f==null?void 0:f[e])==null?void 0:g[l])||s,v=N.useMemo(()=>h,Object.values(h));return L.jsx(m.Provider,{value:v,children:p})};u.displayName=o+"Provider";function d(c,f){var m;const p=((m=f==null?void 0:f[e])==null?void 0:m[l])||s,h=N.useContext(p);if(h)return h;if(a!==void 0)return a;throw new Error(`\`${c}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=r.map(a=>N.createContext(a));return function(s){const l=(s==null?void 0:s[e])||o;return N.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return i.scopeName=e,[n,hY(i,...t)]}function hY(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=n.reduce((s,{useScope:l,scopeName:u})=>{const c=l(o)[`__scope${u}`];return{...s,...c}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function dv(e){const t=gY(e),r=N.forwardRef((n,i)=>{const{children:o,...a}=n,s=N.Children.toArray(o),l=s.find(vY);if(l){const u=l.props.children,d=s.map(c=>c===l?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:c);return L.jsx(t,{...a,ref:i,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return L.jsx(t,{...a,ref:i,children:o})});return r.displayName=`${e}.Slot`,r}var mY=dv("Slot");function gY(e){const t=N.forwardRef((r,n)=>{const{children:i,...o}=r;if(N.isValidElement(i)){const a=bY(i),s=yY(o,i.props);return i.type!==N.Fragment&&(s.ref=n?rW(n,a):a),N.cloneElement(i,s)}return N.Children.count(i)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nW=Symbol("radix.slottable");function _Y(e){const t=({children:r})=>L.jsx(L.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=nW,t}function vY(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nW}function yY(e,t){const r={...t};for(const n in t){const i=e[n],o=t[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const l=o(...s);return i(...s),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...e,...r}}function bY(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function OE(e){const t=e+"CollectionProvider",[r,n]=Is(t),[i,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:v,children:g}=m,_=ie.useRef(null),b=ie.useRef(new Map).current;return L.jsx(i,{scope:v,itemMap:b,collectionRef:_,children:g})};a.displayName=t;const s=e+"CollectionSlot",l=dv(s),u=ie.forwardRef((m,v)=>{const{scope:g,children:_}=m,b=o(s,g),w=Rr(v,b.collectionRef);return L.jsx(l,{ref:w,children:_})});u.displayName=s;const d=e+"CollectionItemSlot",c="data-radix-collection-item",f=dv(d),p=ie.forwardRef((m,v)=>{const{scope:g,children:_,...b}=m,w=ie.useRef(null),y=Rr(v,w),x=o(d,g);return ie.useEffect(()=>(x.itemMap.set(w,{ref:w,...b}),()=>void x.itemMap.delete(w))),L.jsx(f,{[c]:"",ref:y,children:_})});p.displayName=d;function h(m){const v=o(e+"CollectionConsumer",m);return ie.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const b=Array.from(_.querySelectorAll(`[${c}]`));return Array.from(v.itemMap.values()).sort((x,M)=>b.indexOf(x.ref.current)-b.indexOf(M.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:u,ItemSlot:p},h,n]}var wY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_r=wY.reduce((e,t)=>{const r=dv(`Primitive.${t}`),n=N.forwardRef((i,o)=>{const{asChild:a,...s}=i,l=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),L.jsx(l,{...s,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function iW(e,t){e&&pm.flushSync(()=>e.dispatchEvent(t))}function xi(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function xY(e,t=globalThis==null?void 0:globalThis.document){const r=xi(e);N.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var MY="DismissableLayer",MM="dismissableLayer.update",TY="dismissableLayer.pointerDownOutside",PY="dismissableLayer.focusOutside",fD,oW=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kE=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...l}=e,u=N.useContext(oW),[d,c]=N.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=N.useState({}),h=Rr(t,M=>c(M)),m=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(v),_=d?m.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=_>=g,y=SY(M=>{const T=M.target,S=[...u.branches].some($=>$.contains(T));!w||S||(i==null||i(M),a==null||a(M),M.defaultPrevented||s==null||s())},f),x=CY(M=>{const T=M.target;[...u.branches].some($=>$.contains(T))||(o==null||o(M),a==null||a(M),M.defaultPrevented||s==null||s())},f);return xY(M=>{_===u.layers.size-1&&(n==null||n(M),!M.defaultPrevented&&s&&(M.preventDefault(),s()))},f),N.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(fD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),pD(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=fD)}},[d,f,r,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),pD())},[d,u]),N.useEffect(()=>{const M=()=>p({});return document.addEventListener(MM,M),()=>document.removeEventListener(MM,M)},[]),L.jsx(_r.div,{...l,ref:h,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,x.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,y.onPointerDownCapture)})});kE.displayName=MY;var EY="DismissableLayerBranch",aW=N.forwardRef((e,t)=>{const r=N.useContext(oW),n=N.useRef(null),i=Rr(t,n);return N.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),L.jsx(_r.div,{...e,ref:i})});aW.displayName=EY;function SY(e,t=globalThis==null?void 0:globalThis.document){const r=xi(e),n=N.useRef(!1),i=N.useRef(()=>{});return N.useEffect(()=>{const o=s=>{if(s.target&&!n.current){let l=function(){sW(TY,r,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function CY(e,t=globalThis==null?void 0:globalThis.document){const r=xi(e),n=N.useRef(!1);return N.useEffect(()=>{const i=o=>{o.target&&!n.current&&sW(PY,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function pD(){const e=new CustomEvent(MM);document.dispatchEvent(e)}function sW(e,t,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?iW(i,o):i.dispatchEvent(o)}var $Y=kE,AY=aW,Ga=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},OY="Portal",lW=N.forwardRef((e,t)=>{var s;const{container:r,...n}=e,[i,o]=N.useState(!1);Ga(()=>o(!0),[]);const a=r||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?JU.createPortal(L.jsx(_r.div,{...n,ref:t}),a):null});lW.displayName=OY;function kY(e,t){return N.useReducer((r,n)=>t[r][n]??r,e)}var Ol=e=>{const{present:t,children:r}=e,n=IY(t),i=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),o=Rr(n.ref,DY(i));return typeof r=="function"||n.isPresent?N.cloneElement(i,{ref:o}):null};Ol.displayName="Presence";function IY(e){const[t,r]=N.useState(),n=N.useRef(null),i=N.useRef(e),o=N.useRef("none"),a=e?"mounted":"unmounted",[s,l]=kY(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Ug(n.current);o.current=s==="mounted"?u:"none"},[s]),Ga(()=>{const u=n.current,d=i.current;if(d!==e){const f=o.current,p=Ug(u);e?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),Ga(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,c=p=>{const m=Ug(n.current).includes(p.animationName);if(p.target===t&&m&&(l("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=p=>{p.target===t&&(o.current=Ug(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:N.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Ug(e){return(e==null?void 0:e.animationName)||"none"}function DY(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var jY=zP[" useInsertionEffect ".trim().toString()]||Ga;function hm({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,o,a]=FY({defaultProp:t,onChange:r}),s=e!==void 0,l=s?e:i;{const d=N.useRef(e!==void 0);N.useEffect(()=>{const c=d.current;c!==s&&console.warn(`${n} is changing from ${c?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=s},[s,n])}const u=N.useCallback(d=>{var c;if(s){const f=LY(d)?d(e):d;f!==e&&((c=a.current)==null||c.call(a,f))}else o(d)},[s,e,o,a]);return[l,u]}function FY({defaultProp:e,onChange:t}){const[r,n]=N.useState(e),i=N.useRef(r),o=N.useRef(t);return jY(()=>{o.current=t},[t]),N.useEffect(()=>{var a;i.current!==r&&((a=o.current)==null||a.call(o,r),i.current=r)},[r,i]),[r,n,o]}function LY(e){return typeof e=="function"}var NY=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RY="VisuallyHidden",Hy=N.forwardRef((e,t)=>L.jsx(_r.span,{...e,ref:t,style:{...NY,...e.style}}));Hy.displayName=RY;var zY=Hy,IE="ToastProvider",[DE,BY,UY]=OE("Toast"),[uW,vOe]=Is("Toast",[UY]),[WY,Ky]=uW(IE),cW=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[s,l]=N.useState(null),[u,d]=N.useState(0),c=N.useRef(!1),f=N.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${IE}\`. Expected non-empty \`string\`.`),L.jsx(DE.Provider,{scope:t,children:L.jsx(WY,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:s,onViewportChange:l,onToastAdd:N.useCallback(()=>d(p=>p+1),[]),onToastRemove:N.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:c,isClosePausedRef:f,children:a})})};cW.displayName=IE;var dW="ToastViewport",VY=["F8"],TM="toast.viewportPause",PM="toast.viewportResume",fW=N.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=VY,label:i="Notifications ({hotkey})",...o}=e,a=Ky(dW,r),s=BY(r),l=N.useRef(null),u=N.useRef(null),d=N.useRef(null),c=N.useRef(null),f=Rr(t,c,a.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=a.toastCount>0;N.useEffect(()=>{const v=g=>{var b;n.length!==0&&n.every(w=>g[w]||g.code===w)&&((b=c.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),N.useEffect(()=>{const v=l.current,g=c.current;if(h&&v&&g){const _=()=>{if(!a.isClosePausedRef.current){const x=new CustomEvent(TM);g.dispatchEvent(x),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const x=new CustomEvent(PM);g.dispatchEvent(x),a.isClosePausedRef.current=!1}},w=x=>{!v.contains(x.relatedTarget)&&b()},y=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",_),v.addEventListener("focusout",w),v.addEventListener("pointermove",_),v.addEventListener("pointerleave",y),window.addEventListener("blur",_),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",_),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",_),v.removeEventListener("pointerleave",y),window.removeEventListener("blur",_),window.removeEventListener("focus",b)}}},[h,a.isClosePausedRef]);const m=N.useCallback(({tabbingDirection:v})=>{const _=s().map(b=>{const w=b.ref.current,y=[w,...nZ(w)];return v==="forwards"?y:y.reverse()});return(v==="forwards"?_.reverse():_).flat()},[s]);return N.useEffect(()=>{const v=c.current;if(v){const g=_=>{var y,x,M;const b=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!b){const T=document.activeElement,S=_.shiftKey;if(_.target===v&&S){(y=u.current)==null||y.focus();return}const F=m({tabbingDirection:S?"backwards":"forwards"}),j=F.findIndex(U=>U===T);Yw(F.slice(j+1))?_.preventDefault():S?(x=u.current)==null||x.focus():(M=d.current)==null||M.focus()}};return v.addEventListener("keydown",g),()=>v.removeEventListener("keydown",g)}},[s,m]),L.jsxs(AY,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&L.jsx(EM,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});Yw(v)}}),L.jsx(DE.Slot,{scope:r,children:L.jsx(_r.ol,{tabIndex:-1,...o,ref:f})}),h&&L.jsx(EM,{ref:d,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});Yw(v)}})]})});fW.displayName=dW;var pW="ToastFocusProxy",EM=N.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,o=Ky(pW,r);return L.jsx(Hy,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const s=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(s))&&n()}})});EM.displayName=pW;var mm="Toast",GY="toast.swipeStart",HY="toast.swipeMove",KY="toast.swipeCancel",qY="toast.swipeEnd",hW=N.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...a}=e,[s,l]=hm({prop:n,defaultProp:i??!0,onChange:o,caller:mm});return L.jsx(Ol,{present:r||s,children:L.jsx(YY,{open:s,...a,ref:t,onClose:()=>l(!1),onPause:xi(e.onPause),onResume:xi(e.onResume),onSwipeStart:qt(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qt(e.onSwipeMove,u=>{const{x:d,y:c}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${c}px`)}),onSwipeCancel:qt(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qt(e.onSwipeEnd,u=>{const{x:d,y:c}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${c}px`),l(!1)})})})});hW.displayName=mm;var[XY,QY]=uW(mm,{onClose(){}}),YY=N.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:c,onSwipeCancel:f,onSwipeEnd:p,...h}=e,m=Ky(mm,r),[v,g]=N.useState(null),_=Rr(t,U=>g(U)),b=N.useRef(null),w=N.useRef(null),y=i||m.duration,x=N.useRef(0),M=N.useRef(y),T=N.useRef(0),{onToastAdd:S,onToastRemove:$}=m,k=xi(()=>{var z;(v==null?void 0:v.contains(document.activeElement))&&((z=m.viewport)==null||z.focus()),a()}),F=N.useCallback(U=>{!U||U===1/0||(window.clearTimeout(T.current),x.current=new Date().getTime(),T.current=window.setTimeout(k,U))},[k]);N.useEffect(()=>{const U=m.viewport;if(U){const z=()=>{F(M.current),u==null||u()},G=()=>{const H=new Date().getTime()-x.current;M.current=M.current-H,window.clearTimeout(T.current),l==null||l()};return U.addEventListener(TM,G),U.addEventListener(PM,z),()=>{U.removeEventListener(TM,G),U.removeEventListener(PM,z)}}},[m.viewport,y,l,u,F]),N.useEffect(()=>{o&&!m.isClosePausedRef.current&&F(y)},[o,y,m.isClosePausedRef,F]),N.useEffect(()=>(S(),()=>$()),[S,$]);const j=N.useMemo(()=>v?wW(v):null,[v]);return m.viewport?L.jsxs(L.Fragment,{children:[j&&L.jsx(ZY,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),L.jsx(XY,{scope:r,onClose:k,children:pm.createPortal(L.jsx(DE.ItemSlot,{scope:r,children:L.jsx($Y,{asChild:!0,onEscapeKeyDown:qt(s,()=>{m.isFocusedToastEscapeKeyDownRef.current||k(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:L.jsx(_r.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...h,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:qt(e.onKeyDown,U=>{U.key==="Escape"&&(s==null||s(U.nativeEvent),U.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:qt(e.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:qt(e.onPointerMove,U=>{if(!b.current)return;const z=U.clientX-b.current.x,G=U.clientY-b.current.y,H=!!w.current,W=["left","right"].includes(m.swipeDirection),Y=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,te=W?Y(0,z):0,V=W?0:Y(0,G),I=U.pointerType==="touch"?10:2,K={x:te,y:V},ae={originalEvent:U,delta:K};H?(w.current=K,Wg(HY,c,ae,{discrete:!1})):hD(K,m.swipeDirection,I)?(w.current=K,Wg(GY,d,ae,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(z)>I||Math.abs(G)>I)&&(b.current=null)}),onPointerUp:qt(e.onPointerUp,U=>{const z=w.current,G=U.target;if(G.hasPointerCapture(U.pointerId)&&G.releasePointerCapture(U.pointerId),w.current=null,b.current=null,z){const H=U.currentTarget,W={originalEvent:U,delta:z};hD(z,m.swipeDirection,m.swipeThreshold)?Wg(qY,p,W,{discrete:!0}):Wg(KY,f,W,{discrete:!0}),H.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),ZY=e=>{const{__scopeToast:t,children:r,...n}=e,i=Ky(mm,t),[o,a]=N.useState(!1),[s,l]=N.useState(!1);return tZ(()=>a(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),s?null:L.jsx(lW,{asChild:!0,children:L.jsx(Hy,{...n,children:o&&L.jsxs(L.Fragment,{children:[i.label," ",r]})})})},JY="ToastTitle",mW=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return L.jsx(_r.div,{...n,ref:t})});mW.displayName=JY;var eZ="ToastDescription",gW=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return L.jsx(_r.div,{...n,ref:t})});gW.displayName=eZ;var _W="ToastAction",vW=N.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?L.jsx(bW,{altText:r,asChild:!0,children:L.jsx(jE,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${_W}\`. Expected non-empty \`string\`.`),null)});vW.displayName=_W;var yW="ToastClose",jE=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=QY(yW,r);return L.jsx(bW,{asChild:!0,children:L.jsx(_r.button,{type:"button",...n,ref:t,onClick:qt(e.onClick,i.onClose)})})});jE.displayName=yW;var bW=N.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return L.jsx(_r.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function wW(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),rZ(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...wW(n))}}),t}function Wg(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?iW(i,o):i.dispatchEvent(o)}var hD=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),o=n>i;return t==="left"||t==="right"?o&&n>r:!o&&i>r};function tZ(e=()=>{}){const t=xi(e);Ga(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function rZ(e){return e.nodeType===e.ELEMENT_NODE}function nZ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Yw(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var iZ=cW,xW=fW,MW=hW,TW=mW,PW=gW,EW=vW,SW=jE;function CW(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=CW(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Kt(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=CW(e))&&(n&&(n+=" "),n+=t);return n}const mD=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,gD=Kt,FE=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return gD(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=t,a=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],c=o==null?void 0:o[u];if(d===null)return null;const f=mD(d)||mD(c);return i[u][f]}),s=r&&Object.entries(r).reduce((u,d)=>{let[c,f]=d;return f===void 0||(u[c]=f),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:c,className:f,...p}=d;return Object.entries(p).every(h=>{let[m,v]=h;return Array.isArray(v)?v.includes({...o,...s}[m]):{...o,...s}[m]===v})?[...u,c,f]:u},[]);return gD(e,a,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$W=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:a,...s},l)=>N.createElement("svg",{ref:l,...aZ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$W("lucide",i),...s},[...a.map(([u,d])=>N.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=(e,t)=>{const r=N.forwardRef(({className:n,...i},o)=>N.createElement(sZ,{ref:o,iconNode:t,className:$W(`lucide-${oZ(e)}`,n),...i}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=Cr("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=Cr("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=Cr("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=Cr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=Cr("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Cr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=Cr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AW=Cr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=Cr("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=Cr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=Cr("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=Cr("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=Cr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=Cr("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=Cr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=Cr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Cr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=Cr("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=Cr("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=Cr("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=Cr("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=Cr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=Cr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=Cr("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=Cr("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=Cr("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=Cr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=Cr("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),NE="-",SZ=e=>{const t=$Z(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const s=a.split(NE);return s[0]===""&&s.length!==1&&s.shift(),DW(s,t)||CZ(a)},getConflictingClassGroupIds:(a,s)=>{const l=r[a]||[];return s&&n[a]?[...l,...n[a]]:l}}},DW=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?DW(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(NE);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},vD=/^\[(.+)\]$/,CZ=e=>{if(vD.test(e)){const t=vD.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},$Z=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return OZ(Object.entries(e.classGroups),r).forEach(([o,a])=>{CM(a,n,o,t)}),n},CM=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:yD(t,i);o.classGroupId=r;return}if(typeof i=="function"){if(AZ(i)){CM(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{CM(a,yD(t,o),r,n)})})},yD=(e,t)=>{let r=e;return t.split(NE).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},AZ=e=>e.isThemeGetter,OZ=(e,t)=>t?e.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[r,i]}):e,kZ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(o,a)=>{r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}},jW="!",IZ=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],o=t.length,a=s=>{const l=[];let u=0,d=0,c;for(let v=0;v<s.length;v++){let g=s[v];if(u===0){if(g===i&&(n||s.slice(v,v+o)===t)){l.push(s.slice(d,v)),d=v+o;continue}if(g==="/"){c=v;continue}}g==="["?u++:g==="]"&&u--}const f=l.length===0?s:s.substring(d),p=f.startsWith(jW),h=p?f.substring(1):f,m=c&&c>d?c-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:m}};return r?s=>r({className:s,parseClassName:a}):a},DZ=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},jZ=e=>({cache:kZ(e.cacheSize),parseClassName:IZ(e),...SZ(e)}),FZ=/\s+/,LZ=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,o=[],a=e.trim().split(FZ);let s="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:d,hasImportantModifier:c,baseClassName:f,maybePostfixModifierPosition:p}=r(u);let h=!!p,m=n(h?f.substring(0,p):f);if(!m){if(!h){s=u+(s.length>0?" "+s:s);continue}if(m=n(f),!m){s=u+(s.length>0?" "+s:s);continue}h=!1}const v=DZ(d).join(":"),g=c?v+jW:v,_=g+m;if(o.includes(_))continue;o.push(_);const b=i(m,h);for(let w=0;w<b.length;++w){const y=b[w];o.push(g+y)}s=u+(s.length>0?" "+s:s)}return s};function NZ(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=FW(t))&&(n&&(n+=" "),n+=r);return n}const FW=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=FW(e[n]))&&(r&&(r+=" "),r+=t);return r};function RZ(e,...t){let r,n,i,o=a;function a(l){const u=t.reduce((d,c)=>c(d),e());return r=jZ(u),n=r.cache.get,i=r.cache.set,o=s,s(l)}function s(l){const u=n(l);if(u)return u;const d=LZ(l,r);return i(l,d),d}return function(){return o(NZ.apply(null,arguments))}}const Wr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},LW=/^\[(?:([a-z-]+):)?(.+)\]$/i,zZ=/^\d+\/\d+$/,BZ=new Set(["px","full","screen"]),UZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,HZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,is=e=>td(e)||BZ.has(e)||zZ.test(e),Ks=e=>rf(e,"length",eJ),td=e=>!!e&&!Number.isNaN(Number(e)),Zw=e=>rf(e,"number",td),rp=e=>!!e&&Number.isInteger(Number(e)),KZ=e=>e.endsWith("%")&&td(e.slice(0,-1)),Qt=e=>LW.test(e),qs=e=>UZ.test(e),qZ=new Set(["length","size","percentage"]),XZ=e=>rf(e,qZ,NW),QZ=e=>rf(e,"position",NW),YZ=new Set(["image","url"]),ZZ=e=>rf(e,YZ,rJ),JZ=e=>rf(e,"",tJ),np=()=>!0,rf=(e,t,r)=>{const n=LW.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},eJ=e=>WZ.test(e)&&!VZ.test(e),NW=()=>!1,tJ=e=>GZ.test(e),rJ=e=>HZ.test(e),nJ=()=>{const e=Wr("colors"),t=Wr("spacing"),r=Wr("blur"),n=Wr("brightness"),i=Wr("borderColor"),o=Wr("borderRadius"),a=Wr("borderSpacing"),s=Wr("borderWidth"),l=Wr("contrast"),u=Wr("grayscale"),d=Wr("hueRotate"),c=Wr("invert"),f=Wr("gap"),p=Wr("gradientColorStops"),h=Wr("gradientColorStopPositions"),m=Wr("inset"),v=Wr("margin"),g=Wr("opacity"),_=Wr("padding"),b=Wr("saturate"),w=Wr("scale"),y=Wr("sepia"),x=Wr("skew"),M=Wr("space"),T=Wr("translate"),S=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Qt,t],F=()=>[Qt,t],j=()=>["",is,Ks],U=()=>["auto",td,Qt],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Qt],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[td,Qt];return{cacheSize:500,separator:":",theme:{colors:[np],spacing:[is,Ks],blur:["none","",qs,Qt],brightness:V(),borderColor:[e],borderRadius:["none","","full",qs,Qt],borderSpacing:F(),borderWidth:j(),contrast:V(),grayscale:Y(),hueRotate:V(),invert:Y(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[KZ,Ks],inset:k(),margin:k(),opacity:V(),padding:F(),saturate:V(),scale:V(),sepia:Y(),skew:V(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[qs]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Qt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rp,Qt]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",rp,Qt]}],"grid-cols":[{"grid-cols":[np]}],"col-start-end":[{col:["auto",{span:["full",rp,Qt]},Qt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[np]}],"row-start-end":[{row:["auto",{span:[rp,Qt]},Qt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,t]}],"min-w":[{"min-w":[Qt,t,"min","max","fit"]}],"max-w":[{"max-w":[Qt,t,"none","full","min","max","fit","prose",{screen:[qs]},qs]}],h:[{h:[Qt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qs,Ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zw]}],"font-family":[{font:[np]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",td,Zw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",is,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",is,Ks]}],"underline-offset":[{"underline-offset":["auto",is,Qt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),QZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",XZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZZ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[is,Qt]}],"outline-w":[{outline:[is,Ks]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[is,Ks]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qs,JZ]}],"shadow-color":[{shadow:[np]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qs,Qt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[c]}],saturate:[{saturate:[b]}],sepia:[{sepia:[y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[c]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[rp,Qt]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[is,Ks,Zw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},iJ=RZ(nJ);function sn(...e){return iJ(Kt(e))}const oJ=iZ,RW=N.forwardRef(({className:e,...t},r)=>L.jsx(xW,{ref:r,className:sn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));RW.displayName=xW.displayName;const aJ=FE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),zW=N.forwardRef(({className:e,variant:t,...r},n)=>L.jsx(MW,{ref:n,className:sn(aJ({variant:t}),e),...r}));zW.displayName=MW.displayName;const sJ=N.forwardRef(({className:e,...t},r)=>L.jsx(EW,{ref:r,className:sn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));sJ.displayName=EW.displayName;const BW=N.forwardRef(({className:e,...t},r)=>L.jsx(SW,{ref:r,className:sn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:L.jsx(EZ,{className:"h-4 w-4"})}));BW.displayName=SW.displayName;const UW=N.forwardRef(({className:e,...t},r)=>L.jsx(TW,{ref:r,className:sn("text-sm font-semibold",e),...t}));UW.displayName=TW.displayName;const WW=N.forwardRef(({className:e,...t},r)=>L.jsx(PW,{ref:r,className:sn("text-sm opacity-90",e),...t}));WW.displayName=PW.displayName;function lJ(){const{toasts:e}=tW();return L.jsxs(oJ,{children:[e.map(function({id:t,title:r,description:n,action:i,...o}){return L.jsxs(zW,{...o,children:[L.jsxs("div",{className:"grid gap-1",children:[r&&L.jsx(UW,{children:r}),n&&L.jsx(WW,{children:n})]}),i,L.jsx(BW,{})]},t)}),L.jsx(RW,{})]})}var bD=["light","dark"],uJ="(prefers-color-scheme: dark)",cJ=N.createContext(void 0),dJ={setTheme:e=>{},themes:[]},fJ=()=>{var e;return(e=N.useContext(cJ))!=null?e:dJ};N.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:l})=>{let u=o==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(h=>`'${h}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,c=i?bD.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(h,m=!1,v=!0)=>{let g=a?a[h]:h,_=m?h+"|| ''":`'${g}'`,b="";return i&&v&&!m&&bD.includes(h)&&(b+=`d.style.colorScheme = '${h}';`),r==="class"?m||g?b+=`c.add(${_})`:b+="null":g&&(b+=`d[s](n,${_})`),b},p=e?`!function(){${d}${f(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${uJ}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${u?"":"else{"+f(o,!1,!1)+"}"}${c}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(o,!1,!1)};}${c}}catch(t){}}();`;return N.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})});var pJ=e=>{switch(e){case"success":return gJ;case"info":return vJ;case"warning":return _J;case"error":return yJ;default:return null}},hJ=Array(12).fill(0),mJ=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},hJ.map((r,n)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),gJ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_J=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vJ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yJ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),bJ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),wJ=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},$M=1,xJ=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,o=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:$M++,a=this.toasts.find(l=>l.id===o),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...t,id:o,title:n}),{...l,...t,id:o,dismissible:s,title:n}):l):this.addToast({title:n,...i,dismissible:s,id:o}),o},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),o=n!==void 0,a,s=i.then(async u=>{if(a=["resolve",u],ie.isValidElement(u))o=!1,this.create({id:n,type:"default",message:u});else if(TJ(u)&&!u.ok){o=!1;let d=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,c=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description;this.create({id:n,type:"error",message:d,description:c})}else if(r.success!==void 0){o=!1;let d=typeof r.success=="function"?await r.success(u):r.success,c=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"success",message:d,description:c})}}).catch(async u=>{if(a=["reject",u],r.error!==void 0){o=!1;let d=typeof r.error=="function"?await r.error(u):r.error,c=typeof r.description=="function"?await r.description(u):r.description;this.create({id:n,type:"error",message:d,description:c})}}).finally(()=>{var u;o&&(this.dismiss(n),n=void 0),(u=r.finally)==null||u.call(r)}),l=()=>new Promise((u,d)=>s.then(()=>a[0]==="reject"?d(a[1]):u(a[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||$M++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ui=new xJ,MJ=(e,t)=>{let r=(t==null?void 0:t.id)||$M++;return Ui.addToast({title:e,...t,id:r}),r},TJ=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",PJ=MJ,EJ=()=>Ui.toasts,SJ=()=>Ui.getActiveToasts();Object.assign(PJ,{success:Ui.success,info:Ui.info,warning:Ui.warning,error:Ui.error,custom:Ui.custom,message:Ui.message,promise:Ui.promise,dismiss:Ui.dismiss,loading:Ui.loading},{getHistory:EJ,getToasts:SJ});function CJ(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}CJ(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vg(e){return e.label!==void 0}var $J=3,AJ="32px",OJ="16px",wD=4e3,kJ=356,IJ=14,DJ=20,jJ=200;function Yo(...e){return e.filter(Boolean).join(" ")}function FJ(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var LJ=e=>{var t,r,n,i,o,a,s,l,u,d,c;let{invert:f,toast:p,unstyled:h,interacting:m,setHeights:v,visibleToasts:g,heights:_,index:b,toasts:w,expanded:y,removeToast:x,defaultRichColors:M,closeButton:T,style:S,cancelButtonStyle:$,actionButtonStyle:k,className:F="",descriptionClassName:j="",duration:U,position:z,gap:G,loadingIcon:H,expandByDefault:W,classNames:Y,icons:te,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:I}=e,[K,ae]=ie.useState(null),[pe,de]=ie.useState(null),[be,Ne]=ie.useState(!1),[Te,ge]=ie.useState(!1),[re,ne]=ie.useState(!1),[Z,ve]=ie.useState(!1),[Ae,Ee]=ie.useState(!1),[we,$e]=ie.useState(0),[Me,je]=ie.useState(0),ze=ie.useRef(p.duration||U||wD),Xe=ie.useRef(null),Ce=ie.useRef(null),st=b===0,Ye=b+1<=g,rt=p.type,Je=p.dismissible!==!1,Ue=p.className||"",ot=p.descriptionClassName||"",lt=ie.useMemo(()=>_.findIndex(St=>St.toastId===p.id)||0,[_,p.id]),Ut=ie.useMemo(()=>{var St;return(St=p.closeButton)!=null?St:T},[p.closeButton,T]),Nt=ie.useMemo(()=>p.duration||U||wD,[p.duration,U]),Pt=ie.useRef(0),$r=ie.useRef(0),un=ie.useRef(0),en=ie.useRef(null),[Ni,vr]=z.split("-"),cn=ie.useMemo(()=>_.reduce((St,Zt,pt)=>pt>=lt?St:St+Zt.height,0),[_,lt]),Wo=wJ(),Pa=p.invert||f,yo=rt==="loading";$r.current=ie.useMemo(()=>lt*G+cn,[lt,cn]),ie.useEffect(()=>{ze.current=Nt},[Nt]),ie.useEffect(()=>{Ne(!0)},[]),ie.useEffect(()=>{let St=Ce.current;if(St){let Zt=St.getBoundingClientRect().height;return je(Zt),v(pt=>[{toastId:p.id,height:Zt,position:p.position},...pt]),()=>v(pt=>pt.filter(Xt=>Xt.toastId!==p.id))}},[v,p.id]),ie.useLayoutEffect(()=>{if(!be)return;let St=Ce.current,Zt=St.style.height;St.style.height="auto";let pt=St.getBoundingClientRect().height;St.style.height=Zt,je(pt),v(Xt=>Xt.find(D=>D.toastId===p.id)?Xt.map(D=>D.toastId===p.id?{...D,height:pt}:D):[{toastId:p.id,height:pt,position:p.position},...Xt])},[be,p.title,p.description,v,p.id]);let ei=ie.useCallback(()=>{ge(!0),$e($r.current),v(St=>St.filter(Zt=>Zt.toastId!==p.id)),setTimeout(()=>{x(p)},jJ)},[p,x,v,$r]);ie.useEffect(()=>{if(p.promise&&rt==="loading"||p.duration===1/0||p.type==="loading")return;let St;return y||m||I&&Wo?(()=>{if(un.current<Pt.current){let Zt=new Date().getTime()-Pt.current;ze.current=ze.current-Zt}un.current=new Date().getTime()})():ze.current!==1/0&&(Pt.current=new Date().getTime(),St=setTimeout(()=>{var Zt;(Zt=p.onAutoClose)==null||Zt.call(p,p),ei()},ze.current)),()=>clearTimeout(St)},[y,m,p,rt,I,Wo,ei]),ie.useEffect(()=>{p.delete&&ei()},[ei,p.delete]);function bt(){var St,Zt,pt;return te!=null&&te.loading?ie.createElement("div",{className:Yo(Y==null?void 0:Y.loader,(St=p==null?void 0:p.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":rt==="loading"},te.loading):H?ie.createElement("div",{className:Yo(Y==null?void 0:Y.loader,(Zt=p==null?void 0:p.classNames)==null?void 0:Zt.loader,"sonner-loader"),"data-visible":rt==="loading"},H):ie.createElement(mJ,{className:Yo(Y==null?void 0:Y.loader,(pt=p==null?void 0:p.classNames)==null?void 0:pt.loader),visible:rt==="loading"})}return ie.createElement("li",{tabIndex:0,ref:Ce,className:Yo(F,Ue,Y==null?void 0:Y.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,Y==null?void 0:Y.default,Y==null?void 0:Y[rt],(r=p==null?void 0:p.classNames)==null?void 0:r[rt]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:M,"data-styled":!(p.jsx||p.unstyled||h),"data-mounted":be,"data-promise":!!p.promise,"data-swiped":Ae,"data-removed":Te,"data-visible":Ye,"data-y-position":Ni,"data-x-position":vr,"data-index":b,"data-front":st,"data-swiping":re,"data-dismissible":Je,"data-type":rt,"data-invert":Pa,"data-swipe-out":Z,"data-swipe-direction":pe,"data-expanded":!!(y||W&&be),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${Te?we:$r.current}px`,"--initial-height":W?"auto":`${Me}px`,...S,...p.style},onDragEnd:()=>{ne(!1),ae(null),en.current=null},onPointerDown:St=>{yo||!Je||(Xe.current=new Date,$e($r.current),St.target.setPointerCapture(St.pointerId),St.target.tagName!=="BUTTON"&&(ne(!0),en.current={x:St.clientX,y:St.clientY}))},onPointerUp:()=>{var St,Zt,pt,Xt;if(Z||!Je)return;en.current=null;let D=Number(((St=Ce.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),se=Number(((Zt=Ce.current)==null?void 0:Zt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Q=new Date().getTime()-((pt=Xe.current)==null?void 0:pt.getTime()),oe=K==="x"?D:se,ce=Math.abs(oe)/Q;if(Math.abs(oe)>=DJ||ce>.11){$e($r.current),(Xt=p.onDismiss)==null||Xt.call(p,p),de(K==="x"?D>0?"right":"left":se>0?"down":"up"),ei(),ve(!0),Ee(!1);return}ne(!1),ae(null)},onPointerMove:St=>{var Zt,pt,Xt,D;if(!en.current||!Je||((Zt=window.getSelection())==null?void 0:Zt.toString().length)>0)return;let se=St.clientY-en.current.y,Q=St.clientX-en.current.x,oe=(pt=e.swipeDirections)!=null?pt:FJ(z);!K&&(Math.abs(Q)>1||Math.abs(se)>1)&&ae(Math.abs(Q)>Math.abs(se)?"x":"y");let ce={x:0,y:0};K==="y"?(oe.includes("top")||oe.includes("bottom"))&&(oe.includes("top")&&se<0||oe.includes("bottom")&&se>0)&&(ce.y=se):K==="x"&&(oe.includes("left")||oe.includes("right"))&&(oe.includes("left")&&Q<0||oe.includes("right")&&Q>0)&&(ce.x=Q),(Math.abs(ce.x)>0||Math.abs(ce.y)>0)&&Ee(!0),(Xt=Ce.current)==null||Xt.style.setProperty("--swipe-amount-x",`${ce.x}px`),(D=Ce.current)==null||D.style.setProperty("--swipe-amount-y",`${ce.y}px`)}},Ut&&!p.jsx?ie.createElement("button",{"aria-label":V,"data-disabled":yo,"data-close-button":!0,onClick:yo||!Je?()=>{}:()=>{var St;ei(),(St=p.onDismiss)==null||St.call(p,p)},className:Yo(Y==null?void 0:Y.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(o=te==null?void 0:te.close)!=null?o:bJ):null,p.jsx||N.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:ie.createElement(ie.Fragment,null,rt||p.icon||p.promise?ie.createElement("div",{"data-icon":"",className:Yo(Y==null?void 0:Y.icon,(a=p==null?void 0:p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||bt():null,p.type!=="loading"?p.icon||(te==null?void 0:te[rt])||pJ(rt):null):null,ie.createElement("div",{"data-content":"",className:Yo(Y==null?void 0:Y.content,(s=p==null?void 0:p.classNames)==null?void 0:s.content)},ie.createElement("div",{"data-title":"",className:Yo(Y==null?void 0:Y.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?ie.createElement("div",{"data-description":"",className:Yo(j,ot,Y==null?void 0:Y.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),N.isValidElement(p.cancel)?p.cancel:p.cancel&&Vg(p.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||$,onClick:St=>{var Zt,pt;Vg(p.cancel)&&Je&&((pt=(Zt=p.cancel).onClick)==null||pt.call(Zt,St),ei())},className:Yo(Y==null?void 0:Y.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,N.isValidElement(p.action)?p.action:p.action&&Vg(p.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||k,onClick:St=>{var Zt,pt;Vg(p.action)&&((pt=(Zt=p.action).onClick)==null||pt.call(Zt,St),!St.defaultPrevented&&ei())},className:Yo(Y==null?void 0:Y.actionButton,(c=p==null?void 0:p.classNames)==null?void 0:c.actionButton)},p.action.label):null))};function xD(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function NJ(e,t){let r={};return[e,t].forEach((n,i)=>{let o=i===1,a=o?"--mobile-offset":"--offset",s=o?OJ:AJ;function l(u){["top","right","bottom","left"].forEach(d=>{r[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${a}-${u}`]=s:r[`${a}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):l(s)}),r}var RJ=N.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:s,offset:l,mobileOffset:u,theme:d="light",richColors:c,duration:f,style:p,visibleToasts:h=$J,toastOptions:m,dir:v=xD(),gap:g=IJ,loadingIcon:_,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:y}=e,[x,M]=ie.useState([]),T=ie.useMemo(()=>Array.from(new Set([n].concat(x.filter(I=>I.position).map(I=>I.position)))),[x,n]),[S,$]=ie.useState([]),[k,F]=ie.useState(!1),[j,U]=ie.useState(!1),[z,G]=ie.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=ie.useRef(null),W=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=ie.useRef(null),te=ie.useRef(!1),V=ie.useCallback(I=>{M(K=>{var ae;return(ae=K.find(pe=>pe.id===I.id))!=null&&ae.delete||Ui.dismiss(I.id),K.filter(({id:pe})=>pe!==I.id)})},[]);return ie.useEffect(()=>Ui.subscribe(I=>{if(I.dismiss){M(K=>K.map(ae=>ae.id===I.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{JU.flushSync(()=>{M(K=>{let ae=K.findIndex(pe=>pe.id===I.id);return ae!==-1?[...K.slice(0,ae),{...K[ae],...I},...K.slice(ae+1)]:[I,...K]})})})}),[]),ie.useEffect(()=>{if(d!=="system"){G(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;let I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:K})=>{G(K?"dark":"light")})}catch{I.addListener(({matches:ae})=>{try{G(ae?"dark":"light")}catch(pe){console.error(pe)}})}},[d]),ie.useEffect(()=>{x.length<=1&&F(!1)},[x]),ie.useEffect(()=>{let I=K=>{var ae,pe;i.every(de=>K[de]||K.code===de)&&(F(!0),(ae=H.current)==null||ae.focus()),K.code==="Escape"&&(document.activeElement===H.current||(pe=H.current)!=null&&pe.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[i]),ie.useEffect(()=>{if(H.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,te.current=!1)}},[H.current]),ie.createElement("section",{ref:t,"aria-label":`${w} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((I,K)=>{var ae;let[pe,de]=I.split("-");return x.length?ie.createElement("ol",{key:I,dir:v==="auto"?xD():v,tabIndex:-1,ref:H,className:s,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":pe,"data-lifted":k&&x.length>1&&!o,"data-x-position":de,style:{"--front-toast-height":`${((ae=S[0])==null?void 0:ae.height)||0}px`,"--width":`${kJ}px`,"--gap":`${g}px`,...p,...NJ(l,u)},onBlur:be=>{te.current&&!be.currentTarget.contains(be.relatedTarget)&&(te.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||te.current||(te.current=!0,Y.current=be.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{j||F(!1)},onDragEnd:()=>F(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},x.filter(be=>!be.position&&K===0||be.position===I).map((be,Ne)=>{var Te,ge;return ie.createElement(LJ,{key:be.id,icons:b,index:Ne,toast:be,defaultRichColors:c,duration:(Te=m==null?void 0:m.duration)!=null?Te:f,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:r,visibleToasts:h,closeButton:(ge=m==null?void 0:m.closeButton)!=null?ge:a,interacting:j,position:I,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:V,toasts:x.filter(re=>re.position==be.position),heights:S.filter(re=>re.position==be.position),setHeights:$,expandByDefault:o,gap:g,loadingIcon:_,expanded:k,pauseWhenPageIsHidden:y,swipeDirections:e.swipeDirections})})):null}))});const zJ=({...e})=>{const{theme:t="system"}=fJ();return L.jsx(RJ,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var BJ=zP[" useId ".trim().toString()]||(()=>{}),UJ=0;function VW(e){const[t,r]=N.useState(BJ());return Ga(()=>{r(n=>n??String(UJ++))},[e]),t?`radix-${t}`:""}const WJ=["top","right","bottom","left"],Pl=Math.min,no=Math.max,pv=Math.round,Gg=Math.floor,za=e=>({x:e,y:e}),VJ={left:"right",right:"left",bottom:"top",top:"bottom"},GJ={start:"end",end:"start"};function AM(e,t,r){return no(e,Pl(t,r))}function Ss(e,t){return typeof e=="function"?e(t):e}function Cs(e){return e.split("-")[0]}function nf(e){return e.split("-")[1]}function RE(e){return e==="x"?"y":"x"}function zE(e){return e==="y"?"height":"width"}const HJ=new Set(["top","bottom"]);function Fa(e){return HJ.has(Cs(e))?"y":"x"}function BE(e){return RE(Fa(e))}function KJ(e,t,r){r===void 0&&(r=!1);const n=nf(e),i=BE(e),o=zE(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=hv(a)),[a,hv(a)]}function qJ(e){const t=hv(e);return[OM(e),t,OM(t)]}function OM(e){return e.replace(/start|end/g,t=>GJ[t])}const MD=["left","right"],TD=["right","left"],XJ=["top","bottom"],QJ=["bottom","top"];function YJ(e,t,r){switch(e){case"top":case"bottom":return r?t?TD:MD:t?MD:TD;case"left":case"right":return t?XJ:QJ;default:return[]}}function ZJ(e,t,r,n){const i=nf(e);let o=YJ(Cs(e),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(OM)))),o}function hv(e){return e.replace(/left|right|bottom|top/g,t=>VJ[t])}function JJ(e){return{top:0,right:0,bottom:0,left:0,...e}}function GW(e){return typeof e!="number"?JJ(e):{top:e,right:e,bottom:e,left:e}}function mv(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function PD(e,t,r){let{reference:n,floating:i}=e;const o=Fa(t),a=BE(t),s=zE(a),l=Cs(t),u=o==="y",d=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2,f=n[s]/2-i[s]/2;let p;switch(l){case"top":p={x:d,y:n.y-i.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:c};break;case"left":p={x:n.x-i.width,y:c};break;default:p={x:n.x,y:n.y}}switch(nf(t)){case"start":p[a]-=f*(r&&u?-1:1);break;case"end":p[a]+=f*(r&&u?-1:1);break}return p}const eee=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:c}=PD(u,n,l),f=n,p={},h=0;for(let m=0;m<s.length;m++){const{name:v,fn:g}=s[m],{x:_,y:b,data:w,reset:y}=await g({x:d,y:c,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=_??d,c=b??c,p={...p,[v]:{...p[v],...w}},y&&h<=50&&(h++,typeof y=="object"&&(y.placement&&(f=y.placement),y.rects&&(u=y.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:d,y:c}=PD(u,f,l)),m=-1)}return{x:d,y:c,placement:f,strategy:i,middlewareData:p}};async function vh(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:c="floating",altBoundary:f=!1,padding:p=0}=Ss(t,e),h=GW(p),v=s[f?c==="floating"?"reference":"floating":c],g=mv(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(v)))==null||r?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),_=c==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),w=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},y=mv(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:_,offsetParent:b,strategy:l}):_);return{top:(g.top-y.top+h.top)/w.y,bottom:(y.bottom-g.bottom+h.bottom)/w.y,left:(g.left-y.left+h.left)/w.x,right:(y.right-g.right+h.right)/w.x}}const tee=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=Ss(e,t)||{};if(u==null)return{};const c=GW(d),f={x:r,y:n},p=BE(i),h=zE(p),m=await a.getDimensions(u),v=p==="y",g=v?"top":"left",_=v?"bottom":"right",b=v?"clientHeight":"clientWidth",w=o.reference[h]+o.reference[p]-f[p]-o.floating[h],y=f[p]-o.reference[p],x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let M=x?x[b]:0;(!M||!await(a.isElement==null?void 0:a.isElement(x)))&&(M=s.floating[b]||o.floating[h]);const T=w/2-y/2,S=M/2-m[h]/2-1,$=Pl(c[g],S),k=Pl(c[_],S),F=$,j=M-m[h]-k,U=M/2-m[h]/2+T,z=AM(F,U,j),G=!l.arrow&&nf(i)!=null&&U!==z&&o.reference[h]/2-(U<F?$:k)-m[h]/2<0,H=G?U<F?U-F:U-j:0;return{[p]:f[p]+H,data:{[p]:z,centerOffset:U-z-H,...G&&{alignmentOffset:H}},reset:G}}}),ree=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...v}=Ss(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const g=Cs(i),_=Fa(s),b=Cs(s)===s,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),y=f||(b||!m?[hv(s)]:qJ(s)),x=h!=="none";!f&&x&&y.push(...ZJ(s,m,h,w));const M=[s,...y],T=await vh(t,v),S=[];let $=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&S.push(T[g]),c){const U=KJ(i,a,w);S.push(T[U[0]],T[U[1]])}if($=[...$,{placement:i,overflows:S}],!S.every(U=>U<=0)){var k,F;const U=(((k=o.flip)==null?void 0:k.index)||0)+1,z=M[U];if(z&&(!(c==="alignment"?_!==Fa(z):!1)||$.every(W=>Fa(W.placement)===_?W.overflows[0]>0:!0)))return{data:{index:U,overflows:$},reset:{placement:z}};let G=(F=$.filter(H=>H.overflows[0]<=0).sort((H,W)=>H.overflows[1]-W.overflows[1])[0])==null?void 0:F.placement;if(!G)switch(p){case"bestFit":{var j;const H=(j=$.filter(W=>{if(x){const Y=Fa(W.placement);return Y===_||Y==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Y=>Y>0).reduce((Y,te)=>Y+te,0)]).sort((W,Y)=>W[1]-Y[1])[0])==null?void 0:j[0];H&&(G=H);break}case"initialPlacement":G=s;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function ED(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SD(e){return WJ.some(t=>e[t]>=0)}const nee=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=Ss(e,t);switch(n){case"referenceHidden":{const o=await vh(t,{...i,elementContext:"reference"}),a=ED(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:SD(a)}}}case"escaped":{const o=await vh(t,{...i,altBoundary:!0}),a=ED(o,r.floating);return{data:{escapedOffsets:a,escaped:SD(a)}}}default:return{}}}}},HW=new Set(["left","top"]);async function iee(e,t){const{placement:r,platform:n,elements:i}=e,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Cs(r),s=nf(r),l=Fa(r)==="y",u=HW.has(a)?-1:1,d=o&&l?-1:1,c=Ss(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return s&&typeof h=="number"&&(p=s==="end"?h*-1:h),l?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const oee=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await iee(t,e);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},aee=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:v=>{let{x:g,y:_}=v;return{x:g,y:_}}},...l}=Ss(e,t),u={x:r,y:n},d=await vh(t,l),c=Fa(Cs(i)),f=RE(c);let p=u[f],h=u[c];if(o){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",_=p+d[v],b=p-d[g];p=AM(_,p,b)}if(a){const v=c==="y"?"top":"left",g=c==="y"?"bottom":"right",_=h+d[v],b=h-d[g];h=AM(_,h,b)}const m=s.fn({...t,[f]:p,[c]:h});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:o,[c]:a}}}}}},see=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Ss(e,t),d={x:r,y:n},c=Fa(i),f=RE(c);let p=d[f],h=d[c];const m=Ss(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",w=o.reference[f]-o.floating[b]+v.mainAxis,y=o.reference[f]+o.reference[b]-v.mainAxis;p<w?p=w:p>y&&(p=y)}if(u){var g,_;const b=f==="y"?"width":"height",w=HW.has(Cs(i)),y=o.reference[c]-o.floating[b]+(w&&((g=a.offset)==null?void 0:g[c])||0)+(w?0:v.crossAxis),x=o.reference[c]+o.reference[b]+(w?0:((_=a.offset)==null?void 0:_[c])||0)-(w?v.crossAxis:0);h<y?h=y:h>x&&(h=x)}return{[f]:p,[c]:h}}}},lee=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:o,platform:a,elements:s}=t,{apply:l=()=>{},...u}=Ss(e,t),d=await vh(t,u),c=Cs(i),f=nf(i),p=Fa(i)==="y",{width:h,height:m}=o.floating;let v,g;c==="top"||c==="bottom"?(v=c,g=f===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,v=f==="end"?"top":"bottom");const _=m-d.top-d.bottom,b=h-d.left-d.right,w=Pl(m-d[v],_),y=Pl(h-d[g],b),x=!t.middlewareData.shift;let M=w,T=y;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(T=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(M=_),x&&!f){const $=no(d.left,0),k=no(d.right,0),F=no(d.top,0),j=no(d.bottom,0);p?T=h-2*($!==0||k!==0?$+k:no(d.left,d.right)):M=m-2*(F!==0||j!==0?F+j:no(d.top,d.bottom))}await l({...t,availableWidth:T,availableHeight:M});const S=await a.getDimensions(s.floating);return h!==S.width||m!==S.height?{reset:{rects:!0}}:{}}}};function qy(){return typeof window<"u"}function of(e){return KW(e)?(e.nodeName||"").toLowerCase():"#document"}function fo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xa(e){var t;return(t=(KW(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function KW(e){return qy()?e instanceof Node||e instanceof fo(e).Node:!1}function ba(e){return qy()?e instanceof Element||e instanceof fo(e).Element:!1}function Ha(e){return qy()?e instanceof HTMLElement||e instanceof fo(e).HTMLElement:!1}function CD(e){return!qy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fo(e).ShadowRoot}const uee=new Set(["inline","contents"]);function gm(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=wa(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!uee.has(i)}const cee=new Set(["table","td","th"]);function dee(e){return cee.has(of(e))}const fee=[":popover-open",":modal"];function Xy(e){return fee.some(t=>{try{return e.matches(t)}catch{return!1}})}const pee=["transform","translate","scale","rotate","perspective"],hee=["transform","translate","scale","rotate","perspective","filter"],mee=["paint","layout","strict","content"];function UE(e){const t=WE(),r=ba(e)?wa(e):e;return pee.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||hee.some(n=>(r.willChange||"").includes(n))||mee.some(n=>(r.contain||"").includes(n))}function gee(e){let t=El(e);for(;Ha(t)&&!Md(t);){if(UE(t))return t;if(Xy(t))return null;t=El(t)}return null}function WE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _ee=new Set(["html","body","#document"]);function Md(e){return _ee.has(of(e))}function wa(e){return fo(e).getComputedStyle(e)}function Qy(e){return ba(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function El(e){if(of(e)==="html")return e;const t=e.assignedSlot||e.parentNode||CD(e)&&e.host||Xa(e);return CD(t)?t.host:t}function qW(e){const t=El(e);return Md(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ha(t)&&gm(t)?t:qW(t)}function yh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=qW(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),a=fo(i);if(o){const s=kM(a);return t.concat(a,a.visualViewport||[],gm(i)?i:[],s&&r?yh(s):[])}return t.concat(i,yh(i,[],r))}function kM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XW(e){const t=wa(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Ha(e),o=i?e.offsetWidth:r,a=i?e.offsetHeight:n,s=pv(r)!==o||pv(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function VE(e){return ba(e)?e:e.contextElement}function rd(e){const t=VE(e);if(!Ha(t))return za(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:o}=XW(t);let a=(o?pv(r.width):r.width)/n,s=(o?pv(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const vee=za(0);function QW(e){const t=fo(e);return!WE()||!t.visualViewport?vee:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yee(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==fo(e)?!1:t}function Ru(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=VE(e);let a=za(1);t&&(n?ba(n)&&(a=rd(n)):a=rd(e));const s=yee(o,r,n)?QW(o):za(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,d=i.width/a.x,c=i.height/a.y;if(o){const f=fo(o),p=n&&ba(n)?fo(n):n;let h=f,m=kM(h);for(;m&&n&&p!==h;){const v=rd(m),g=m.getBoundingClientRect(),_=wa(m),b=g.left+(m.clientLeft+parseFloat(_.paddingLeft))*v.x,w=g.top+(m.clientTop+parseFloat(_.paddingTop))*v.y;l*=v.x,u*=v.y,d*=v.x,c*=v.y,l+=b,u+=w,h=fo(m),m=kM(h)}}return mv({width:d,height:c,x:l,y:u})}function GE(e,t){const r=Qy(e).scrollLeft;return t?t.left+r:Ru(Xa(e)).left+r}function YW(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-(r?0:GE(e,n)),o=n.top+t.scrollTop;return{x:i,y:o}}function bee(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const o=i==="fixed",a=Xa(n),s=t?Xy(t.floating):!1;if(n===a||s&&o)return r;let l={scrollLeft:0,scrollTop:0},u=za(1);const d=za(0),c=Ha(n);if((c||!c&&!o)&&((of(n)!=="body"||gm(a))&&(l=Qy(n)),Ha(n))){const p=Ru(n);u=rd(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const f=a&&!c&&!o?YW(a,l,!0):za(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-l.scrollTop*u.y+d.y+f.y}}function wee(e){return Array.from(e.getClientRects())}function xee(e){const t=Xa(e),r=Qy(e),n=e.ownerDocument.body,i=no(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=no(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+GE(e);const s=-r.scrollTop;return wa(n).direction==="rtl"&&(a+=no(t.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}function Mee(e,t){const r=fo(e),n=Xa(e),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const u=WE();(!u||u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}const Tee=new Set(["absolute","fixed"]);function Pee(e,t){const r=Ru(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,o=Ha(e)?rd(e):za(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,l=i*o.x,u=n*o.y;return{width:a,height:s,x:l,y:u}}function $D(e,t,r){let n;if(t==="viewport")n=Mee(e,r);else if(t==="document")n=xee(Xa(e));else if(ba(t))n=Pee(t,r);else{const i=QW(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return mv(n)}function ZW(e,t){const r=El(e);return r===t||!ba(r)||Md(r)?!1:wa(r).position==="fixed"||ZW(r,t)}function Eee(e,t){const r=t.get(e);if(r)return r;let n=yh(e,[],!1).filter(s=>ba(s)&&of(s)!=="body"),i=null;const o=wa(e).position==="fixed";let a=o?El(e):e;for(;ba(a)&&!Md(a);){const s=wa(a),l=UE(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&!!i&&Tee.has(i.position)||gm(a)&&!l&&ZW(e,a))?n=n.filter(d=>d!==a):i=s,a=El(a)}return t.set(e,n),n}function See(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const a=[...r==="clippingAncestors"?Xy(t)?[]:Eee(t,this._c):[].concat(r),n],s=a[0],l=a.reduce((u,d)=>{const c=$D(t,d,i);return u.top=no(c.top,u.top),u.right=Pl(c.right,u.right),u.bottom=Pl(c.bottom,u.bottom),u.left=no(c.left,u.left),u},$D(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Cee(e){const{width:t,height:r}=XW(e);return{width:t,height:r}}function $ee(e,t,r){const n=Ha(t),i=Xa(t),o=r==="fixed",a=Ru(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=za(0);function u(){l.x=GE(i)}if(n||!n&&!o)if((of(t)!=="body"||gm(i))&&(s=Qy(t)),n){const p=Ru(t,!0,o,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else i&&u();o&&!n&&i&&u();const d=i&&!n&&!o?YW(i,s):za(0),c=a.left+s.scrollLeft-l.x-d.x,f=a.top+s.scrollTop-l.y-d.y;return{x:c,y:f,width:a.width,height:a.height}}function Jw(e){return wa(e).position==="static"}function AD(e,t){if(!Ha(e)||wa(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Xa(e)===r&&(r=r.ownerDocument.body),r}function JW(e,t){const r=fo(e);if(Xy(e))return r;if(!Ha(e)){let i=El(e);for(;i&&!Md(i);){if(ba(i)&&!Jw(i))return i;i=El(i)}return r}let n=AD(e,t);for(;n&&dee(n)&&Jw(n);)n=AD(n,t);return n&&Md(n)&&Jw(n)&&!UE(n)?r:n||gee(e)||r}const Aee=async function(e){const t=this.getOffsetParent||JW,r=this.getDimensions,n=await r(e.floating);return{reference:$ee(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Oee(e){return wa(e).direction==="rtl"}const kee={convertOffsetParentRelativeRectToViewportRelativeRect:bee,getDocumentElement:Xa,getClippingRect:See,getOffsetParent:JW,getElementRects:Aee,getClientRects:wee,getDimensions:Cee,getScale:rd,isElement:ba,isRTL:Oee};function eV(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Iee(e,t){let r=null,n;const i=Xa(e);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:d,top:c,width:f,height:p}=u;if(s||t(),!f||!p)return;const h=Gg(c),m=Gg(i.clientWidth-(d+f)),v=Gg(i.clientHeight-(c+p)),g=Gg(d),b={rootMargin:-h+"px "+-m+"px "+-v+"px "+-g+"px",threshold:no(0,Pl(1,l))||1};let w=!0;function y(x){const M=x[0].intersectionRatio;if(M!==l){if(!w)return a();M?a(!1,M):n=setTimeout(()=>{a(!1,1e-7)},1e3)}M===1&&!eV(u,e.getBoundingClientRect())&&a(),w=!1}try{r=new IntersectionObserver(y,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(y,b)}r.observe(e)}return a(!0),o}function Dee(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=VE(e),d=i||o?[...u?yh(u):[],...yh(t)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",r,{passive:!0}),o&&g.addEventListener("resize",r)});const c=u&&s?Iee(u,r):null;let f=-1,p=null;a&&(p=new ResizeObserver(g=>{let[_]=g;_&&_.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),r()}),u&&!l&&p.observe(u),p.observe(t));let h,m=l?Ru(e):null;l&&v();function v(){const g=Ru(e);m&&!eV(m,g)&&r(),m=g,h=requestAnimationFrame(v)}return r(),()=>{var g;d.forEach(_=>{i&&_.removeEventListener("scroll",r),o&&_.removeEventListener("resize",r)}),c==null||c(),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const jee=oee,Fee=aee,Lee=ree,Nee=lee,Ree=nee,OD=tee,zee=see,Bee=(e,t,r)=>{const n=new Map,i={platform:kee,...r},o={...i.platform,_c:n};return eee(e,t,{...i,platform:o})};var Uee=typeof document<"u",Wee=function(){},j_=Uee?N.useLayoutEffect:Wee;function gv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!gv(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&e.$$typeof)&&!gv(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function tV(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function kD(e,t){const r=tV(e);return Math.round(t*r)/r}function ex(e){const t=N.useRef(e);return j_(()=>{t.current=e}),t}function Vee(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[d,c]=N.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=N.useState(n);gv(f,n)||p(n);const[h,m]=N.useState(null),[v,g]=N.useState(null),_=N.useCallback(W=>{W!==x.current&&(x.current=W,m(W))},[]),b=N.useCallback(W=>{W!==M.current&&(M.current=W,g(W))},[]),w=o||h,y=a||v,x=N.useRef(null),M=N.useRef(null),T=N.useRef(d),S=l!=null,$=ex(l),k=ex(i),F=ex(u),j=N.useCallback(()=>{if(!x.current||!M.current)return;const W={placement:t,strategy:r,middleware:f};k.current&&(W.platform=k.current),Bee(x.current,M.current,W).then(Y=>{const te={...Y,isPositioned:F.current!==!1};U.current&&!gv(T.current,te)&&(T.current=te,pm.flushSync(()=>{c(te)}))})},[f,t,r,k,F]);j_(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,c(W=>({...W,isPositioned:!1})))},[u]);const U=N.useRef(!1);j_(()=>(U.current=!0,()=>{U.current=!1}),[]),j_(()=>{if(w&&(x.current=w),y&&(M.current=y),w&&y){if($.current)return $.current(w,y,j);j()}},[w,y,j,$,S]);const z=N.useMemo(()=>({reference:x,floating:M,setReference:_,setFloating:b}),[_,b]),G=N.useMemo(()=>({reference:w,floating:y}),[w,y]),H=N.useMemo(()=>{const W={position:r,left:0,top:0};if(!G.floating)return W;const Y=kD(G.floating,d.x),te=kD(G.floating,d.y);return s?{...W,transform:"translate("+Y+"px, "+te+"px)",...tV(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:te}},[r,s,G.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:j,refs:z,elements:G,floatingStyles:H}),[d,j,z,G,H])}const Gee=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?OD({element:n.current,padding:i}).fn(r):{}:n?OD({element:n,padding:i}).fn(r):{}}}},Hee=(e,t)=>({...jee(e),options:[e,t]}),Kee=(e,t)=>({...Fee(e),options:[e,t]}),qee=(e,t)=>({...zee(e),options:[e,t]}),Xee=(e,t)=>({...Lee(e),options:[e,t]}),Qee=(e,t)=>({...Nee(e),options:[e,t]}),Yee=(e,t)=>({...Ree(e),options:[e,t]}),Zee=(e,t)=>({...Gee(e),options:[e,t]});var Jee="Arrow",rV=N.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...o}=e;return L.jsx(_r.svg,{...o,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:L.jsx("polygon",{points:"0,0 30,0 15,10"})})});rV.displayName=Jee;var ete=rV;function HE(e){const[t,r]=N.useState(void 0);return Ga(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,s=u.blockSize}else a=e.offsetWidth,s=e.offsetHeight;r({width:a,height:s})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var nV="Popper",[iV,oV]=Is(nV),[bOe,aV]=iV(nV),sV="PopperAnchor",lV=N.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,o=aV(sV,r),a=N.useRef(null),s=Rr(t,a);return N.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:L.jsx(_r.div,{...i,ref:s})});lV.displayName=sV;var KE="PopperContent",[tte,rte]=iV(KE),uV=N.forwardRef((e,t)=>{var be,Ne,Te,ge,re,ne;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:c="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:h,...m}=e,v=aV(KE,r),[g,_]=N.useState(null),b=Rr(t,Z=>_(Z)),[w,y]=N.useState(null),x=HE(w),M=(x==null?void 0:x.width)??0,T=(x==null?void 0:x.height)??0,S=n+(o!=="center"?"-"+o:""),$=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],F=k.length>0,j={padding:$,boundary:k.filter(ite),altBoundary:F},{refs:U,floatingStyles:z,placement:G,isPositioned:H,middlewareData:W}=Vee({strategy:"fixed",placement:S,whileElementsMounted:(...Z)=>Dee(...Z,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[Hee({mainAxis:i+T,alignmentAxis:a}),l&&Kee({mainAxis:!0,crossAxis:!1,limiter:c==="partial"?qee():void 0,...j}),l&&Xee({...j}),Qee({...j,apply:({elements:Z,rects:ve,availableWidth:Ae,availableHeight:Ee})=>{const{width:we,height:$e}=ve.reference,Me=Z.floating.style;Me.setProperty("--radix-popper-available-width",`${Ae}px`),Me.setProperty("--radix-popper-available-height",`${Ee}px`),Me.setProperty("--radix-popper-anchor-width",`${we}px`),Me.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),w&&Zee({element:w,padding:s}),ote({arrowWidth:M,arrowHeight:T}),f&&Yee({strategy:"referenceHidden",...j})]}),[Y,te]=fV(G),V=xi(h);Ga(()=>{H&&(V==null||V())},[H,V]);const I=(be=W.arrow)==null?void 0:be.x,K=(Ne=W.arrow)==null?void 0:Ne.y,ae=((Te=W.arrow)==null?void 0:Te.centerOffset)!==0,[pe,de]=N.useState();return Ga(()=>{g&&de(window.getComputedStyle(g).zIndex)},[g]),L.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:H?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[(ge=W.transformOrigin)==null?void 0:ge.x,(re=W.transformOrigin)==null?void 0:re.y].join(" "),...((ne=W.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:L.jsx(tte,{scope:r,placedSide:Y,onArrowChange:y,arrowX:I,arrowY:K,shouldHideArrow:ae,children:L.jsx(_r.div,{"data-side":Y,"data-align":te,...m,ref:b,style:{...m.style,animation:H?void 0:"none"}})})})});uV.displayName=KE;var cV="PopperArrow",nte={top:"bottom",right:"left",bottom:"top",left:"right"},dV=N.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,o=rte(cV,n),a=nte[o.placedSide];return L.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:L.jsx(ete,{...i,ref:r,style:{...i.style,display:"block"}})})});dV.displayName=cV;function ite(e){return e!==null}var ote=e=>({name:"transformOrigin",options:e,fn(t){var v,g,_;const{placement:r,rects:n,middlewareData:i}=t,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,s=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[u,d]=fV(r),c={start:"0%",center:"50%",end:"100%"}[d],f=(((g=i.arrow)==null?void 0:g.x)??0)+s/2,p=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let h="",m="";return u==="bottom"?(h=a?c:`${f}px`,m=`${-l}px`):u==="top"?(h=a?c:`${f}px`,m=`${n.floating.height+l}px`):u==="right"?(h=`${-l}px`,m=a?c:`${p}px`):u==="left"&&(h=`${n.floating.width+l}px`,m=a?c:`${p}px`),{data:{x:h,y:m}}}});function fV(e){const[t,r="center"]=e.split("-");return[t,r]}var ate=lV,ste=uV,lte=dV,[Yy,wOe]=Is("Tooltip",[oV]),qE=oV(),pV="TooltipProvider",ute=700,ID="tooltip.open",[cte,hV]=Yy(pV),mV=e=>{const{__scopeTooltip:t,delayDuration:r=ute,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:o}=e,a=N.useRef(!0),s=N.useRef(!1),l=N.useRef(0);return N.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),L.jsx(cte,{scope:t,isOpenDelayedRef:a,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:N.useCallback(u=>{s.current=u},[]),disableHoverableContent:i,children:o})};mV.displayName=pV;var gV="Tooltip",[xOe,Zy]=Yy(gV),IM="TooltipTrigger",dte=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=Zy(IM,r),o=hV(IM,r),a=qE(r),s=N.useRef(null),l=Rr(t,s,i.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),c=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",c),[c]),L.jsx(ate,{asChild:!0,...a,children:L.jsx(_r.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:l,onPointerMove:qt(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",c,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||i.onOpen()}),onBlur:qt(e.onBlur,i.onClose),onClick:qt(e.onClick,i.onClose)})})});dte.displayName=IM;var fte="TooltipPortal",[MOe,pte]=Yy(fte,{forceMount:void 0}),Td="TooltipContent",_V=N.forwardRef((e,t)=>{const r=pte(Td,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...o}=e,a=Zy(Td,e.__scopeTooltip);return L.jsx(Ol,{present:n||a.open,children:a.disableHoverableContent?L.jsx(vV,{side:i,...o,ref:t}):L.jsx(hte,{side:i,...o,ref:t})})}),hte=N.forwardRef((e,t)=>{const r=Zy(Td,e.__scopeTooltip),n=hV(Td,e.__scopeTooltip),i=N.useRef(null),o=Rr(t,i),[a,s]=N.useState(null),{trigger:l,onClose:u}=r,d=i.current,{onPointerInTransitChange:c}=n,f=N.useCallback(()=>{s(null),c(!1)},[c]),p=N.useCallback((h,m)=>{const v=h.currentTarget,g={x:h.clientX,y:h.clientY},_=yte(g,v.getBoundingClientRect()),b=bte(g,_),w=wte(m.getBoundingClientRect()),y=Mte([...b,...w]);s(y),c(!0)},[c]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(l&&d){const h=v=>p(v,d),m=v=>p(v,l);return l.addEventListener("pointerleave",h),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",h),d.removeEventListener("pointerleave",m)}}},[l,d,p,f]),N.useEffect(()=>{if(a){const h=m=>{const v=m.target,g={x:m.clientX,y:m.clientY},_=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),b=!xte(g,a);_?f():b&&(f(),u())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[l,d,a,u,f]),L.jsx(vV,{...e,ref:o})}),[mte,gte]=Yy(gV,{isInside:!1}),_te=_Y("TooltipContent"),vV=N.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=e,l=Zy(Td,r),u=qE(r),{onClose:d}=l;return N.useEffect(()=>(document.addEventListener(ID,d),()=>document.removeEventListener(ID,d)),[d]),N.useEffect(()=>{if(l.trigger){const c=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",c,{capture:!0}),()=>window.removeEventListener("scroll",c,{capture:!0})}},[l.trigger,d]),L.jsx(kE,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:c=>c.preventDefault(),onDismiss:d,children:L.jsxs(ste,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[L.jsx(_te,{children:n}),L.jsx(mte,{scope:r,isInside:!0,children:L.jsx(zY,{id:l.contentId,role:"tooltip",children:i||n})})]})})});_V.displayName=Td;var yV="TooltipArrow",vte=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=qE(r);return gte(yV,r).isInside?null:L.jsx(lte,{...i,...n,ref:t})});vte.displayName=yV;function yte(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function bte(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function wte(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function xte(e,t){const{x:r,y:n}=e;let i=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const s=t[o],l=t[a],u=s.x,d=s.y,c=l.x,f=l.y;d>n!=f>n&&r<(c-u)*(n-d)/(f-d)+u&&(i=!i)}return i}function Mte(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Tte(t)}function Tte(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const o=r[r.length-1],a=r[r.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Pte=mV,bV=_V;const Ete=Pte,Ste=N.forwardRef(({className:e,sideOffset:t=4,...r},n)=>L.jsx(bV,{ref:n,sideOffset:t,className:sn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Ste.displayName=bV.displayName;var Jy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},e0=typeof window>"u"||"Deno"in globalThis;function oa(){}function Cte(e,t){return typeof e=="function"?e(t):e}function $te(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ate(e,t){return Math.max(e+(t||0)-Date.now(),0)}function DM(e,t){return typeof e=="function"?e(t):e}function Ote(e,t){return typeof e=="function"?e(t):e}function DD(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:a,stale:s}=e;if(a){if(n){if(t.queryHash!==XE(a,t.options))return!1}else if(!wh(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||i&&i!==t.state.fetchStatus||o&&!o(t))}function jD(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(bh(t.options.mutationKey)!==bh(o))return!1}else if(!wh(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function XE(e,t){return((t==null?void 0:t.queryKeyHashFn)||bh)(e)}function bh(e){return JSON.stringify(e,(t,r)=>jM(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function wh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>wh(e[r],t[r])):!1}function wV(e,t){if(e===t)return e;const r=FD(e)&&FD(t);if(r||jM(e)&&jM(t)){const n=r?e:Object.keys(e),i=n.length,o=r?t:Object.keys(t),a=o.length,s=r?[]:{},l=new Set(n);let u=0;for(let d=0;d<a;d++){const c=r?d:o[d];(!r&&l.has(c)||r)&&e[c]===void 0&&t[c]===void 0?(s[c]=void 0,u++):(s[c]=wV(e[c],t[c]),s[c]===e[c]&&e[c]!==void 0&&u++)}return i===a&&u===i?e:s}return t}function FD(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jM(e){if(!LD(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!LD(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function LD(e){return Object.prototype.toString.call(e)==="[object Object]"}function kte(e){return new Promise(t=>{setTimeout(t,e)})}function Ite(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?wV(e,t):t}function Dte(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function jte(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var QE=Symbol();function xV(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===QE?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Tu,ol,ld,IB,Fte=(IB=class extends Jy{constructor(){super();hr(this,Tu);hr(this,ol);hr(this,ld);Ht(this,ld,t=>{if(!e0&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Be(this,ol)||this.setEventListener(Be(this,ld))}onUnsubscribe(){var t;this.hasListeners()||((t=Be(this,ol))==null||t.call(this),Ht(this,ol,void 0))}setEventListener(t){var r;Ht(this,ld,t),(r=Be(this,ol))==null||r.call(this),Ht(this,ol,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Be(this,Tu)!==t&&(Ht(this,Tu,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Be(this,Tu)=="boolean"?Be(this,Tu):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Tu=new WeakMap,ol=new WeakMap,ld=new WeakMap,IB),MV=new Fte,ud,al,cd,DB,Lte=(DB=class extends Jy{constructor(){super();hr(this,ud,!0);hr(this,al);hr(this,cd);Ht(this,cd,t=>{if(!e0&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Be(this,al)||this.setEventListener(Be(this,cd))}onUnsubscribe(){var t;this.hasListeners()||((t=Be(this,al))==null||t.call(this),Ht(this,al,void 0))}setEventListener(t){var r;Ht(this,cd,t),(r=Be(this,al))==null||r.call(this),Ht(this,al,t(this.setOnline.bind(this)))}setOnline(t){Be(this,ud)!==t&&(Ht(this,ud,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Be(this,ud)}},ud=new WeakMap,al=new WeakMap,cd=new WeakMap,DB),_v=new Lte;function Nte(){let e,t;const r=new Promise((i,o)=>{e=i,t=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Rte(e){return Math.min(1e3*2**e,3e4)}function TV(e){return(e??"online")==="online"?_v.isOnline():!0}var PV=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function tx(e){return e instanceof PV}function EV(e){let t=!1,r=0,n=!1,i;const o=Nte(),a=m=>{var v;n||(f(new PV(m)),(v=e.abort)==null||v.call(e))},s=()=>{t=!0},l=()=>{t=!1},u=()=>MV.isFocused()&&(e.networkMode==="always"||_v.isOnline())&&e.canRun(),d=()=>TV(e.networkMode)&&e.canRun(),c=m=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,m),i==null||i(),o.resolve(m))},f=m=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,m),i==null||i(),o.reject(m))},p=()=>new Promise(m=>{var v;i=g=>{(n||u())&&m(g)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;i=void 0,n||(m=e.onContinue)==null||m.call(e)}),h=()=>{if(n)return;let m;const v=r===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(c).catch(g=>{var x;if(n)return;const _=e.retry??(e0?0:3),b=e.retryDelay??Rte,w=typeof b=="function"?b(r,g):b,y=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,g);if(t||!y){f(g);return}r++,(x=e.onFail)==null||x.call(e,r,g),kte(w).then(()=>u()?void 0:p()).then(()=>{t?f(g):h()})})};return{promise:o,cancel:a,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:l,canStart:d,start:()=>(d()?h():p().then(h),o)}}var zte=e=>setTimeout(e,0);function Bte(){let e=[],t=0,r=s=>{s()},n=s=>{s()},i=zte;const o=s=>{t?e.push(s):i(()=>{r(s)})},a=()=>{const s=e;e=[],s.length&&i(()=>{n(()=>{s.forEach(l=>{r(l)})})})};return{batch:s=>{let l;t++;try{l=s()}finally{t--,t||a()}return l},batchCalls:s=>(...l)=>{o(()=>{s(...l)})},schedule:o,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{n=s},setScheduler:s=>{i=s}}}var Oi=Bte(),Pu,jB,SV=(jB=class{constructor(){hr(this,Pu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$te(this.gcTime)&&Ht(this,Pu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(e0?1/0:5*60*1e3))}clearGcTimeout(){Be(this,Pu)&&(clearTimeout(Be(this,Pu)),Ht(this,Pu,void 0))}},Pu=new WeakMap,jB),dd,Eu,So,Su,_i,am,Cu,aa,ls,FB,Ute=(FB=class extends SV{constructor(t){super();hr(this,aa);hr(this,dd);hr(this,Eu);hr(this,So);hr(this,Su);hr(this,_i);hr(this,am);hr(this,Cu);Ht(this,Cu,!1),Ht(this,am,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ht(this,Su,t.client),Ht(this,So,Be(this,Su).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ht(this,dd,Vte(this.options)),this.state=t.state??Be(this,dd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Be(this,_i))==null?void 0:t.promise}setOptions(t){this.options={...Be(this,am),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Be(this,So).remove(this)}setData(t,r){const n=Ite(this.state.data,t,this.options);return hi(this,aa,ls).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){hi(this,aa,ls).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=Be(this,_i))==null?void 0:n.promise;return(i=Be(this,_i))==null||i.cancel(t),r?r.then(oa).catch(oa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Be(this,dd))}isActive(){return this.observers.some(t=>Ote(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===QE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>DM(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Ate(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Be(this,_i))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Be(this,_i))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Be(this,So).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Be(this,_i)&&(Be(this,Cu)?Be(this,_i).cancel({revert:!0}):Be(this,_i).cancelRetry()),this.scheduleGc()),Be(this,So).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||hi(this,aa,ls).call(this,{type:"invalidate"})}fetch(t,r){var u,d,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Be(this,_i))return Be(this,_i).continueRetry(),Be(this,_i).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ht(this,Cu,!0),n.signal)})},o=()=>{const f=xV(this.options,r),h=(()=>{const m={client:Be(this,Su),queryKey:this.queryKey,meta:this.meta};return i(m),m})();return Ht(this,Cu,!1),this.options.persister?this.options.persister(f,h,this):f(h)},s=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Be(this,Su),state:this.state,fetchFn:o};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(s,this),Ht(this,Eu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=s.fetchOptions)==null?void 0:d.meta))&&hi(this,aa,ls).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const l=f=>{var p,h,m,v;tx(f)&&f.silent||hi(this,aa,ls).call(this,{type:"error",error:f}),tx(f)||((h=(p=Be(this,So).config).onError)==null||h.call(p,f,this),(v=(m=Be(this,So).config).onSettled)==null||v.call(m,this.state.data,f,this)),this.scheduleGc()};return Ht(this,_i,EV({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var p,h,m,v;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(g){l(g);return}(h=(p=Be(this,So).config).onSuccess)==null||h.call(p,f,this),(v=(m=Be(this,So).config).onSettled)==null||v.call(m,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,p)=>{hi(this,aa,ls).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{hi(this,aa,ls).call(this,{type:"pause"})},onContinue:()=>{hi(this,aa,ls).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),Be(this,_i).start()}},dd=new WeakMap,Eu=new WeakMap,So=new WeakMap,Su=new WeakMap,_i=new WeakMap,am=new WeakMap,Cu=new WeakMap,aa=new WeakSet,ls=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wte(n.data,this.options),fetchMeta:t.meta??null};case"success":return Ht(this,Eu,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return tx(i)&&i.revert&&Be(this,Eu)?{...Be(this,Eu),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Oi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Be(this,So).notify({query:this,type:"updated",action:t})})},FB);function Wte(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TV(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Vte(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ka,LB,Gte=(LB=class extends Jy{constructor(t={}){super();hr(this,ka);this.config=t,Ht(this,ka,new Map)}build(t,r,n){const i=r.queryKey,o=r.queryHash??XE(i,r);let a=this.get(o);return a||(a=new Ute({client:t,queryKey:i,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){Be(this,ka).has(t.queryHash)||(Be(this,ka).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Be(this,ka).get(t.queryHash);r&&(t.destroy(),r===t&&Be(this,ka).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Oi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Be(this,ka).get(t)}getAll(){return[...Be(this,ka).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>DD(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>DD(t,n)):r}notify(t){Oi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Oi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Oi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ka=new WeakMap,LB),Ia,$i,$u,Da,Zs,NB,Hte=(NB=class extends SV{constructor(t){super();hr(this,Da);hr(this,Ia);hr(this,$i);hr(this,$u);this.mutationId=t.mutationId,Ht(this,$i,t.mutationCache),Ht(this,Ia,[]),this.state=t.state||Kte(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Be(this,Ia).includes(t)||(Be(this,Ia).push(t),this.clearGcTimeout(),Be(this,$i).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ht(this,Ia,Be(this,Ia).filter(r=>r!==t)),this.scheduleGc(),Be(this,$i).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Be(this,Ia).length||(this.state.status==="pending"?this.scheduleGc():Be(this,$i).remove(this))}continue(){var t;return((t=Be(this,$u))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,a,s,l,u,d,c,f,p,h,m,v,g,_,b,w,y,x,M,T;const r=()=>{hi(this,Da,Zs).call(this,{type:"continue"})};Ht(this,$u,EV({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(S,$)=>{hi(this,Da,Zs).call(this,{type:"failed",failureCount:S,error:$})},onPause:()=>{hi(this,Da,Zs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Be(this,$i).canRun(this)}));const n=this.state.status==="pending",i=!Be(this,$u).canStart();try{if(n)r();else{hi(this,Da,Zs).call(this,{type:"pending",variables:t,isPaused:i}),await((a=(o=Be(this,$i).config).onMutate)==null?void 0:a.call(o,t,this));const $=await((l=(s=this.options).onMutate)==null?void 0:l.call(s,t));$!==this.state.context&&hi(this,Da,Zs).call(this,{type:"pending",context:$,variables:t,isPaused:i})}const S=await Be(this,$u).start();return await((d=(u=Be(this,$i).config).onSuccess)==null?void 0:d.call(u,S,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,S,t,this.state.context)),await((h=(p=Be(this,$i).config).onSettled)==null?void 0:h.call(p,S,null,this.state.variables,this.state.context,this)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,S,null,t,this.state.context)),hi(this,Da,Zs).call(this,{type:"success",data:S}),S}catch(S){try{throw await((_=(g=Be(this,$i).config).onError)==null?void 0:_.call(g,S,t,this.state.context,this)),await((w=(b=this.options).onError)==null?void 0:w.call(b,S,t,this.state.context)),await((x=(y=Be(this,$i).config).onSettled)==null?void 0:x.call(y,void 0,S,this.state.variables,this.state.context,this)),await((T=(M=this.options).onSettled)==null?void 0:T.call(M,void 0,S,t,this.state.context)),S}finally{hi(this,Da,Zs).call(this,{type:"error",error:S})}}finally{Be(this,$i).runNext(this)}}},Ia=new WeakMap,$i=new WeakMap,$u=new WeakMap,Da=new WeakSet,Zs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Oi.batch(()=>{Be(this,Ia).forEach(n=>{n.onMutationUpdate(t)}),Be(this,$i).notify({mutation:this,type:"updated",action:t})})},NB);function Kte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fs,sa,sm,RB,qte=(RB=class extends Jy{constructor(t={}){super();hr(this,fs);hr(this,sa);hr(this,sm);this.config=t,Ht(this,fs,new Set),Ht(this,sa,new Map),Ht(this,sm,0)}build(t,r,n){const i=new Hte({mutationCache:this,mutationId:++Mg(this,sm)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){Be(this,fs).add(t);const r=Hg(t);if(typeof r=="string"){const n=Be(this,sa).get(r);n?n.push(t):Be(this,sa).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Be(this,fs).delete(t)){const r=Hg(t);if(typeof r=="string"){const n=Be(this,sa).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&Be(this,sa).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Hg(t);if(typeof r=="string"){const n=Be(this,sa).get(r),i=n==null?void 0:n.find(o=>o.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=Hg(t);if(typeof r=="string"){const i=(n=Be(this,sa).get(r))==null?void 0:n.find(o=>o!==t&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Oi.batch(()=>{Be(this,fs).forEach(t=>{this.notify({type:"removed",mutation:t})}),Be(this,fs).clear(),Be(this,sa).clear()})}getAll(){return Array.from(Be(this,fs))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>jD(r,n))}findAll(t={}){return this.getAll().filter(r=>jD(t,r))}notify(t){Oi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Oi.batch(()=>Promise.all(t.map(r=>r.continue().catch(oa))))}},fs=new WeakMap,sa=new WeakMap,sm=new WeakMap,RB);function Hg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function ND(e){return{onFetch:(t,r)=>{var d,c,f,p,h;const n=t.options,i=(f=(c=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:c.fetchMore)==null?void 0:f.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],a=((h=t.state.data)==null?void 0:h.pageParams)||[];let s={pages:[],pageParams:[]},l=0;const u=async()=>{let m=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},g=xV(t.options,t.fetchOptions),_=async(b,w,y)=>{if(m)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const M=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:w,direction:y?"backward":"forward",meta:t.options.meta};return v(k),k})(),T=await g(M),{maxPages:S}=t.options,$=y?jte:Dte;return{pages:$(b.pages,T,S),pageParams:$(b.pageParams,w,S)}};if(i&&o.length){const b=i==="backward",w=b?Xte:RD,y={pages:o,pageParams:a},x=w(n,y);s=await _(y,x,b)}else{const b=e??o.length;do{const w=l===0?a[0]??n.initialPageParam:RD(n,s);if(l>0&&w==null)break;s=await _(s,w),l++}while(l<b)}return s};t.options.persister?t.fetchFn=()=>{var m,v;return(v=(m=t.options).persister)==null?void 0:v.call(m,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function RD(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Xte(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var pn,sl,ll,fd,pd,ul,hd,md,zB,Qte=(zB=class{constructor(e={}){hr(this,pn);hr(this,sl);hr(this,ll);hr(this,fd);hr(this,pd);hr(this,ul);hr(this,hd);hr(this,md);Ht(this,pn,e.queryCache||new Gte),Ht(this,sl,e.mutationCache||new qte),Ht(this,ll,e.defaultOptions||{}),Ht(this,fd,new Map),Ht(this,pd,new Map),Ht(this,ul,0)}mount(){Mg(this,ul)._++,Be(this,ul)===1&&(Ht(this,hd,MV.subscribe(async e=>{e&&(await this.resumePausedMutations(),Be(this,pn).onFocus())})),Ht(this,md,_v.subscribe(async e=>{e&&(await this.resumePausedMutations(),Be(this,pn).onOnline())})))}unmount(){var e,t;Mg(this,ul)._--,Be(this,ul)===0&&((e=Be(this,hd))==null||e.call(this),Ht(this,hd,void 0),(t=Be(this,md))==null||t.call(this),Ht(this,md,void 0))}isFetching(e){return Be(this,pn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Be(this,sl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Be(this,pn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Be(this,pn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(DM(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Be(this,pn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=Be(this,pn).get(n.queryHash),o=i==null?void 0:i.state.data,a=Cte(t,o);if(a!==void 0)return Be(this,pn).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return Oi.batch(()=>Be(this,pn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Be(this,pn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Be(this,pn);Oi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Be(this,pn);return Oi.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Oi.batch(()=>Be(this,pn).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(oa).catch(oa)}invalidateQueries(e,t={}){return Oi.batch(()=>(Be(this,pn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Oi.batch(()=>Be(this,pn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(oa)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(oa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Be(this,pn).build(this,t);return r.isStaleByTime(DM(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(oa).catch(oa)}fetchInfiniteQuery(e){return e.behavior=ND(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(oa).catch(oa)}ensureInfiniteQueryData(e){return e.behavior=ND(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _v.isOnline()?Be(this,sl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Be(this,pn)}getMutationCache(){return Be(this,sl)}getDefaultOptions(){return Be(this,ll)}setDefaultOptions(e){Ht(this,ll,e)}setQueryDefaults(e,t){Be(this,fd).set(bh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Be(this,fd).values()],r={};return t.forEach(n=>{wh(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Be(this,pd).set(bh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Be(this,pd).values()],r={};return t.forEach(n=>{wh(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Be(this,ll).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=XE(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===QE&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Be(this,ll).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Be(this,pn).clear(),Be(this,sl).clear()}},pn=new WeakMap,sl=new WeakMap,ll=new WeakMap,fd=new WeakMap,pd=new WeakMap,ul=new WeakMap,hd=new WeakMap,md=new WeakMap,zB),Yte=N.createContext(void 0),Zte=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),L.jsx(Yte.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(this,arguments)}var fl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fl||(fl={}));const zD="popstate";function Jte(e){e===void 0&&(e={});function t(n,i){let{pathname:o,search:a,hash:s}=n.location;return FM("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:$V(i)}return tre(t,r,null,e)}function Xi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function CV(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ere(){return Math.random().toString(36).substr(2,8)}function BD(e,t){return{usr:e.state,key:e.key,idx:t}}function FM(e,t,r,n){return r===void 0&&(r=null),vv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?t0(t):t,{state:r,key:t&&t.key||n||ere()})}function $V(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function t0(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function tre(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=fl.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(vv({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function c(){s=fl.Pop;let v=d(),g=v==null?null:v-u;u=v,l&&l({action:s,location:m.location,delta:g})}function f(v,g){s=fl.Push;let _=FM(m.location,v,g);u=d()+1;let b=BD(_,u),w=m.createHref(_);try{a.pushState(b,"",w)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;i.location.assign(w)}o&&l&&l({action:s,location:m.location,delta:1})}function p(v,g){s=fl.Replace;let _=FM(m.location,v,g);u=d();let b=BD(_,u),w=m.createHref(_);a.replaceState(b,"",w),o&&l&&l({action:s,location:m.location,delta:0})}function h(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof v=="string"?v:$V(v);return _=_.replace(/ $/,"%20"),Xi(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let m={get action(){return s},get location(){return e(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(zD,c),l=v,()=>{i.removeEventListener(zD,c),l=null}},createHref(v){return t(i,v)},createURL:h,encodeLocation(v){let g=h(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(v){return a.go(v)}};return m}var UD;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(UD||(UD={}));function rre(e,t,r){return r===void 0&&(r="/"),nre(e,t,r)}function nre(e,t,r,n){let i=typeof t=="string"?t0(t):t,o=kV(i.pathname||"/",r);if(o==null)return null;let a=AV(e);ire(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let u=gre(o);s=pre(a[l],u)}return s}function AV(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Xi(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=nd([n,l.relativePath]),d=r.concat(l);o.children&&o.children.length>0&&(Xi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),AV(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:dre(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of OV(o.path))i(o,a,l)}),t}function OV(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=OV(n.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function ire(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fre(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ore=/^:[\w-]+$/,are=3,sre=2,lre=1,ure=10,cre=-2,WD=e=>e==="*";function dre(e,t){let r=e.split("/"),n=r.length;return r.some(WD)&&(n+=cre),t&&(n+=sre),r.filter(i=>!WD(i)).reduce((i,o)=>i+(ore.test(o)?are:o===""?lre:ure),n)}function fre(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function pre(e,t,r){let{routesMeta:n}=e,i={},o="/",a=[];for(let s=0;s<n.length;++s){let l=n[s],u=s===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",c=hre({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:nd([o,c.pathname]),pathnameBase:_re(nd([o,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(o=nd([o,c.pathnameBase]))}return a}function hre(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mre(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((u,d,c)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=s[c]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const h=s[c];return p&&!h?u[f]=void 0:u[f]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function mre(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),CV(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function gre(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return CV(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kV(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const nd=e=>e.join("/").replace(/\/\/+/g,"/"),_re=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function vre(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const IV=["post","put","patch","delete"];new Set(IV);const yre=["get",...IV];new Set(yre);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}const bre=N.createContext(null),wre=N.createContext(null),DV=N.createContext(null),r0=N.createContext(null),n0=N.createContext({outlet:null,matches:[],isDataRoute:!1}),jV=N.createContext(null);function YE(){return N.useContext(r0)!=null}function FV(){return YE()||Xi(!1),N.useContext(r0).location}function xre(e,t){return Mre(e,t)}function Mre(e,t,r,n){YE()||Xi(!1);let{navigator:i}=N.useContext(DV),{matches:o}=N.useContext(n0),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=FV(),d;if(t){var c;let v=typeof t=="string"?t0(t):t;l==="/"||(c=v.pathname)!=null&&c.startsWith(l)||Xi(!1),d=v}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let h=rre(e,{pathname:p}),m=Cre(h&&h.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:nd([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:nd([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,r,n);return t&&m?N.createElement(r0.Provider,{value:{location:yv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fl.Pop}},m):m}function Tre(){let e=kre(),t=vre(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,null)}const Pre=N.createElement(Tre,null);class Ere extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(n0.Provider,{value:this.props.routeContext},N.createElement(jV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sre(e){let{routeContext:t,match:r,children:n}=e,i=N.useContext(bre);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(n0.Provider,{value:t},n)}function Cre(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=(i=r)==null?void 0:i.errors;if(s!=null){let d=a.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);d>=0||Xi(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let c=a[d];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(u=d),c.route.id){let{loaderData:f,errors:p}=r,h=c.route.loader&&f[c.route.id]===void 0&&(!p||p[c.route.id]===void 0);if(c.route.lazy||h){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,c,f)=>{let p,h=!1,m=null,v=null;r&&(p=s&&c.route.id?s[c.route.id]:void 0,m=c.route.errorElement||Pre,l&&(u<0&&f===0?(Ire("route-fallback"),h=!0,v=null):u===f&&(h=!0,v=c.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,f+1)),_=()=>{let b;return p?b=m:h?b=v:c.route.Component?b=N.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=d,N.createElement(Sre,{match:c,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:b})};return r&&(c.route.ErrorBoundary||c.route.errorElement||f===0)?N.createElement(Ere,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var LV=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(LV||{});function $re(e){let t=N.useContext(wre);return t||Xi(!1),t}function Are(e){let t=N.useContext(n0);return t||Xi(!1),t}function Ore(e){let t=Are(),r=t.matches[t.matches.length-1];return r.route.id||Xi(!1),r.route.id}function kre(){var e;let t=N.useContext(jV),r=$re(LV.UseRouteError),n=Ore();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}const VD={};function Ire(e,t,r){VD[e]||(VD[e]=!0)}function Dre(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function LM(e){Xi(!1)}function jre(e){let{basename:t="/",children:r=null,location:n,navigationType:i=fl.Pop,navigator:o,static:a=!1,future:s}=e;YE()&&Xi(!1);let l=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:o,static:a,future:yv({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof n=="string"&&(n=t0(n));let{pathname:d="/",search:c="",hash:f="",state:p=null,key:h="default"}=n,m=N.useMemo(()=>{let v=kV(d,l);return v==null?null:{location:{pathname:v,search:c,hash:f,state:p,key:h},navigationType:i}},[l,d,c,f,p,h,i]);return m==null?null:N.createElement(DV.Provider,{value:u},N.createElement(r0.Provider,{children:r,value:m}))}function Fre(e){let{children:t,location:r}=e;return xre(NM(t),r)}new Promise(()=>{});function NM(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,i)=>{if(!N.isValidElement(n))return;let o=[...t,i];if(n.type===N.Fragment){r.push.apply(r,NM(n.props.children,o));return}n.type!==LM&&Xi(!1),!n.props.index||!n.props.children||Xi(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=NM(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Lre="6";try{window.__reactRouterVersion=Lre}catch{}const Nre="startTransition",GD=zP[Nre];function Rre(e){let{basename:t,children:r,future:n,window:i}=e,o=N.useRef();o.current==null&&(o.current=Jte({window:i,v5Compat:!0}));let a=o.current,[s,l]=N.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=N.useCallback(c=>{u&&GD?GD(()=>l(c)):l(c)},[l,u]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.useEffect(()=>Dre(n),[n]),N.createElement(jre,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}var HD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(HD||(HD={}));var KD;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(KD||(KD={}));const Cn=N.forwardRef(({className:e,...t},r)=>L.jsx("div",{ref:r,className:sn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Cn.displayName="Card";const ao=N.forwardRef(({className:e,...t},r)=>L.jsx("div",{ref:r,className:sn("flex flex-col space-y-1.5 p-6",e),...t}));ao.displayName="CardHeader";const so=N.forwardRef(({className:e,...t},r)=>L.jsx("h3",{ref:r,className:sn("text-2xl font-semibold leading-none tracking-tight",e),...t}));so.displayName="CardTitle";const zre=N.forwardRef(({className:e,...t},r)=>L.jsx("p",{ref:r,className:sn("text-sm text-muted-foreground",e),...t}));zre.displayName="CardDescription";const Rn=N.forwardRef(({className:e,...t},r)=>L.jsx("div",{ref:r,className:sn("p-6 pt-0",e),...t}));Rn.displayName="CardContent";const Bre=N.forwardRef(({className:e,...t},r)=>L.jsx("div",{ref:r,className:sn("flex items-center p-6 pt-0",e),...t}));Bre.displayName="CardFooter";const Ure=FE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ba=N.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},o)=>{const a=n?mY:"button";return L.jsx(a,{className:sn(Ure({variant:t,size:r,className:e})),ref:o,...i})});Ba.displayName="Button";const Wre=FE("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _m({className:e,variant:t,...r}){return L.jsx("div",{className:sn(Wre({variant:t}),e),...r})}const F_=new Map,uu=[],Vre=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=F_.get(e);if(n===void 0)F_.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const i=uu.indexOf(e);i!==-1&&uu.splice(i,1);for(let o=0;o<uu.length;o++)if(F_.get(uu[o]).priority<=r){uu.splice(o,0,e);return}uu.push(e)}return}throw new TypeError("not a valid backend")},Gre=async e=>{const t=F_.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},Hre=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?uu:r;let i;const o=[],a=new Set;for(const l of n){const u=await Gre(l);typeof u=="string"?o.push({name:l,err:u}):(i||(i=u),i===u&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${o.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:u}of o)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${u}`);const s=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,u)=>u==="executionProviders"?s:Reflect.get(l,u)})]},Kre="1.21.0";let qD="warning";const _a={wasm:{},webgl:{},webgpu:{},versions:{common:Kre},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);qD=e}},get logLevel(){return qD}};Object.defineProperty(_a,"logLevel",{enumerable:!0});const qre=_a,Xre=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let i,o;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],o=e.dims[3]):(i=e.dims[3],o=e.dims[2]);const a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",s=t==null?void 0:t.norm;let l,u;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?u=[0,0,0,0]:typeof s.bias=="number"?u=[s.bias,s.bias,s.bias,s.bias]:(u=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(u[3]=s.bias[3]));const d=o*i;let c=0,f=d,p=d*2,h=-1;a==="RGBA"?(c=0,f=d,p=d*2,h=d*3):a==="RGB"?(c=0,f=d,p=d*2):a==="RBG"&&(c=0,p=d,f=d*2);for(let m=0;m<o;m++)for(let v=0;v<i;v++){const g=(e.data[c++]-u[0])*l[0],_=(e.data[f++]-u[1])*l[1],b=(e.data[p++]-u[2])*l[2],w=h===-1?255:(e.data[h++]-u[3])*l[3];n.fillStyle="rgba("+g+","+_+","+b+","+w+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Qre=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let i,o,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],o=e.dims[1],a=e.dims[3]):(i=e.dims[3],o=e.dims[2],a=e.dims[1]);const s=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm;let u,d;l===void 0||l.mean===void 0?u=[255,255,255,255]:typeof l.mean=="number"?u=[l.mean,l.mean,l.mean,l.mean]:(u=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(u[3]=l.mean[3])),l===void 0||l.bias===void 0?d=[0,0,0,0]:typeof l.bias=="number"?d=[l.bias,l.bias,l.bias,l.bias]:(d=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(d[3]=l.bias[3]));const c=o*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const f=4;let p=0,h=1,m=2,v=3,g=0,_=c,b=c*2,w=-1;s==="RGBA"?(g=0,_=c,b=c*2,w=c*3):s==="RGB"?(g=0,_=c,b=c*2):s==="RBG"&&(g=0,b=c,_=c*2),n=r.createImageData(i,o);for(let y=0;y<o*i;p+=f,h+=f,m+=f,v+=f,y++)n.data[p]=(e.data[g++]-d[0])*u[0],n.data[h]=(e.data[_++]-d[1])*u[1],n.data[m]=(e.data[b++]-d[2])*u[2],n.data[v]=w===-1?255:(e.data[w++]-d[3])*u[3]}else throw new Error("Can not access image data");return n},rx=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,i=t.norm??{mean:255,bias:0};let o,a;typeof i.mean=="number"?o=[i.mean,i.mean,i.mean,i.mean]:o=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];const s=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",u=r*n,d=l==="RGBA"?new Float32Array(u*4):new Float32Array(u*3);let c=4,f=0,p=1,h=2,m=3,v=0,g=u,_=u*2,b=-1;s==="RGB"&&(c=3,f=0,p=1,h=2,m=-1),l==="RGBA"?b=u*3:l==="RBG"?(v=0,_=u,g=u*2):l==="BGR"&&(_=0,g=u,v=u*2);for(let y=0;y<u;y++,f+=c,h+=c,p+=c,m+=c)d[v++]=(e[f]+a[0])/o[0],d[g++]=(e[p]+a[1])/o[1],d[_++]=(e[h]+a[2])/o[2],b!==-1&&m!==-1&&(d[b++]=(e[m]+a[3])/o[3]);return l==="RGBA"?new Oo("float32",d,[1,4,r,n]):new Oo("float32",d,[1,3,r,n])},Yre=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,o=typeof e=="string";let a,s=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},u=d=>typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||d instanceof OffscreenCanvas?d.getContext("2d"):null;if(r){const d=l();d.width=e.width,d.height=e.height;const c=u(d);if(c!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(s=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=f,s.width=p}else s.tensorFormat="RGBA",s.height=f,s.width=p;c.drawImage(e,0,0),a=c.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let d,c;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(d=t.resizedHeight,c=t.resizedWidth):(d=e.height,c=e.width),t!==void 0&&(s=t),s.format="RGBA",s.height=d,s.width=c,t!==void 0){const f=l();f.width=c,f.height=d;const p=u(f);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,c,d).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const d=l();d.width=e.width,d.height=e.height;const c=u(d);if(c!=null){const f=e.height,p=e.width;return c.drawImage(e,0,0,p,f),a=c.getImageData(0,0,p,f).data,s.height=f,s.width=p,rx(a,s)}else throw new Error("Can not access image data")}else{if(o)return new Promise((d,c)=>{const f=l(),p=u(f);if(!e||!p)return c();const h=new Image;h.crossOrigin="Anonymous",h.src=e,h.onload=()=>{f.width=h.width,f.height=h.height,p.drawImage(h,0,0,f.width,f.height);const m=p.getImageData(0,0,f.width,f.height);s.height=f.height,s.width=f.width,d(rx(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return rx(a,s);throw new Error("Input data provided is not supported - aborted tensor creation")},Zre=(e,t)=>{const{width:r,height:n,download:i,dispose:o}=t,a=[1,n,r,4];return new Oo({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:o})},Jre=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:o}=t;return new Oo({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:o})},ene=(e,t)=>{const{dataType:r,dims:n,download:i,dispose:o}=t;return new Oo({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:o})},tne=(e,t,r)=>new Oo({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),Bc=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),L_=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let XD=!1;const rne=()=>{if(!XD){XD=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(Bc.set("int64",BigInt64Array),L_.set(BigInt64Array,"int64")),t&&(Bc.set("uint64",BigUint64Array),L_.set(BigUint64Array,"uint64")),n?(Bc.set("float16",r),L_.set(r,"float16")):Bc.set("float16",Uint16Array)}},nne=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},ine=(e,t)=>{switch(e.location){case"cpu":return new Oo(e.type,e.data,t);case"cpu-pinned":return new Oo({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Oo({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Oo({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Oo({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Oo=class{constructor(t,r,n){rne();let i,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,i=t.type,o=t.dims,t.location){case"cpu-pinned":{const s=Bc.get(i);if(!s)throw new TypeError(`unsupported type "${i}" to create tensor from pinned buffer`);if(!(t.data instanceof s))throw new TypeError(`buffer should be of type ${s.name}`);this.cpuData=t.data;break}case"texture":{if(i!=="float32")throw new TypeError(`unsupported type "${i}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(i!=="float32"&&i!=="float16"&&i!=="int32"&&i!=="int64"&&i!=="uint32"&&i!=="uint64"&&i!=="int8"&&i!=="uint8"&&i!=="bool"&&i!=="uint4"&&i!=="int4")throw new TypeError(`unsupported type "${i}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let s,l;if(typeof t=="string")if(i=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");s=r}else{const u=Bc.get(t);if(u===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&u===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${u.name} as data.`);t==="uint64"||t==="int64"?s=u.from(r,BigInt):s=u.from(r)}else if(r instanceof u)s=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")s=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&u!==Uint16Array)s=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${i} tensor's data must be type of ${u}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const u=typeof t[0];if(u==="string")i="string",s=t;else if(u==="boolean")i="bool",s=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${u}.`)}else if(t instanceof Uint8ClampedArray)i="uint8",s=Uint8Array.from(t);else{const u=L_.get(t.constructor);if(u===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=u,s=t}if(l===void 0)l=[s.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");o=l,this.cpuData=s,this.dataLocation="cpu"}const a=nne(o);if(this.cpuData&&a!==this.cpuData.length&&!((i==="uint4"||i==="int4")&&Math.ceil(a/2)===this.cpuData.length))throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=i,this.dims=o,this.size=a}static async fromImage(t,r){return Yre(t,r)}static fromTexture(t,r){return Zre(t,r)}static fromGpuBuffer(t,r){return Jre(t,r)}static fromMLTensor(t,r){return ene(t,r)}static fromPinnedBuffer(t,r,n){return tne(t,r,n)}toDataURL(t){return Xre(this,t)}toImageData(t){return Qre(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ine(this,t)}};const Sc=Oo,NV=(e,t)=>{(typeof _a.trace>"u"?!_a.wasm.trace:!_a.trace)||console.timeStamp(`${e}::ORT::${t}`)},RV=(e,t)=>{var i;const r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[];let n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[o].trim().split(" ")[1]}`;t&&(a+=`::${t}`),NV("CPU",a);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},RM=e=>{(typeof _a.trace>"u"?!_a.wasm.trace:!_a.trace)||RV("BEGIN",e)},zM=e=>{(typeof _a.trace>"u"?!_a.wasm.trace:!_a.trace)||RV("END",e)};let one=class zV{constructor(t){this.handler=t}async run(t,r,n){RM();const i={};let o={};if(typeof t!="object"||t===null||t instanceof Sc||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Sc)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(const u of r){if(typeof u!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(u)===-1)throw new RangeError(`'fetches' contains invalid output name: ${u}.`);i[u]=null}if(typeof n=="object"&&n!==null)o=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let u=!1;const d=Object.getOwnPropertyNames(r);for(const c of this.outputNames)if(d.indexOf(c)!==-1){const f=r[c];(f===null||f instanceof Sc)&&(u=!0,a=!1,i[c]=f)}if(u){if(typeof n=="object"&&n!==null)o=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else o=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const u of this.inputNames)if(typeof t[u]>"u")throw new Error(`input '${u}' is missing in 'feeds'.`);if(a)for(const u of this.outputNames)i[u]=null;const s=await this.handler.run(t,i,o),l={};for(const u in s)if(Object.hasOwnProperty.call(s,u)){const d=s[u];d instanceof Sc?l[u]=d:l[u]=new Sc(d.type,d.data,d.dims)}return zM(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){RM();let o,a={};if(typeof t=="string"){if(o=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const d=t;let c=0,f=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=d.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${d.byteLength}).`);if(f=t.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>d.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${d.byteLength-c}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");o=new Uint8Array(d,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[s,l]=await Hre(a),u=await s.createInferenceSessionHandler(o,l);return zM(),new zV(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const ane=one,sne=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:ane,TRACE:NV,TRACE_FUNC_BEGIN:RM,TRACE_FUNC_END:zM,Tensor:Sc,env:qre,registerBackend:Vre},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.22.0-dev.20250409-89f8206ba4
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var ZE=Object.defineProperty,lne=Object.getOwnPropertyDescriptor,une=Object.getOwnPropertyNames,cne=Object.prototype.hasOwnProperty,dne=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),qe=(e,t)=>()=>(e&&(t=e(e=0)),t),af=(e,t)=>{for(var r in t)ZE(e,r,{get:t[r],enumerable:!0})},fne=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of une(t))!cne.call(e,i)&&i!==r&&ZE(e,i,{get:()=>t[i],enumerable:!(n=lne(t,i))||n.enumerable});return e},xh=e=>fne(ZE({},"__esModule",{value:!0}),e),ip,Xs,yu,QD,BV,UV=qe(()=>{ip=new Map,Xs=[],yu=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=ip.get(e);if(n===void 0)ip.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let i=Xs.indexOf(e);i!==-1&&Xs.splice(i,1);for(let o=0;o<Xs.length;o++)if(ip.get(Xs[o]).priority<=r){Xs.splice(o,0,e);return}Xs.push(e)}return}throw new TypeError("not a valid backend")},QD=async e=>{let t=ip.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},BV=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?Xs:r,i,o=[],a=new Set;for(let l of n){let u=await QD(l);typeof u=="string"?o.push({name:l,err:u}):(i||(i=u),i===u&&a.add(l))}if(!i)throw new Error(`no available backend found. ERR: ${o.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:u}of o)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${u}`);let s=t.filter(l=>a.has(typeof l=="string"?l:l.name));return[i,new Proxy(e,{get:(l,u)=>u==="executionProviders"?s:Reflect.get(l,u)})]}}),pne=qe(()=>{UV()}),WV,hne=qe(()=>{WV="1.22.0-dev.20250409-89f8206ba4"}),nx,Eo,VV=qe(()=>{hne(),nx="warning",Eo={wasm:{},webgl:{},webgpu:{},versions:{common:WV},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);nx=e}},get logLevel(){return nx}},Object.defineProperty(Eo,"logLevel",{enumerable:!0})}),Or,mne=qe(()=>{VV(),Or=Eo}),GV,HV,gne=qe(()=>{GV=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let i,o;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],o=e.dims[3]):(i=e.dims[3],o=e.dims[2]);let a=(t==null?void 0:t.format)!==void 0?t.format:"RGB",s=t==null?void 0:t.norm,l,u;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?u=[0,0,0,0]:typeof s.bias=="number"?u=[s.bias,s.bias,s.bias,s.bias]:(u=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(u[3]=s.bias[3]));let d=o*i,c=0,f=d,p=d*2,h=-1;a==="RGBA"?(c=0,f=d,p=d*2,h=d*3):a==="RGB"?(c=0,f=d,p=d*2):a==="RBG"&&(c=0,p=d,f=d*2);for(let m=0;m<o;m++)for(let v=0;v<i;v++){let g=(e.data[c++]-u[0])*l[0],_=(e.data[f++]-u[1])*l[1],b=(e.data[p++]-u[2])*l[2],w=h===-1?255:(e.data[h++]-u[3])*l[3];n.fillStyle="rgba("+g+","+_+","+b+","+w+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},HV=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,o,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(i=e.dims[2],o=e.dims[1],a=e.dims[3]):(i=e.dims[3],o=e.dims[2],a=e.dims[1]);let s=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm,u,d;l===void 0||l.mean===void 0?u=[255,255,255,255]:typeof l.mean=="number"?u=[l.mean,l.mean,l.mean,l.mean]:(u=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(u[3]=l.mean[3])),l===void 0||l.bias===void 0?d=[0,0,0,0]:typeof l.bias=="number"?d=[l.bias,l.bias,l.bias,l.bias]:(d=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(d[3]=l.bias[3]));let c=o*i;if(t!==void 0&&(t.format!==void 0&&a===4&&t.format!=="RGBA"||a===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let f=4,p=0,h=1,m=2,v=3,g=0,_=c,b=c*2,w=-1;s==="RGBA"?(g=0,_=c,b=c*2,w=c*3):s==="RGB"?(g=0,_=c,b=c*2):s==="RBG"&&(g=0,b=c,_=c*2),n=r.createImageData(i,o);for(let y=0;y<o*i;p+=f,h+=f,m+=f,v+=f,y++)n.data[p]=(e.data[g++]-d[0])*u[0],n.data[h]=(e.data[_++]-d[1])*u[1],n.data[m]=(e.data[b++]-d[2])*u[2],n.data[v]=w===-1?255:(e.data[w++]-d[3])*u[3]}else throw new Error("Can not access image data");return n}}),Kg,KV,qV,XV,QV,YV,_ne=qe(()=>{JE(),Kg=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,i=t.norm??{mean:255,bias:0},o,a;typeof i.mean=="number"?o=[i.mean,i.mean,i.mean,i.mean]:o=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?a=[i.bias,i.bias,i.bias,i.bias]:a=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let s=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",u=r*n,d=l==="RGBA"?new Float32Array(u*4):new Float32Array(u*3),c=4,f=0,p=1,h=2,m=3,v=0,g=u,_=u*2,b=-1;s==="RGB"&&(c=3,f=0,p=1,h=2,m=-1),l==="RGBA"?b=u*3:l==="RBG"?(v=0,_=u,g=u*2):l==="BGR"&&(_=0,g=u,v=u*2);for(let w=0;w<u;w++,f+=c,h+=c,p+=c,m+=c)d[v++]=(e[f]+a[0])/o[0],d[g++]=(e[p]+a[1])/o[1],d[_++]=(e[h]+a[2])/o[2],b!==-1&&m!==-1&&(d[b++]=(e[m]+a[3])/o[3]);return l==="RGBA"?new io("float32",d,[1,4,r,n]):new io("float32",d,[1,3,r,n])},KV=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,i=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,o=typeof e=="string",a,s=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},u=d=>typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||d instanceof OffscreenCanvas?d.getContext("2d"):null;if(r){let d=l();d.width=e.width,d.height=e.height;let c=u(d);if(c!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(s=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=f,s.width=p}else s.tensorFormat="RGBA",s.height=f,s.width=p;c.drawImage(e,0,0),a=c.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let d,c;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(d=t.resizedHeight,c=t.resizedWidth):(d=e.height,c=e.width),t!==void 0&&(s=t),s.format="RGBA",s.height=d,s.width=c,t!==void 0){let f=l();f.width=c,f.height=d;let p=u(f);if(p!=null)p.putImageData(e,0,0),a=p.getImageData(0,0,c,d).data;else throw new Error("Can not access image data")}else a=e.data}else if(i){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let d=l();d.width=e.width,d.height=e.height;let c=u(d);if(c!=null){let f=e.height,p=e.width;return c.drawImage(e,0,0,p,f),a=c.getImageData(0,0,p,f).data,s.height=f,s.width=p,Kg(a,s)}else throw new Error("Can not access image data")}else{if(o)return new Promise((d,c)=>{let f=l(),p=u(f);if(!e||!p)return c();let h=new Image;h.crossOrigin="Anonymous",h.src=e,h.onload=()=>{f.width=h.width,f.height=h.height,p.drawImage(h,0,0,f.width,f.height);let m=p.getImageData(0,0,f.width,f.height);s.height=f.height,s.width=f.width,d(Kg(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(a!==void 0)return Kg(a,s);throw new Error("Input data provided is not supported - aborted tensor creation")},qV=(e,t)=>{let{width:r,height:n,download:i,dispose:o}=t,a=[1,n,r,4];return new io({location:"texture",type:"float32",texture:e,dims:a,download:i,dispose:o})},XV=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:o}=t;return new io({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:i,dispose:o})},QV=(e,t)=>{let{dataType:r,dims:n,download:i,dispose:o}=t;return new io({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:i,dispose:o})},YV=(e,t,r)=>new io({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),pu,Cp,ix,ZV,vne=qe(()=>{pu=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Cp=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ix=!1,ZV=()=>{if(!ix){ix=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(pu.set("int64",BigInt64Array),Cp.set(BigInt64Array,"int64")),t&&(pu.set("uint64",BigUint64Array),Cp.set(BigUint64Array,"uint64")),n?(pu.set("float16",r),Cp.set(r,"float16")):pu.set("float16",Uint16Array)}}}),JV,e5,yne=qe(()=>{JE(),JV=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},e5=(e,t)=>{switch(e.location){case"cpu":return new io(e.type,e.data,t);case"cpu-pinned":return new io({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new io({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new io({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new io({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),io,JE=qe(()=>{gne(),_ne(),vne(),yne(),io=class{constructor(e,t,r){ZV();let n,i;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,i=e.dims,e.location){case"cpu-pinned":{let a=pu.get(n);if(!a)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,s;if(typeof e=="string")if(n=e,s=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");a=t}else{let l=pu.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?a=l.from(t,BigInt):a=l.from(t)}else if(t instanceof l)a=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")a=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)a=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",a=e;else if(l==="boolean")n="bool",a=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",a=Uint8Array.from(e);else{let l=Cp.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,a=e}if(s===void 0)s=[a.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");i=s,this.cpuData=a,this.dataLocation="cpu"}let o=JV(i);if(this.cpuData&&o!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(o/2)===this.cpuData.length))throw new Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=o}static async fromImage(e,t){return KV(e,t)}static fromTexture(e,t){return qV(e,t)}static fromGpuBuffer(e,t){return XV(e,t)}static fromMLTensor(e,t){return QV(e,t)}static fromPinnedBuffer(e,t,r){return YV(e,t,r)}toDataURL(e){return GV(this,e)}toImageData(e){return HV(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return e5(this,e)}}}),pa,t5=qe(()=>{JE(),pa=io}),Mh,ox,xa,Fo,r5=qe(()=>{VV(),Mh=(e,t)=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||console.timeStamp(`${e}::ORT::${t}`)},ox=(e,t)=>{var i;let r=((i=new Error().stack)==null?void 0:i.split(/\r\n|\r|\n/g))||[],n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let a=`FUNC_${e}::${r[o].trim().split(" ")[1]}`;t&&(a+=`::${t}`),Mh("CPU",a);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},xa=e=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||ox("BEGIN",e)},Fo=e=>{(typeof Eo.trace>"u"?!Eo.wasm.trace:!Eo.trace)||ox("END",e)}}),n5,bne=qe(()=>{UV(),t5(),r5(),n5=class i5{constructor(t){this.handler=t}async run(t,r,n){xa();let i={},o={};if(typeof t!="object"||t===null||t instanceof pa||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let a=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof pa)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");a=!1;for(let u of r){if(typeof u!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(u)===-1)throw new RangeError(`'fetches' contains invalid output name: ${u}.`);i[u]=null}if(typeof n=="object"&&n!==null)o=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let u=!1,d=Object.getOwnPropertyNames(r);for(let c of this.outputNames)if(d.indexOf(c)!==-1){let f=r[c];(f===null||f instanceof pa)&&(u=!0,a=!1,i[c]=f)}if(u){if(typeof n=="object"&&n!==null)o=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else o=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let u of this.inputNames)if(typeof t[u]>"u")throw new Error(`input '${u}' is missing in 'feeds'.`);if(a)for(let u of this.outputNames)i[u]=null;let s=await this.handler.run(t,i,o),l={};for(let u in s)if(Object.hasOwnProperty.call(s,u)){let d=s[u];d instanceof pa?l[u]=d:l[u]=new pa(d.type,d.data,d.dims)}return Fo(),l}async release(){return this.handler.dispose()}static async create(t,r,n,i){xa();let o,a={};if(typeof t=="string"){if(o=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,typeof r=="object"&&r!==null)a=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let d=t,c=0,f=t.byteLength;if(typeof r=="object"&&r!==null)a=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=d.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${d.byteLength}).`);if(f=t.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>d.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${d.byteLength-c}].`);if(typeof i=="object"&&i!==null)a=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");o=new Uint8Array(d,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[s,l]=await BV(a),u=await s.createInferenceSessionHandler(o,l);return Fo(),new i5(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),eS,wne=qe(()=>{bne(),eS=n5}),xne=qe(()=>{}),Mne=qe(()=>{}),Tne=qe(()=>{}),Pne=qe(()=>{}),o5={};af(o5,{InferenceSession:()=>eS,TRACE:()=>Mh,TRACE_FUNC_BEGIN:()=>xa,TRACE_FUNC_END:()=>Fo,Tensor:()=>pa,env:()=>Or,registerBackend:()=>yu});var Ma=qe(()=>{pne(),mne(),wne(),t5(),xne(),Mne(),r5(),Tne(),Pne()}),tS=qe(()=>{}),a5={};af(a5,{default:()=>s5});var ax,sx,s5,Ene=qe(()=>{var e;fG(),Ju(),rS(),ax="ort-wasm-proxy-worker",sx=((e=globalThis.self)==null?void 0:e.name)===ax,sx&&(self.onmessage=t=>{let{type:r,in:n}=t.data;try{switch(r){case"init-wasm":nS(n.wasm).then(()=>{wS(n).then(()=>{postMessage({type:r})},i=>{postMessage({type:r,err:i})})},i=>{postMessage({type:r,err:i})});break;case"init-ep":{let{epName:i,env:o}=n;xS(o,i).then(()=>{postMessage({type:r})},a=>{postMessage({type:r,err:a})});break}case"copy-from":{let{buffer:i}=n,o=Ev(i);postMessage({type:r,out:o});break}case"create":{let{model:i,options:o}=n;MS(i,o).then(a=>{postMessage({type:r,out:a})},a=>{postMessage({type:r,err:a})});break}case"release":TS(n),postMessage({type:r});break;case"run":{let{sessionId:i,inputIndices:o,inputs:a,outputIndices:s,options:l}=n;PS(i,o,a,s,new Array(s.length).fill(null),l).then(u=>{u.some(d=>d[3]!=="cpu")?postMessage({type:r,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:r,out:u},SS([...a,...u]))},u=>{postMessage({type:r,err:u})});break}case"end-profiling":ES(n),postMessage({type:r});break;default:}}catch(i){postMessage({type:r,err:i})}}),s5=sx?null:t=>new Worker(t??Zi,{type:"module",name:ax})}),l5={};af(l5,{default:()=>u5});var lx,ux,u5,YD,Sne=qe(()=>{var e,t;ux=(lx=import.meta.url,async function(r={}){var _c;var n,i,o=r,a=new Promise((P,A)=>{n=P,i=A}),s=typeof window=="object",l=typeof WorkerGlobalScope<"u",u=l&&((_c=self.name)==null?void 0:_c.startsWith("em-pthread"));o.mountExternalData=(P,A)=>{P.startsWith("./")&&(P=P.substring(2)),(o.Eb||(o.Eb=new Map)).set(P,A)},o.unmountExternalData=()=>{delete o.Eb};var d=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let c=P=>async(...A)=>{var B;try{if(o.Fb)throw Error("Session already started");let X=o.Fb={dc:A[0],errors:[]},ee=await P(...A);if(o.Fb!==X)throw Error("Session mismatch");(B=o.Jb)==null||B.flush();let me=X.errors;if(0<me.length){let Ie=await Promise.all(me);if(Ie=Ie.filter(We=>We),0<Ie.length)throw Error(Ie.join(`
`))}return ee}finally{o.Fb=null}};o.jsepInit=(P,A)=>{if(P==="webgpu"){[o.Jb,o.Ub,o.Yb,o.Kb,o.Xb,o.jb,o.Zb,o.ac,o.Vb,o.Wb,o.$b]=A;let B=o.Jb;o.jsepRegisterBuffer=(X,ee,me,Ie)=>B.registerBuffer(X,ee,me,Ie),o.jsepGetBuffer=X=>B.getBuffer(X),o.jsepCreateDownloader=(X,ee,me)=>B.createDownloader(X,ee,me),o.jsepOnCreateSession=X=>{B.onCreateSession(X)},o.jsepOnReleaseSession=X=>{B.onReleaseSession(X)},o.jsepOnRunStart=X=>B.onRunStart(X),o.bc=(X,ee)=>{B.upload(X,ee)}}else if(P==="webnn"){let B=A[0];[o.nc,o.Nb,o.webnnEnsureTensor,o.Ob,o.webnnDownloadTensor]=A.slice(1),o.webnnReleaseTensorId=o.Nb,o.webnnUploadTensor=o.Ob,o.webnnOnRunStart=X=>B.onRunStart(X),o.webnnOnRunEnd=B.onRunEnd.bind(B),o.webnnRegisterMLContext=(X,ee)=>{B.registerMLContext(X,ee)},o.webnnOnReleaseSession=X=>{B.onReleaseSession(X)},o.webnnCreateMLTensorDownloader=(X,ee)=>B.createMLTensorDownloader(X,ee),o.webnnRegisterMLTensor=(X,ee,me,Ie)=>B.registerMLTensor(X,ee,me,Ie),o.webnnCreateMLContext=X=>B.createMLContext(X),o.webnnRegisterMLConstant=(X,ee,me,Ie,We,nt)=>B.registerMLConstant(X,ee,me,Ie,We,o.Eb,nt),o.webnnRegisterGraphInput=B.registerGraphInput.bind(B),o.webnnIsGraphInput=B.isGraphInput.bind(B),o.webnnCreateTemporaryTensor=B.createTemporaryTensor.bind(B),o.webnnIsInt64Supported=B.isInt64Supported.bind(B)}};let f=()=>{let P=(A,B,X)=>(...ee)=>{let me=vn,Ie=B==null?void 0:B();ee=A(...ee);let We=B==null?void 0:B();return Ie!==We&&(A=We,X(Ie),B=X=null),vn!=me?new Promise((nt,ht)=>{ti={resolve:nt,reject:ht}}):ee};(()=>{for(let A of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])o[A]=P(o[A],()=>o[A],B=>o[A]=B)})(),c!==void 0&&(o._OrtRun=c(o._OrtRun),o._OrtRunWithBinding=c(o._OrtRunWithBinding)),f=void 0};o.asyncInit=()=>{f==null||f()};var p,h,m=Object.assign({},o),v=(P,A)=>{throw A},g="";(s||l)&&(l?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),lx&&(g=lx),g=g.startsWith("blob:")?"":g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(h=P=>{var A=new XMLHttpRequest;return A.open("GET",P,!1),A.responseType="arraybuffer",A.send(null),new Uint8Array(A.response)}),p=async P=>{if(V(P))return new Promise((B,X)=>{var ee=new XMLHttpRequest;ee.open("GET",P,!0),ee.responseType="arraybuffer",ee.onload=()=>{ee.status==200||ee.status==0&&ee.response?B(ee.response):X(ee.status)},ee.onerror=X,ee.send(null)});var A=await fetch(P,{credentials:"same-origin"});if(A.ok)return A.arrayBuffer();throw Error(A.status+" : "+A.url)});var _=console.log.bind(console),b=console.error.bind(console),w=_,y=b;Object.assign(o,m),m=null;var x,M,T,S,$,k,F,j,U,z,G,H,W,Y=o.wasmBinary,te=!1,V=P=>P.startsWith("file://");function I(){return x.buffer!=S.buffer&&ne(),S}function K(){return x.buffer!=S.buffer&&ne(),$}function ae(){return x.buffer!=S.buffer&&ne(),k}function pe(){return x.buffer!=S.buffer&&ne(),F}function de(){return x.buffer!=S.buffer&&ne(),j}function be(){return x.buffer!=S.buffer&&ne(),U}function Ne(){return x.buffer!=S.buffer&&ne(),z}function Te(){return x.buffer!=S.buffer&&ne(),W}if(u){let P=function(A){try{var B=A.data,X=B.Bb;if(X==="load"){let ee=[];self.onmessage=me=>ee.push(me),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let me of ee)P(me);self.onmessage=P};for(let me of B.Rb)o[me]&&!o[me].proxy||(o[me]=(...Ie)=>{postMessage({Bb:"callHandler",Qb:me,args:Ie})},me=="print"&&(w=o[me]),me=="printErr"&&(y=o[me]));x=B.kc,ne(),ge(B.lc)}else if(X==="run"){Wo(B.Ab),fc(B.Ab,0,0,1,0,0),Ni(),_e(B.Ab),re||(Lf(),re=!0);try{Pa(B.fc,B.Hb)}catch(ee){if(ee!="unwind")throw ee}}else B.target!=="setimmediate"&&(X==="checkMailbox"?re&&ke():X&&(y(`worker: received unknown command ${X}`),y(B)))}catch(ee){throw pc(),ee}};var ge,re=!1;y=function(...A){A=A.join(" "),console.error(A)},self.alert=function(...A){postMessage({Bb:"alert",text:A.join(" "),ic:Vl()})},self.onunhandledrejection=A=>{throw A.reason||A},self.onmessage=P}function ne(){var P=x.buffer;o.HEAP8=S=new Int8Array(P),o.HEAP16=k=new Int16Array(P),o.HEAPU8=$=new Uint8Array(P),o.HEAPU16=F=new Uint16Array(P),o.HEAP32=j=new Int32Array(P),o.HEAPU32=U=new Uint32Array(P),o.HEAPF32=z=new Float32Array(P),o.HEAPF64=W=new Float64Array(P),o.HEAP64=G=new BigInt64Array(P),o.HEAPU64=H=new BigUint64Array(P)}function Z(){u?startWorker(o):xt.Ca()}u||(x=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),ne());var ve,Ae=0,Ee=null;function we(){if(--Ae==0&&Ee){var P=Ee;Ee=null,P()}}function $e(P){throw y(P="Aborted("+P+")"),te=!0,P=new WebAssembly.RuntimeError(P+". Build with -sASSERTIONS for more info."),i(P),P}function Me(){return{a:{L:Xe,Aa:ze,b:ei,$:St,A:D,pa:se,X:ce,Z:Se,qa:Re,na:dt,ga:Ct,ma:Mt,J:jt,Y:ft,V:ir,oa:lr,W:si,va:On,E:Sa,Q:ci,O:di,D:He,u:ut,r:Mr,P:ts,z:R,R:J,ja:ue,T:Ke,aa:et,M:ct,F:At,ia:_e,sa:or,t:fr,Ba:_n,w:wo,o:Xr,l:pi,c:Vo,n:ac,j:Om,v:km,p:Im,f:Rs,s:Dm,m:jm,e:Fm,k:Lm,i:Nm,g:zs,d:Rm,da:zm,ea:Pf,fa:Bm,ba:Ef,ca:sc,N:Cf,xa:$f,ua:Um,h:uc,C:Wm,G:Vm,ta:rb,x:Gm,ra:Hm,U:Km,q:Sf,y:qm,K:Xm,S:Qm,za:Af,ya:Ym,ka:Zm,la:kf,_:Ut,B:Jm,I:If,ha:cc,H:Df,a:x,wa:ot}}}var je={829644:(P,A,B,X,ee)=>{if(o===void 0||!o.Eb)return 1;if((P=Xt(Number(P>>>0))).startsWith("./")&&(P=P.substring(2)),!(P=o.Eb.get(P)))return 2;if(A=Number(A>>>0),B=Number(B>>>0),X=Number(X>>>0),A+B>P.byteLength)return 3;try{let me=P.subarray(A,A+B);switch(ee){case 0:K().set(me,X>>>0);break;case 1:o.mc?o.mc(X,me):o.bc(X,me);break;default:return 4}return 0}catch{return 4}},830468:(P,A,B)=>{o.Ob(P,K().subarray(A>>>0,A+B>>>0))},830532:()=>o.nc(),830574:P=>{o.Nb(P)},830611:()=>{o.Vb()},830642:()=>{o.Wb()},830671:()=>{o.$b()},830696:P=>o.Ub(P),830729:P=>o.Yb(P),830761:(P,A,B)=>{o.Kb(Number(P),Number(A),Number(B),!0)},830824:(P,A,B)=>{o.Kb(Number(P),Number(A),Number(B))},830881:()=>typeof wasmOffsetConverter<"u",830938:P=>{o.jb("Abs",P,void 0)},830989:P=>{o.jb("Neg",P,void 0)},831040:P=>{o.jb("Floor",P,void 0)},831093:P=>{o.jb("Ceil",P,void 0)},831145:P=>{o.jb("Reciprocal",P,void 0)},831203:P=>{o.jb("Sqrt",P,void 0)},831255:P=>{o.jb("Exp",P,void 0)},831306:P=>{o.jb("Erf",P,void 0)},831357:P=>{o.jb("Sigmoid",P,void 0)},831412:(P,A,B)=>{o.jb("HardSigmoid",P,{alpha:A,beta:B})},831491:P=>{o.jb("Log",P,void 0)},831542:P=>{o.jb("Sin",P,void 0)},831593:P=>{o.jb("Cos",P,void 0)},831644:P=>{o.jb("Tan",P,void 0)},831695:P=>{o.jb("Asin",P,void 0)},831747:P=>{o.jb("Acos",P,void 0)},831799:P=>{o.jb("Atan",P,void 0)},831851:P=>{o.jb("Sinh",P,void 0)},831903:P=>{o.jb("Cosh",P,void 0)},831955:P=>{o.jb("Asinh",P,void 0)},832008:P=>{o.jb("Acosh",P,void 0)},832061:P=>{o.jb("Atanh",P,void 0)},832114:P=>{o.jb("Tanh",P,void 0)},832166:P=>{o.jb("Not",P,void 0)},832217:(P,A,B)=>{o.jb("Clip",P,{min:A,max:B})},832286:P=>{o.jb("Clip",P,void 0)},832338:(P,A)=>{o.jb("Elu",P,{alpha:A})},832396:P=>{o.jb("Gelu",P,void 0)},832448:P=>{o.jb("Relu",P,void 0)},832500:(P,A)=>{o.jb("LeakyRelu",P,{alpha:A})},832564:(P,A)=>{o.jb("ThresholdedRelu",P,{alpha:A})},832634:(P,A)=>{o.jb("Cast",P,{to:A})},832692:P=>{o.jb("Add",P,void 0)},832743:P=>{o.jb("Sub",P,void 0)},832794:P=>{o.jb("Mul",P,void 0)},832845:P=>{o.jb("Div",P,void 0)},832896:P=>{o.jb("Pow",P,void 0)},832947:P=>{o.jb("Equal",P,void 0)},833e3:P=>{o.jb("Greater",P,void 0)},833055:P=>{o.jb("GreaterOrEqual",P,void 0)},833117:P=>{o.jb("Less",P,void 0)},833169:P=>{o.jb("LessOrEqual",P,void 0)},833228:(P,A,B,X,ee)=>{o.jb("ReduceMean",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},833403:(P,A,B,X,ee)=>{o.jb("ReduceMax",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},833577:(P,A,B,X,ee)=>{o.jb("ReduceMin",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},833751:(P,A,B,X,ee)=>{o.jb("ReduceProd",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},833926:(P,A,B,X,ee)=>{o.jb("ReduceSum",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834100:(P,A,B,X,ee)=>{o.jb("ReduceL1",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834273:(P,A,B,X,ee)=>{o.jb("ReduceL2",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834446:(P,A,B,X,ee)=>{o.jb("ReduceLogSum",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834623:(P,A,B,X,ee)=>{o.jb("ReduceSumSquare",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834803:(P,A,B,X,ee)=>{o.jb("ReduceLogSumExp",P,{keepDims:!!A,noopWithEmptyAxes:!!B,axes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},834983:P=>{o.jb("Where",P,void 0)},835036:(P,A,B)=>{o.jb("Transpose",P,{perm:A?Array.from(de().subarray(Number(A)>>>0,Number(B)>>>0)):[]})},835160:(P,A,B,X)=>{o.jb("DepthToSpace",P,{blocksize:A,mode:Xt(B),format:X?"NHWC":"NCHW"})},835293:(P,A,B,X)=>{o.jb("DepthToSpace",P,{blocksize:A,mode:Xt(B),format:X?"NHWC":"NCHW"})},835426:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn,Ca)=>{o.jb("ConvTranspose",P,{format:nt?"NHWC":"NCHW",autoPad:A,dilations:[B],group:X,kernelShape:[ee],pads:[me,Ie],strides:[We],wIsConst:()=>!!I()[ht>>>0],outputPadding:Ft?Array.from(de().subarray(Number(Ft)>>>0,Number(er)>>>0)):[],outputShape:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Mn)>>>0)):[],activation:Xt(Ca)})},835859:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("ConvTranspose",P,{format:We?"NHWC":"NCHW",autoPad:A,dilations:Array.from(de().subarray(Number(B)>>>0,2+(Number(B)>>>0)>>>0)),group:X,kernelShape:Array.from(de().subarray(Number(ee)>>>0,2+(Number(ee)>>>0)>>>0)),pads:Array.from(de().subarray(Number(me)>>>0,4+(Number(me)>>>0)>>>0)),strides:Array.from(de().subarray(Number(Ie)>>>0,2+(Number(Ie)>>>0)>>>0)),wIsConst:()=>!!I()[nt>>>0],outputPadding:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],outputShape:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[],activation:Xt(Mn)})},836520:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn,Ca)=>{o.jb("ConvTranspose",P,{format:nt?"NHWC":"NCHW",autoPad:A,dilations:[B],group:X,kernelShape:[ee],pads:[me,Ie],strides:[We],wIsConst:()=>!!I()[ht>>>0],outputPadding:Ft?Array.from(de().subarray(Number(Ft)>>>0,Number(er)>>>0)):[],outputShape:pr?Array.from(de().subarray(Number(pr)>>>0,Number(Mn)>>>0)):[],activation:Xt(Ca)})},836953:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("ConvTranspose",P,{format:We?"NHWC":"NCHW",autoPad:A,dilations:Array.from(de().subarray(Number(B)>>>0,2+(Number(B)>>>0)>>>0)),group:X,kernelShape:Array.from(de().subarray(Number(ee)>>>0,2+(Number(ee)>>>0)>>>0)),pads:Array.from(de().subarray(Number(me)>>>0,4+(Number(me)>>>0)>>>0)),strides:Array.from(de().subarray(Number(Ie)>>>0,2+(Number(Ie)>>>0)>>>0)),wIsConst:()=>!!I()[nt>>>0],outputPadding:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],outputShape:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[],activation:Xt(Mn)})},837614:(P,A)=>{o.jb("GlobalAveragePool",P,{format:A?"NHWC":"NCHW"})},837705:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("AveragePool",P,{format:Mn?"NHWC":"NCHW",auto_pad:A,ceil_mode:B,count_include_pad:X,storage_order:ee,dilations:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(de().subarray(Number(We)>>>0,Number(nt)>>>0)):[],pads:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],strides:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[]})},838184:(P,A)=>{o.jb("GlobalAveragePool",P,{format:A?"NHWC":"NCHW"})},838275:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("AveragePool",P,{format:Mn?"NHWC":"NCHW",auto_pad:A,ceil_mode:B,count_include_pad:X,storage_order:ee,dilations:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(de().subarray(Number(We)>>>0,Number(nt)>>>0)):[],pads:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],strides:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[]})},838754:(P,A)=>{o.jb("GlobalMaxPool",P,{format:A?"NHWC":"NCHW"})},838841:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("MaxPool",P,{format:Mn?"NHWC":"NCHW",auto_pad:A,ceil_mode:B,count_include_pad:X,storage_order:ee,dilations:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(de().subarray(Number(We)>>>0,Number(nt)>>>0)):[],pads:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],strides:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[]})},839316:(P,A)=>{o.jb("GlobalMaxPool",P,{format:A?"NHWC":"NCHW"})},839403:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn)=>{o.jb("MaxPool",P,{format:Mn?"NHWC":"NCHW",auto_pad:A,ceil_mode:B,count_include_pad:X,storage_order:ee,dilations:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(de().subarray(Number(We)>>>0,Number(nt)>>>0)):[],pads:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],strides:er?Array.from(de().subarray(Number(er)>>>0,Number(pr)>>>0)):[]})},839878:(P,A,B,X,ee)=>{o.jb("Gemm",P,{alpha:A,beta:B,transA:X,transB:ee})},839982:P=>{o.jb("MatMul",P,void 0)},840036:(P,A,B,X)=>{o.jb("ArgMax",P,{keepDims:!!A,selectLastIndex:!!B,axis:X})},840144:(P,A,B,X)=>{o.jb("ArgMin",P,{keepDims:!!A,selectLastIndex:!!B,axis:X})},840252:(P,A)=>{o.jb("Softmax",P,{axis:A})},840315:(P,A)=>{o.jb("Concat",P,{axis:A})},840375:(P,A,B,X,ee)=>{o.jb("Split",P,{axis:A,numOutputs:B,splitSizes:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},840531:P=>{o.jb("Expand",P,void 0)},840585:(P,A)=>{o.jb("Gather",P,{axis:Number(A)})},840656:(P,A)=>{o.jb("GatherElements",P,{axis:Number(A)})},840735:(P,A)=>{o.jb("GatherND",P,{batch_dims:Number(A)})},840814:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft)=>{o.jb("Resize",P,{antialias:A,axes:B?Array.from(de().subarray(Number(B)>>>0,Number(X)>>>0)):[],coordinateTransformMode:Xt(ee),cubicCoeffA:me,excludeOutside:Ie,extrapolationValue:We,keepAspectRatioPolicy:Xt(nt),mode:Xt(ht),nearestMode:Xt(Ft)})},841176:(P,A,B,X,ee,me,Ie)=>{o.jb("Slice",P,{starts:A?Array.from(de().subarray(Number(A)>>>0,Number(B)>>>0)):[],ends:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[],axes:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[]})},841440:P=>{o.jb("Tile",P,void 0)},841492:(P,A,B)=>{o.jb("InstanceNormalization",P,{epsilon:A,format:B?"NHWC":"NCHW"})},841606:(P,A,B)=>{o.jb("InstanceNormalization",P,{epsilon:A,format:B?"NHWC":"NCHW"})},841720:P=>{o.jb("Range",P,void 0)},841773:(P,A)=>{o.jb("Einsum",P,{equation:Xt(A)})},841854:(P,A,B,X,ee)=>{o.jb("Pad",P,{mode:A,value:B,pads:X?Array.from(de().subarray(Number(X)>>>0,Number(ee)>>>0)):[]})},841997:(P,A,B,X,ee,me)=>{o.jb("BatchNormalization",P,{epsilon:A,momentum:B,spatial:!!ee,trainingMode:!!X,format:me?"NHWC":"NCHW"})},842166:(P,A,B,X,ee,me)=>{o.jb("BatchNormalization",P,{epsilon:A,momentum:B,spatial:!!ee,trainingMode:!!X,format:me?"NHWC":"NCHW"})},842335:(P,A,B)=>{o.jb("CumSum",P,{exclusive:Number(A),reverse:Number(B)})},842432:(P,A,B)=>{o.jb("DequantizeLinear",P,{axis:A,blockSize:B})},842522:(P,A,B,X,ee)=>{o.jb("GridSample",P,{align_corners:A,mode:Xt(B),padding_mode:Xt(X),format:ee?"NHWC":"NCHW"})},842692:(P,A,B,X,ee)=>{o.jb("GridSample",P,{align_corners:A,mode:Xt(B),padding_mode:Xt(X),format:ee?"NHWC":"NCHW"})},842862:(P,A)=>{o.jb("ScatterND",P,{reduction:Xt(A)})},842947:(P,A,B,X,ee,me,Ie,We,nt)=>{o.jb("Attention",P,{numHeads:A,isUnidirectional:B,maskFilterValue:X,scale:ee,doRotary:me,qkvHiddenSizes:Ie?Array.from(de().subarray(Number(We)>>>0,Number(We)+Ie>>>0)):[],pastPresentShareBuffer:!!nt})},843219:P=>{o.jb("BiasAdd",P,void 0)},843274:P=>{o.jb("BiasSplitGelu",P,void 0)},843335:P=>{o.jb("FastGelu",P,void 0)},843391:(P,A,B,X,ee,me,Ie,We,nt,ht,Ft,er,pr,Mn,Ca,tg)=>{o.jb("Conv",P,{format:er?"NHWC":"NCHW",auto_pad:A,dilations:B?Array.from(de().subarray(Number(B)>>>0,Number(X)>>>0)):[],group:ee,kernel_shape:me?Array.from(de().subarray(Number(me)>>>0,Number(Ie)>>>0)):[],pads:We?Array.from(de().subarray(Number(We)>>>0,Number(nt)>>>0)):[],strides:ht?Array.from(de().subarray(Number(ht)>>>0,Number(Ft)>>>0)):[],w_is_const:()=>!!I()[Number(pr)>>>0],activation:Xt(Mn),activation_params:Ca?Array.from(Ne().subarray(Number(Ca)>>>0,Number(tg)>>>0)):[]})},843975:P=>{o.jb("Gelu",P,void 0)},844027:(P,A,B,X,ee,me,Ie,We,nt)=>{o.jb("GroupQueryAttention",P,{numHeads:A,kvNumHeads:B,scale:X,softcap:ee,doRotary:me,rotaryInterleaved:Ie,smoothSoftmax:We,localWindowSize:nt})},844244:(P,A,B,X)=>{o.jb("LayerNormalization",P,{axis:A,epsilon:B,simplified:!!X})},844355:(P,A,B,X)=>{o.jb("LayerNormalization",P,{axis:A,epsilon:B,simplified:!!X})},844466:(P,A,B,X,ee,me)=>{o.jb("MatMulNBits",P,{k:A,n:B,accuracyLevel:X,bits:ee,blockSize:me})},844593:(P,A,B,X,ee,me)=>{o.jb("MultiHeadAttention",P,{numHeads:A,isUnidirectional:B,maskFilterValue:X,scale:ee,doRotary:me})},844752:(P,A)=>{o.jb("QuickGelu",P,{alpha:A})},844816:(P,A,B,X,ee)=>{o.jb("RotaryEmbedding",P,{interleaved:!!A,numHeads:B,rotaryEmbeddingDim:X,scale:ee})},844955:(P,A,B)=>{o.jb("SkipLayerNormalization",P,{epsilon:A,simplified:!!B})},845057:(P,A,B)=>{o.jb("SkipLayerNormalization",P,{epsilon:A,simplified:!!B})},845159:(P,A,B,X)=>{o.jb("GatherBlockQuantized",P,{gatherAxis:A,quantizeAxis:B,blockSize:X})},845280:P=>{o.Zb(P)},845314:(P,A)=>o.ac(Number(P),Number(A),o.Fb.dc,o.Fb.errors)};function ze(P,A,B){return Dn(async()=>{await o.Xb(Number(P),Number(A),Number(B))})}function Xe(){return typeof wasmOffsetConverter<"u"}class Ce{constructor(A){le(this,"name","ExitStatus");this.message=`Program terminated with exit(${A})`,this.status=A}}var st=P=>{P.terminate(),P.onmessage=()=>{}},Ye=[],rt=P=>{Nt.length==0&&(cn(),vr(Nt[0]));var A=Nt.pop();if(!A)return 6;Pt.push(A),un[P.Ab]=A,A.Ab=P.Ab;var B={Bb:"run",fc:P.ec,Hb:P.Hb,Ab:P.Ab};return A.postMessage(B,P.Mb),0},Je=0,Ue=(P,A,...B)=>{for(var X=2*B.length,ee=ql(),me=mc(8*X),Ie=me>>>3,We=0;We<B.length;We++){var nt=B[We];typeof nt=="bigint"?(G[Ie+2*We]=1n,G[Ie+2*We+1]=nt):(G[Ie+2*We]=0n,Te()[Ie+2*We+1>>>0]=nt)}return P=Nf(P,0,X,me,A),Kl(ee),P};function ot(P){if(u)return Ue(0,1,P);if(T=P,!(0<Je)){for(var A of Pt)st(A);for(A of Nt)st(A);Nt=[],Pt=[],un={},te=!0}v(0,new Ce(P))}function lt(P){if(u)return Ue(1,0,P);Ut(P)}var Ut=P=>{if(T=P,u)throw lt(P),"unwind";ot(P)},Nt=[],Pt=[],$r=[],un={},en=P=>{var A=P.Ab;delete un[A],Nt.push(P),Pt.splice(Pt.indexOf(P),1),P.Ab=0,Rf(A)};function Ni(){$r.forEach(P=>P())}var vr=P=>new Promise(A=>{P.onmessage=ee=>{var me=(ee=ee.data).Bb;if(ee.Gb&&ee.Gb!=Vl()){var Ie=un[ee.Gb];Ie?Ie.postMessage(ee,ee.Mb):y(`Internal error! Worker sent a message "${me}" to target pthread ${ee.Gb}, but that thread no longer exists!`)}else me==="checkMailbox"?ke():me==="spawnThread"?rt(ee):me==="cleanupThread"?en(un[ee.hc]):me==="loaded"?(P.loaded=!0,A(P)):me==="alert"?alert(`Thread ${ee.ic}: ${ee.text}`):ee.target==="setimmediate"?P.postMessage(ee):me==="callHandler"?o[ee.Qb](...ee.args):me&&y(`worker sent an unknown command ${me}`)},P.onerror=ee=>{throw y(`worker sent an error! ${ee.filename}:${ee.lineno}: ${ee.message}`),ee};var B,X=[];for(B of[])o.propertyIsEnumerable(B)&&X.push(B);P.postMessage({Bb:"load",Rb:X,kc:x,lc:M})});function cn(){var P=new Worker((()=>{let A=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new A("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Nt.push(P)}var Wo=P=>{ne();var A=be()[P+52>>>2>>>0];P=be()[P+56>>>2>>>0],hc(A,A-P),Kl(A)},Pa=(P,A)=>{Je=0,P=Uf(P,A),0<Je?T=P:Hl(P)};class yo{constructor(A){this.Ib=A-24}}function ei(P,A,B){var X=new yo(P>>>=0);throw A>>>=0,B>>>=0,be()[X.Ib+16>>>2>>>0]=0,be()[X.Ib+4>>>2>>>0]=A,be()[X.Ib+8>>>2>>>0]=B,P}function bt(P,A,B,X){return u?Ue(2,1,P,A,B,X):St(P,A,B,X)}function St(P,A,B,X){if(P>>>=0,B>>>=0,X>>>=0,d===void 0)return 6;var ee=[];return u&&ee.length===0?bt(P,A>>>=0,B,X):(P={ec:B,Ab:P,Hb:X,Mb:ee},u?(P.Bb="spawnThread",postMessage(P,ee),0):rt(P))}var Zt=typeof TextDecoder<"u"?new TextDecoder:void 0,pt=(P,A=0,B=NaN)=>{var X=(A>>>=0)+B;for(B=A;P[B]&&!(B>=X);)++B;if(16<B-A&&P.buffer&&Zt)return Zt.decode(P.buffer instanceof ArrayBuffer?P.subarray(A,B):P.slice(A,B));for(X="";A<B;){var ee=P[A++];if(128&ee){var me=63&P[A++];if((224&ee)==192)X+=String.fromCharCode((31&ee)<<6|me);else{var Ie=63&P[A++];65536>(ee=(240&ee)==224?(15&ee)<<12|me<<6|Ie:(7&ee)<<18|me<<12|Ie<<6|63&P[A++])?X+=String.fromCharCode(ee):(ee-=65536,X+=String.fromCharCode(55296|ee>>10,56320|1023&ee))}}else X+=String.fromCharCode(ee)}return X},Xt=(P,A)=>(P>>>=0)?pt(K(),P,A):"";function D(P,A,B){return u?Ue(3,1,P,A,B):0}function se(P,A){if(u)return Ue(4,1,P,A)}var Q=P=>{for(var A=0,B=0;B<P.length;++B){var X=P.charCodeAt(B);127>=X?A++:2047>=X?A+=2:55296<=X&&57343>=X?(A+=4,++B):A+=3}return A},oe=(P,A,B)=>{var X=K();if(A>>>=0,0<B){var ee=A;B=A+B-1;for(var me=0;me<P.length;++me){var Ie=P.charCodeAt(me);if(55296<=Ie&&57343>=Ie&&(Ie=65536+((1023&Ie)<<10)|1023&P.charCodeAt(++me)),127>=Ie){if(A>=B)break;X[A++>>>0]=Ie}else{if(2047>=Ie){if(A+1>=B)break;X[A++>>>0]=192|Ie>>6}else{if(65535>=Ie){if(A+2>=B)break;X[A++>>>0]=224|Ie>>12}else{if(A+3>=B)break;X[A++>>>0]=240|Ie>>18,X[A++>>>0]=128|Ie>>12&63}X[A++>>>0]=128|Ie>>6&63}X[A++>>>0]=128|63&Ie}}X[A>>>0]=0,P=A-ee}else P=0;return P};function ce(P,A){if(u)return Ue(5,1,P,A)}function Se(P,A,B){if(u)return Ue(6,1,P,A,B)}function Re(P,A,B){return u?Ue(7,1,P,A,B):0}function dt(P,A){if(u)return Ue(8,1,P,A)}function Ct(P,A,B){if(u)return Ue(9,1,P,A,B)}function Mt(P,A,B,X){if(u)return Ue(10,1,P,A,B,X)}function jt(P,A,B,X){if(u)return Ue(11,1,P,A,B,X)}function ft(P,A,B,X){if(u)return Ue(12,1,P,A,B,X)}function ir(P){if(u)return Ue(13,1,P)}function lr(P,A){if(u)return Ue(14,1,P,A)}function si(P,A,B){if(u)return Ue(15,1,P,A,B)}var Ti,zr,On=()=>$e(""),kn=P=>{for(var A="";K()[P>>>0];)A+=Ti[K()[P++>>>0]];return A},li={},bo={};function In(P,A,B={}){return function(X,ee,me={}){var Ie=ee.name;if(!X)throw new zr(`type "${Ie}" must have a positive integer typeid pointer`);if(bo.hasOwnProperty(X)){if(me.Sb)return;throw new zr(`Cannot register type '${Ie}' twice`)}bo[X]=ee,li.hasOwnProperty(X)&&(ee=li[X],delete li[X],ee.forEach(We=>We()))}(P,A,B)}var Ea=(P,A,B)=>{switch(A){case 1:return B?X=>I()[X>>>0]:X=>K()[X>>>0];case 2:return B?X=>ae()[X>>>1>>>0]:X=>pe()[X>>>1>>>0];case 4:return B?X=>de()[X>>>2>>>0]:X=>be()[X>>>2>>>0];case 8:return B?X=>G[X>>>3]:X=>H[X>>>3];default:throw new TypeError(`invalid integer width (${A}): ${P}`)}};function Sa(P,A,B){B>>>=0,In(P>>>=0,{name:A=kn(A>>>0),fromWireType:X=>X,toWireType:function(X,ee){if(typeof ee!="bigint"&&typeof ee!="number")throw ee=ee===null?"null":(X=typeof ee)=="object"||X==="array"||X==="function"?ee.toString():""+ee,new TypeError(`Cannot convert "${ee}" to ${this.name}`);return typeof ee=="number"&&(ee=BigInt(ee)),ee},Cb:ui,readValueFromPointer:Ea(A,B,A.indexOf("u")==-1),Db:null})}var ui=8;function ci(P,A,B,X){In(P>>>=0,{name:A=kn(A>>>0),fromWireType:function(ee){return!!ee},toWireType:function(ee,me){return me?B:X},Cb:ui,readValueFromPointer:function(ee){return this.fromWireType(K()[ee>>>0])},Db:null})}var Ri=[],Hn=[];function Vo(P){9<(P>>>=0)&&--Hn[P+1]==0&&(Hn[P]=void 0,Ri.push(P))}var dn=P=>{if(!P)throw new zr("Cannot use deleted val. handle = "+P);return Hn[P]},gn=P=>{switch(P){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let A=Ri.pop()||Hn.length;return Hn[A]=P,Hn[A+1]=1,A}};function Pi(P){return this.fromWireType(be()[P>>>2>>>0])}var es={name:"emscripten::val",fromWireType:P=>{var A=dn(P);return Vo(P),A},toWireType:(P,A)=>gn(A),Cb:ui,readValueFromPointer:Pi,Db:null};function di(P){return In(P>>>0,es)}var Ge=(P,A)=>{switch(A){case 4:return function(B){return this.fromWireType(Ne()[B>>>2>>>0])};case 8:return function(B){return this.fromWireType(Te()[B>>>3>>>0])};default:throw new TypeError(`invalid float width (${A}): ${P}`)}};function He(P,A,B){B>>>=0,In(P>>>=0,{name:A=kn(A>>>0),fromWireType:X=>X,toWireType:(X,ee)=>ee,Cb:ui,readValueFromPointer:Ge(A,B),Db:null})}function ut(P,A,B,X,ee){if(P>>>=0,B>>>=0,A=kn(A>>>0),ee===-1&&(ee=4294967295),ee=We=>We,X===0){var me=32-8*B;ee=We=>We<<me>>>me}var Ie=A.includes("unsigned")?function(We,nt){return nt>>>0}:function(We,nt){return nt};In(P,{name:A,fromWireType:ee,toWireType:Ie,Cb:ui,readValueFromPointer:Ea(A,B,X!==0),Db:null})}function Mr(P,A,B){function X(me){var Ie=be()[me>>>2>>>0];return me=be()[me+4>>>2>>>0],new ee(I().buffer,me,Ie)}var ee=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][A];In(P>>>=0,{name:B=kn(B>>>0),fromWireType:X,Cb:ui,readValueFromPointer:X},{Sb:!0})}function ts(P,A){In(P>>>=0,{name:A=kn(A>>>0),fromWireType:function(B){for(var X,ee=be()[B>>>2>>>0],me=B+4,Ie=me,We=0;We<=ee;++We){var nt=me+We;We!=ee&&K()[nt>>>0]!=0||(Ie=Xt(Ie,nt-Ie),X===void 0?X=Ie:(X+="\0",X+=Ie),Ie=nt+1)}return zi(B),X},toWireType:function(B,X){X instanceof ArrayBuffer&&(X=new Uint8Array(X));var ee=typeof X=="string";if(!(ee||X instanceof Uint8Array||X instanceof Uint8ClampedArray||X instanceof Int8Array))throw new zr("Cannot pass non-string to std::string");var me=ee?Q(X):X.length,Ie=Gl(4+me+1),We=Ie+4;if(be()[Ie>>>2>>>0]=me,ee)oe(X,We,me+1);else if(ee)for(ee=0;ee<me;++ee){var nt=X.charCodeAt(ee);if(255<nt)throw zi(Ie),new zr("String has UTF-16 code units that do not fit in 8 bits");K()[We+ee>>>0]=nt}else for(ee=0;ee<me;++ee)K()[We+ee>>>0]=X[ee];return B!==null&&B.push(zi,Ie),Ie},Cb:ui,readValueFromPointer:Pi,Db(B){zi(B)}})}var Go=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,rs=(P,A)=>{for(var B=P>>1,X=B+A/2;!(B>=X)&&pe()[B>>>0];)++B;if(32<(B<<=1)-P&&Go)return Go.decode(K().slice(P,B));for(B="",X=0;!(X>=A/2);++X){var ee=ae()[P+2*X>>>1>>>0];if(ee==0)break;B+=String.fromCharCode(ee)}return B},Ho=(P,A,B)=>{if(B??(B=2147483647),2>B)return 0;var X=A;B=(B-=2)<2*P.length?B/2:P.length;for(var ee=0;ee<B;++ee){var me=P.charCodeAt(ee);ae()[A>>>1>>>0]=me,A+=2}return ae()[A>>>1>>>0]=0,A-X},Ll=P=>2*P.length,Nl=(P,A)=>{for(var B=0,X="";!(B>=A/4);){var ee=de()[P+4*B>>>2>>>0];if(ee==0)break;++B,65536<=ee?(ee-=65536,X+=String.fromCharCode(55296|ee>>10,56320|1023&ee)):X+=String.fromCharCode(ee)}return X},Rl=(P,A,B)=>{if(A>>>=0,B??(B=2147483647),4>B)return 0;var X=A;B=X+B-4;for(var ee=0;ee<P.length;++ee){var me=P.charCodeAt(ee);if(55296<=me&&57343>=me&&(me=65536+((1023&me)<<10)|1023&P.charCodeAt(++ee)),de()[A>>>2>>>0]=me,(A+=4)+4>B)break}return de()[A>>>2>>>0]=0,A-X},ye=P=>{for(var A=0,B=0;B<P.length;++B){var X=P.charCodeAt(B);55296<=X&&57343>=X&&++B,A+=4}return A};function R(P,A,B){if(P>>>=0,A>>>=0,B=kn(B>>>=0),A===2)var X=rs,ee=Ho,me=Ll,Ie=We=>pe()[We>>>1>>>0];else A===4&&(X=Nl,ee=Rl,me=ye,Ie=We=>be()[We>>>2>>>0]);In(P,{name:B,fromWireType:We=>{for(var nt,ht=be()[We>>>2>>>0],Ft=We+4,er=0;er<=ht;++er){var pr=We+4+er*A;er!=ht&&Ie(pr)!=0||(Ft=X(Ft,pr-Ft),nt===void 0?nt=Ft:(nt+="\0",nt+=Ft),Ft=pr+A)}return zi(We),nt},toWireType:(We,nt)=>{if(typeof nt!="string")throw new zr(`Cannot pass non-string to C++ string type ${B}`);var ht=me(nt),Ft=Gl(4+ht+A);return be()[Ft>>>2>>>0]=ht/A,ee(nt,Ft+4,ht+A),We!==null&&We.push(zi,Ft),Ft},Cb:ui,readValueFromPointer:Pi,Db(We){zi(We)}})}function J(P,A){In(P>>>=0,{Tb:!0,name:A=kn(A>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function ue(P){fc(P>>>0,!l,1,!s,131072,!1),Ni()}var he=P=>{if(!te)try{if(P(),!(0<Je))try{u?Hl(T):Ut(T)}catch(A){A instanceof Ce||A=="unwind"||v(0,A)}}catch(A){A instanceof Ce||A=="unwind"||v(0,A)}};function _e(P){P>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(de(),P>>>2,P).value.then(ke),P+=128,Atomics.store(de(),P>>>2,1))}var ke=()=>{var P=Vl();P&&(_e(P),he(Bf))};function Ke(P,A){(P>>>=0)==A>>>0?setTimeout(ke):u?postMessage({Gb:P,Bb:"checkMailbox"}):(P=un[P])&&P.postMessage({Bb:"checkMailbox"})}var it=[];function et(P,A,B,X,ee){for(A>>>=0,X/=2,it.length=X,B=ee>>>0>>>3,ee=0;ee<X;ee++)it[ee]=G[B+2*ee]?G[B+2*ee+1]:Te()[B+2*ee+1>>>0];return(A?je[A]:dc[P])(...it)}var ct=()=>{Je=0};function At(P){P>>>=0,u?postMessage({Bb:"cleanupThread",hc:P}):en(un[P])}function or(P){}var tr=(P,A)=>{var B=bo[P];if(B===void 0)throw P=Ff(P),B=kn(P),zi(P),new zr(`${A} has unknown type ${B}`);return B},Br=(P,A,B)=>{var X=[];return P=P.toWireType(X,B),X.length&&(be()[A>>>2>>>0]=gn(X)),P};function fr(P,A,B){return A>>>=0,B>>>=0,P=dn(P>>>0),A=tr(A,"emval::as"),Br(A,B,P)}function _n(P,A){return A>>>=0,P=dn(P>>>0),(A=tr(A,"emval::as")).toWireType(null,P)}var xn=P=>{try{P()}catch(A){$e(A)}},qr=0,vn=null,Kn=0,Ei=[],Ar={},yn={},fi=0,ti=null,Ko=[];function Dn(P){return function(A){if(!te){if(qr===0){var B=!1,X=!1;A((ee=0)=>{if(!te&&(Kn=ee,B=!0,X)){qr=2,xn(()=>Vf(vn)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),ee=!1;try{var me=function(){var nt=de()[vn+8>>>2>>>0];return nt=xt[yn[nt]],--Je,nt()}()}catch(nt){me=nt,ee=!0}var Ie=!1;if(!vn){var We=ti;We&&(ti=null,(ee?We.reject:We.resolve)(me),Ie=!0)}if(ee&&!Ie)throw me}}),X=!0,B||(qr=1,vn=function(){var ee=Gl(65548),me=ee+12;be()[ee>>>2>>>0]=me,be()[ee+4>>>2>>>0]=me+65536,me=Ei[0];var Ie=Ar[me];return Ie===void 0&&(Ie=fi++,Ar[me]=Ie,yn[Ie]=me),me=Ie,de()[ee+8>>>2>>>0]=me,ee}(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),xn(()=>Wf(vn)))}else qr===2?(qr=0,xn(Gf),zi(vn),vn=null,Ko.forEach(he)):$e(`invalid state: ${qr}`);return Kn}}(A=>{P().then(A)})}function wo(P){return P>>>=0,Dn(async()=>{var A=await dn(P);return gn(A)})}var tn=[];function Xr(P,A,B,X){return B>>>=0,X>>>=0,(P=tn[P>>>0])(null,A=dn(A>>>0),B,X)}var fn={},Ur=P=>{var A=fn[P];return A===void 0?kn(P):A};function pi(P,A,B,X,ee){return B>>>=0,X>>>=0,ee>>>=0,(P=tn[P>>>0])(A=dn(A>>>0),A[B=Ur(B)],X,ee)}var ns=()=>typeof globalThis=="object"?globalThis:Function("return this")();function ac(P){return(P>>>=0)==0?gn(ns()):(P=Ur(P),gn(ns()[P]))}var Ns=P=>{var A=tn.length;return tn.push(P),A},Am=(P,A)=>{for(var B=Array(P),X=0;X<P;++X)B[X]=tr(be()[A+4*X>>>2>>>0],"parameter "+X);return B},wf=(P,A)=>Object.defineProperty(A,"name",{value:P});function Om(P,A,B){var X=(A=Am(P,A>>>0)).shift();P--;var ee=`return function (obj, func, destructorsRef, args) {
`,me=0,Ie=[];B===0&&Ie.push("obj");for(var We=["retType"],nt=[X],ht=0;ht<P;++ht)Ie.push("arg"+ht),We.push("argType"+ht),nt.push(A[ht]),ee+=`  var arg${ht} = argType${ht}.readValueFromPointer(args${me?"+"+me:""});
`,me+=A[ht].Cb;return ee+=`  var rv = ${B===1?"new func":"func.call"}(${Ie.join(", ")});
`,X.Tb||(We.push("emval_returnValue"),nt.push(Br),ee+=`  return emval_returnValue(retType, destructorsRef, rv);
`),We.push(ee+`};
`),P=function(Ft){var er=Function;if(!(er instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof er} which is not a function`);var pr=wf(er.name||"unknownFunctionName",function(){});return pr.prototype=er.prototype,pr=new pr,(Ft=er.apply(pr,Ft))instanceof Object?Ft:pr}(We)(...nt),B=`methodCaller<(${A.map(Ft=>Ft.name).join(", ")}) => ${X.name}>`,Ns(wf(B,P))}function km(P){return P=Ur(P>>>0),gn(o[P])}function Im(P,A){return A>>>=0,P=dn(P>>>0),A=dn(A),gn(P[A])}function Rs(P){9<(P>>>=0)&&(Hn[P+1]+=1)}function Dm(){return gn([])}function jm(P){P=dn(P>>>0);for(var A=Array(P.length),B=0;B<P.length;B++)A[B]=P[B];return gn(A)}function Fm(P){return gn(Ur(P>>>0))}function Lm(){return gn({})}function Nm(P){for(var A=dn(P>>>=0);A.length;){var B=A.pop();A.pop()(B)}Vo(P)}function zs(P,A,B){A>>>=0,B>>>=0,P=dn(P>>>0),A=dn(A),B=dn(B),P[A]=B}function Rm(P,A){return A>>>=0,P=(P=tr(P>>>0,"_emval_take_value")).readValueFromPointer(A),gn(P)}function zm(P,A){P=-9007199254740992>P||9007199254740992<P?NaN:Number(P),A>>>=0,P=new Date(1e3*P),de()[A>>>2>>>0]=P.getUTCSeconds(),de()[A+4>>>2>>>0]=P.getUTCMinutes(),de()[A+8>>>2>>>0]=P.getUTCHours(),de()[A+12>>>2>>>0]=P.getUTCDate(),de()[A+16>>>2>>>0]=P.getUTCMonth(),de()[A+20>>>2>>>0]=P.getUTCFullYear()-1900,de()[A+24>>>2>>>0]=P.getUTCDay(),P=(P.getTime()-Date.UTC(P.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,de()[A+28>>>2>>>0]=P}var xf=P=>P%4==0&&(P%100!=0||P%400==0),Mf=[0,31,60,91,121,152,182,213,244,274,305,335],Tf=[0,31,59,90,120,151,181,212,243,273,304,334];function Pf(P,A){P=-9007199254740992>P||9007199254740992<P?NaN:Number(P),A>>>=0,P=new Date(1e3*P),de()[A>>>2>>>0]=P.getSeconds(),de()[A+4>>>2>>>0]=P.getMinutes(),de()[A+8>>>2>>>0]=P.getHours(),de()[A+12>>>2>>>0]=P.getDate(),de()[A+16>>>2>>>0]=P.getMonth(),de()[A+20>>>2>>>0]=P.getFullYear()-1900,de()[A+24>>>2>>>0]=P.getDay();var B=(xf(P.getFullYear())?Mf:Tf)[P.getMonth()]+P.getDate()-1|0;de()[A+28>>>2>>>0]=B,de()[A+36>>>2>>>0]=-60*P.getTimezoneOffset(),B=new Date(P.getFullYear(),6,1).getTimezoneOffset();var X=new Date(P.getFullYear(),0,1).getTimezoneOffset();P=0|(B!=X&&P.getTimezoneOffset()==Math.min(X,B)),de()[A+32>>>2>>>0]=P}function Bm(P){P>>>=0;var A=new Date(de()[P+20>>>2>>>0]+1900,de()[P+16>>>2>>>0],de()[P+12>>>2>>>0],de()[P+8>>>2>>>0],de()[P+4>>>2>>>0],de()[P>>>2>>>0],0),B=de()[P+32>>>2>>>0],X=A.getTimezoneOffset(),ee=new Date(A.getFullYear(),6,1).getTimezoneOffset(),me=new Date(A.getFullYear(),0,1).getTimezoneOffset(),Ie=Math.min(me,ee);return 0>B?de()[P+32>>>2>>>0]=+(ee!=me&&Ie==X):0<B!=(Ie==X)&&(ee=Math.max(me,ee),A.setTime(A.getTime()+6e4*((0<B?Ie:ee)-X))),de()[P+24>>>2>>>0]=A.getDay(),B=(xf(A.getFullYear())?Mf:Tf)[A.getMonth()]+A.getDate()-1|0,de()[P+28>>>2>>>0]=B,de()[P>>>2>>>0]=A.getSeconds(),de()[P+4>>>2>>>0]=A.getMinutes(),de()[P+8>>>2>>>0]=A.getHours(),de()[P+12>>>2>>>0]=A.getDate(),de()[P+16>>>2>>>0]=A.getMonth(),de()[P+20>>>2>>>0]=A.getYear(),P=A.getTime(),BigInt(isNaN(P)?-1:P/1e3)}function Ef(P,A,B,X,ee,me,Ie){return u?Ue(16,1,P,A,B,X,ee,me,Ie):-52}function sc(P,A,B,X,ee,me){if(u)return Ue(17,1,P,A,B,X,ee,me)}var Bs={},Sf=()=>performance.timeOrigin+performance.now();function Cf(P,A){if(u)return Ue(18,1,P,A);if(Bs[P]&&(clearTimeout(Bs[P].id),delete Bs[P]),!A)return 0;var B=setTimeout(()=>{delete Bs[P],he(()=>zf(P,performance.timeOrigin+performance.now()))},A);return Bs[P]={id:B,qc:A},0}function $f(P,A,B,X){P>>>=0,A>>>=0,B>>>=0,X>>>=0;var ee=new Date().getFullYear(),me=new Date(ee,0,1).getTimezoneOffset();ee=new Date(ee,6,1).getTimezoneOffset();var Ie=Math.max(me,ee);be()[P>>>2>>>0]=60*Ie,de()[A>>>2>>>0]=+(me!=ee),P=(A=We=>{var nt=Math.abs(We);return`UTC${0<=We?"-":"+"}${String(Math.floor(nt/60)).padStart(2,"0")}${String(nt%60).padStart(2,"0")}`})(me),A=A(ee),ee<me?(oe(P,B,17),oe(A,X,17)):(oe(P,X,17),oe(A,B,17))}var rb=()=>Date.now();function Um(P,A,B){return 0<=P&&3>=P?(P===0?P=Date.now():P=performance.timeOrigin+performance.now(),G[B>>>0>>>3]=BigInt(Math.round(1e6*P)),0):28}var zl=[],lc=(P,A)=>{zl.length=0;for(var B;B=K()[P++>>>0];){var X=B!=105;A+=(X&=B!=112)&&A%8?4:0,zl.push(B==112?be()[A>>>2>>>0]:B==106?G[A>>>3]:B==105?de()[A>>>2>>>0]:Te()[A>>>3>>>0]),A+=X?8:4}return zl};function uc(P,A,B){return P>>>=0,A=lc(A>>>0,B>>>0),je[P](...A)}function Wm(P,A,B){return P>>>=0,A=lc(A>>>0,B>>>0),je[P](...A)}var Vm=()=>{};function Gm(P,A){return y(Xt(P>>>0,A>>>0))}var Hm=()=>{throw Je+=1,"unwind"};function Km(){return 4294901760}var qm=()=>navigator.hardwareConcurrency;function Xm(){return $e("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function Qm(P){P>>>=0;var A=K().length;if(P<=A||4294901760<P)return!1;for(var B=1;4>=B;B*=2){var X=A*(1+.2/B);X=Math.min(X,P+100663296);e:{X=(Math.min(4294901760,65536*Math.ceil(Math.max(P,X)/65536))-x.buffer.byteLength+65535)/65536|0;try{x.grow(X),ne();var ee=1;break e}catch{}ee=void 0}if(ee)return!0}return!1}var Us=()=>($e("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Ws={},Bl=P=>{P.forEach(A=>{Us()})};function Af(){var P=Error().stack.toString().split(`
`);return P[0]=="Error"&&P.shift(),Bl(P),Ws.Lb=Us(),Ws.cc=P,Ws.Lb}function Ym(P,A,B){if(P>>>=0,A>>>=0,Ws.Lb==P)var X=Ws.cc;else(X=Error().stack.toString().split(`
`))[0]=="Error"&&X.shift(),Bl(X);for(var ee=3;X[ee]&&Us()!=P;)++ee;for(P=0;P<B&&X[P+ee];++P)de()[A+4*P>>>2>>>0]=Us();return P}var Ul,qo={},Of=()=>{if(!Ul){var P,A={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(P in qo)qo[P]===void 0?delete A[P]:A[P]=qo[P];var B=[];for(P in A)B.push(`${P}=${A[P]}`);Ul=B}return Ul};function Zm(P,A){if(u)return Ue(19,1,P,A);P>>>=0,A>>>=0;var B=0;return Of().forEach((X,ee)=>{var me=A+B;for(ee=be()[P+4*ee>>>2>>>0]=me,me=0;me<X.length;++me)I()[ee++>>>0]=X.charCodeAt(me);I()[ee>>>0]=0,B+=X.length+1}),0}function kf(P,A){if(u)return Ue(20,1,P,A);P>>>=0,A>>>=0;var B=Of();be()[P>>>2>>>0]=B.length;var X=0;return B.forEach(ee=>X+=ee.length+1),be()[A>>>2>>>0]=X,0}function Jm(P){return u?Ue(21,1,P):52}function If(P,A,B,X){return u?Ue(22,1,P,A,B,X):52}function cc(P,A,B,X){return u?Ue(23,1,P,A,B,X):70}var eg=[null,[],[]];function Df(P,A,B,X){if(u)return Ue(24,1,P,A,B,X);A>>>=0,B>>>=0,X>>>=0;for(var ee=0,me=0;me<B;me++){var Ie=be()[A>>>2>>>0],We=be()[A+4>>>2>>>0];A+=8;for(var nt=0;nt<We;nt++){var ht=K()[Ie+nt>>>0],Ft=eg[P];ht===0||ht===10?((P===1?w:y)(pt(Ft)),Ft.length=0):Ft.push(ht)}ee+=We}return be()[X>>>2>>>0]=ee,0}u||function(){for(var P=o.numThreads-1;P--;)cn();Ye.unshift(()=>{Ae++,function(A){u?A():Promise.all(Nt.map(vr)).then(A)}(()=>we())})}();for(var jf=Array(256),Wl=0;256>Wl;++Wl)jf[Wl]=String.fromCharCode(Wl);Ti=jf,zr=o.BindingError=class extends Error{constructor(P){super(P),this.name="BindingError"}},o.InternalError=class extends Error{constructor(P){super(P),this.name="InternalError"}},Hn.push(0,1,void 0,1,null,1,!0,1,!1,1),o.count_emval_handles=()=>Hn.length/2-5-Ri.length;var xt,dc=[ot,lt,bt,D,se,ce,Se,Re,dt,Ct,Mt,jt,ft,ir,lr,si,Ef,sc,Cf,Zm,kf,Jm,If,cc,Df];(async function(){function P(X,ee){return xt=X.exports,xt=function(){var me=xt,Ie={};for(let[We,nt]of Object.entries(me))Ie[We]=typeof nt=="function"?(...ht)=>{Ei.push(We);try{return nt(...ht)}finally{te||(Ei.pop(),vn&&qr===1&&Ei.length===0&&(qr=0,Je+=1,xn(gc),typeof Fibers<"u"&&Fibers.rc()))}}:nt;return Ie}(),xt=function(){var me=xt,Ie=nt=>ht=>nt(ht)>>>0,We=nt=>()=>nt()>>>0;return(me=Object.assign({},me)).Da=Ie(me.Da),me.fb=We(me.fb),me.hb=Ie(me.hb),me.tb=Ie(me.tb),me.ub=We(me.ub),me.__cxa_get_exception_ptr=Ie(me.__cxa_get_exception_ptr),me}(),$r.push(xt.ib),M=ee,we(),xt}Ae++;var A=Me();if(o.instantiateWasm)return new Promise(X=>{o.instantiateWasm(A,(ee,me)=>{P(ee,me),X(ee.exports)})});if(u)return new Promise(X=>{ge=ee=>{var me=new WebAssembly.Instance(ee,Me());X(P(me,ee))}});ve??(ve=o.locateFile?o.locateFile?o.locateFile("ort-wasm-simd-threaded.jsep.wasm",g):g+"ort-wasm-simd-threaded.jsep.wasm":new URL("/EcoGuard/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href);try{var B=await async function(X){var ee=ve;if(!Y&&typeof WebAssembly.instantiateStreaming=="function"&&!V(ee))try{var me=fetch(ee,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(me,X)}catch(Ie){y(`wasm streaming compile failed: ${Ie}`),y("falling back to ArrayBuffer instantiation")}return async function(Ie,We){try{var nt=await async function(ht){if(!Y)try{var Ft=await p(ht);return new Uint8Array(Ft)}catch{}if(ht==ve&&Y)ht=new Uint8Array(Y);else{if(!h)throw"both async and sync fetching of the wasm failed";ht=h(ht)}return ht}(Ie);return await WebAssembly.instantiate(nt,We)}catch(ht){y(`failed to asynchronously prepare wasm: ${ht}`),$e(ht)}}(ee,X)}(A);return P(B.instance,B.module)}catch(X){return i(X),Promise.reject(X)}})();var Ff=P=>(Ff=xt.Da)(P),Lf=()=>(Lf=xt.Ea)();o._OrtInit=(P,A)=>(o._OrtInit=xt.Fa)(P,A),o._OrtGetLastError=(P,A)=>(o._OrtGetLastError=xt.Ga)(P,A),o._OrtCreateSessionOptions=(P,A,B,X,ee,me,Ie,We,nt,ht)=>(o._OrtCreateSessionOptions=xt.Ha)(P,A,B,X,ee,me,Ie,We,nt,ht),o._OrtAppendExecutionProvider=(P,A,B,X,ee)=>(o._OrtAppendExecutionProvider=xt.Ia)(P,A,B,X,ee),o._OrtAddFreeDimensionOverride=(P,A,B)=>(o._OrtAddFreeDimensionOverride=xt.Ja)(P,A,B),o._OrtAddSessionConfigEntry=(P,A,B)=>(o._OrtAddSessionConfigEntry=xt.Ka)(P,A,B),o._OrtReleaseSessionOptions=P=>(o._OrtReleaseSessionOptions=xt.La)(P),o._OrtCreateSession=(P,A,B)=>(o._OrtCreateSession=xt.Ma)(P,A,B),o._OrtReleaseSession=P=>(o._OrtReleaseSession=xt.Na)(P),o._OrtGetInputOutputCount=(P,A,B)=>(o._OrtGetInputOutputCount=xt.Oa)(P,A,B),o._OrtGetInputOutputMetadata=(P,A,B,X)=>(o._OrtGetInputOutputMetadata=xt.Pa)(P,A,B,X),o._OrtFree=P=>(o._OrtFree=xt.Qa)(P),o._OrtCreateTensor=(P,A,B,X,ee,me)=>(o._OrtCreateTensor=xt.Ra)(P,A,B,X,ee,me),o._OrtGetTensorData=(P,A,B,X,ee)=>(o._OrtGetTensorData=xt.Sa)(P,A,B,X,ee),o._OrtReleaseTensor=P=>(o._OrtReleaseTensor=xt.Ta)(P),o._OrtCreateRunOptions=(P,A,B,X)=>(o._OrtCreateRunOptions=xt.Ua)(P,A,B,X),o._OrtAddRunConfigEntry=(P,A,B)=>(o._OrtAddRunConfigEntry=xt.Va)(P,A,B),o._OrtReleaseRunOptions=P=>(o._OrtReleaseRunOptions=xt.Wa)(P),o._OrtCreateBinding=P=>(o._OrtCreateBinding=xt.Xa)(P),o._OrtBindInput=(P,A,B)=>(o._OrtBindInput=xt.Ya)(P,A,B),o._OrtBindOutput=(P,A,B,X)=>(o._OrtBindOutput=xt.Za)(P,A,B,X),o._OrtClearBoundOutputs=P=>(o._OrtClearBoundOutputs=xt._a)(P),o._OrtReleaseBinding=P=>(o._OrtReleaseBinding=xt.$a)(P),o._OrtRunWithBinding=(P,A,B,X,ee)=>(o._OrtRunWithBinding=xt.ab)(P,A,B,X,ee),o._OrtRun=(P,A,B,X,ee,me,Ie,We)=>(o._OrtRun=xt.bb)(P,A,B,X,ee,me,Ie,We),o._OrtEndProfiling=P=>(o._OrtEndProfiling=xt.cb)(P),o._JsepOutput=(P,A,B)=>(o._JsepOutput=xt.db)(P,A,B),o._JsepGetNodeName=P=>(o._JsepGetNodeName=xt.eb)(P);var Vl=()=>(Vl=xt.fb)(),zi=o._free=P=>(zi=o._free=xt.gb)(P),Gl=o._malloc=P=>(Gl=o._malloc=xt.hb)(P),fc=(P,A,B,X,ee,me)=>(fc=xt.kb)(P,A,B,X,ee,me),pc=()=>(pc=xt.lb)(),Nf=(P,A,B,X,ee)=>(Nf=xt.mb)(P,A,B,X,ee),Rf=P=>(Rf=xt.nb)(P),Hl=P=>(Hl=xt.ob)(P),zf=(P,A)=>(zf=xt.pb)(P,A),Bf=()=>(Bf=xt.qb)(),hc=(P,A)=>(hc=xt.rb)(P,A),Kl=P=>(Kl=xt.sb)(P),mc=P=>(mc=xt.tb)(P),ql=()=>(ql=xt.ub)(),Uf=o.dynCall_ii=(P,A)=>(Uf=o.dynCall_ii=xt.vb)(P,A),Wf=P=>(Wf=xt.wb)(P),gc=()=>(gc=xt.xb)(),Vf=P=>(Vf=xt.yb)(P),Gf=()=>(Gf=xt.zb)();return o.stackSave=()=>ql(),o.stackRestore=P=>Kl(P),o.stackAlloc=P=>mc(P),o.setValue=function(P,A,B="i8"){switch(B.endsWith("*")&&(B="*"),B){case"i1":case"i8":I()[P>>>0]=A;break;case"i16":ae()[P>>>1>>>0]=A;break;case"i32":de()[P>>>2>>>0]=A;break;case"i64":G[P>>>3]=BigInt(A);break;case"float":Ne()[P>>>2>>>0]=A;break;case"double":Te()[P>>>3>>>0]=A;break;case"*":be()[P>>>2>>>0]=A;break;default:$e(`invalid type for setValue: ${B}`)}},o.getValue=function(P,A="i8"){switch(A.endsWith("*")&&(A="*"),A){case"i1":case"i8":return I()[P>>>0];case"i16":return ae()[P>>>1>>>0];case"i32":return de()[P>>>2>>>0];case"i64":return G[P>>>3];case"float":return Ne()[P>>>2>>>0];case"double":return Te()[P>>>3>>>0];case"*":return be()[P>>>2>>>0];default:$e(`invalid type for getValue: ${A}`)}},o.UTF8ToString=Xt,o.stringToUTF8=oe,o.lengthBytesUTF8=Q,function P(){if(0<Ae)Ee=P;else if(u)n(o),Z();else{for(;0<Ye.length;)Ye.shift()(o);0<Ae?Ee=P:(o.calledRun=!0,te||(Z(),n(o)))}}(),o.PTR_SIZE=4,a}),u5=ux,YD=(t=(e=globalThis.self)==null?void 0:e.name)==null?void 0:t.startsWith("em-pthread"),YD&&ux()}),cx,BM,ZD,Zi,c5,qg,JD,ej,dx,tj,fx,d5,px,f5,rS=qe(()=>{tS(),cx=typeof location>"u"?void 0:location.origin,BM=import.meta.url>"file:"&&import.meta.url<"file;",ZD=()=>{{if(BM){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,cx).href}return import.meta.url}},Zi=ZD(),c5=()=>{if(Zi&&!Zi.startsWith("blob:"))return Zi.substring(0,Zi.lastIndexOf("/")+1)},qg=(e,t)=>{try{let r=t??Zi;return(r?new URL(e,r):new URL(e)).origin===cx}catch{return!1}},JD=(e,t)=>{let r=t??Zi;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},ej=(e,t)=>`${t??"./"}${e}`,dx=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},tj=async e=>(await import(e)).default,fx=(Ene(),xh(a5)).default,d5=async()=>{if(!Zi)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(qg(Zi))return[void 0,fx()];let e=await dx(Zi);return[e,fx(e)]},px=(Sne(),xh(l5)).default,f5=async(e,t,r)=>{if(!e&&!t&&px&&Zi&&qg(Zi))return[void 0,px];{let n="ort-wasm-simd-threaded.jsep.mjs",i=e??JD(n,t),o=r&&i&&!qg(i,t),a=o?await dx(i):i??ej(n,t);return[o?a:void 0,await tj(a)]}}}),hx,Xg,op,mx,rj,nj,ij,nS,Er,Ju=qe(()=>{rS(),Xg=!1,op=!1,mx=!1,rj=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},nj=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},ij=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},nS=async e=>{if(Xg)return Promise.resolve();if(op)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(mx)throw new Error("previous call to 'initializeWebAssembly()' failed.");op=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!ij())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!nj())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=rj();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let i=e.wasmPaths,o=typeof i=="string"?i:void 0,a=i==null?void 0:i.mjs,s=(a==null?void 0:a.href)??a,l=i==null?void 0:i.wasm,u=(l==null?void 0:l.href)??l,d=e.wasmBinary,[c,f]=await f5(s,o,r>1),p=!1,h=[];if(t>0&&h.push(new Promise(m=>{setTimeout(()=>{p=!0,m()},t)})),h.push(new Promise((m,v)=>{let g={numThreads:r};if(d)g.wasmBinary=d;else if(u||o)g.locateFile=_=>u??o+_;else if(s&&s.indexOf("blob:")!==0)g.locateFile=_=>new URL(_,s).href;else if(c){let _=c5();_&&(g.locateFile=b=>_+b)}f(g).then(_=>{op=!1,Xg=!0,hx=_,m(),c&&URL.revokeObjectURL(c)},_=>{op=!1,mx=!0,v(_)})})),await Promise.race(h),p)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Er=()=>{if(Xg&&hx)return hx;throw new Error("WebAssembly is not initialized yet.")}}),fa,bv,br,iS=qe(()=>{Ju(),fa=(e,t)=>{let r=Er(),n=r.lengthBytesUTF8(e)+1,i=r._malloc(n);return r.stringToUTF8(e,i,n),t.push(i),i},bv=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,o])=>{let a=t?t+i:i;if(typeof o=="object")bv(o,a+".",r,n);else if(typeof o=="string"||typeof o=="number")n(a,o.toString());else if(typeof o=="boolean")n(a,o?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof o}`)})},br=e=>{let t=Er(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetLastError(i,i+n);let o=Number(t.getValue(i,n===4?"i32":"i64")),a=t.getValue(i+n,"*"),s=a?t.UTF8ToString(a):"";throw new Error(`${e} ERROR_CODE: ${o}, ERROR_MESSAGE: ${s}`)}finally{t.stackRestore(r)}}}),p5,Cne=qe(()=>{Ju(),iS(),p5=e=>{let t=Er(),r=0,n=[],i=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(i.terminate=!1);let o=0;return(e==null?void 0:e.tag)!==void 0&&(o=fa(e.tag,n)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,o),r===0&&br("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&bv(e.extra,"",new WeakSet,(a,s)=>{let l=fa(a,n),u=fa(s,n);t._OrtAddRunConfigEntry(r,l,u)!==0&&br(`Can't set a run config entry: ${a} - ${s}.`)}),[r,n]}catch(o){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(a=>t._free(a)),o}}}),oj,aj,sj,ap,lj,h5,$ne=qe(()=>{Ju(),iS(),oj=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},aj=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},sj=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},ap=(e,t,r,n)=>{let i=fa(t,n),o=fa(r,n);Er()._OrtAddSessionConfigEntry(e,i,o)!==0&&br(`Can't set a session config entry: ${t} - ${r}.`)},lj=async(e,t,r)=>{for(let n of t){let i=typeof n=="string"?n:n.name,o=[];switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let d=n==null?void 0:n.deviceType;d&&ap(e,"deviceType",d,r)}break;case"webgpu":if(i="JS",typeof n!="string"){let d=n;if(d!=null&&d.preferredLayout){if(d.preferredLayout!=="NCHW"&&d.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${d.preferredLayout}`);ap(e,"preferredLayout",d.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let a=fa(i,r),s=o.length,l=0,u=0;if(s>0){l=Er()._malloc(s*Er().PTR_SIZE),r.push(l),u=Er()._malloc(s*Er().PTR_SIZE),r.push(u);for(let d=0;d<s;d++)Er().setValue(l+d*Er().PTR_SIZE,o[d][0],"*"),Er().setValue(u+d*Er().PTR_SIZE,o[d][1],"*")}await Er()._OrtAppendExecutionProvider(e,a,l,u,s)!==0&&br(`Can't append execution provider: ${i}.`)}},h5=async e=>{let t=Er(),r=0,n=[],i=e||{};sj(i);try{let o=oj(i.graphOptimizationLevel??"all"),a=aj(i.executionMode??"sequential"),s=typeof i.logId=="string"?fa(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let u=i.logVerbosityLevel??0;if(!Number.isInteger(u)||u<0||u>4)throw new Error(`log verbosity level is not valid: ${u}`);let d=typeof i.optimizedModelFilePath=="string"?fa(i.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(o,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,s,l,u,d),r===0&&br("Can't create session options."),i.executionProviders&&await lj(r,i.executionProviders,n),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);ap(r,"enableGraphCapture",i.enableGraphCapture.toString(),n)}if(i.freeDimensionOverrides)for(let[c,f]of Object.entries(i.freeDimensionOverrides)){if(typeof c!="string")throw new Error(`free dimension override name must be a string: ${c}`);if(typeof f!="number"||!Number.isInteger(f)||f<0)throw new Error(`free dimension override value must be a non-negative integer: ${f}`);let p=fa(c,n);t._OrtAddFreeDimensionOverride(r,p,f)!==0&&br(`Can't set a free dimension override: ${c} - ${f}.`)}return i.extra!==void 0&&bv(i.extra,"",new WeakSet,(c,f)=>{ap(r,c,f,n)}),[r,n]}catch(o){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&br("Can't release session options."),n.forEach(a=>t._free(a)),o}}}),Cc,ps,hu,oS,wv,aS,sS,UM,$t=qe(()=>{Cc=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},ps=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},hu=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((i,o)=>i*o,1);return r>0?Math.ceil(n*r):void 0},oS=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},wv=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},aS=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",sS=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",UM=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),lS,m5=qe(()=>{tS(),lS=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),o;try{o=new ArrayBuffer(n)}catch(s){if(s instanceof RangeError){let l=Math.ceil(n/65536);o=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw s}let a=0;for(;;){let{done:s,value:l}=await i.read();if(s)break;let u=l.byteLength;new Uint8Array(o,a,u).set(l),a+=u}return new Uint8Array(o,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),uj,cj,dj,fj,uS,pj,rr,Ds=qe(()=>{$t(),uj=["V","I","W","E","F"],cj=(e,t)=>{console.log(`[${uj[e]},${new Date().toISOString()}]${t}`)},uS=(e,t)=>{dj=e,fj=t},pj=(e,t)=>{let r=wv(e),n=wv(dj);r>=n&&cj(r,typeof t=="function"?t():t)},rr=(...e)=>{fj&&pj(...e)}}),hj,Pd,Oe,xv,g5,_5,v5,zt=qe(()=>{hj=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Pd=class{static calcShape(e,t,r=!1){let n=e.length,i=t.length;if(n===0)return t;if(i===0)return e;let o=Math.max(e.length,t.length),a=new Array(o);if(r){if(n<2||i<2)return;let s=hj.calcMatMulShape([e[n-2],e[n-1]],[t[i-2],t[i-1]]);if(s===void 0)return;[a[o-2],a[o-1]]=s}for(let s=r?3:1;s<=o;s++){let l=n-s<0?1:e[n-s],u=i-s<0?1:t[i-s];if(l!==u&&l>1&&u>1)return;let d=Math.max(l,u);if(l&&u)a[o-s]=Math.max(l,u);else{if(d>1)return;a[o-s]=0}}return a}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let i=1;i<=r;i++)if(e[r-i]!==1&&e[r-i]!==t[n-i])return!1;return!0}},Oe=class N_{static size(t){return N_.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let i=new Array(n),o=n-1;for(;o>=0;){if(t[o]%r===0){i[o]=t[o]/r;break}if(r%t[o]!==0)throw new Error("cannot convert shape");i[o]=1,r/=t[o],o--}for(o--;o>=0;o--)i[o]=t[o];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return N_.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return N_.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let i=1;for(let o=r;o<n;o++){if(t[o]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=Number(t[o])}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((i,o)=>i+r[o]+r[o+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,i)=>n===r[i])}},xv=class $p{static adjustPoolAttributes(t,r,n,i,o,a){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let s=0;s<r.length-2;s++)s>=n.length?n.push(r[s+2]):n[s]=r[s+2];for(let s=0;s<n.length;s++)if(s<i.length){if(i[s]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let s=0;s<n.length;s++)if(s<o.length){if(o[s]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(let s=0;s<n.length*2;s++)if(s<a.length){if(a[s]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[s]>=n[s]||a[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,i,o,a,s){if(s){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)$p.adjustPadAndReturnShape(t[l+(a?1:2)],r[l],n[l],i[l],o,l,l+t.length-2,s)}}static computePoolOutputShape(t,r,n,i,o,a,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return $p.computeShapeHelper(t,r,l,n,i,o,a,s),l}static computeConvOutputShape(t,r,n,i,o,a,s){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return $p.computeShapeHelper(!1,t,l,n,i,o,a,s),l}static computeShapeHelper(t,r,n,i,o,a,s,l){if(t)for(let u=0;u<r.length-2;u++)n.push(1);else for(let u=0;u<r.length-2;u++)n.push($p.adjustPadAndReturnShape(r[u+2],i[u],o[u],a[u],s,u,u+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,i,o,a,s,l){let u=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return o[a]=0,o[s]=0,Math.floor((t-u)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let d=((t+r-1)/r-1)*r+i-t;return o[a]=Math.floor(l==="SAME_LOWER"?(d+1)/2:d/2),o[s]=d-o[a],Math.floor((t+d-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+o[a]+o[s]-u)/r+1)}},g5=class{static getShapeOfGemmResult(e,t,r,n,i){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let o,a,s;t?(o=e[1],a=e[0]):(o=e[0],a=e[1]);let l=-1;if(n?(s=r[0],l=1):(s=r[1],l=0),r[l]!==a)throw new Error("dimension mismatch");if(o<=0||s<=0||a<=0)throw new Error("invalid shape specified");if(i&&!Pd.isValidBroadcast(i,[o,s]))throw new Error("gemm: invalid bias shape for broadcast");return[o,s,a]}},_5=-34028234663852886e22,v5=34028234663852886e22}),cS,y5=qe(()=>{$t(),cS=(e,t)=>new(oS(t))(e)}),WM,gx,mj,_x,gj,vx,yx,bx,_j,b5,Ane=qe(()=>{Ds(),WM=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),i=new Int32Array(r);for(let o=0;o<r;o++){let a=n[o];if(a>2147483647n||a<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${o}: ${a}`);i[o]=Number(a)}return t?new Uint8Array(i.buffer):i},gx=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),i=BigInt64Array.from(n,BigInt);return t?new Uint8Array(i.buffer):i},mj=1,_x=()=>mj++,gj=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),vx=(e,t)=>{let r=gj.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,i)=>n*i)*r/8):0},yx=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:i,shape:o,shouldConvertInt64toInt32:a=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=i,this.tensorShape=o,this.shouldConvertInt64toInt32=a}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return vx(this.dataType,this.tensorShape)}destroy(){rr("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=gx(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,i)=>n===r[i])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},bx=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let i=t,o=this.tensorManager.getMLContext(e),a=i==="int64"&&!o.opSupportLimits().input.dataTypes.includes("int64");if(a&&(i="int32",rr("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(o,i,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==vx(i,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let s=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,i,r,s,!0,!0,a),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=WM(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else rr("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){var t,r,n;if(this.activeUpload){let i=(t=this.wrapper)!=null&&t.isInt64ToInt32Converted?gx(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(i):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(i);return}else return i.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read((r=this.wrapper)==null?void 0:r.shouldConvertInt64toInt32,e):this.wrapper.read((n=this.wrapper)==null?void 0:n.shouldConvertInt64toInt32)}},_j=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=_x();return this.tensorTrackersById.set(e,new bx(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,i){rr("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${i}}`);let o=this.tensorTrackersById.get(t);if(!o)throw new Error("Tensor not found.");return o.ensureTensor(e,r,n,i)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){rr("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t==null?void 0:t.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let i=this.getMLContext(e),o=_x(),a=new yx({sessionId:e,context:i,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(o,new bx(this,a)),this.externalTensors.add(a),o}async getCachedTensor(e,t,r,n,i,o,a=!1){let s=this.getMLContext(e);for(let[u,d]of this.freeTensors.entries())if(d.canReuseTensor(s,t,r)){rr("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let c=this.freeTensors.splice(u,1)[0];return c.sessionId=e,c}rr("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await s.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:i,readable:o});return new yx({sessionId:e,context:s,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:a})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},b5=(...e)=>new _j(...e)}),Qg,vj,w5,One=qe(()=>{$t(),Ju(),y5(),Ane(),Ds(),Qg=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),vj=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((i,o)=>i===n[o]&&e[i]===t[i])},w5=class{constructor(e){this.tensorManager=b5(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,uS(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){rr("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){rr("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)rr("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>vj(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(i=>i.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){rr("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,i){let o=Qg.get(r);if(!o)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,o,n,i)}async createTemporaryTensor(e,t,r){rr("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=Qg.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let i=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,i,n,r,!1);let o=this.temporarySessionTensorIds.get(e);return o?o.push(i):this.temporarySessionTensorIds.set(e,[i]),i}uploadTensor(e,t){if(!Er().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");rr("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return cS(r,t)}}registerMLTensor(e,t,r,n){let i=Qg.get(r);if(!i)throw new Error(`Unsupported ONNX data type: ${r}`);let o=this.tensorManager.registerTensor(e,t,i,n);return rr("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${i}, dimensions: ${n}} -> {tensorId: ${o}}`),o}registerMLConstant(e,t,r,n,i,o,a=!1){if(!o)throw new Error("External mounted files are not available.");let s=e;e.startsWith("./")&&(s=e.substring(2));let l=o.get(s);if(!l)throw new Error(`File with name ${s} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let u=l.slice(t,t+r).buffer,d;switch(i.dataType){case"float32":d=new Float32Array(u);break;case"float16":d=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(u):new Uint16Array(u);break;case"int32":d=new Int32Array(u);break;case"uint32":d=new Uint32Array(u);break;case"int64":a?(d=WM(new Uint8Array(u),!1),i.dataType="int32"):d=new BigInt64Array(u);break;case"uint64":d=new BigUint64Array(u);break;case"int8":d=new Int8Array(u);break;case"int4":case"uint4":case"uint8":d=new Uint8Array(u);break;default:throw new Error(`Unsupported data type: ${i.dataType} in creating WebNN Constant from external data.`)}return rr("verbose",()=>`[WebNN] registerMLConstant {dataType: ${i.dataType}, shape: ${i.shape}}} ${a?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(i,d)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){var t;return!!((t=this.mlContextBySessionId.get(e))!=null&&t.opSupportLimits().input.dataTypes.includes("int64"))}flush(){}}}),dS=qe(()=>{}),wx,Yg,Zg,yj,bj,xx,VM,wj,x5,kne=qe(()=>{Ds(),dS(),wx=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),Yg=[],Zg=e=>Math.ceil(Number(e)/16)*16,yj=e=>{for(let t=0;t<Yg.length;t++){let r=Yg[t];if(e<=r)return r}return Math.ceil(e/16)*16},bj=1,xx=()=>bj++,VM=async(e,t,r,n)=>{let i=Zg(r),o=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,o,0,i),e.flush(),await o.mapAsync(GPUMapMode.READ);let s=o.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(s,0,r)),l}else return new Uint8Array(s.slice(0,r))}finally{o.destroy()}},wj=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of wx)Yg.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,i=t.byteLength,o=Zg(i),a=this.storageCache.get(e);if(!a)throw new Error("gpu data for uploading does not exist");if(Number(a.originalSize)!==i)throw new Error(`inconsistent data size. gpu data size=${a.originalSize}, data size=${i}`);let s=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=s.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,i)),s.unmap();let u=this.backend.device.createCommandEncoder();u.copyBufferToBuffer(s,0,a.gpuData.buffer,0,o),this.backend.device.queue.submit([u.finish()]),s.destroy(),rr("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let i=Zg(r.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,i)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return rr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=xx();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),rr("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),rr("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=yj(e),n,i=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,o=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(i||o){let s=(i?this.freeBuffers:this.freeUniformBuffers).get(r);s?s.length>0?n=s.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let a={id:xx(),type:0,buffer:n};return this.storageCache.set(a.id,{gpuData:a,originalSize:Number(e)}),rr("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${a.id}`),a}get(e){var t;return(t=this.storageCache.get(e))==null?void 0:t.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return rr("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await VM(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=wx.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(rr("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},x5=(...e)=>new wj(...e)}),xj,dr,ln=qe(()=>{xj=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},dr=e=>new xj(e)}),Ed,Jg,Vn,vi,yt,Zr,GM,Uc,Sl,vt,sp,Fe,mt,M5,fS,Mj,T5,Bt=qe(()=>{$t(),zt(),Ed=64,Jg=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},Vn=(e,t=1)=>{let r=Jg(e,t);return typeof r=="string"?r:r[0]},vi=(e,t=1)=>{let r=Jg(e,t);return typeof r=="string"?r:r[1]},yt=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:Oe.computeStrides(r)})}),t},Zr=e=>e%4===0?4:e%2===0?2:1,GM=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,Uc=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,Sl=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,vt=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,sp=(e,t,r,n,i)=>{let o=typeof r=="number",a=o?r:r.length,s=[...new Array(a).keys()],l=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,u=Jg(t,i),d=typeof u=="string"?u:u[1],c=typeof u=="string"?u:u[0],f={indices:l,value:d,storage:c,tensor:t},p=V=>typeof V=="string"?V:`${V}u`,h={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},m=o?"uniforms.":"",v=`${m}${e}_shape`,g=`${m}${e}_strides`,_="";for(let V=0;V<a-1;V++)_+=`
    let dim${V} = current / ${vt(g,V,a)};
    let rest${V} = current % ${vt(g,V,a)};
    indices[${V}] = dim${V};
    current = rest${V};
    `;_+=`indices[${a-1}] = current;`;let b=a<2?"":`
  fn o2i_${e}(offset: u32) -> ${f.indices} {
    var indices: ${f.indices};
    var current = offset;
    ${_}
    return indices;
  }`,w=V=>(h.offsetToIndices=!0,a<2?V:`o2i_${e}(${V})`),y=[];if(a>=2)for(let V=a-1;V>=0;V--)y.push(`${vt(g,V,a)} * (indices[${V}])`);let x=a<2?"":`
  fn i2o_${e}(indices: ${f.indices}) -> u32 {
    return ${y.join("+")};
  }`,M=V=>(h.indicesToOffset=!0,a<2?V:`i2o_${e}(${V})`),T=(...V)=>a===0?"0u":`${f.indices}(${V.map(p).join(",")})`,S=(V,I)=>a<2?`${V}`:`${vt(V,I,a)}`,$=(V,I,K)=>a<2?`${V}=${K};`:`${vt(V,I,a)}=${K};`,k={},F=(V,I)=>{h.broadcastedIndicesToOffset=!0;let K=`${I.name}broadcastedIndicesTo${e}Offset`;if(K in k)return`${K}(${V})`;let ae=[];for(let pe=a-1;pe>=0;pe--){let de=I.indicesGet("outputIndices",pe+I.rank-a);ae.push(`${S(g,pe)} * (${de} % ${S(v,pe)})`)}return k[K]=`fn ${K}(outputIndices: ${I.type.indices}) -> u32 {
             return ${ae.length>0?ae.join("+"):"0u"};
           }`,`${K}(${V})`},j=(V,I)=>(()=>{if(f.storage===f.value)return`${e}[${V}]=${I};`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`${e}[${V}]=vec2<u32>(u32(${I}), select(0u, 0xFFFFFFFFu, ${I} < 0));`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`${e}[${V}]=vec2<u32>(u32(${I}), 0u);`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`${e}[${V}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${I}));`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),U=V=>(()=>{if(f.storage===f.value)return`${e}[${V}]`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`i32(${e}[${V}].x)`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`u32(${e}[${V}].x)`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${V}] & 0xFFu), bool(${e}[${V}] & 0xFF00u), bool(${e}[${V}] & 0xFF0000u), bool(${e}[${V}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),z=a<2?"":`
  fn get_${e}ByIndices(indices: ${f.indices}) -> ${d} {
    return ${U(`i2o_${e}(indices)`)};
  }`,G=a<2?"":(()=>{let V=s.map(K=>`d${K}: u32`).join(", "),I=s.map(K=>`d${K}`).join(", ");return`
  fn get_${e}(${V}) -> ${d} {
    return get_${e}ByIndices(${T(I)});
  }`})(),H=(...V)=>{if(V.length!==a)throw new Error(`indices length must be ${a}`);let I=V.map(p).join(",");return a===0?U("0u"):a===1?U(I[0]):(h.get=!0,h.getByIndices=!0,h.indicesToOffset=!0,`get_${e}(${I})`)},W=V=>a<2?U(V):(h.getByIndices=!0,h.indicesToOffset=!0,`get_${e}ByIndices(${V})`),Y=a<2?"":`
  fn set_${e}ByIndices(indices: ${f.indices}, value: ${d}) {
    ${j(`i2o_${e}(indices)`,"value")}
  }`,te=a<2?"":(()=>{let V=s.map(K=>`d${K}: u32`).join(", "),I=s.map(K=>`d${K}`).join(", ");return`
  fn set_${e}(${V}, value: ${d}) {
    set_${e}ByIndices(${T(I)}, value);
  }`})();return{impl:()=>{let V=[],I=!1;return h.offsetToIndices&&(V.push(b),I=!0),h.indicesToOffset&&(V.push(x),I=!0),h.broadcastedIndicesToOffset&&(Object.values(k).forEach(K=>V.push(K)),I=!0),h.set&&(V.push(te),I=!0),h.setByIndices&&(V.push(Y),I=!0),h.get&&(V.push(G),I=!0),h.getByIndices&&(V.push(z),I=!0),!o&&I&&V.unshift(`const ${v} = ${f.indices}(${r.join(",")});`,`const ${g} = ${f.indices}(${Oe.computeStrides(r).join(",")});`),V.join(`
`)},type:f,offsetToIndices:w,indicesToOffset:M,broadcastedIndicesToOffset:F,indices:T,indicesGet:S,indicesSet:$,set:(...V)=>{if(V.length!==a+1)throw new Error(`indices length must be ${a}`);let I=V[a];if(typeof I!="string")throw new Error("value must be string");let K=V.slice(0,a).map(p).join(",");return a===0?j("0u",I):a===1?j(K[0],I):(h.set=!0,h.setByIndices=!0,h.indicesToOffset=!0,`set_${e}(${K}, ${I})`)},setByOffset:j,setByIndices:(V,I)=>a<2?j(V,I):(h.setByIndices=!0,h.indicesToOffset=!0,`set_${e}ByIndices(${V}, ${I});`),get:H,getByOffset:U,getByIndices:W,usage:n,name:e,strides:g,shape:v,rank:a}},Fe=(e,t,r,n=1)=>sp(e,t,r,"input",n),mt=(e,t,r,n=1)=>sp(e,t,r,"output",n),M5=(e,t,r)=>sp(e,t,r,"atomicOutput",1),fS=(e,t,r,n=1)=>sp(e,t,r,"internal",n),Mj=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=Ed){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let i=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,o=i?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,a=i?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${o}) {
    ${a}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let i=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${i}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},T5=(e,t)=>new Mj(e,t)}),Tj,Mx,Pj,Ej,Sj,Cj,po,P5,E5,kl=qe(()=>{$t(),zt(),ln(),Bt(),Tj=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},Mx=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),Pj=(e,t)=>Oe.sortBasedOnPerm(e,Mx(e.length,t)),Ej=(e,t,r,n)=>{let i=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let o=0;o<t;++o)i+=`a[${e[o]}]=i[${o}];`;return i+="return a;}"},Sj=(e,t)=>{let r=[],n=[];for(let i=0;i<e.length;++i)e[i]!==1&&r.push(e[i]),e[t[i]]!==1&&n.push(t[i]);return{newShape:r,newPerm:n}},Cj=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},po=(e,t)=>{let r=e.dataType,n=e.dims.length,i=Mx(n,t),o=Pj(e.dims,i),a=e.dims,s=o,l=n<2||Cj(i,e.dims),u;if(l)return u=h=>{let m=Fe("input",r,a,4),v=mt("output",r,s,4);return`
  ${h.registerUniform("output_size","u32").declareVariables(m,v)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let h=Oe.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(h/4)}]}},getShaderSource:u};let{newShape:d,newPerm:c}=Sj(e.dims,i),f=Oe.areEqual(c,[2,3,1]),p=Oe.areEqual(c,[3,1,2]);if(d.length===2||f||p){a=f?[d[0],d[1]*d[2]]:p?[d[0]*d[1],d[2]]:d,s=[a[1],a[0]];let h=16;return u=m=>{let v=Fe("a",r,a.length),g=mt("output",r,s.length);return`
  ${m.registerUniform("output_size","u32").declareVariables(v,g)}
  var<workgroup> tile : array<array<${g.type.value}, ${h+1}>, ${h}>;
  ${m.mainStart([h,h,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${h} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${h}u + local_id.x;
    let input_row = workgroup_id_x * ${h}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${v.getByIndices(`${v.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${h}u + local_id.x;
    let output_row = workgroup_id_y * ${h}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${g.setByIndices(`${g.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let m=Oe.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(s[1]/h),y:Math.ceil(s[0]/h)},programUniforms:[{type:12,data:m},...yt(a,s)]}},getShaderSource:u}}return u=h=>{let m=Fe("a",r,a.length),v=mt("output",r,s.length);return`
  ${h.registerUniform("output_size","u32").declareVariables(m,v)}

  ${Ej(i,n,m,v)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${v.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${v.setByOffset("global_idx",m.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let h=Oe.size(o);return{outputs:[{dims:o,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},...yt(a,s)]}},getShaderSource:u}},P5=(e,t)=>{Tj(e.inputs,t.perm),e.compute(po(e.inputs[0],t.perm))},E5=e=>dr({perm:e.perm})}),$j,Aj,Oj,kj,Ij,Dj,jj,Fj,Lj,Nj,Zo,S5,C5,$5,A5,O5,k5,I5,D5,j5,F5,Ine=qe(()=>{$t(),zt(),Bt(),pS(),kl(),$j={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Aj={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Oj={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},kj={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Ij=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},Dj=(e,t)=>{let r=[],n=e.length;for(let o=0;o<n;o++)t.indexOf(o)===-1&&r.push(e[o]);let i=t.map(o=>e[o]);return[r,i]},jj=(e,t)=>{let r=e.length+t.length,n=[],i=0;for(let o=0;o<r;o++)t.indexOf(o)===-1?n.push(e[i++]):n.push(1);return n},Fj=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Lj=(e,t)=>{let r=[];if(!Fj(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},Nj=(e,t,r,n,i,o,a)=>{let s=r[0].dims,l=Oe.size(o),u=Oe.size(a),d=Fe("_A",r[0].dataType,s),c=mt("output",i,o),f=64;l===1&&(f=256);let p=`
          var<workgroup> aBestValues : array<f32, ${f}>;
       `,h=m=>`
        ${m.registerUniform("reduceSize","u32").declareVariables(d,c)}
        ${p}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${m.mainStart(f)}

          let outputIndex = global_idx / ${f};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${Oj[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${f}) {
           let candidate = f32(${d.getByOffset("offset + k")});
           bestValue = ${$j[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${f}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Aj[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${c.setByOffset("outputIndex",`${n==="mean"?`${c.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${c.type.storage}(${kj[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${f}`,inputDependencies:["type"]},getShaderSource:h,getRunData:()=>({outputs:[{dims:o,dataType:i}],dispatchGroup:{x:l},programUniforms:[{type:12,data:u}]})}},Zo=(e,t,r,n)=>{let i=e.inputs.length===1?r:HM(e.inputs,r),o=i.axes;o.length===0&&!i.noopWithEmptyAxes&&(o=e.inputs[0].dims.map((p,h)=>h));let a=Oe.normalizeAxes(o,e.inputs[0].dims.length),s=a,l=e.inputs[0],u=Lj(s,e.inputs[0].dims.length);u.length>0&&(l=e.compute(po(e.inputs[0],u),{inputs:[0],outputs:[-1]})[0],s=Ij(s.length,l.dims.length));let[d,c]=Dj(l.dims,s),f=d;i.keepDims&&(f=jj(d,a)),e.compute(Nj(t,i.cacheKey,[l],n,e.inputs[0].dataType,f,c),{inputs:[l]})},S5=(e,t)=>{Zo(e,"ReduceMeanShared",t,"mean")},C5=(e,t)=>{Zo(e,"ReduceL1Shared",t,"l1")},$5=(e,t)=>{Zo(e,"ReduceL2Shared",t,"l2")},A5=(e,t)=>{Zo(e,"ReduceLogSumExpShared",t,"logSumExp")},O5=(e,t)=>{Zo(e,"ReduceMaxShared",t,"max")},k5=(e,t)=>{Zo(e,"ReduceMinShared",t,"min")},I5=(e,t)=>{Zo(e,"ReduceProdShared",t,"prod")},D5=(e,t)=>{Zo(e,"ReduceSumShared",t,"sum")},j5=(e,t)=>{Zo(e,"ReduceSumSquareShared",t,"sumSquare")},F5=(e,t)=>{Zo(e,"ReduceLogSumShared",t,"logSum")}}),Jo,Rj,Mv,HM,ea,zj,Bj,Uj,Wj,Vj,Gj,Hj,Kj,qj,Xj,ta,L5,N5,R5,z5,B5,U5,W5,V5,G5,H5,pS=qe(()=>{$t(),zt(),ln(),Bt(),Ine(),Jo=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Rj=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Mv=(e,t,r,n,i,o,a=!1,s=!1)=>{let l=[],u=r[0].dims,d=u.length,c=Oe.normalizeAxes(i,d),f=!s&&c.length===0;u.forEach((m,v)=>{f||c.indexOf(v)>=0?a&&l.push(1):l.push(m)});let p=l.length,h=Oe.size(l);return{name:e,shaderCache:t,getShaderSource:m=>{let v=[],g=Fe("_A",r[0].dataType,d),_=mt("output",o,p),b=n(g,_,c),w=b[2];for(let y=0,x=0;y<d;y++)f||c.indexOf(y)>=0?(a&&x++,w=`for(var j${y}: u32 = 0; j${y} < ${u[y]}; j${y}++) {
                  ${b[2].includes("last_index")?`let last_index = j${y};`:""}
                  ${g.indicesSet("input_indices",y,`j${y}`)}
                  ${w}
                }`):(v.push(`${g.indicesSet("input_indices",y,_.indicesGet("output_indices",x))};`),x++);return`

        ${m.registerUniform("output_size","u32").declareVariables(g,_)}

        ${m.mainStart()}
          ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${g.type.indices};
          let output_indices = ${_.offsetToIndices("global_idx")};

          ${v.join(`
`)}
          ${b[0]}       // init ops for reduce max/min
          ${b[1]}
          ${w}
          ${b[3]}
          ${b.length===4?_.setByOffset("global_idx","value"):b.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:o}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},...yt(u,l)]})}},HM=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),dr({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},ea=(e,t,r,n)=>{let i=e.inputs,o=i.length===1?r:HM(i,r);e.compute(Mv(t,{hint:o.cacheKey,inputDependencies:["rank"]},[i[0]],o.noopWithEmptyAxes&&o.axes.length===0?Rj:n,o.axes,i[0].dataType,o.keepDims,o.noopWithEmptyAxes),{inputs:[0]})},zj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},Bj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},Uj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Wj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},Vj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceMax",t,(r,n,i)=>{let o=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&o.push(r.indicesSet("input_indices",a,0));return[`${o.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},Gj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceMean",t,(r,n,i)=>{let o=1;for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&(o*=e.inputs[0].dims[a]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${o});`]})},Hj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceMin",t,(r,n,i)=>{let o=[];for(let a=0;a<r.rank;a++)(i.indexOf(a)>=0||i.length===0)&&o.push(`input_indices[${a}] = 0;`);return[`${o.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},Kj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},qj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},Xj=(e,t)=>{Jo(e.inputs),ea(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},ta=(e,t,r)=>{if(t.length===0)return r;let n=1,i=1;for(let o=0;o<t.length;o++)t.indexOf(o)===-1?n*=e[o]:i*=e[o];return i<32&&n>1024},L5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gj(e,t):S5(e,t)},N5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Bj(e,t):C5(e,t)},R5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Uj(e,t):$5(e,t)},z5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Wj(e,t):A5(e,t)},B5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Vj(e,t):O5(e,t)},U5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hj(e,t):k5(e,t)},W5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kj(e,t):I5(e,t)},V5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?qj(e,t):D5(e,t)},G5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Xj(e,t):j5(e,t)},H5=(e,t)=>{ta(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?zj(e,t):F5(e,t)}}),Tx,K5,q5,KM,Dne=qe(()=>{$t(),ln(),pS(),Tx=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},K5=(e,t)=>{Tx(e.inputs);let r=(n,i,o)=>{let a=[];for(let s=0;s<n.rank;s++)(o.indexOf(s)>=0||o.length===0)&&a.push(`input_indices[${s}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Mv("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},q5=(e,t)=>{Tx(e.inputs);let r=(n,i,o)=>{let a=[];for(let s=0;s<n.rank;s++)(o.indexOf(s)>=0||o.length===0)&&a.push(`input_indices[${s}] = 0;`);return[`${a.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Mv("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},KM=e=>dr(e)}),Qj,e_,Yj,Zj,Jj,Th,eF,X5,hS=qe(()=>{$t(),zt(),dS(),Bt(),Qj=(e,t)=>{let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5];if(a&&s)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],u=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let c=i.dims[0]/3,f=c,p=f;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let b of t.qkvHiddenSizes)if(b%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");c=t.qkvHiddenSizes[0],f=t.qkvHiddenSizes[1],p=t.qkvHiddenSizes[2]}let h=u;if(c!==f)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==c+f+p)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let m=0;if(a){if(f!==p)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(a.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(a.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(a.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(a.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(a.dims[4]!==f/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(m=a.dims[3])}let v=h+m,g=-1,_=0;if(o)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");if(s){if(s.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(s.dims[0]!==l||s.dims[1]!==t.numHeads||s.dims[2]!==u||s.dims[3]!==v)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:u,pastSequenceLength:m,kvSequenceLength:h,totalSequenceLength:v,maxSequenceLength:g,inputHiddenSize:d,hiddenSize:c,vHiddenSize:p,headSize:Math.floor(c/t.numHeads),vHeadSize:Math.floor(p/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:_,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},e_=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e==null?void 0:e.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,Yj=(e,t,r,n,i,o,a,s)=>{let l=Zr(a?1:o),u=64,d=o/l;d<u&&(u=32);let c=Math.ceil(o/l/u),f=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:i},{type:12,data:d},{type:12,data:c}],p=Vn(e.dataType,l),h=vi(1,l),m=["type"];a&&m.push("type"),s&&m.push("type");let v=g=>{let _=mt("x",e.dataType,e.dims,l),b=[_],w=a?Fe("seq_lens",a.dataType,a.dims):void 0;w&&b.push(w);let y=s?Fe("total_sequence_length_input",s.dataType,s.dims):void 0;y&&b.push(y);let x=vi(e.dataType),M=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${u}>;
  var<workgroup> thread_sum: array<f32, ${u}>;
  ${g.registerUniforms(M).declareVariables(...b)}
  ${g.mainStart([u,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${e_(w,y,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${u}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${a?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${h}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${h}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${u}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${h}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${h}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${u}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${_.type.value}(${x}(1.0) / ${x}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${h}(x[offset + i]);
        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${a?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${_.type.value}(${x}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${p};${l}`,inputDependencies:m},getShaderSource:v,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:i,z:t*r},programUniforms:f})}},Zj=(e,t,r,n,i,o,a,s,l)=>{let u=a+o.kvSequenceLength,d=[o.batchSize,o.numHeads,o.sequenceLength,u],c=e>1&&n,f=o.kvNumHeads?o.kvNumHeads:o.numHeads,p=c?[o.batchSize,f,u,o.headSize]:void 0,h=o.nReps?o.nReps:1,m=o.scale===0?1/Math.sqrt(o.headSize):o.scale,v=Zr(o.headSize),g=o.headSize/v,_=12,b={x:Math.ceil(u/_),y:Math.ceil(o.sequenceLength/_),z:o.batchSize*o.numHeads},w=[{type:12,data:o.sequenceLength},{type:12,data:g},{type:12,data:u},{type:12,data:o.numHeads},{type:12,data:o.headSize},{type:1,data:m},{type:12,data:a},{type:12,data:o.kvSequenceLength},{type:12,data:h}],y=c&&n&&Oe.size(n.dims)>0,x=["type","type"];y&&x.push("type"),i&&x.push("type"),s&&x.push("type"),l&&x.push("type");let M=[{dims:d,dataType:t.dataType,gpuDataType:0}];c&&M.push({dims:p,dataType:t.dataType,gpuDataType:0});let T=S=>{let $=Fe("q",t.dataType,t.dims,v),k=Fe("key",r.dataType,r.dims,v),F=[$,k];if(y){let Y=Fe("past_key",n.dataType,n.dims,v);F.push(Y)}i&&F.push(Fe("attention_bias",i.dataType,i.dims));let j=s?Fe("seq_lens",s.dataType,s.dims):void 0;j&&F.push(j);let U=l?Fe("total_sequence_length_input",l.dataType,l.dims):void 0;U&&F.push(U);let z=mt("output",t.dataType,d),G=[z];c&&G.push(mt("present_key",t.dataType,p,v));let H=vi(1,v),W=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${_}u;

  var<workgroup> tileQ: array<${$.type.storage}, ${_*_}>;
  var<workgroup> tileK: array<${$.type.storage}, ${_*_}>;
  ${S.registerUniforms(W).declareVariables(...F,...G)}
  ${S.mainStart([_,_,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${h===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${h===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${e_(j,U,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${y&&c?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${c?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${H}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${y&&c?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${c?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${H}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(v){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${v}`)}})()};
        output[outputIdx] = ${z.type.value} (sum * uniforms.alpha) + ${i?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${v};${i!==void 0};${n!==void 0};${e}`,inputDependencies:x},getRunData:()=>({outputs:M,dispatchGroup:b,programUniforms:w}),getShaderSource:T}},Jj=(e,t,r,n,i,o,a=void 0,s=void 0)=>{let l=o+i.kvSequenceLength,u=i.nReps?i.nReps:1,d=i.vHiddenSize*u,c=e>1&&n,f=i.kvNumHeads?i.kvNumHeads:i.numHeads,p=c?[i.batchSize,f,l,i.headSize]:void 0,h=[i.batchSize,i.sequenceLength,d],m=12,v={x:Math.ceil(i.vHeadSize/m),y:Math.ceil(i.sequenceLength/m),z:i.batchSize*i.numHeads},g=[{type:12,data:i.sequenceLength},{type:12,data:l},{type:12,data:i.vHeadSize},{type:12,data:i.numHeads},{type:12,data:i.headSize},{type:12,data:d},{type:12,data:o},{type:12,data:i.kvSequenceLength},{type:12,data:u}],_=c&&n&&Oe.size(n.dims)>0,b=["type","type"];_&&b.push("type"),a&&b.push("type"),s&&b.push("type");let w=[{dims:h,dataType:t.dataType,gpuDataType:0}];c&&w.push({dims:p,dataType:t.dataType,gpuDataType:0});let y=x=>{let M=Fe("probs",t.dataType,t.dims),T=Fe("v",r.dataType,r.dims),S=[M,T];_&&S.push(Fe("past_value",n.dataType,n.dims));let $=a?Fe("seq_lens",a.dataType,a.dims):void 0;a&&S.push($);let k=s?Fe("total_sequence_length_input",s.dataType,s.dims):void 0;s&&S.push(k);let F=[mt("output",t.dataType,h)];c&&F.push(mt("present_value",t.dataType,p));let j=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${m}u;
  var<workgroup> tileQ: array<${M.type.value}, ${m*m}>;
  var<workgroup> tileV: array<${M.type.value}, ${m*m}>;
  ${x.registerUniforms(j).declareVariables(...S,...F)}
  ${x.mainStart([m,m,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${u===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${u===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${e_($,k,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${_&&c?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${c?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${M.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${_&&c?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${c?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:b},getRunData:()=>({outputs:w,dispatchGroup:v,programUniforms:g}),getShaderSource:y}},Th=(e,t,r,n,i,o,a,s,l,u,d=void 0,c=void 0)=>{let f=Math.min(e.outputCount,1+(a?1:0)+(s?1:0)),p=f>1?u.pastSequenceLength:0,h=p+u.kvSequenceLength,m=l&&Oe.size(l.dims)>0?l:void 0,v=[t,r];f>1&&a&&Oe.size(a.dims)>0&&v.push(a),m&&v.push(m),d&&v.push(d),c&&v.push(c);let g=e.compute(Zj(f,t,r,a,m,u,p,d,c),{inputs:v,outputs:f>1?[-1,1]:[-1]})[0];e.compute(Yj(g,u.batchSize,u.numHeads,p,u.sequenceLength,h,d,c),{inputs:d&&c?[g,d,c]:[g],outputs:[]});let _=[g,n];f>1&&s&&Oe.size(s.dims)>0&&_.push(s),d&&_.push(d),c&&_.push(c),e.compute(Jj(f,g,n,s,u,p,d,c),{inputs:_,outputs:f>1?[0,2]:[0]})},eF=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,i=t.inputHiddenSize,o=t.headSize,a=12,s={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],u=[{type:12,data:n},{type:12,data:i},{type:12,data:o},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=c=>{let f=mt("output_q",l[0].dataType,r),p=mt("output_k",l[0].dataType,r),h=mt("output_v",l[0].dataType,r),m=Fe("input",l[0].dataType,l[0].dims),v=Fe("weight",l[1].dataType,l[1].dims),g=Fe("bias",l[2].dataType,l[2].dims),_=m.type.storage,b=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${a}u;
  var<workgroup> tileInput: array<${_}, ${a*a}>;
  var<workgroup> tileWeightQ: array<${_}, ${a*a}>;
  var<workgroup> tileWeightK: array<${_}, ${a*a}>;
  var<workgroup> tileWeightV: array<${_}, ${a*a}>;
  ${c.registerUniforms(b).declareVariables(m,v,g,f,p,h)}
  ${c.mainStart([a,a,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${_}(0);
    var valueK = ${_}(0);
    var valueV = ${_}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:s,programUniforms:u}),getShaderSource:d},{inputs:l,outputs:[-1,-1,-1]})},X5=(e,t)=>{let r=Qj(e.inputs,t),[n,i,o]=eF(e,r);return Th(e,n,i,o,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),tF,rF,nF,Q5,jne=qe(()=>{Ma(),$t(),zt(),ln(),Bt(),tF=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,i,o)=>{let a=i.length;if(a!==n.length)throw new Error(`${o}: num dimensions != ${a}`);i.forEach((s,l)=>{if(s!==n[l])throw new Error(`${o}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},rF=(e,t)=>{let{epsilon:r,spatial:n,format:i}=t,o=e[0].dims,a=n?Zr(o[o.length-1]):1,s=i==="NHWC"&&o.length>1?a:1,l=Oe.size(o)/a,u=n,d=u?o.length:o,c=Fe("x",e[0].dataType,e[0].dims,a),f=Fe("scale",e[1].dataType,e[1].dims,s),p=Fe("bias",e[2].dataType,e[2].dims,s),h=Fe("inputMean",e[3].dataType,e[3].dims,s),m=Fe("inputVar",e[4].dataType,e[4].dims,s),v=mt("y",e[0].dataType,d,a),g=()=>{let b="";if(n)b=`let cOffset = ${o.length===1?"0u":i==="NHWC"?`outputIndices[${o.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")b=`
            ${v.indicesSet("outputIndices","0","0")}
            let cOffset = ${v.indicesToOffset("outputIndices")};`;else{b=`var cIndices = ${f.type.indices}(0);
                       cIndices[0] = outputIndices[${o.length-1}];`;for(let w=1;w<f.rank;w++)b+=`cIndices[${w}] = outputIndices[${w}];`;b+=`let cOffset = ${f.indicesToOffset("cIndices")};`}return b},_=b=>`
  const epsilon = ${r};
  ${b.registerUniform("outputSize","u32").declareVariables(c,f,p,h,m,v)}
  ${b.mainStart()}
  ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${v.offsetToIndices(`global_idx * ${a}`)};
    ${g()}
    let scale = ${f.getByOffset("cOffset")};
    let bias = ${p.getByOffset("cOffset")};
    let inputMean = ${h.getByOffset("cOffset")};
    let inputVar = ${m.getByOffset("cOffset")};
    let x = ${c.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${v.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${a}`,inputDependencies:u?["rank","type","type","type","type"]:void 0},getShaderSource:_,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u?[{type:12,data:l},...yt(o)]:[{type:12,data:l}]})}},nF=e=>dr(e),Q5=(e,t)=>{let{inputs:r,outputCount:n}=e,i=nF({...t,outputCount:n});if(Or.webgpu.validateInputContent&&tF(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(rF(r,i))}}),iF,oF,Y5,Fne=qe(()=>{zt(),Bt(),iF=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},oF=e=>{let t=e[0].dims,r=e[0].dims[2],n=Oe.size(t)/4,i=e[0].dataType,o=Fe("input",i,t,4),a=Fe("bias",i,[r],4),s=Fe("residual",i,t,4),l=mt("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:u=>`
  const channels = ${r}u / 4;
  ${u.declareVariables(o,a,s,l)}

  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${o.getByOffset("global_idx")}
      + ${a.getByOffset("global_idx % channels")} + ${s.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},Y5=e=>{iF(e.inputs),e.compute(oF(e.inputs))}}),aF,sr,Z5,J5,e8,t8,r8,n8,i8,o8,a8,sF,s8,l8,u8,c8,Ap,d8,R_,f8,p8,h8,m8,g8,_8,v8,y8,b8,w8,x8,M8,T8,P8,E8,S8,Px,C8,qM,XM,$8,A8,O8,lF,uF,k8,mS=qe(()=>{$t(),zt(),ln(),Bt(),aF=(e,t,r,n,i,o,a)=>{let s=Math.ceil(t/4),l="";typeof i=="string"?l=`${i}(a)`:l=i("a");let u=Fe("inputData",r,[s],4),d=mt("outputData",n,[s],4),c=[{name:"vec_size",type:"u32"}];return a&&c.push(...a),`
      ${e.registerUniforms(c).declareVariables(u,d)}

  ${o??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${u.getByOffset("global_idx")};
    ${d.setByOffset("global_idx",l)}
  }`},sr=(e,t,r,n,i,o=e.dataType,a,s)=>{let l=[{type:12,data:Math.ceil(Oe.size(e.dims)/4)}];return a&&l.push(...a),{name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:u=>aF(u,Oe.size(e.dims),e.dataType,o,r,n,s),getRunData:u=>({outputs:[{dims:e.dims,dataType:o}],dispatchGroup:{x:Math.ceil(Oe.size(u[0].dims)/64/4)},programUniforms:l})}},Z5=e=>{e.compute(sr(e.inputs[0],"Abs","abs"))},J5=e=>{e.compute(sr(e.inputs[0],"Acos","acos"))},e8=e=>{e.compute(sr(e.inputs[0],"Acosh","acosh"))},t8=e=>{e.compute(sr(e.inputs[0],"Asin","asin"))},r8=e=>{e.compute(sr(e.inputs[0],"Asinh","asinh"))},n8=e=>{e.compute(sr(e.inputs[0],"Atan","atan"))},i8=e=>{e.compute(sr(e.inputs[0],"Atanh","atanh"))},o8=e=>dr(e),a8=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(sr(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},sF=e=>{let t,r,n=e.length>=2&&e[1].data!==0,i=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=i?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=i?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return dr({min:t,max:r})},s8=(e,t)=>{let r=t||sF(e.inputs),n=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"Clip",i=>`clamp(${i}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},l8=e=>{e.compute(sr(e.inputs[0],"Ceil","ceil"))},u8=e=>{e.compute(sr(e.inputs[0],"Cos","cos"))},c8=e=>{e.compute(sr(e.inputs[0],"Cosh","cosh"))},Ap=e=>dr(e),d8=(e,t)=>{let r=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},R_=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,f8=e=>{let t=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,R_(t)))},p8=e=>{e.compute(sr(e.inputs[0],"Exp","exp"))},h8=e=>{e.compute(sr(e.inputs[0],"Floor","floor"))},m8=e=>{let t=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,R_(t)))},g8=(e,t)=>{let r=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},_8=e=>{e.compute(sr(e.inputs[0],"Not",t=>`!${t}`))},v8=e=>{e.compute(sr(e.inputs[0],"Neg",t=>`-${t}`))},y8=e=>{e.compute(sr(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},b8=e=>{let t=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},w8=e=>{e.compute(sr(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},x8=e=>dr(e),M8=(e,t)=>{let r=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},T8=e=>{e.compute(sr(e.inputs[0],"Sin","sin"))},P8=e=>{e.compute(sr(e.inputs[0],"Sinh","sinh"))},E8=e=>{e.compute(sr(e.inputs[0],"Sqrt","sqrt"))},S8=e=>{e.compute(sr(e.inputs[0],"Tan","tan"))},Px=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,C8=e=>{e.compute(sr(e.inputs[0],"Tanh",Px))},qM=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${Px("v")};
}
`,XM=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,$8=e=>{let t=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"FastGelu",XM,qM(t),void 0,e.inputs[0].dataType))},A8=(e,t)=>{let r=vi(e.inputs[0].dataType);return e.compute(sr(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},O8=e=>{e.compute(sr(e.inputs[0],"Log","log"))},lF=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,uF=e=>`quick_gelu_impl(${e})`,k8=(e,t)=>{let r=vi(e.inputs[0].dataType);e.compute(sr(e.inputs[0],"QuickGelu",uF,lF(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),cF,dF,I8,Lne=qe(()=>{zt(),Bt(),mS(),cF=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dF=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=Fe("input",e[0].dataType,e[0].dims,4),n=Fe("bias",e[0].dataType,[e[0].dims[2]],4),i=mt("output",e[0].dataType,t,4),o=Oe.size(t)/4,a=Vn(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:s=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${s.declareVariables(r,n,i)}

  ${R_(a)}

  ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes(o)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${i.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},I8=e=>{cF(e.inputs),e.compute(dF(e.inputs))}}),fF,pF,ra,D8,j8,F8,L8,N8,R8,z8,B8,U8,W8,Nne=qe(()=>{$t(),zt(),Bt(),fF=(e,t,r,n,i,o,a,s,l,u,d,c)=>{let f,p;typeof s=="string"?f=p=(_,b)=>`${s}((${_}),(${b}))`:typeof s=="function"?f=p=s:(f=s.scalar,p=s.vector);let h=mt("outputData",d,n.length,4),m=Fe("aData",l,t.length,4),v=Fe("bData",u,r.length,4),g;if(i)if(o){let _=Oe.size(t)===1,b=Oe.size(r)===1,w=t.length>0&&t[t.length-1]%4===0,y=r.length>0&&r[r.length-1]%4===0;_||b?g=h.setByOffset("global_idx",p(_?`${m.type.value}(${m.getByOffset("0")}.x)`:m.getByOffset("global_idx"),b?`${v.type.value}(${v.getByOffset("0")}.x)`:v.getByOffset("global_idx"))):g=`
            let outputIndices = ${h.offsetToIndices("global_idx * 4u")};
            let offsetA = ${m.broadcastedIndicesToOffset("outputIndices",h)};
            let offsetB = ${v.broadcastedIndicesToOffset("outputIndices",h)};
            ${h.setByOffset("global_idx",p(a||w?m.getByOffset("offsetA / 4u"):`${m.type.value}(${m.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||y?v.getByOffset("offsetB / 4u"):`${v.type.value}(${v.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else g=h.setByOffset("global_idx",p(m.getByOffset("global_idx"),v.getByOffset("global_idx")));else{if(!o)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let _=(b,w,y="")=>{let x=`aData[indexA${w}][componentA${w}]`,M=`bData[indexB${w}][componentB${w}]`;return`
            let outputIndices${w} = ${h.offsetToIndices(`global_idx * 4u + ${w}u`)};
            let offsetA${w} = ${m.broadcastedIndicesToOffset(`outputIndices${w}`,h)};
            let offsetB${w} = ${v.broadcastedIndicesToOffset(`outputIndices${w}`,h)};
            let indexA${w} = offsetA${w} / 4u;
            let indexB${w} = offsetB${w} / 4u;
            let componentA${w} = offsetA${w} % 4u;
            let componentB${w} = offsetB${w} % 4u;
            ${b}[${w}] = ${y}(${f(x,M)});
          `};d===9?g=`
            var data = vec4<u32>(0);
            ${_("data",0,"u32")}
            ${_("data",1,"u32")}
            ${_("data",2,"u32")}
            ${_("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:g=`
            ${_("outputData[global_idx]",0)}
            ${_("outputData[global_idx]",1)}
            ${_("outputData[global_idx]",2)}
            ${_("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(m,v,h)}

        ${c??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${g}
      }`},pF=(e,t,r,n,i,o,a=r.dataType)=>{let s=r.dims.map(m=>Number(m)??1),l=n.dims.map(m=>Number(m)??1),u=!Oe.areEqual(s,l),d=s,c=Oe.size(s),f=!1,p=!1,h=[u];if(u){let m=Pd.calcShape(s,l,!1);if(!m)throw new Error("Can't perform binary op on the given tensors");d=m.slice(),c=Oe.size(d);let v=Oe.size(s)===1,g=Oe.size(l)===1,_=s.length>0&&s[s.length-1]%4===0,b=l.length>0&&l[l.length-1]%4===0;h.push(v),h.push(g),h.push(_),h.push(b);let w=1;for(let y=1;y<d.length;y++){let x=s[s.length-y],M=l[l.length-y];if(x===M)w*=x;else break}w%4===0?(p=!0,f=!0):(v||g||_||b)&&(f=!0)}else f=!0;return h.push(f),{name:e,shaderCache:{hint:t+h.map(m=>m.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:m=>fF(m,s,l,d,f,u,p,i,r.dataType,n.dataType,a,o),getRunData:()=>({outputs:[{dims:d,dataType:a}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:Math.ceil(Oe.size(d)/4)},...yt(s,l,d)]})}},ra=(e,t,r,n,i,o)=>{e.compute(pF(t,i??"",e.inputs[0],e.inputs[1],r,n,o))},D8=e=>{ra(e,"Add",(t,r)=>`${t}+${r}`)},j8=e=>{ra(e,"Div",(t,r)=>`${t}/${r}`)},F8=e=>{ra(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},L8=e=>{ra(e,"Mul",(t,r)=>`${t}*${r}`)},N8=e=>{let t=Fe("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;ra(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},R8=e=>{ra(e,"Sub",(t,r)=>`${t}-${r}`)},z8=e=>{ra(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},B8=e=>{ra(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},U8=e=>{ra(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},W8=e=>{ra(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),hF,mF,gF,_F,V8,G8,Rne=qe(()=>{$t(),zt(),ln(),Bt(),hF=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],i=n.dataType,o=n.dims.length;e.forEach((a,s)=>{if(s!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==o)throw new Error("input tensors should have the same shape");a.dims.forEach((l,u)=>{if(u!==t&&l!==n.dims[u])throw new Error("non concat dimensions must match")})}})},mF=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,gF=(e,t)=>{let r=e.length,n=[];for(let i=0;i<r;++i){let o=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?n.push(o):i===0?n.push(`if (inputIndex == ${i}u) { ${o} }`):i===r-1?n.push(`else { ${o} }`):n.push(`else if (inputIndex == ${i}) { ${o} }`)}return n.join(`
`)},_F=(e,t,r,n)=>{let i=Oe.size(r),o=new Array(e.length),a=new Array(e.length),s=0,l=[],u=[],d=[{type:12,data:i}];for(let m=0;m<e.length;++m)s+=e[m].dims[t],o[m]=s,u.push(e[m].dims.length),a[m]=Fe(`input${m}`,n,u[m]),l.push("rank"),d.push({type:12,data:o[m]});for(let m=0;m<e.length;++m)d.push(...yt(e[m].dims));d.push(...yt(r));let c=mt("output",n,r.length),f=c.indicesGet("indices",t),p=Array.from(Array(o.length).keys()).map(m=>`uniforms.sizeInConcatAxis${m}`).join(","),h=m=>`

  ${(()=>{m.registerUniform("outputSize","u32");for(let v=0;v<e.length;v++)m.registerUniform(`sizeInConcatAxis${v}`,"u32");return m.declareVariables(...a,c)})()}

  ${mF(o.length,p)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${c.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${f});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${o.length}u>(${p});
      ${f} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${gF(a,c)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:h}},V8=(e,t)=>{let r=e.inputs,n=r[0].dims,i=Oe.normalizeAxis(t.axis,n.length);hF(r,i);let o=n.slice();o[i]=r.reduce((s,l)=>s+(l.dims.length>i?l.dims[i]:0),0);let a=r.filter(s=>Oe.size(s.dims)>0);e.compute(_F(a,i,o,r[0].dataType),{inputs:a})},G8=e=>dr({axis:e.axis})}),zu,Bu,Uu,gS,ec=qe(()=>{$t(),zt(),zu=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},Bu=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Uu=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},gS=e=>{let t=(e==null?void 0:e.activation)||"";if(t==="HardSigmoid"){let[r,n]=(e==null?void 0:e.activation_params)||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=(e==null?void 0:e.activation_params)||[_5,v5];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=(e==null?void 0:e.activation_params)||[.01];return{activation:t,alpha:r}}return{activation:t}}}),qn,H8,_S=qe(()=>{qn=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},H8=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),K8,zne=qe(()=>{K8=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),Gp,vS,yS=qe(()=>{$t(),zt(),Bt(),ec(),Gp=(e,t,r,n,i)=>{let o=n-r;return`
      ${Array.from({length:r}).map((a,s)=>`
      if (${vt(t.shape,s,t.rank)} != 1) {
        ${t.indicesSet(e,s,vt(i,s+o,n))}
      } else {
        ${t.indicesSet(e,s,0)}
      }`).join("")}
`},vS=(e,t,r,n,i=!1,o)=>{let a=e[0].dims,s=e[1].dims,l=a[a.length-2],u=s[s.length-1],d=a[a.length-1],c=Zr(u),f=Zr(d),p=Zr(l),h=Oe.size(r)/c/p,m=e.length>2,v=n?n.slice(0,-2):r.slice(0,-2),g=[Oe.size(v),l,u],_=[{type:12,data:h},{type:12,data:l},{type:12,data:u},{type:12,data:d}];Bu(t,_),_.push(...yt(v,a,s)),m&&_.push(...yt(e[2].dims)),_.push(...yt(g));let b=w=>{let y=fS("batch_dims",e[0].dataType,v.length),x=Fe("a",e[0].dataType,a.length,f),M=Fe("b",e[1].dataType,s.length,c),T=mt("output",e[0].dataType,g.length,c),S=Vn(T.type.tensor),$=zu(t,T.type.value,S),k=[x,M],F="";if(m){let z=i?c:1;k.push(Fe("bias",e[2].dataType,e[2].dims.length,z)),F=`${i?`value += bias[col / ${z}];`:`value += ${T.type.value}(bias[row + i]);`}`}let j=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Uu(t,j);let U=()=>{let z=`var a_data: ${x.type.value};`;for(let G=0;G<f;G++)z+=`
              let b_data${G} = b[(b_offset + (k + ${G}) * uniforms.N + col) / ${c}];`;for(let G=0;G<p;G++){z+=`a_data = a[(a_offset + (row + ${G}) * uniforms.K + k) / ${f}];`;for(let H=0;H<f;H++)z+=`
            values[${G}] = fma(${M.type.value}(a_data${f===1?"":`[${H}]`}), b_data${H}, values[${G}]);
`}return z};return`
  ${w.registerUniforms(j).registerInternalVariables(y).declareVariables(...k,T)}
  ${w.mainStart()}
    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${c})) * ${c};
    var index1 = global_idx / (uniforms.N / ${c});
    let stride1 = uniforms.M / ${p};
    let row = (index1 % stride1) * ${p};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${y.offsetToIndices("batch")};`}

    var a_indices: ${x.type.indices};
    ${Gp("a_indices",x,x.rank-2,y.rank,"batch_indices")}
    ${x.indicesSet("a_indices",x.rank-2,0)}
    ${x.indicesSet("a_indices",x.rank-1,0)}
    let a_offset = ${x.indicesToOffset("a_indices")};

    var b_indices: ${M.type.indices};
    ${Gp("b_indices",M,M.rank-2,y.rank,"batch_indices")}
    ${M.indicesSet("b_indices",M.rank-2,0)}
    ${M.indicesSet("b_indices",M.rank-1,0)}
    let b_offset = ${M.indicesToOffset("b_indices")};
    var values: array<${T.type.value}, ${p}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${f}) {
      ${U()}
    }
    for (var i = 0u; i < ${p}u; i++) {
      var value = values[i];
      ${F}
      ${$}
      let cur_indices = ${T.type.indices}(batch, row + i, col);
      let offset = ${T.indicesToOffset("cur_indices")};
      ${T.setByOffset(`offset / ${c}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${c};${f};${p};${i}`,inputDependencies:m?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:o?o(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:_}),getShaderSource:b}}}),vF,yF,QM,Ex,bF,YM,wF,Tv,bS=qe(()=>{$t(),zt(),Bt(),ec(),yS(),_S(),vF=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,yF=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,QM=(e,t,r="f32",n,i=!1,o=32,a=!1,s=32)=>{let l=t[1]*e[1],u=t[0]*e[0],d=i?l:o,c=i?o:l,f=d/t[0],p=o/t[1];if(!((i&&f===4&&e[1]===4||!i&&(f===3||f===4))&&d%t[0]===0&&o%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${f} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${f} must be 3 or 4.
  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${o} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${f}<${r}>, ${d/f}>, ${c}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${u/e[0]}>, ${o}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${f};
const tileInner = ${o};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${a?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${a?`${Math.ceil(s/o)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${a?`i32(globalId.z) * ${s}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${p};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vF(i,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${f===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${yF(i,f)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Ex=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,bF=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",YM=(e,t,r="f32",n,i=!1,o=32,a=!1,s=32,l=!1)=>{let u=e[1]*t[1],d=e[0]*t[0],c=i?u:o,f=i?o:u;if(!(f%t[1]===0&&c%t[0]===0&&o%t[1]===0))throw new Error(`tileAHight ${f} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${c} must be divisible by workgroupSize[0]${t[0]}, tileInner ${o} must be divisible by workgroupSize[1]${t[1]}`);let p=f/t[1],h=c/t[0],m=o/t[1],v=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${u};
    let globalColStart = i32(workgroupId.x) * ${d};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${f}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${c}; inputCol = inputCol + ${t[0]}) {
          ${Ex(i,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${o}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${u};

let tileRowA = i32(localId.y) * ${p};
let tileColA = i32(localId.x) * ${h};
let tileRowB = i32(localId.y) * ${m};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${h}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Ex(i,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${m}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${bF(i)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${c}>, ${f}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${o}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${o};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${a?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${a?`${Math.ceil(s/o)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${a?`i32(globalId.z) * ${s}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${v}
  }
`},wF=(e,t,r,n,i=!1)=>{let[o,a,s,l]=n,u=Vn(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${o.type.indices}) -> ${qn(e,u)} {
      var value = ${qn(e,u)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${a.type.indices};
        ${Gp("aIndices",a,a.rank-2,o.rank,"batchIndices")}
        ${a.indicesSet("aIndices",a.rank-2,"u32(row)")}
        ${a.indicesSet("aIndices",a.rank-1,"u32(colIn)")}
        value = ${a.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${o.type.indices}) -> ${qn(e,u)} {
      var value = ${qn(e,u)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${s.type.indices};
        ${Gp("bIndices",s,s.rank-2,o.rank,"batchIndices")}
        ${s.indicesSet("bIndices",s.rank-2,"u32(row)")}
        ${s.indicesSet("bIndices",s.rank-1,"u32(colIn)")}
        value = ${s.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${qn(e,u)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${i?"bias[colIn]":`${qn(e,u)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},Tv=(e,t,r,n,i=!1,o)=>{let a=e[0].dims,s=e[1].dims,l=a.slice(0,-2),u=s.slice(0,-2),d=n?n.slice(0,-2):r.slice(0,-2),c=Oe.size(d),f=a[a.length-2],p=a[a.length-1],h=s[s.length-1],m=p%4===0&&h%4===0,v=f<=8?[4,1,1]:[4,4,1],g=[8,8,1],_=[Math.ceil(h/g[0]/v[0]),Math.ceil(f/g[1]/v[1]),Math.ceil(c/g[2]/v[2])],b=m?4:1,w=[...l,f,p/b],y=w.length,x=[...u,p,h/b],M=x.length,T=[c,f,h/b],S=[{type:6,data:f},{type:6,data:h},{type:6,data:p}];Bu(t,S),S.push(...yt(d,w,x));let $=["rank","rank"],k=e.length>2;k&&(S.push(...yt(e[2].dims)),$.push("rank")),S.push(...yt(T));let F=j=>{let U=d.length,z=fS("batchDims",e[0].dataType,U,1),G=Vn(e[0].dataType),H=Fe("a",e[0].dataType,y,b),W=Fe("b",e[1].dataType,M,b),Y=mt("result",e[0].dataType,T.length,b),te=[H,W];if(k){let pe=i?b:1;te.push(Fe("bias",e[2].dataType,e[2].dims.length,pe))}let V=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Uu(t,V);let I=Vn(Y.type.tensor),K=zu(t,Y.type.value,I),ae=wF(b,k,K,[z,H,W,Y],i);return`
  ${j.registerUniforms(V).registerInternalVariables(z).declareVariables(...te,Y)}
  ${ae}
  ${m?QM(v,g,G,z):YM(v,g,G,z)}
                   `};return{name:"MatMul",shaderCache:{hint:`${v};${t.activation};${m};${i}`,inputDependencies:$},getRunData:()=>({outputs:[{dims:o?o(r):r,dataType:e[0].dataType}],dispatchGroup:{x:_[0],y:_[1],z:_[2]},programUniforms:S}),getShaderSource:F}}}),xF,q8,Bne=qe(()=>{$t(),Ds(),Bt(),ec(),_S(),zne(),bS(),xF=(e,t,r,n,i=!1,o,a=4,s=4,l=4,u="f32")=>{let d=S=>{switch(S){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${u}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${S} is not supported.`)}},c=S=>{switch(S){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${S} is not supported.`)}},f=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,p=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,h=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",m=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",v=e?"row":"col",g=e?"col":"row",_=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${v} / outWidth;
    let outCol = ${v} % outWidth;

    let WRow = ${g} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${g} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${g} % inChannels;
    var resData = ${qn(a,u)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${h} && xCol >= 0 && xCol < ${m}) {
      ${f}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${d(a)}
    }
    return resData;`,b=e?t&&n?`
    let col = colIn * ${a};
    ${_}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${_}
    }
    return ${qn(a,u)}(0.0);`:n&&r?`
    let col = colIn * ${a};
    ${_}`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${_}
    }
    return ${qn(a,u)}(0.0);`,w=e?n&&r?c(s):`
    let col = colIn * ${s};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${c(s)}
    }
    return ${qn(s,u)}(0.0);`:`
    let col = colIn * ${s};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${c(s)}
    }
    return ${qn(s,u)}(0.0);`,y=qn(l,u),x=qn(e?a:s,u),M=qn(e?s:a,u),T=zu(o,y,u);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${x} {
      ${e?b:w}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${M} {
      ${e?w:b}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${y}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${p}
      ${H8(i)}
      ${T}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},q8=(e,t,r,n,i,o,a,s,l)=>{let u=t.format==="NHWC",d=u?e[0].dims[3]:e[0].dims[1],c=r[0],f=u?r[2]:r[3],p=u?r[1]:r[2],h=u?r[3]:r[1],m=u&&(d%4===0||d%3===0)&&h%4===0,v=u?h:f*p,g=u?f*p:h,_=[8,8,1],b=n<=8?[4,1,1]:[4,4,1],w=[Math.ceil(v/_[0]/b[0]),Math.ceil(g/_[1]/b[1]),Math.ceil(c/_[2]/b[2])];rr("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${w}`);let y=m?u&&d%4!==0?3:4:1,x=_[1]*b[1],M=_[0]*b[0],T=Math.max(_[0]*y,_[1]),S=n%x===0,$=i%M===0,k=o%T===0,F=m?[y,4,4]:[1,1,1],j=[{type:6,data:n},{type:6,data:i},{type:6,data:o},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];Bu(t,j),j.push(...yt(e[0].dims,e[1].dims));let U=["rank","rank"];a&&(j.push(...yt(e[2].dims)),U.push("rank")),j.push(...yt(r));let z=G=>{let H=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Uu(t,H);let W=m?4:1,Y=Vn(e[0].dataType),te=`
      fn setOutputAtIndex(flatIndex : i32, value : ${m?`vec4<${Y}>`:Y}) {
        result[flatIndex] = ${m?`vec4<${Y}>`:Y}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${m?`vec4<${Y}>`:Y}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${m?"/ 4":""}, value);
      }`,V=Fe("x",e[0].dataType,e[0].dims.length,y===3?1:y),I=Fe("w",e[1].dataType,e[1].dims.length,W),K=[V,I],ae=mt("result",e[0].dataType,r.length,W);if(a){let pe=Fe("bias",e[2].dataType,e[2].dims.length,W);K.push(pe),te+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${m?`vec4<${Y}>`:Y} {
          return bias[coords.${u?"w":"y"}${m?"/ 4":""}];
        }`}return`
        ${K8("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${G.registerUniforms(H).declareVariables(...K,ae)}
        ${te}
        ${xF(u,S,$,k,a,t,F[0],F[1],F[2],Y)}
        ${m?QM(b,_,Y,void 0,!u,T):YM(b,_,Y,void 0,!u,T,!1,void 0,s)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${y};${m};${S};${$};${k};${x};${M};${T}`,inputDependencies:U},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:w[0],y:w[1],z:w[2]},programUniforms:j}),getShaderSource:z}}}),MF,Sx,lp,TF,Cx,PF,X8,Q8,Une=qe(()=>{$t(),Ds(),zt(),Bt(),ec(),_S(),MF=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},Sx=e=>typeof e=="number"?[e,e,e]:e,lp=(e,t)=>t<=1?e:e+(e-1)*(t-1),TF=(e,t,r,n=1)=>{let i=lp(t,n);return Math.floor((e[0]*(r-1)-r+i)/2)},Cx=(e,t,r,n,i)=>{i==null&&(i=TF(e,t[0],n[0]));let o=[0,0,0,r];for(let a=0;a<3;a++)e[a]+2*i>=t[a]&&(o[a]=Math.trunc((e[a]-t[a]+2*i)/n[a]+1));return o},PF=(e,t,r,n,i,o,a,s,l,u)=>{let d,c,f,p;if(e==="VALID"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e};let h=Cx([t,r,n,1],[s,l,u],1,[i,o,a],e);c=h[0],f=h[1],p=h[2]}else if(Array.isArray(e)){if(!e.every((m,v,g)=>m===g[0]))throw Error(`Unsupported padding parameter: ${e}`);d={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let h=Cx([t,r,n,1],[s,l,u],1,[i,o,a],e[0]);c=h[0],f=h[1],p=h[2]}else if(e==="SAME_UPPER"){c=Math.ceil(t/i),f=Math.ceil(r/o),p=Math.ceil(n/a);let h=(c-1)*i+s-t,m=(f-1)*o+l-r,v=(p-1)*a+u-n,g=Math.floor(h/2),_=h-g,b=Math.floor(m/2),w=m-b,y=Math.floor(v/2),x=v-y;d={top:b,bottom:w,left:y,right:x,front:g,back:_}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:c,outHeight:f,outWidth:p}},X8=(e,t,r,n,i,o=!1,a="channelsLast")=>{let s,l,u,d,c;if(a==="channelsLast")[s,l,u,d,c]=e;else if(a==="channelsFirst")[s,c,l,u,d]=e;else throw new Error(`Unknown dataFormat ${a}`);let[f,,p,h,m]=t,[v,g,_]=Sx(r),[b,w,y]=Sx(n),x=lp(p,b),M=lp(h,w),T=lp(m,y),{padInfo:S,outDepth:$,outHeight:k,outWidth:F}=PF(i,l,u,d,v,g,_,x,M,T),j=o?f*c:f,U=[0,0,0,0,0];return a==="channelsFirst"?U=[s,j,$,k,F]:a==="channelsLast"&&(U=[s,$,k,F,j]),{batchSize:s,dataFormat:a,inDepth:l,inHeight:u,inWidth:d,inChannels:c,outDepth:$,outHeight:k,outWidth:F,outChannels:j,padInfo:S,strideDepth:v,strideHeight:g,strideWidth:_,filterDepth:p,filterHeight:h,filterWidth:m,effectiveFilterDepth:x,effectiveFilterHeight:M,effectiveFilterWidth:T,dilationDepth:b,dilationHeight:w,dilationWidth:y,inShape:e,outShape:U,filterShape:t}},Q8=(e,t,r,n,i,o)=>{let a=o==="channelsLast";a?e[0].dims[3]:e[0].dims[1];let s=[64,1,1],l={x:r.map((v,g)=>g)},u=[Math.ceil(MF(l.x.map(v=>r[v]))/s[0]),1,1];rr("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${u}`);let d=1,c=Oe.size(r),f=[{type:12,data:c},{type:12,data:n},{type:12,data:i},{type:12,data:t.strides},{type:12,data:t.dilations}];Bu(t,f),f.push(...yt(e[0].dims,e[1].dims));let p=["rank","rank"],h=e.length===3;h&&(f.push(...yt(e[2].dims)),p.push("rank")),f.push(...yt(r));let m=v=>{let g=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:i.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];Uu(t,g);let _=1,b=Vn(e[0].dataType),w=Fe("x",e[0].dataType,e[0].dims.length,d),y=Fe("W",e[1].dataType,e[1].dims.length,_),x=[w,y],M=mt("result",e[0].dataType,r.length,_),T="";if(h){let k=Fe("bias",e[2].dataType,e[2].dims.length,_);x.push(k),T+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${b} {
          return bias[${a?vt("coords",4,5):vt("coords",1,5)}];
        }`}let S=qn(d,b),$=zu(t,S,b);return`
            ${T}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${w.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${y.getByIndices("aIndices")};
            }
          ${v.registerUniforms(g).declareVariables(...x,M)}
          ${v.mainStart()}
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${M.offsetToIndices("global_idx")};
              let batch = ${vt("coords",0,w.rank)};
              let d2 = ${a?vt("coords",w.rank-1,w.rank):vt("coords",1,w.rank)};
              let xFRCCorner = vec3<u32>(${a?vt("coords",1,w.rank):vt("coords",2,w.rank)},
              ${a?vt("coords",2,w.rank):vt("coords",3,w.rank)},
              ${a?vt("coords",3,w.rank):vt("coords",4,w.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${a?vt("uniforms.x_shape",1,w.rank):vt("uniforms.x_shape",2,w.rank)};
              let xShapeZ = ${a?vt("uniforms.x_shape",2,w.rank):vt("uniforms.x_shape",3,w.rank)};
              let xShapeW = ${a?vt("uniforms.x_shape",3,w.rank):vt("uniforms.x_shape",4,w.rank)};
              let xShapeU = ${a?vt("uniforms.x_shape",4,w.rank):vt("uniforms.x_shape",1,w.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${a?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${a?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${a?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${a?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${h?"value = value + getBiasByOutputCoords(coords)":""};
              ${$}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${a};${d};${h}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:u[0],y:u[1],z:u[2]},programUniforms:f}),getShaderSource:m}}}),Y8,Z8,Wne=qe(()=>{$t(),zt(),Bt(),ec(),Y8=(e,t,r,n)=>{let i=e.length>2,o=i?"value += b[output_channel];":"",a=e[0].dims,s=e[1].dims,l=t.format==="NHWC",u=l?r[3]:r[1],d=u/t.group,c=l&&d>=4?Zr(u):1,f=Oe.size(r)/c,p=[{type:12,data:f},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:d}];Bu(t,p),p.push(...yt(a,[s[0],s[1],s[2],s[3]/c]));let h=i?["rank","rank","rank"]:["rank","rank"];p.push(...yt([r[0],r[1],r[2],r[3]/c]));let m=v=>{let g=mt("output",e[0].dataType,r.length,c),_=Vn(g.type.tensor),b=zu(t,g.type.value,_),w=Fe("x",e[0].dataType,a.length),y=Fe("w",e[1].dataType,s.length,c),x=[w,y];i&&x.push(Fe("b",e[2].dataType,e[2].dims,c));let M=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];Uu(t,M);let T=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${w.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${y.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${w.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${y.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${v.registerUniforms(M).declareVariables(...x,g)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${g.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${c} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${g.type.value} = ${g.type.value}(0);
    ${T}
    ${o}
    ${b}
    ${g.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${c}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:m}},Z8=(e,t,r,n)=>{let i=e.length>2,o=Zr(r[3]),a=Zr(r[2]),s=Oe.size(r)/o/a,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/o],u=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/o],d=[r[0],r[1],r[2],r[3]/o],c=[{type:12,data:s},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];Bu(t,c),c.push(...yt(l,u,d));let f=(a-1)*t.strides[1]+u[1],p=h=>{let m=mt("output",e[0].dataType,d.length,o),v=Vn(m.type.tensor),g=zu(t,m.type.value,v),_=Fe("x",e[0].dataType,l.length,o),b=Fe("w",e[1].dataType,u.length,o),w=[_,b];i&&w.push(Fe("b",e[2].dataType,e[2].dims,o));let y=i?"value += b[output_channel];":"",x=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Uu(t,x),`
  ${h.registerUniforms(x).declareVariables(...w,m)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${a}u;
    let col = (index1 % width1) * ${a}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${_.type.value}, ${f}>;
    var values: array<${m.type.value}, ${a}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${u[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${f}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${_.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${_.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${u[1]}; w_width++) {
          let w_val = ${b.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${a}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${a}u; i++) {
      var value = values[i];
      ${y}
      ${g}
      ${m.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${o};${a};${f};${u[0]};${u[1]}`,inputDependencies:i?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:c}),getShaderSource:p}}}),EF,t_,SF,r_,ZM,$x,CF,$F,JM,Vne=qe(()=>{zt(),Bne(),Une(),bS(),Wne(),ec(),yS(),kl(),EF=(e,t,r,n,i,o)=>{let a=e[0],s=e.slice(o?1:2,o?3:4),l=s.length,u=t[0],d=t.slice(2).map((f,p)=>f+(f-1)*(r[p]-1)),c=s.map((f,p)=>f+n[p]+n[p+l]).map((f,p)=>Math.floor((f-d[p]+i[p])/i[p]));return c.splice(0,0,a),c.splice(o?3:1,0,u),c},t_=[2,3,1,0],SF=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},r_=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let o=2;o<t[1].dims.length;++o)r[o-2]===0&&(r[o-2]=t[1].dims[o]);let n=e.pads.slice();xv.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:n}),i},ZM=e=>{let t=gS(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,o=e.group,a=e.kernel_shape,s=e.pads,l=e.strides,u=e.w_is_const();return{autoPad:n,format:r,dilations:i,group:o,kernelShape:a,pads:s,strides:l,wIsConst:u,...t,cacheKey:`${e.format};${t.activation};`}},$x=(e,t,r,n)=>{let i=r.format==="NHWC",o=EF(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,i);if(r.group!==1){let x=[t[0]];if(i){let M=e.kernelCustomData.wT??e.compute(po(t[1],t_),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=M),x.push(M)}else x.push(t[1]);t.length===3&&x.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(Z8(x,r,o,n),{inputs:x}):e.compute(Y8(x,r,o,n),{inputs:x});return}let a=t.length===3,s=t[0].dims[i?1:2],l=t[0].dims[i?2:3],u=t[0].dims[i?3:1],d=t[1].dims[2],c=t[1].dims[3],f=o[i?1:2],p=o[i?2:3],h=o[i?3:1],m=i&&d===s&&c===l&&r.pads[0]===0&&r.pads[1]===0;if(m||d===1&&c===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let x=o[0],M,T,S,$=[];if(i){let j=e.kernelCustomData.wT??e.compute(po(t[1],t_),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=j),m){let U=s*l*u;M=t[0].reshape([1,x,U]),T=j.reshape([1,U,h]),S=[1,x,h]}else M=t[0].reshape([x,s*l,u]),T=j.reshape([1,u,h]),S=[x,f*p,h];$.push(M),$.push(T)}else M=t[0].reshape([x,u,s*l]),T=t[1].reshape([1,h,u]),S=[x,h,f*p],$.push(T),$.push(M);a&&$.push(t[2]);let k=S[2],F=$[0].dims[$[0].dims.length-1];k<8&&F<8?e.compute(vS($,r,o,S,i,n),{inputs:$}):e.compute(Tv($,r,o,S,i,n),{inputs:$});return}let v=!0,g=e.kernelCustomData.wT??e.compute(po(t[1],t_),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=g);let _=[t[0],g];a&&_.push(t[2]);let b=i?f*p:h,w=i?h:f*p,y=d*c*u;e.compute(q8(_,r,o,b,w,y,a,v,n),{inputs:_})},CF=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],o=[1].concat(t.strides),a=[1].concat(t.dilations),s=[1].concat(t.kernelShape),l=r_({...t,pads:i,strides:o,dilations:a,kernelShape:s},n);$x(e,n,l,u=>r?[u[0],u[2],u[3]]:[u[0],u[1],u[3]])},$F=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",i=r_(r,t),o=r.autoPad==="NOTSET"?r.pads:r.autoPad,a=X8(t[0].dims,t[1].dims,r.strides,r.dilations,o,!1,n);e.compute(Q8(t,i,a.outShape,[a.filterDepth,a.filterHeight,a.filterWidth],[a.padInfo.front,a.padInfo.top,a.padInfo.left],n))},JM=(e,t)=>{if(SF(e.inputs,t),e.inputs[0].dims.length===3)CF(e,t);else if(e.inputs[0].dims.length===5)$F(e,e.inputs,t);else{let r=r_(t,e.inputs);$x(e,e.inputs,r)}}}),J8,Gne=qe(()=>{$t(),Ds(),zt(),Bt(),J8=(e,t,r)=>{let n=e.length>2,i=t.outputShape,o=t.format==="NHWC",a=t.group,s=e[1].dims,l=s[2]/a,u=s[3],d=o?Zr(l):1,c=o&&u===1&&l>=4,f=c?Math.floor(l/4)*4:Math.floor(l/d)*d,p=l-f,h=o?Zr(u):1,m=o?u===1?d:h:1,v=Oe.size(i)/h,g=[Math.ceil(v/64),1,1];rr("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${g}`);let _=["rank","rank"],b=[t.strides[0],t.strides[1]],w=[t.kernelShape[o?1:2],t.kernelShape[o?2:3]],y=[t.dilations[0],t.dilations[1]],x=[w[0]+(t.dilations[0]<=1?0:(t.kernelShape[o?1:2]-1)*(t.dilations[0]-1)),w[1]+(t.dilations[1]<=1?0:(t.kernelShape[o?2:3]-1)*(t.dilations[1]-1))],M=[x[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),x[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],T=[{type:12,data:v},{type:12,data:b},{type:12,data:w},{type:12,data:y},{type:12,data:x},{type:6,data:M},{type:12,data:f},{type:12,data:l},{type:12,data:u},...yt(e[0].dims,e[1].dims)];n&&(T.push(...yt(e[2].dims)),_.push("rank")),T.push(...yt(i));let S=$=>{let k=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:b.length},{name:"filter_dims",type:"u32",length:w.length},{name:"dilations",type:"u32",length:w.length},{name:"effective_filter_dims",type:"u32",length:x.length},{name:"pads",type:"i32",length:M.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],F=Vn(e[0].dataType),j=o?1:2,U=o?2:3,z=o?3:1,G=Fe("W",e[1].dataType,e[1].dims.length,m),H=Fe("Dy",e[0].dataType,e[0].dims.length,d),W=[H,G];n&&W.push(Fe("bias",e[2].dataType,[i[z]].length,h));let Y=mt("result",e[0].dataType,i.length,h),te=()=>{let K="";if(c)d===4?K+=`
        let xValue = ${H.getByOffset("x_offset")};
        let wValue = ${G.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:d===2?K+=`
          dotProd = dotProd + dot(vec4<${F}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}), vec4<${F}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:d===1&&(K+=`
          dotProd = dotProd + dot(vec4<${F}>(${H.getByOffset("x_offset")}, ${H.getByOffset("x_offset + 1u")}, ${H.getByOffset("x_offset + 2u")}, ${H.getByOffset("x_offset + 3u")}), vec4<${F}>(${G.getByOffset("w_offset")}, ${G.getByOffset("w_offset + 1u")}, ${G.getByOffset("w_offset + 2u")}, ${G.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(K+=`
                  let xValue = ${o?H.getByOffset(`${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${d}`):H.get("batch","inputChannel","idyR","idyC")};
        `,d===1)K+=`
          let w_offset = ${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${G.getByOffset(`w_offset / ${m}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let ae=0;ae<d;ae++)K+=`
            let wValue${ae} = ${G.getByOffset(`${G.indicesToOffset(`${G.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${ae}, wOutChannel)`)} / ${m}`)};
            dotProd = dotProd + xValue[${ae}] * wValue${ae};`;return K},V=()=>{if(p===0)return"";if(!c)throw new Error(`packInputAs4 ${c} is not true.`);let K="";if(d===1){K+="dotProd = dotProd";for(let ae=0;ae<p;ae++)K+=`
            + ${H.getByOffset(`x_offset + ${ae}`)} * ${G.getByOffset(`w_offset + ${ae}`)}`;K+=";"}else if(d===2){if(p!==2)throw new Error(`Invalid inputChannelsRemainder ${p}.`);K+=`
          let xValue = ${H.getByOffset("x_offset")};
          let wValue = ${G.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return K},I=`
            let outputIndices = ${Y.offsetToIndices(`global_idx * ${h}`)};
            let batch = ${Y.indicesGet("outputIndices",0)};
            let d1 = ${Y.indicesGet("outputIndices",z)};
            let r = ${Y.indicesGet("outputIndices",j)};
            let c = ${Y.indicesGet("outputIndices",U)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${Y.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${F}(dyRCorner) + ${F}(wR)) / ${F}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${F}(uniforms.Dy_shape[${j}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${F}(dyCCorner) + ${F}(wC)) / ${F}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${F}(uniforms.Dy_shape[${U}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${c?`
                var x_offset = ${H.indicesToOffset(`${H.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${d};
                var w_offset = ${G.indicesToOffset(`${G.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${m};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${c?4:d}) {
                  ${te()}
                  inputChannel = inputChannel + ${c?4:d};
                }
                ${V()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${h}]`:""};
            ${Y.setByOffset("global_idx","value")};
          `;return`
    ${$.registerUniforms(k).declareVariables(...W,Y)}
      ${$.mainStart()}
      ${$.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${I}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${d}${m}${h}${c}${p}`,inputDependencies:_},getRunData:()=>({dispatchGroup:{x:g[0],y:g[1],z:g[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:T}),getShaderSource:S}}}),AF,OF,kF,Ax,e6,IF,Ox,DF,t6,Hne=qe(()=>{Gne(),ec(),kl(),AF=(e,t,r,n,i,o)=>(e-1)*t+r+(n-1)*i+1-o,OF=(e,t,r,n,i)=>{let o=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=o,r[i]=e-o):t==="SAME_LOWER"&&(r[n]=e-o,r[i]=o)},kF=(e,t,r,n,i,o,a,s,l,u)=>{let d=e.length-2,c=u.length===0;l.length<d&&l.push(...Array(d-l.length).fill(0));let f=e[0],p=t[s?3:1]*i;for(let h=0,m=e.length-d-(s?1:0);h<d;++h,++m){let v=e[m],g=c?v*a[h]:u[h],_=AF(v,a[h],o[h],t[m],r[h],g);OF(_,n,o,h,h+d),c&&u.push(a[h]*(v-1)+l[h]+(t[m]-1)*r[h]+1-o[h]-o[h+d])}u.splice(0,0,f),u.splice(s?3:1,0,p)},Ax=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((c,f)=>c*f,1)===0){r.length=0;for(let c=2;c<t[1].dims.length;++c)r.push(t[1].dims[c])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let i=e.pads.slice(),o=e.outputShape.slice(),a=e.outputPadding.slice(),s=t[0].dims,l=e.dilations.slice();if(l.reduce((c,f)=>c+f,0)===0){let c=t[0].dims.length-2;l=new Array(c).fill(1)}let u=e.strides.slice();if(u.reduce((c,f)=>c+f,0)===0){let c=t[0].dims.length-2;u=new Array(c).fill(1)}kF(s,r,l,e.autoPad,e.group,i,u,n,a,o);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:o,dilations:l,strides:u}),d},e6=e=>{let t=gS(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,o=e.group,a=e.kernelShape,s=e.pads,l=e.strides,u=e.wIsConst(),d=e.outputPadding,c=e.outputShape;return{autoPad:n,format:r,dilations:i,group:o,kernelShape:a,outputPadding:d,outputShape:c,pads:s,strides:l,wIsConst:u,...t,cacheKey:`${e.format};${t.activation};`}},IF=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let o=e[0].dims.length-2;if(t.dilations.reduce((a,s)=>a+s,0)>0&&t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.reduce((a,s)=>a+s,0)>0&&t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.reduce((a,s)=>a+s,0)>0&&t.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(t.outputPadding.length!==o&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${o}D`);if(t.kernelShape.reduce((a,s)=>a+s,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Ox=(e,t,r,n)=>{let i=e.kernelCustomData.wT??e.compute(po(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=i);let o=[t[0],i];t.length===3&&o.push(t[2]),e.compute(J8(o,r,n),{inputs:o})},DF=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let o=t.dilations;(o.length===0||o[0]===0)&&(o=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let s=t.pads;s.length===0&&(s=[0,0]),s=[0,s[0],0,s[1]],a=[1].concat(a),o=[1].concat(o),i=[1].concat(i);let l=t.outputPadding;l=[0].concat(l);let u=Ax({...t,pads:s,strides:a,dilations:o,kernelShape:i,outputPadding:l},n);Ox(e,n,u,d=>r?[d[0],d[2],d[3]]:[d[0],d[1],d[3]])},t6=(e,t)=>{if(IF(e.inputs,t),e.inputs[0].dims.length===3)DF(e,t);else{let r=Ax(t,e.inputs);Ox(e,e.inputs,r)}}}),jF,r6,n6,Kne=qe(()=>{$t(),zt(),ln(),Bt(),jF=(e,t,r,n)=>{let i=Oe.size(t),o=t.length,a=Fe("input",e,o),s=mt("output",e,o),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),u=Oe.normalizeAxis(l,o),d=c=>{let f=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,p=vt("uniforms.input_shape","uniforms.axis",o),h=n.reverse?f+(n.exclusive?" + 1":""):"0",m=n.reverse?p:f+(n.exclusive?"":" + 1");return`
                ${c.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,s)}
                ${c.mainStart()}
                  ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${s.offsetToIndices("global_idx")};
                  var sum = ${s.type.value}(0);
                  let first : i32 = ${h};
                  let last : i32 = ${m};
                  for (var i : i32 = first; i < last; i++) {
                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${a.getByIndices("inputIndices")};
                  }
                  ${s.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:u},...yt(t,t)]}),getShaderSource:d}},r6=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,i=e.inputs[1];e.compute(jF(n,r,i,t),{inputs:[0]})},n6=e=>{let t=e.exclusive===1,r=e.reverse===1;return dr({exclusive:t,reverse:r})}}),FF,LF,NF,i6,o6,qne=qe(()=>{$t(),zt(),ln(),Bt(),FF=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},LF=(e,t,r,n)=>{let i=[];i.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let o=0;o<t;++o)i.push(r.indicesSet("a",e[o],`i[${o}]`));return i.push("return a;}"),i.join(`
`)},NF=(e,t)=>{let r,n,i,o,a,s,l=t.format==="NHWC",u=t.blocksize,d=t.mode==="DCR";l?([r,n,i,o]=e.dims,a=d?[r,n,i,u,u,o/u**2]:[r,n,i,o/u**2,u,u],s=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,i,o]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,u,u,o/u**2,n,i]:[r,o/u**2,u,u,n,i],s=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let c=e.reshape(a),f=c.dims.length,p=e.dataType,h=Fe("a",p,f),m=mt("output",p,f),v=g=>`
  ${g.registerUniform("output_size","u32").declareVariables(h,m)}

  ${LF(s,f,h,m)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${m.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${m.setByOffset("global_idx",h.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:g=>{let _=l?[r,n*u,i*u,o/u**2]:[r,o/u**2,n*u,i*u],b=Oe.size(_),w=c.dims,y=Oe.sortBasedOnPerm(w,s);return{outputs:[{dims:_,dataType:g[0].dataType}],dispatchGroup:{x:Math.ceil(b/64)},programUniforms:[{type:12,data:b},...yt(w,y)]}},getShaderSource:v}},i6=(e,t)=>{FF(e.inputs),e.compute(NF(e.inputs[0],t))},o6=e=>dr({blocksize:e.blocksize,mode:e.mode,format:e.format})}),n_,up,kx,RF,zF,BF,UF,Ix,WF,a6,s6,Xne=qe(()=>{$t(),zt(),ln(),Bt(),n_="[a-zA-Z]|\\.\\.\\.",up="("+n_+")+",kx="^"+up+"$",RF="("+up+",)*"+up,zF="^"+RF+"$",BF=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},UF=class{constructor(e,t){var i;this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp(zF)))throw new Error("Invalid LHS term");if(r.split(",").forEach((o,a)=>{let s=e[a].dims.slice();if(!o.match(RegExp(kx)))throw new Error("Invalid LHS term");let l=this.processTerm(o,!0,s,a);this.lhs.push(l)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([o,a])=>a.count===1||o==="...").map(([o])=>o).join("");else if(!n.match(RegExp(up)))throw new Error("Invalid RHS");(i=n.match(RegExp(n_,"g")))==null||i.forEach(o=>{if(o==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let a=this.symbolToInfo.get(o);if(a===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(a.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let i=r.length,o=!1,a=[],s=0;if(!e.match(RegExp(kx))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(n_,"g")),u=new BF(n);return l==null||l.forEach((d,c)=>{if(d==="..."){if(o)throw new Error("Only one ellipsis is allowed per input term");o=!0;let f=i-l.length+1;if(f<0)throw new Error("Ellipsis out of bounds");if(a=r.slice(s,s+f),this.hasEllipsis){if(this.ellipsisDims.length!==a.length||this.ellipsisDims.toString()!==a.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=a;else throw new Error("Ellipsis must be specified in the LHS");for(let p=0;p<a.length;p++){let h=String.fromCharCode(48+p);u.addSymbol(h,c+p),this.addSymbol(h,r[s++],n)}}else u.addSymbol(d,c+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(d,r[s++],n)}),u}},Ix=e=>e+"_max",WF=(e,t,r,n)=>{let i=e.map(u=>u.length).map((u,d)=>Fe(`input${d}`,t,u)),o=Oe.size(n),a=mt("output",t,n.length),s=[...r.symbolToInfo.keys()].filter(u=>!r.rhs.symbolToIndices.has(u)),l=u=>{let d=[],c="var prod = 1.0;",f="var sum = 0.0;",p="sum += prod;",h=[],m=[],v=[],g=[],_=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((w,y)=>{var x;if(r.rhs.symbolToIndices.has(y)){let M=(x=r.rhs.symbolToIndices.get(y))==null?void 0:x[0];M!==void 0&&r.lhs.forEach((T,S)=>{if(w.inputIndices.includes(S)){let $=T.symbolToIndices.get(y);if($===void 0)throw new Error("Invalid symbol error");$.forEach(k=>{d.push(`${i[S].indicesSet(`input${S}Indices`,k,a.indicesGet("outputIndices",M))}`)})}})}else r.lhs.forEach((M,T)=>{if(w.inputIndices.includes(T)){let S=M.symbolToIndices.get(y);if(S===void 0)throw new Error("Invalid symbol error");S.forEach($=>{h.push(`${i[T].indicesSet(`input${T}Indices`,$,`${y}`)}`)}),g.push(`prod *= ${i[T].getByIndices(`input${T}Indices`)};`)}}),m.push(`for(var ${y}: u32 = 0; ${y} < uniforms.${Ix(y)}; ${y}++) {`),v.push("}")});let b=_?[...d,`let sum = ${i.map((w,y)=>w.getByIndices(`input${y}Indices`)).join(" * ")};`]:[...d,f,...m,...h,c,...g,p,...v];return`
            ${u.registerUniforms(s.map(w=>({name:`${Ix(w)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...i,a)}

            ${u.mainStart()}
            ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${a.offsetToIndices("global_idx")};
            ${i.map((w,y)=>`var input${y}Indices: ${i[y].type.indices};`).join(`
`)}
            ${b.join(`
`)};
            ${a.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let u=s.filter(c=>r.symbolToInfo.has(c)).map(c=>{var f;return{type:12,data:((f=r.symbolToInfo.get(c))==null?void 0:f.dimValue)||0}});u.push({type:12,data:o});let d=e.map((c,f)=>[...yt(c)]).reduce((c,f)=>c.concat(f),u);return d.push(...yt(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:d}},getShaderSource:l}},a6=(e,t)=>{let r=new UF(e.inputs,t.equation),n=r.outputDims,i=e.inputs.map((o,a)=>o.dims);e.compute(WF(i,e.inputs[0].dataType,r,n))},s6=e=>{let t=e.equation.replace(/\s+/g,"");return dr({equation:t})}}),VF,Dx,GF,HF,l6,Qne=qe(()=>{$t(),zt(),Bt(),VF=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;n<r.length&&i<t.length;++n,++i)if(r[n]!==t[i]&&r[n]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},Dx=(e,t)=>{let r=e.length-t.length,n=[];for(let i=0;i<r;++i)n.push(e[i]);for(let i=0;i<t.length;++i)n.push(t[i]===1?e[i+r]:t[i]);return n},GF=(e,t)=>e.length>t.length?Dx(e,t):Dx(t,e),HF=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=GF(t,r),i=e[0].dataType,o=i===9||Oe.size(t)===1,a=i===9||t.length>0&&t[t.length-1]%4===0?4:1,s=o||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(Oe.size(n)/s),u=c=>{let f=Fe("input",i,t.length,a),p=mt("output",i,n.length,s),h;if(i===9){let m=(v,g,_="")=>`
          let outputIndices${g} = ${p.offsetToIndices(`outputOffset + ${g}u`)};
          let offset${g} = ${f.broadcastedIndicesToOffset(`outputIndices${g}`,p)};
          let index${g} = offset${g} / 4u;
          let component${g} = offset${g} % 4u;
          ${v}[${g}] = ${_}(${f.getByOffset(`index${g}`)}[component${g}]);
        `;h=`
        let outputOffset = global_idx * ${s};
        var data = vec4<u32>(0);
        ${m("data",0,"u32")}
        ${m("data",1,"u32")}
        ${m("data",2,"u32")}
        ${m("data",3,"u32")}
        ${p.setByOffset("global_idx","data")}
      }`}else h=`
        let outputIndices = ${p.offsetToIndices(`global_idx * ${s}`)};
        let inputOffset = ${f.broadcastedIndicesToOffset("outputIndices",p)};
        let data = ${p.type.value}(${f.getByOffset(`inputOffset / ${a}`)});
        ${p.setByOffset("global_idx","data")}
      }`;return`
    ${c.registerUniform("vec_size","u32").declareVariables(f,p)}
    ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${h}`},d=[{type:12,data:l},...yt(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${a}${s}`,inputDependencies:["rank"]},getShaderSource:u,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d})}},l6=e=>{VF(e.inputs),e.compute(HF(e.inputs),{inputs:[0]})}}),KF,u6,Yne=qe(()=>{$t(),zt(),Bt(),mS(),KF=e=>{let t=e[0].dataType,r=Oe.size(e[0].dims),n=Oe.size(e[1].dims),i=n%4===0,o=a=>{let s=Fe("x",t,[1],4),l=Fe("bias",t,[1],4),u=mt("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],c=p=>`
      let bias${p}_offset: u32 = (global_idx * 4 + ${p}) % uniforms.bias_size;
      let bias${p} = ${l.getByOffset(`bias${p}_offset / 4`)}[bias${p}_offset % 4];`,f=i?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${c(0)}${c(1)}${c(2)}${c(3)}
      let bias = ${s.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(s,l,u)}

    ${qM(vi(t))}

    ${a.mainStart(Ed)}
      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${s.getByOffset("global_idx")};
      ${f}
      let x_in = x + bias;
      ${u.setByOffset("global_idx",XM("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:o,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/Ed/4)}})}},u6=e=>{e.inputs.length<2||Oe.size(e.inputs[1].dims)===0?$8(e):e.compute(KF(e.inputs))}}),qF,XF,c6,d6,Zne=qe(()=>{$t(),zt(),ln(),Bt(),qF=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},XF=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,o=Oe.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(o,1,...n);let s=r[o],l=e[0].dataType===9?4:1,u=Math.ceil(Oe.size(a)/l),d=[{type:12,data:u},{type:6,data:s},{type:12,data:o},...yt(e[0].dims,e[1].dims,a)],c=f=>{let p=Fe("data",e[0].dataType,e[0].dims.length,l),h=Fe("inputIndices",e[1].dataType,e[1].dims.length),m=mt("output",e[0].dataType,a.length,l),v=_=>{let b=n.length,w=`var indicesIndices${_}  = ${h.type.indices}(0);`;for(let y=0;y<b;y++)w+=`${b>1?`indicesIndices${_}[${y}]`:`indicesIndices${_}`} = ${a.length>1?`outputIndices${_}[uniforms.axis + ${y}]`:`outputIndices${_}`};`;w+=`
          var idx${_} = ${h.getByIndices(`indicesIndices${_}`)};
          if (idx${_} < 0) {
            idx${_} = idx${_} + uniforms.axisDimLimit;
          }
          var dataIndices${_} : ${p.type.indices};
        `;for(let y=0,x=0;y<i;y++)y===o?(w+=`${i>1?`dataIndices${_}[${y}]`:`dataIndices${_}`} = u32(idx${_});`,x+=b):(w+=`${i>1?`dataIndices${_}[${y}]`:`dataIndices${_}`} = ${a.length>1?`outputIndices${_}[${x}]`:`outputIndices${_}`};`,x++);return w},g;if(e[0].dataType===9){let _=(b,w,y="")=>`
          let outputIndices${w} = ${m.offsetToIndices(`outputOffset + ${w}u`)};
          ${v(w)};
          let offset${w} = ${p.indicesToOffset(`dataIndices${w}`)};
          let index${w} = offset${w} / 4u;
          let component${w} = offset${w} % 4u;
          ${b}[${w}] = ${y}(${p.getByOffset(`index${w}`)}[component${w}]);
        `;g=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${_("value",0,"u32")}
        ${_("value",1,"u32")}
        ${_("value",2,"u32")}
        ${_("value",3,"u32")}
        ${m.setByOffset("global_idx","value")}
      `}else g=`
      let outputIndices = ${m.offsetToIndices("global_idx")};
      ${v("")};
      let value = ${p.getByIndices("dataIndices")};
      ${m.setByOffset("global_idx","value")};
      `;return`
      ${f.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(p,h,m)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${g}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:d}),getShaderSource:c}},c6=e=>dr({axis:e.axis}),d6=(e,t)=>{let r=e.inputs;qF(r),e.compute(XF(e.inputs,t))}}),QF,f6,p6,Jne=qe(()=>{$t(),zt(),Bt(),QF=(e,t,r,n,i,o,a,s,l)=>{let u=[{type:12,data:o},{type:12,data:n},{type:12,data:i},{type:12,data:r},{type:12,data:a},{type:12,data:s},{type:12,data:l}],d=[o];u.push(...yt(t.dims,d));let c=f=>{let p=Fe("indices_data",t.dataType,t.dims.length),h=mt("input_slice_offsets_data",12,1,1),m=[p,h],v=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:i.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${f.registerUniforms(v).declareVariables(...m)}
  ${f.mainStart()}
    ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${i.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${i.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:d,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:u}),getShaderSource:c},{inputs:[t],outputs:[-1]})[0]},f6=(e,t)=>{let r=e.inputs,n=r[0].dims,i=r[0].dataType,o=r[1].dims,a=o[o.length-1],s=Oe.sizeToDimension(o,o.length-1),l=Oe.sizeFromDimension(n,t.batchDims+a),u=Oe.sizeToDimension(n,t.batchDims),d=Oe.sizeFromDimension(n,t.batchDims),c=s/u,f=new Array(a),p=l;for(let w=0;w<a;++w)f[a-1-w]=p,p*=n[t.batchDims+a-1-w];let h=QF(e,r[1],f,t.batchDims,n,s,c,d,a),m=t.batchDims+a;if(m>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let v=o.slice(0,-1).concat(n.slice(m)),g=Oe.size(v),_=[{type:12,data:g},{type:12,data:l},...yt(r[0].dims,h.dims,v)],b=w=>{let y=Fe("data",r[0].dataType,r[0].dims.length),x=Fe("slice_offsets",12,h.dims.length),M=mt("output",r[0].dataType,v.length);return`
          ${w.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(y,x,M)}
            ${w.mainStart()}
            ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:v,dataType:i}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:_}),getShaderSource:b},{inputs:[r[0],h]})},p6=e=>({batchDims:e.batch_dims,cacheKey:""})}),YF,ZF,h6,m6,eie=qe(()=>{$t(),zt(),ln(),Bt(),YF=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=Oe.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,i=e[0],o=e[2],a=e.length===4?e[3]:void 0;if(o.dims.length!==i.dims.length||!i.dims.map((s,l)=>l===r?Math.ceil(s/n)===o.dims[l]:s===o.dims[l]).reduce((s,l)=>s&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(a){if(a.dataType!==i.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(a.dims.length!==o.dims.length||!a.dims.map((s,l)=>s===o.dims[l]).reduce((s,l)=>s&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},ZF=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r.length,o=Oe.normalizeAxis(t.gatherAxis,i),a=Oe.normalizeAxis(t.quantizeAxis,i),s=r.slice(0);s.splice(o,1,...n);let l=Oe.size(s),u=e[2].dataType,d=e[0].dataType===22,c=[{type:12,data:l},{type:12,data:a},{type:12,data:o},{type:12,data:t.blockSize},...yt(...e.map((p,h)=>p.dims),s)],f=p=>{let h=Fe("data",e[0].dataType,e[0].dims.length),m=Fe("inputIndices",e[1].dataType,e[1].dims.length),v=Fe("scales",e[2].dataType,e[2].dims.length),g=e.length>3?Fe("zeroPoint",e[3].dataType,e[3].dims.length):void 0,_=mt("output",u,s.length),b=[h,m,v];g&&b.push(g);let w=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${p.registerUniforms(w).declareVariables(...b,_)}
        ${p.mainStart()}
        let output_indices = ${_.offsetToIndices("global_idx")};
        var indices_indices = ${m.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${_.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${m.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${_.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${h.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${_.indicesGet("output_indices","i")};
          ${h.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${m.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[o]};
        }
        ${h.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${s.length}; i++) {
          let index = ${_.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${h.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${h.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${h.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${d?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${v.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${v.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${v.getByIndices("scale_indices")};
        ${g?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${g.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${g.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${d?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${vi(u)}(quantized_data - zero_point) * scale;
        ${_.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((p,h)=>h!==1).map(p=>p.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(p,h)=>"rank")},getRunData:()=>({outputs:[{dims:s,dataType:u}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c}),getShaderSource:f}},h6=(e,t)=>{let r=e.inputs;YF(r,t),e.compute(ZF(e.inputs,t))},m6=e=>dr({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),JF,eL,g6,_6,tie=qe(()=>{$t(),zt(),ln(),Bt(),JF=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},eL=(e,t)=>{let r=e[0].dims,n=e[0].dataType,i=r.length,o=e[1].dims,a=e[1].dataType,s=Oe.normalizeAxis(t.axis,i),l=r[s],u=o.slice(0),d=Oe.size(u),c=Fe("input",n,i),f=Fe("indicesInput",a,o.length),p=mt("output",n,u.length),h=[{type:12,data:d},{type:6,data:l},{type:12,data:s}];return h.push(...yt(r,o,u)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:u,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:h}),getShaderSource:m=>`
      ${m.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(c,f,p)}
      ${m.mainStart()}
      ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${p.offsetToIndices("global_idx")};

      var idx = ${f.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${c.type.indices}(outputIndices);
      ${c.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${c.getByIndices("inputIndices")};

      ${p.setByOffset("global_idx","value")};
  }`}},g6=e=>dr({axis:e.axis}),_6=(e,t)=>{let r=e.inputs;JF(r),e.compute(eL(e.inputs,t))}}),tL,rL,v6,y6,rie=qe(()=>{$t(),zt(),Bt(),tL=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},rL=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[i,o,a]=g5.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),s=[i,o];if(!s)throw new Error("Can't use gemm on the given tensors");let l=16,u=Math.ceil(o/l),d=Math.ceil(i/l),c=!0,f=Oe.size(s),p=[{type:12,data:c?u:f},{type:12,data:i},{type:12,data:o},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],h=["type","type"];e.length===3&&(p.push(...yt(e[2].dims)),h.push("rank")),p.push(...yt(s));let m=g=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let b=t.alpha===1?"":"value *= uniforms.alpha;",w=Fe("a",e[0].dataType,e[0].dims),y=Fe("b",e[1].dataType,e[1].dims),x=w.type.value,M=null,T=[w,y];e.length===3&&(M=Fe("c",e[2].dataType,e[2].dims.length),T.push(M));let S=mt("output",e[0].dataType,s.length);T.push(S);let $=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${g.registerUniforms($).declareVariables(...T)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${x}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${_}
    }

    ${b}
    ${M!=null?`let cOffset = ${M.broadcastedIndicesToOffset("vec2(m, n)",S)}; value += ${x}(uniforms.beta) * ${M.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},v=g=>{let _=Fe("a",e[0].dataType,e[0].dims),b=Fe("b",e[1].dataType,e[1].dims),w=null,y=[_,b];e.length===3&&(w=Fe("c",e[2].dataType,e[2].dims.length),y.push(w));let x=mt("output",e[0].dataType,s.length);y.push(x);let M=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],T="",S="";t.transA&&t.transB?(S=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${b.type.value}(0);
      }
      `,T="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(S=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${b.type.value}(0);
      }
      `,T="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(S=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${b.type.value}(0);
      }
      `,T="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(S=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${b.type.value}(0);
      }
      `,T="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let $=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${g.registerUniforms(M).declareVariables(...y)}
  var<workgroup> tile_a: array<array<${_.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${b.type.storage}, ${l}>, ${l}>;
  ${g.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${x.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${S}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${T}
      }
      workgroupBarrier();
    }

    ${$}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${w!=null?`let cOffset = ${w.broadcastedIndicesToOffset("vec2(m, n)",x)}; value += ${x.type.value}(uniforms.beta) * ${w.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return c?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:s,dataType:e[0].dataType}],dispatchGroup:{x:u*d},programUniforms:p}),getShaderSource:v}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:s,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:m}},v6=e=>{let t=e.transA,r=e.transB,n=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:n,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},y6=(e,t)=>{tL(e.inputs),e.compute(rL(e.inputs,t))}}),Aa,os,eu,tu,nL,iL,oL,aL,sL,lL,uL,cL,b6,w6,nie=qe(()=>{$t(),zt(),ln(),Bt(),[Aa,os,eu,tu]=[0,1,2,3],nL=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},iL=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,oL=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,aL=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,sL=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,lL=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Aa}] = batch;
     indices[${os}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${eu}] = u32(r);
            indices[${tu}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${eu}] = u32(clamp(r, 0, H - 1));
          indices[${tu}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${eu}] = gs_reflect(r, border[1], border[3]);
          indices[${tu}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,uL=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Aa}], indices[${os}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Aa}], indices[${os}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Aa}], indices[${os}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Aa}], indices[${os}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Aa}], indices[${os}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Aa}], indices[${os}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,cL=(e,t)=>{let r=Fe("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],i=Fe("grid",e[1].dataType,n.length,2),o=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(o=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Aa,os,eu,tu]=[0,3,1,2]);let a=mt("output",e[0].dataType,o.length),s=r.type.value,l=Oe.size(o),u=[{type:12,data:l},...yt(e[0].dims,n,o)],d=c=>`
  ${c.registerUniform("output_size","u32").declareVariables(r,i,a)}
  ${iL}
  ${oL(s)}
  ${aL(t)}
  ${sL(t)}
  ${lL(r,s,t)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${eu}]);
      let W_in = i32(uniforms.x_shape[${tu}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${a.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Aa}], indices[${eu}], indices[${tu}]);
      let nxy = ${i.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${uL(a,s,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:c=>{let f=Oe.size(o);return{outputs:[{dims:o,dataType:c[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:u}},getShaderSource:d}},b6=(e,t)=>{nL(e.inputs),e.compute(cL(e.inputs,t))},w6=e=>dr({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),Ci,dL,x6,jx,fL,Op,M6,T6=qe(()=>{$t(),zt(),ln(),dS(),hS(),Bt(),kl(),Ci=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,dL=(e,t)=>{let r=e[0],n=Ci(e,1),i=Ci(e,2),o=Ci(e,3),a=Ci(e,4),s=Ci(e,5),l=Ci(e,6),u=Ci(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=r.dims[0],c=r.dims[1],f=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],p=c,h=0,m=0,v=Math.floor(f/t.numHeads);if(l&&u&&Oe.size(l.dims)&&Oe.size(u.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==d||l.dims[1]!==t.numHeads||l.dims[3]!==v)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(u.dims[0]!==d||u.dims[1]!==t.numHeads||u.dims[3]!==v)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==u.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(u.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');h=l.dims[2],m=l.dims[2]}else if(l&&Oe.size(l.dims)||u&&Oe.size(u.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let g;if(n&&Oe.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');g=2,p=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==v)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');g=5,p=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==v)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');g=0,p=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');g=3}if(o&&Oe.size(o.dims)>0){if(o.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let _=h+p,b=0;if(a&&Oe.size(a.dims)>0){b=8;let M=a.dims;throw M.length===1?M[0]===d?b=1:M[0]===3*d+2&&(b=3):M.length===2&&M[0]===d&&M[1]===_&&(b=5),b===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let w=!1,y=f;if(i&&Oe.size(i.dims)>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(p!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');y=i.dims[2]}else{if(p!==i.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');y=i.dims[1]*i.dims[3],w=!0}}let x=!1;if(a&&Oe.size(a.dims)>0)throw new Error("Key padding mask is not supported");if(s&&Oe.size(s.dims)>0){if(s.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(s.dims[0]!==d||s.dims[1]!==t.numHeads||s.dims[2]!==c||s.dims[3]!==_)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:d,sequenceLength:c,pastSequenceLength:h,kvSequenceLength:p,totalSequenceLength:_,maxSequenceLength:m,inputHiddenSize:0,hiddenSize:f,vHiddenSize:y,headSize:v,vHeadSize:Math.floor(y/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:b,scale:t.scale,broadcastResPosBias:x,passPastInKv:w,qkvFormat:g}},x6=e=>dr({...e}),jx=dr({perm:[0,2,1,3]}),fL=(e,t,r,n,i,o,a)=>{let s=[n,i,o],l=Oe.size(s),u=[{type:12,data:l},{type:12,data:a},{type:12,data:o}],d=c=>{let f=mt("qkv_with_bias",t.dataType,s),p=Fe("qkv",t.dataType,s),h=Fe("bias",r.dataType,s),m=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${c.registerUniforms(m).declareVariables(p,h,f)}
  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Op=(e,t,r,n,i,o,a,s)=>{let l=o;if(a&&Oe.size(a.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=fL(e,o,a,t,n,r*i,s),l=l.reshape([t,n,r,i]),r===1||n===1?l:e.compute(po(l,jx.perm),{inputs:[l],outputs:[-1]})[0]}else return o.dims.length===3&&(l=o.reshape([t,n,r,i])),r===1||n===1?l:e.compute(po(l,jx.perm),{inputs:[l],outputs:[-1]})[0]},M6=(e,t)=>{let r=dL(e.inputs,t),n=e.inputs[0],i=Ci(e.inputs,1),o=Ci(e.inputs,2),a=Ci(e.inputs,3),s=Ci(e.inputs,4),l=Ci(e.inputs,5),u=Ci(e.inputs,6),d=Ci(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if((i==null?void 0:i.dims.length)===5)throw new Error("Packed KV is not implemented");let c=i&&o&&i.dims.length===4&&o.dims.length===4,f=Op(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,a,0);if(c)return Th(e,f,i,o,s,void 0,u,d,l,r);if(!i||!o)throw new Error("key and value must be provided");let p=Op(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),h=Op(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,o,a,2*r.hiddenSize);Th(e,f,p,h,s,void 0,u,d,l,r)}}),pL,hL,mL,gL,eT,P6,E6,S6=qe(()=>{$t(),zt(),ln(),Bt(),pL=e=>{if(!e||e.length<1)throw new Error("too few inputs")},hL=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),n=r.length),dr({numOutputs:n,axis:t.axis,splitSizes:r})},mL=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${vt("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,gL=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let i=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(i):n===0?r.push(`if (output_number == ${n}u) { ${i} }`):n===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${n}) { ${i} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},eT=(e,t)=>{let r=e[0].dims,n=Oe.size(r),i=e[0].dataType,o=Oe.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),s=Fe("input",i,r.length),l=new Array(t.numOutputs),u=[],d=[],c=0,f=[{type:12,data:n}];for(let h=0;h<t.numOutputs;h++){c+=t.splitSizes[h],l[h]=c;let m=r.slice();m[o]=t.splitSizes[h],d.push(m),a[h]=mt(`output${h}`,i,m.length),u.push({dims:d[h],dataType:e[0].dataType})}f.push({type:12,data:l},...yt(r,...d));let p=h=>`
  ${h.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(s,...a)}
  ${mL(l.length)}
  ${gL(a)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${s.offsetToIndices("global_idx")};
    var index = ${s.indicesGet("indices",o)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${vt("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${s.indicesSet("indices",o,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:p,getRunData:()=>({outputs:u,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:f})}},P6=(e,t)=>{pL(e.inputs);let r=e.inputs.length===1?t:hL(e.inputs,t);e.compute(eT(e.inputs,r),{inputs:[0]})},E6=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return dr({axis:t,numOutputs:n,splitSizes:r})}}),_L,Pv,C6,$6=qe(()=>{$t(),zt(),ln(),Bt(),_L=(e,t)=>{let[r,n,i,o]=e,{numHeads:a,rotaryEmbeddingDim:s}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!Oe.areEqual(n.dims,[])&&!Oe.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(i.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${i.dims.length}`);if(o.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${o.dims.length}`);if(!Oe.areEqual(i.dims,o.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(s>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],u=r.dims[r.dims.length-2],d=i.dims[0],c=Oe.sizeFromDimension(r.dims,1)/u,f=s===0?i.dims[1]*2:c/a;if(s>f)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(u!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(f/2!==i.dims[1]&&s/2!==i.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(u>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Pv=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:i,scale:o}=t,a=e[0].dims[0],s=Oe.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],u=s/l,d=e[2].dims[1],c=i===0?d*2:u/n,f=new Array(a,l,u/c,c-d),p=Oe.computeStrides(f),h=[{type:1,data:o},{type:12,data:f},{type:12,data:p},...e[0].dims.length===3?new Array({type:12,data:[s,u,c,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[s,c,l*c,1]}):[],...yt(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],m=v=>{let g=Fe("input",e[0].dataType,e[0].dims.length),_=Fe("position_ids",e[1].dataType,e[1].dims.length),b=Fe("cos_cache",e[2].dataType,e[2].dims.length),w=Fe("sin_cache",e[3].dataType,e[3].dims.length),y=mt("output",e[0].dataType,e[0].dims.length);return v.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:f.length},{name:"global_strides",type:"u32",length:p.length},{name:"input_output_strides",type:"u32",length:p.length}]),`
        ${v.declareVariables(g,_,b,w,y)}

        ${v.mainStart(Ed)}
          let half_rotary_emb_dim = uniforms.${b.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${_.broadcastedIndicesToOffset("bsnh.xy",mt("",_.type.tensor,2))};
            let position_id =
                u32(${_.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${g.getByOffset("i")} * ${b.get("position_id","bsnh[3]")} -
                ${g.getByOffset("j")} * ${w.get("position_id","bsnh[3]")};
            ${y.setByOffset("i","re")}
            let im = ${g.getByOffset("i")} * ${w.get("position_id","bsnh[3]")} +
                ${g.getByOffset("j")} * ${b.get("position_id","bsnh[3]")};
            ${y.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${y.setByOffset("k",g.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:dr({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:m,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Oe.size(f)/Ed)},programUniforms:h})}},C6=(e,t)=>{_L(e.inputs,t),e.compute(Pv(e.inputs,t))}}),vL,yL,Fx,bL,A6,iie=qe(()=>{ln(),$t(),hS(),T6(),S6(),kl(),$6(),Bt(),vL=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let s=!1,l=r.dims[0],u=r.dims[1],d=r.dims.length===3?s?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],c=u,f=0,p=!n||n.dims.length===0,h=Math.floor(p?d/(t.numHeads+2*t.kvNumHeads):d/t.numHeads);p&&(d=h*t.numHeads);let m=o&&o.dims.length!==0,v=a&&a.dims.length!==0;if(m&&o.dims.length===4&&o.dims[0]===l&&o.dims[1]!==t.kvNumHeads&&o.dims[2]===t.kvNumHeads&&o.dims[3]===h)throw new Error("BSNH pastKey/pastValue is not supported");if(m&&v){if(o.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(a.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');f=o.dims[2]}else if(m||v)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let g=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');c=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==h)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(i)throw new Error('Expect "value" be none when "key" has packed kv format.');c=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==h)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');c=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');g=3}let _=0,b=!1,w=t.kvNumHeads?h*t.kvNumHeads:d;if(i&&i.dims.length>0){if(i.dims.length!==3&&i.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==i.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(i.dims.length===3){if(c!==i.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');w=i.dims[2]}else{if(c!==i.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');w=i.dims[1]*i.dims[3],b=!0}}let y=e.length>4?e[5]:void 0;if(y&&y.dims.length!==1&&y.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:u,pastSequenceLength:f,kvSequenceLength:c,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:d,vHiddenSize:w,headSize:h,vHeadSize:Math.floor(w/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:_,scale:t.scale,broadcastResPosBias:!1,passPastInKv:b,qkvFormat:g}},yL=dr({perm:[0,2,1,3]}),Fx=(e,t,r)=>{let n=t,i=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,i,r.headSize]),n=e.compute(po(n,yL.perm),{inputs:[n],outputs:[-1]})[0]),n},bL=(e,t,r,n)=>{let i=7,o=["type","type"],a=[e*t],s=e*t,l=[{type:12,data:s},{type:12,data:t},{type:12,data:e}],u=d=>{let c=Fe("seq_lens",r.dataType,r.dims),f=Fe("total_seq_lens",n.dataType,n.dims),p=mt("pos_ids",i,a),h=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${d.registerUniforms(h).declareVariables(c,f,p)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${f.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${c.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${p.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:o},getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:l}),getShaderSource:u}},A6=(e,t)=>{var w;let r=vL(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(((w=e.inputs[1])==null?void 0:w.dims.length)===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],i=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,o=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,a=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,s=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,u=e.inputs.length>5?e.inputs[6]:void 0,d=r.kvNumHeads?r.kvNumHeads:r.numHeads,c=dr({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,d*r.headSize,d*r.headSize]}),[f,p,h]=!i&&!o?e.compute(eT([n],c),{inputs:[n],outputs:[-1,-1,-1]}):[n,i,o],m,v;if(t.doRotary){let y=e.compute(bL(r.batchSize,r.sequenceLength,l,u),{inputs:[l,u],outputs:[-1]})[0],x=e.inputs[7],M=e.inputs[8],T=dr({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),S=[f,y,x,M],$=[-1];m=e.compute(Pv(S,T),{inputs:S,outputs:$})[0],S.splice(0,1,p);let k=dr({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});v=e.compute(Pv(S,k),{inputs:S,outputs:$})[0]}let g=Op(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?m:f,void 0,0),_=Fx(e,t.doRotary?v:p,r),b=Fx(e,h,r);Th(e,g,_,b,void 0,void 0,a,s,void 0,r,l,u)}}),Lx,wL,xL,O6,oie=qe(()=>{$t(),zt(),kl(),Bt(),Lx=(e,t,r,n,i,o,a,s)=>{let l=Zr(o),u=l===1?"f32":`vec${l}f`,d=l===1?"vec2f":`mat2x${l}f`,c=i*a,f=64;c===1&&(f=256);let p=[i,a,o/l],h=[i,a,2],m=["rank","type","type"],v=[];v.push(...yt(p,h));let g=_=>{let b=Fe("x",t.dataType,3,l),w=Fe("scale",r.dataType,r.dims),y=Fe("bias",n.dataType,n.dims),x=mt("output",1,3,2),M=[b,w,y,x];return`
  var<workgroup> workgroup_shared : array<${d}, ${f}>;
  const workgroup_size = ${f}u;
  ${_.declareVariables(...M)}
  ${_.mainStart(f)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${u}(0);
    var squared_sum = ${u}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${u}(${b.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${d}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${Sl("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${Sl("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${s}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${s};${f}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:h,dataType:1}],dispatchGroup:{x:c},programUniforms:v}),getShaderSource:g},{inputs:[t,r,n],outputs:[-1]})[0]},wL=(e,t,r)=>{let n=t[0].dims,i=n,o=2,a=n[0],s=n[1],l=Oe.sizeFromDimension(n,o),u=Zr(l),d=Oe.size(i)/u,c=Lx(e,t[0],t[1],t[2],a,l,s,r.epsilon),f=[a,s,l/u],p=[a,s],h=["type","none"],m=v=>{let g=Fe("x",t[0].dataType,f.length,u),_=Fe("scale_shift",1,p.length,2),b=mt("output",t[0].dataType,f.length,u),w=[g,_,b];return`
  ${v.registerUniform("output_size","u32").declareVariables(...w)}
  ${v.mainStart()}
  ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${b.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${_.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${g.getByOffset("global_idx")} * ${b.type.value}(scale_shift.x) + ${b.type.value}(scale_shift.y);
      ${b.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${u}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...yt(f,p,f)]}),getShaderSource:m},{inputs:[t[0],c]})},xL=(e,t,r)=>{let n=t[0].dims,i=n,o=n[0],a=n[n.length-1],s=Oe.sizeFromDimension(n,1)/a,l=Zr(a),u=Oe.size(i)/l,d=[{type:12,data:s},{type:12,data:Math.floor(a/l)}],c=["type","type"],f=!1,p=[0,n.length-1];for(let g=0;g<n.length-2;g++)f=f||n[g+1]!==1,p.push(g+1);f=f&&n[n.length-1]!==1;let h=f?e.compute(po(e.inputs[0],p),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(g,_)=>n[p[_]])),m=Lx(e,h,t[1],t[2],o,s,a,r.epsilon),v=g=>{let _=Vn(t[0].dataType),b=l===1?"vec2f":`mat${l}x2f`,w=M=>{let T=M===0?"x":"y",S=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${_}(${S}(scale.${T}))`;case 2:return`vec2<${_}>(${S}(scale[0].${T}, scale[1].${T}))`;case 4:return`vec4<${_}>(${S}(scale[0].${T}, scale[1].${T}, scale[2].${T}, scale[3].${T}))`;default:throw new Error(`Not supported compoents ${l}`)}},y=Fe("input",t[0].dataType,t[0].dims,l),x=mt("output",t[0].dataType,i,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${y.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${b}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${x.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${g.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${w(0)}, ${w(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:c},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:d}),getShaderSource:v},{inputs:[t[0],m]})},O6=(e,t)=>{t.format==="NHWC"?xL(e,e.inputs,t):wL(e,e.inputs,t)}}),ML,TL,k6,aie=qe(()=>{$t(),zt(),Bt(),ML=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},TL=(e,t,r)=>{let n=t.simplified,i=e[0].dims,o=e[1],a=!n&&e[2],s=i,l=Oe.normalizeAxis(t.axis,i.length),u=Oe.sizeToDimension(i,l),d=Oe.sizeFromDimension(i,l),c=Oe.size(o.dims),f=a?Oe.size(a.dims):0;if(c!==d||a&&f!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${c} and bias size of ${f}`);let p=[];for(let y=0;y<i.length;++y)y<l?p.push(i[y]):p.push(1);let h=Zr(d),m=["type","type"],v=[{type:12,data:u},{type:1,data:d},{type:12,data:Math.floor(d/h)},{type:1,data:t.epsilon}];a&&m.push("type");let g=r>1,_=r>2,b=y=>{let x=Vn(e[0].dataType),M=[Fe("x",e[0].dataType,e[0].dims,h),Fe("scale",o.dataType,o.dims,h)];a&&M.push(Fe("bias",a.dataType,a.dims,h)),M.push(mt("output",e[0].dataType,s,h)),g&&M.push(mt("mean_data_output",1,p)),_&&M.push(mt("inv_std_output",1,p));let T=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${y.registerUniforms(T).declareVariables(...M)}
  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${GM("f32",h)};
    var mean_square_vector = ${GM("f32",h)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${Uc(x,h,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Sl("mean_vector",h)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Sl("mean_square_vector",h)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${Uc(x,h,"x[j + offset]")};
      let f32scale = ${Uc(x,h,"scale[j]")};
      output[j + offset] = ${M[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${a?`+ ${Uc(x,h,"bias[j]")}`:""}
      );
    }

    ${g?"mean_data_output[global_idx] = mean":""};
    ${_?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},w=[{dims:s,dataType:e[0].dataType}];return g&&w.push({dims:p,dataType:1}),_&&w.push({dims:p,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${h};${r};${n}`,inputDependencies:m},getRunData:()=>({outputs:w,dispatchGroup:{x:Math.ceil(u/64)},programUniforms:v}),getShaderSource:b}},k6=(e,t)=>{ML(e.inputs),e.compute(TL(e.inputs,t,e.outputCount))}}),PL,I6,sie=qe(()=>{zt(),yS(),bS(),PL=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},I6=e=>{PL(e.inputs);let t=Pd.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(vS(e.inputs,{activation:""},t));else{let i=t[t.length-2],o=Oe.size(e.inputs[0].dims.slice(0,-2)),a=Oe.size(e.inputs[1].dims.slice(0,-2));if(o!==1&&i===1&&a===1){let s=e.inputs[0].reshape([1,o,n]),l=e.inputs[1].reshape([1,n,r]),u=[1,o,r],d=[s,l];e.compute(Tv(d,{activation:""},t,u),{inputs:d})}else e.compute(Tv(e.inputs,{activation:""},t))}}}),EL,SL,CL,D6,j6,lie=qe(()=>{$t(),zt(),ln(),Bt(),EL=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),o=t.blockSize/8*t.bits,a=e[1];if(!Oe.areEqual(a.dims,[t.n,i,o]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let s=e[2].dims;if(Oe.size(s)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,u=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(Oe.size(l)!==u)throw new Error("zeroPoints input size error.")}},SL=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],o=t.k,a=t.n,s=r.slice(0,n-2),l=Oe.size(s),u=e[1].dims[2]/4,d=e[0].dataType,c=Zr(t.k),f=Zr(u),p=Zr(a),h=s.concat([i,a]),m=i>1&&a/p%2===0?2:1,v=Oe.size(h)/p/m,g=64,_=[],b=[l,i,o/c],w=Oe.convertShape(e[1].dims).slice();w.splice(-1,1,u/f),_.push(...yt(b)),_.push(...yt(w)),_.push(...yt(e[2].dims)),e.length===4&&_.push(...yt(Oe.convertShape(e[3].dims)));let y=[l,i,a/p];_.push(...yt(y));let x=M=>{let T=b.length,S=Fe("a",e[0].dataType,T,c),$=Fe("b",12,w.length,f),k=Fe("scales",e[2].dataType,e[2].dims.length),F=[S,$,k],j=e.length===4?Fe("zero_points",12,e[3].dims.length):void 0;j&&F.push(j);let U=y.length,z=mt("output",e[0].dataType,U,p),G=Vn(e[0].dataType),H=(()=>{switch(c){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${c}-component is not supported.`)}})(),W=()=>{let V=`
          // reuse a data
            var input_offset = ${S.indicesToOffset(`${S.type.indices}(batch, row, word_offset)`)};
            var a_data: ${H};
            for (var j: u32 = 0; j < ${8/c}; j++) {
              a_data[j] = ${S.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let I=0;I<p*m;I++)V+=`
            b_value = ${f===1?`b${I}_data`:`b${I}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${H}(${Array.from({length:4},(K,ae)=>`${G}(b_value_lower[${ae}]), ${G}(b_value_upper[${ae}])`).join(", ")});
            b_dequantized_values = ${c===1?`${H}(${Array.from({length:8},(K,ae)=>`(b_quantized_values[${ae}] - ${j?`zero_point${I}`:"zero_point"}) * scale${I}`).join(", ")});`:`(b_quantized_values - ${H}(${Array(8).fill(`${j?`zero_point${I}`:"zero_point"}`).join(",")})) * scale${I};`};
            workgroup_shared[local_id.x * ${m} + ${Math.floor(I/p)}]${p>1?`[${I%p}]`:""} += ${Array.from({length:8/c},(K,ae)=>`${c===1?`a_data[${ae}] * b_dequantized_values[${ae}]`:`dot(a_data[${ae}], b_dequantized_values[${ae}])`}`).join(" + ")};
          `;return V},Y=()=>{let V=`
            var col_index = col * ${p};
            ${j?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${G}(8);`}
            `;for(let I=0;I<p*m;I++)V+=`
            let scale${I} = ${k.getByOffset("col_index * nBlocksPerCol + block")};
            ${j?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${j.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${I} = ${G}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return V},te=()=>{let V=`col_index = col * ${p};`;for(let I=0;I<p*m;I++)V+=`
            let b${I}_data = ${$.getByIndices(`${$.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return V+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${H};
            var b_dequantized_values: ${H};`,V};return`
        var<workgroup> workgroup_shared: array<${z.type.value}, ${m*g}>;
        ${M.declareVariables(...F,z)}
        ${M.mainStart([g,1,1])}
          let output_indices = ${z.offsetToIndices(`(global_idx / ${g}) * ${m}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${g}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/c};
            ${Y()}
            for (var word: u32 = 0; word < ${u}; word += ${f}) {
              ${te()}
              for (var i: u32 = 0; i < ${f}; i++) {
                ${W()}
                word_offset += ${8/c};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${m}) {
            var output_value: ${z.type.value} = ${z.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${g}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${m};
            }
            ${z.setByIndices(`${z.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${c};${f};${p};${m};${g}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:h,dataType:d}],dispatchGroup:{x:v},programUniforms:_}),getShaderSource:x}},CL=(e,t)=>{let r=e[0].dims,n=r.length,i=r[n-2],o=t.k,a=t.n,s=r.slice(0,n-2),l=Oe.size(s),u=e[1].dims[2]/4,d=e[0].dataType,c=Zr(t.k),f=Zr(u),p=s.concat([i,a]),h=128,m=a%8===0?8:a%4===0?4:1,v=h/m,g=v*f*8,_=g/c,b=g/t.blockSize,w=Oe.size(p)/m,y=[],x=[l,i,o/c],M=Oe.convertShape(e[1].dims).slice();M.splice(-1,1,u/f),y.push(...yt(x)),y.push(...yt(M)),y.push(...yt(e[2].dims)),e.length===4&&y.push(...yt(Oe.convertShape(e[3].dims)));let T=[l,i,a];y.push(...yt(T));let S=$=>{let k=x.length,F=Fe("a",e[0].dataType,k,c),j=Fe("b",12,M.length,f),U=Fe("scales",e[2].dataType,e[2].dims.length),z=[F,j,U],G=e.length===4?Fe("zero_points",12,e[3].dims.length):void 0;G&&z.push(G);let H=T.length,W=mt("output",e[0].dataType,H),Y=Vn(e[0].dataType),te=()=>{switch(c){case 1:return`
          let a_data0 = vec4<${Y}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${Y}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${Y}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${Y}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${c}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${F.type.value}, ${_}>;
        var<workgroup> inter_results: array<array<${W.type.value}, ${v}>, ${m}>;
        ${$.declareVariables(...z,W)}
        ${$.mainStart([v,m,1])}
          let output_indices = ${W.offsetToIndices(`workgroup_index * ${m}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${b} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${_};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${_}; a_offset += ${h})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${F.getByIndices(`${F.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${F.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${b} + local_id.x;
            ${G?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${G.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${Y}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${Y}(8);`}
            let scale = ${U.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${j.getByIndices(`${j.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/c};
            for (var i: u32 = 0; i < ${f}; i++) {
              ${te()}
              let b_value = ${f===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${Y}>(${Array.from({length:4},(V,I)=>`${Y}(b_value_lower[${I}]), ${Y}(b_value_upper[${I}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${Y}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(V,I)=>`${`dot(a_data${I}, b_dequantized_values[${I}])`}`).join(" + ")};
              word_offset += ${8/c};
            }
            workgroupBarrier();
          }

          if (local_idx < ${m}) {
            var output_value: ${W.type.value} = ${W.type.value}(0);
            for (var b = 0u; b < ${v}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${W.setByIndices(`${W.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${c};${f};${v};${m}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:p,dataType:d}],dispatchGroup:{x:w},programUniforms:y}),getShaderSource:S}},D6=(e,t)=>{EL(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(CL(e.inputs,t)):e.compute(SL(e.inputs,t))},j6=e=>dr(e)}),$L,AL,OL,kL,IL,DL,jL,FL,F6,uie=qe(()=>{$t(),zt(),Bt(),$L=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},AL=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
            k = i32(${e.indicesGet("indices",i)}) - ${vt("uniforms.pads",i,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${vt("uniforms.x_shape",i,t)})) {
              break;
            }
            offset += k * i32(${vt("uniforms.x_strides",i,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},OL=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${vt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${vt("uniforms.x_shape",i,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${vt("uniforms.x_shape",i,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${vt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},kL=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${vt("uniforms.pads",i,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${vt("uniforms.x_shape",i,t)})) {
                  k = i32(${vt("uniforms.x_shape",i,t)}) - 1;
                }
                offset += k * i32(${vt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},IL=(e,t,r)=>{let n="";for(let i=t-1;i>=0;--i)n+=`
                k = i32(${e.indicesGet("indices",i)}) - ${vt("uniforms.pads",i,r)};
                if (k < 0)  {
                  k += i32(${vt("uniforms.x_shape",i,t)}]);
                }
                if (k >= i32(${vt("uniforms.x_shape",i,t)})) {
                  k -= i32(${vt("uniforms.x_shape",i,t)});
                }
                offset += k * i32(${vt("uniforms.x_strides",i,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},DL=(e,t,r)=>{switch(r.mode){case 0:return AL(e,t,r.pads.length);case 1:return OL(e,t,r.pads.length);case 2:return kL(e,t,r.pads.length);case 3:return IL(e,t,r.pads.length);default:throw new Error("Invalid mode")}},jL=(e,t)=>{let r=Oe.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,i=Oe.size(r),o=[{type:12,data:i},{type:6,data:t.pads}],a=e.length>=3&&e[2].data;t.mode===0&&o.push({type:a?e[2].dataType:1,data:t.value}),o.push(...yt(e[0].dims,r));let s=["rank"],l=u=>{let d=mt("output",e[0].dataType,r.length),c=Fe("x",e[0].dataType,n.length),f=c.type.value,p=DL(d,n.length,t),h=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&h.push({name:"constant_value",type:a?f:"f32"}),`
            ${u.registerUniforms(h).declareVariables(c,d)}
            ${u.mainStart()}
            ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${d.offsetToIndices("global_idx")};

            var value = ${f}(0);
            ${p}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${a}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Oe.size(r)/64)},programUniforms:o}),getShaderSource:l}},FL=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,i=e[0].dims.length,o=new Int32Array(2*i).fill(0);if(e.length>=4){let s=e[3].getBigInt64Array();for(let l=0;l<s.length;l++)o[Number(s[l])]=Number(r[l]),o[Number(s[l])+i]=Number(r[l+s.length])}else r.forEach((s,l)=>o[Number(l)]=Number(s));let a=[];return o.forEach(s=>a.push(s)),{mode:t.mode,value:n,pads:a}}else return t},F6=(e,t)=>{$L(e.inputs);let r=FL(e.inputs,t);e.compute(jL(e.inputs,r),{inputs:[0]})}}),cp,Nx,Rx,zx,Bx,LL,NL,Ux,Wx,L6,N6,Vx,R6,z6,Gx,B6,U6,W6,V6,cie=qe(()=>{Ma(),$t(),zt(),Bt(),cp=e=>{if(Or.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Nx=(e,t,r)=>{let n=t.format==="NHWC",i=e.dims.slice();n&&i.splice(1,0,i.pop());let o=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),s=t.strides.slice(),l=o?t.dilations.slice():[],u=t.pads.slice();xv.adjustPoolAttributes(r,i,a,s,l,u);let d=xv.computePoolOutputShape(r,i,s,l,a,u,t.autoPad),c=Object.assign({},t);o?Object.assign(c,{kernelShape:a,strides:s,pads:u,dilations:l,cacheKey:t.cacheKey}):Object.assign(c,{kernelShape:a,strides:s,pads:u,cacheKey:t.cacheKey});let f=d.slice();return f.push(f.splice(1,1)[0]),[c,n?f:d]},Rx=(e,t)=>{let r=t.format==="NHWC",n=Oe.size(e),i=Oe.size(t.kernelShape),o=[{type:12,data:n},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let s=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],u=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],c=!!(u+d);o.push({type:12,data:s},{type:12,data:l},{type:12,data:u},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let f=!1;if(t.kernelShape.length===2){let p=t.kernelShape[t.kernelShape.length-2],h=t.strides[t.strides.length-2],m=t.pads[t.pads.length/2-2],v=t.pads[t.pads.length-2];f=!!(m+v),o.push({type:12,data:p},{type:12,data:h},{type:12,data:m},{type:12,data:v}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[o,a,!0,c,f]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let s=Oe.computeStrides(t.kernelShape);o.push({type:12,data:s},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:s.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((u,d)=>u+d);return[o,a,!!l,!1,!1]}},zx=(e,t,r,n,i,o,a,s,l,u,d,c)=>{let f=i.format==="NHWC",p=t.type.value,h=mt("output",t.type.tensor,n);if(i.kernelShape.length<=2){let m="",v="",g="",_=r-(f?2:1);if(d?m=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${_}] < 0 || xIndices[${_}]
                      >= uniforms.x_shape[${_}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${o}
                }`:m=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${o}
                }`,i.kernelShape.length===2){let b=r-(f?3:2);c?v=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${b}] = indices[${b}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${b}] < 0 || xIndices[${b}] >= uniforms.x_shape[${b}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:v=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${b}] = indices[${b}] * uniforms.sh - uniforms.phStart + j;
                `,g=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,h)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${h.offsetToIndices("global_idx")};
              var xIndices = ${h.offsetToIndices("global_idx")};

              var value = ${p}(${s});
              var pad = 0;
              ${v}
              ${m}
              ${g}
              ${a}

              output[global_idx] = value;
            }`}else{if(f)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let m=i.kernelShape.length,v=i.pads.length,g="";return u?g=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${o}
              }`:g=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${o}
            `,`
            ${e.registerUniforms(l).declareVariables(t,h)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${h.offsetToIndices("global_idx")};
              var xIndices = ${h.offsetToIndices("global_idx")};

              var offsets: array<u32, ${m}>;

              var value = ${p}(${s});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${m-1}u; j++) {
                  offsets[j] = offset / ${vt("uniforms.kernelStrides","j",m)};
                  offset -= offsets[j] * ${vt("uniforms.kernelStrides","j",m)};
                }
                offsets[${m-1}] = offset;

                isPad = false;
                for (var j = ${r-m}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${vt("uniforms.strides",`j - ${r-m}u`,m)}
                    + offsets[j - ${r-m}u] - ${vt("uniforms.pads","j - 2u",v)};
                  ${g}
              }
              ${a}

              output[global_idx] = value;
            }`}},Bx=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,LL=e=>`${Bx(e)};${e.countIncludePad}`,NL=e=>`${Bx(e)};${e.storageOrder};${e.dilations}`,Ux=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),Wx=(e,t,r,n)=>{let[i,o]=Nx(t,n,r),a=Fe("x",t.dataType,t.dims.length),s=a.type.value,l="value += x_val;",u="";i.countIncludePad?u+=`value /= ${s}(uniforms.kernelSize);`:u+=`value /= ${s}(i32(uniforms.kernelSize) - pad);`;let[d,c,f,p,h]=Rx(o,i);d.push(...yt(t.dims,o));let m=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${h}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Oe.size(o)/64)},programUniforms:d}),getShaderSource:v=>zx(v,a,t.dims.length,o.length,i,l,u,0,c,f,p,h)}},L6=e=>{let t=e.count_include_pad!==0,r=Ux(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:LL(n)}},N6=(e,t)=>{cp(e.inputs),e.compute(Wx("AveragePool",e.inputs[0],!1,t))},Vx={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},R6=e=>{let t=e.format;return{format:t,...Vx,cacheKey:t}},z6=(e,t)=>{cp(e.inputs),e.compute(Wx("GlobalAveragePool",e.inputs[0],!0,t))},Gx=(e,t,r,n)=>{let[i,o]=Nx(t,n,r),a=`
      value = max(x_val, value);
    `,s="",l=Fe("x",t.dataType,t.dims.length),u=["rank"],[d,c,f,p,h]=Rx(o,i);return d.push(...yt(t.dims,o)),{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${h}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:o,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Oe.size(o)/64)},programUniforms:d}),getShaderSource:m=>zx(m,l,t.dims.length,o.length,i,a,s,t.dataType===10?-65504:-1e5,c,f,p,h)}},B6=(e,t)=>{cp(e.inputs),e.compute(Gx("MaxPool",e.inputs[0],!1,t))},U6=e=>{let t=e.storage_order,r=e.dilations,n=Ux(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...n,cacheKey:""};return{...i,cacheKey:NL(i)}},W6=e=>{let t=e.format;return{format:t,...Vx,cacheKey:t}},V6=(e,t)=>{cp(e.inputs),e.compute(Gx("GlobalMaxPool",e.inputs[0],!0,t))}}),RL,zL,G6,H6,die=qe(()=>{$t(),zt(),ln(),Bt(),RL=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((i,o)=>o===t.axis||i===e[0].dims[o]).reduce((i,o)=>i&&o,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},zL=(e,t)=>{let r=Oe.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,i=n===3,o=e[0].dims,a=e[1].dataType,s=Oe.size(o),l=n===3||n===2,u=l?[Math.ceil(Oe.size(e[0].dims)/4)]:e[0].dims,d=e[1].dims,c=e.length>2?e[2]:void 0,f=c?l?[Math.ceil(Oe.size(c.dims)/4)]:c.dims:void 0,p=d.length===0||d.length===1&&d[0]===1,h=p===!1&&d.length===1,m=Zr(s),v=p&&(!l||m===4),g=v?m:1,_=v&&!l?m:1,b=Fe("input",l?12:n,u.length,_),w=Fe("scale",a,d.length),y=c?Fe("zero_point",l?12:n,f.length):void 0,x=mt("output",a,o.length,g),M=[b,w];y&&M.push(y);let T=[u,d];c&&T.push(f);let S=[{type:12,data:s/g},{type:12,data:r},{type:12,data:t.blockSize},...yt(...T,o)],$=k=>{let F=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${k.registerUniforms(F).declareVariables(...M,x)}
      ${k.mainStart()}
          ${k.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${x.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${b.getByOffset("global_idx / 4")};
            let x_vec = ${i?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${g===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${b.getByOffset("global_idx")};`};

          // Set scale input
          ${p?`let scale_value= ${w.getByOffset("0")}`:h?`
            let scale_index = ${x.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${w.getByOffset("scale_index")};`:`
            var scale_indices: ${w.type.indices} = output_indices;
            let index = ${w.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${w.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${w.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${y?p?l?`
                let zero_point_input = ${y.getByOffset("0")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${y.getByOffset("0")}`:h?l?`
                let zero_point_index = ${x.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${y.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${x.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${y.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${w.indicesToOffset("scale_indices")};
                let zero_point_input = ${y.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${i?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${y.getByIndices("scale_indices")};`:`let zero_point_value = ${l?i?"i32":"u32":b.type.value}(0);`};
      // Compute and write output
      ${x.setByOffset("global_idx",`${x.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:y?["rank","rank","rank"]:["rank","rank"]},getShaderSource:$,getRunData:()=>({outputs:[{dims:o,dataType:a}],dispatchGroup:{x:Math.ceil(s/g/64),y:1,z:1},programUniforms:S})}},G6=(e,t)=>{RL(e.inputs,t),e.compute(zL(e.inputs,t))},H6=e=>dr({axis:e.axis,blockSize:e.blockSize})}),BL,UL,K6,fie=qe(()=>{Ma(),$t(),Bt(),BL=(e,t,r)=>{let n=e===t,i=e<t&&r<0,o=e>t&&r>0;if(n||i||o)throw new Error("Range these inputs' contents are invalid.")},UL=(e,t,r,n)=>{let i=Math.abs(Math.ceil((t-e)/r)),o=[i],a=i,s=[{type:12,data:a},{type:n,data:e},{type:n,data:r},...yt(o)],l=u=>{let d=mt("output",n,o.length),c=d.type.value,f=[{name:"outputSize",type:"u32"},{name:"start",type:c},{name:"delta",type:c}];return`
        ${u.registerUniforms(f).declareVariables(d)}
        ${u.mainStart()}
        ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${c}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:o,dataType:n}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:s})}},K6=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),Or.webgpu.validateInputContent&&BL(t,r,n),e.compute(UL(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),WL,Hx,Kx,VL,q6,X6,pie=qe(()=>{$t(),zt(),ln(),Bt(),WL=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let i=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,o=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${i}bitcast<${n}>(oldValue) + (${r})${o}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${i}max(bitcast<f32>(oldValue), (${r}))${o}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${i}min(bitcast<${n}>(oldValue), (${r}))${o}`;case"mul":return`${i}(bitcast<${n}>(oldValue) * (${r}))${o}`;default:throw new Error(`Reduction ${e} is not supported.`)}},Hx=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,Kx=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${WL(e.reduction,"output[data_offset + i]","value",t)}
      }`,VL=(e,t)=>{let r=e[0].dims,n=e[1].dims,i=r,o=1,a=Math.ceil(Oe.size(n)/o),s=n[n.length-1],l=Oe.sizeFromDimension(r,s),u=Oe.sizeFromDimension(n,0)/s,d=[{type:12,data:a},{type:12,data:s},{type:12,data:l},...yt(e[1].dims,e[2].dims,i)],c=f=>{let p=Fe("indices",e[1].dataType,e[1].dims.length),h=Fe("updates",e[2].dataType,e[2].dims.length,o),m=t.reduction!=="none"&&t.reduction!==""?M5("output",e[0].dataType,i.length):mt("output",e[0].dataType,i.length,o);return`
      ${f.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(p,h,m)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${u}; i = i + 1) {
      for (var j = i + 1; j < ${u}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${u}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${Hx(r.length,!1)}
      }
      ${Kx(t,m.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${Hx(r.length,!0)}
  }
  ${Kx(t,m.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:c}},q6=e=>dr({reduction:e.reduction}),X6=(e,t)=>{e.compute(VL(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),GL,HL,KL,qx,qL,XL,QL,YL,ZL,JL,eN,tN,Xx,rN,nN,iN,oN,aN,Q6,Y6,hie=qe(()=>{$t(),zt(),ln(),Bt(),GL=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},HL=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((i,o)=>n[i]=e[o]),n},KL=(e,t,r,n,i,o)=>{let[a,s,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],u=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>o.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(s>0&&e.length>s&&e[s].dims.length===1&&e[s].dims[0]>0){if(e[s].getFloat32Array().forEach(d=>n.push(d)),n.length!==0&&n.length!==u&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");GL(n,t),t.axes.length>0&&HL(n,t.axes,u).forEach((d,c)=>n[c]=d)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==0&&i.length!==u&&r>=18&&i.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(i.length!==0&&i.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof i<"u"&&n.length>0&&i.length>u)throw new Error("Resize requires only of scales or sizes to be specified")},qx=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,qL=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${qx("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${qx("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",XL=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",QL=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?n:e.slice();return t.length>0?(t.forEach((o,a)=>{n[o]=i[a],n[a+r]=i[t.length+a]}),n):i},YL=(e,t,r,n)=>{let i=[];if(r.length>0)if(n.length>0){if(e.forEach(o=>i.push(o)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((o,a)=>i[o]=r[a])}else r.forEach(o=>i.push(o));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((o,a)=>Math.round(o*t[a]))}return i},ZL=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(o=>t[o]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(o=>t[o]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(o=>t[o]=n),r.axes.forEach(o=>i[o]=Math.round(e[o]*t[o]))):(t.fill(n,0,t.length),i.forEach((o,a)=>i[a]=Math.round(o*t[a]))),i},JL=(e,t,r,n,i)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${vt("uniforms.scales","i",n)};
        var roi_low = ${vt("uniforms.roi","i",i)};
        var roi_hi = ${vt("uniforms.roi",`i + ${t.length}`,i)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${vt("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${vt("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,eN=(e,t,r,n,i,o,a)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${vt("uniforms.scales","i",i)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${vt("uniforms.roi","i",o)};
          var roi_hi = ${vt("uniforms.roi",`i + ${r.length}`,o)};
          var input_shape_i = ${vt("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${vt("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,tN=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${vt("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,Xx=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",rN=(e,t,r,n,i)=>{let[o,a,s,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],u=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${u} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(row, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",s,`max(0, min(col, ${r[s]} - 1))`)};
      ${Xx(e,l,o,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${u} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${u} = originalIndices[${a}];
      var col:${u} = originalIndices[${s}];
      ${n?`if (row < 0 || row > (${r[a]} - 1) || col < 0 || col > (${r[s]} - 1)) {
        return ${i};
      }`:""};
      row = max(0, min(row, ${r[a]} - 1));
      col = max(0, min(col, ${r[s]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${o}])`:"0"};
      var x11: ${u} = getInputValue(batch, channel, row1, col1);
      var x12: ${u} = getInputValue(batch, channel, row1, col2);
      var x21: ${u} = getInputValue(batch, channel, row2, col1);
      var x22: ${u} = getInputValue(batch, channel, row2, col2);
      var dx1: ${u} = abs(row - ${u}(row1));
      var dx2: ${u} = abs(${u}(row2) - row);
      var dy1: ${u} = abs(col - ${u}(col1));
      var dy2: ${u} = abs(${u}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},nN=(e,t,r,n,i,o,a,s,l,u)=>{let d=r.length===2,[c,f]=d?[0,1]:[2,3],p=e.type.value,h=m=>{let v=m===c?"row":"col";return`
      fn ${v}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${p} {
        var output_index = ${t.indicesGet("output_indices",m)};
        var originalIdx: ${p} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[m]},
        ${n[m]}, ${r[m]}, ${o[m]}, ${o[m]} + ${r.length});
        var fractOriginalIdx: ${p} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${s} && (originalIdx < 0 || originalIdx > (${r[m]} - 1))) {
          return ${l};
        }
        var data: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${v}: ${p} = originalIdx + ${p}(i);
          if (${v} < 0 || ${v} >= ${r[m]}) {
            ${u?`coefs[i + 1] = 0.0;
                        continue;`:s?`return ${l};`:`${v} = max(0, min(${v}, ${r[m]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",m,`u32(${v})`)};
          data[i + 1] = ${m===c?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${h(c)};
    ${h(f)};
  fn getCubicInterpolationCoefs(s: ${p}) -> array<${p}, 4> {
    var absS = abs(s);
    var coeffs: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${p} = 1.0 - absS;
    var twoMinusAbsS: ${p} = 2.0 - absS;
    var onePlusAbsS: ${p} = 1.0 + absS;
    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};
    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;
    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${p}, 4>, coefs: array<${p}, 4>) -> ${p} {
    var coefsSum: ${p} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${p} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},iN=(e,t,r,n,i)=>{let[o,a,s,l,u]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],d=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${d} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",a,`max(0, min(depth, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",s,`max(0, min(height, ${r[s]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${Xx(e,u,o,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${d} = originalIndices[${a}];
      var height:${d} = originalIndices[${s}];
      var width:${d} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[a]} - 1) || height < 0 || height > (${r[s]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${i};
        }`:""};

    depth = max(0, min(depth, ${r[a]} - 1));
      height = max(0, min(height, ${r[s]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${u}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${o}])`:"0"};

      var x111: ${d} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${d} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${d} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${d} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${d} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${d} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${d} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${d} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${d} = abs(depth - ${d}(depth1));
      var dx2: ${d} = abs(${d}(depth2) - depth);
      var dy1: ${d} = abs(height - ${d}(height1));
      var dy2: ${d} = abs(${d}(height2) - height);
      var dz1: ${d} = abs(width - ${d}(width1));
      var dz2: ${d} = abs(${d}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},oN=(e,t,r,n,i,o)=>{let a=e.dims,s=QL(o,t.axes,a.length),l=YL(a,n,i,t.axes),u=n.slice();n.length===0&&(u=a.map((_,b)=>_===0?1:l[b]/_),t.keepAspectRatioPolicy!=="stretch"&&(l=ZL(a,u,t)));let d=mt("output",e.dataType,l.length),c=Fe("input",e.dataType,a.length),f=Oe.size(l),p=a.length===l.length&&a.every((_,b)=>_===l[b]),h=t.coordinateTransformMode==="tf_crop_and_resize",m=t.extrapolationValue,v=c.type.value,g=_=>`
      ${p?"":`
      ${qL(t.coordinateTransformMode,v)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${tN(c,a)};
              ${XL(t.nearestMode,r,v)};
              ${eN(c,d,a,l,u.length,s.length,h)};
              `;case"linear":return`
              ${JL(d,a,l,u.length,s.length)};
              ${(()=>{if(a.length===2||a.length===4)return`${rN(c,d,a,h,m)}`;if(a.length===3||a.length===5)return`${iN(c,d,a,h,m)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(a.length===2||a.length===4)return`${nN(c,d,a,l,u,s,t.cubicCoeffA,h,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${_.registerUniform("output_size","u32").registerUniform("scales","f32",u.length).registerUniform("roi","f32",s.length).declareVariables(c,d)}
      ${_.mainStart()}
        ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${p?"output[global_idx] = input[global_idx];":`
        let output_indices = ${d.offsetToIndices("global_idx")};
        var input_indices: ${c.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${c.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${u.length>0?t.mode==="cubic"?u:u.length:""}|${i.length>0?i:""}|${s.length>0?s:""}|${p}|${t.mode==="nearest"?a.length:a}`,inputDependencies:["rank"]},getShaderSource:g,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},{type:1,data:u},{type:1,data:s},...yt(a,l)]})}},aN=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},Q6=(e,t)=>{let r=[],n=[],i=[],o=aN(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");KL(e.inputs,t,o,r,n,i),e.compute(oN(e.inputs[0],t,o,r,n,i),{inputs:[0]})},Y6=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,i=e.cubicCoeffA,o=e.excludeOutside!==0,a=e.extrapolationValue,s=e.keepAspectRatioPolicy,l=e.mode,u=e.nearestMode===""?"simple":e.nearestMode;return dr({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:i,excludeOutside:o,extrapolationValue:a,keepAspectRatioPolicy:s,mode:l,nearestMode:u})}}),sN,lN,Z6,mie=qe(()=>{$t(),zt(),Bt(),sN=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],o=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==o)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},lN=(e,t,r,n)=>{let i=t.simplified,o=e[0].dims,a=Oe.size(o),s=o,l=a,u=o.slice(-1)[0],d=n?o.slice(0,-1).concat(1):[],c=!i&&e.length>3,f=e.length>4,p=n&&r>1,h=n&&r>2,m=r>3,v=64,g=Zr(u),_=[{type:12,data:l},{type:12,data:g},{type:12,data:u},{type:1,data:t.epsilon}],b=y=>{let x=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],M=[Fe("x",e[0].dataType,e[0].dims,g),Fe("skip",e[1].dataType,e[1].dims,g),Fe("gamma",e[2].dataType,e[2].dims,g)];c&&M.push(Fe("beta",e[3].dataType,e[3].dims,g)),f&&M.push(Fe("bias",e[4].dataType,e[4].dims,g)),M.push(mt("output",e[0].dataType,s,g)),p&&M.push(mt("mean_output",1,d)),h&&M.push(mt("inv_std_output",1,d)),m&&M.push(mt("input_skip_bias_sum",e[0].dataType,s,g));let T=Vn(e[0].dataType),S=Vn(1,g);return`

      ${y.registerUniforms(x).declareVariables(...M)}
      var<workgroup> sum_shared : array<${S}, ${v}>;
      var<workgroup> sum_squared_shared : array<${S}, ${v}>;

      ${y.mainStart([v,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${v};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${v};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${v-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${f?"bias[offset1d + i]":T+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${m?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${Uc(T,g,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${v};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${Sl("sum",g)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Sl("square_sum",g)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);
        ${p?"mean_output[global_idx] = mean;":""}
        ${h?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${i?"":`- ${T}(mean)`}) *
            ${T}(inv_std_dev) * gamma[offset1d + i]
            ${c?"+ beta[offset1d + i]":""};
        }
      }`},w=[{dims:s,dataType:e[0].dataType}];return r>1&&w.push({dims:d,dataType:1}),r>2&&w.push({dims:d,dataType:1}),r>3&&w.push({dims:o,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${g};${p};${h};${m}`,inputDependencies:e.map((y,x)=>"type")},getShaderSource:b,getRunData:()=>({outputs:w,dispatchGroup:{x:Math.ceil(l/u)},programUniforms:_})}},Z6=(e,t)=>{sN(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(lN(e.inputs,t,e.outputCount,!1),{outputs:r})}}),uN,dp,cN,Qx,dN,fN,J6,eG,gie=qe(()=>{$t(),zt(),ln(),Bt(),uN=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},dp=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},cN=(e,t)=>{if(e.length>1){let r=dp(e,1),n=dp(e,2),i=dp(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),dr({starts:r,ends:n,axes:i})}else return t},Qx=(e,t,r,n,i)=>{let o=e;return e<0&&(o+=r[n[t]]),i[t]<0?Math.max(0,Math.min(o,r[n[t]]-1)):Math.max(0,Math.min(o,r[n[t]]))},dN=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${vt("uniforms.input_shape","i",r.length)};
            let steps_i = ${vt("uniforms.steps","i",r.length)};
            let signs_i = ${vt("uniforms.signs","i",r.length)};
            let starts_i = ${vt("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,fN=(e,t)=>{let r=e[0].dims,n=Oe.size(r),i=t.axes.length>0?Oe.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],o=dp(e,4);o.forEach(g=>g!==0||(()=>{throw new Error("step cannot be 0")})),o.length===0&&(o=Array(i.length).fill(1));let a=t.starts.map((g,_)=>Qx(g,_,r,i,o)),s=t.ends.map((g,_)=>Qx(g,_,r,i,o));if(i.length!==a.length||i.length!==s.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let g=0;g<r.length;++g)i.includes(g)||(a.splice(g,0,0),s.splice(g,0,r[g]),o.splice(g,0,1));let l=o.map(g=>Math.sign(g));o.forEach((g,_,b)=>{if(g<0){let w=(s[_]-a[_])/g,y=a[_],x=y+w*o[_];a[_]=x,s[_]=y,b[_]=-g}});let u=r.slice(0);i.forEach((g,_)=>{u[g]=Math.ceil((s[g]-a[g])/o[g])});let d={dims:u,dataType:e[0].dataType},c=mt("output",e[0].dataType,u.length),f=Fe("input",e[0].dataType,e[0].dims.length),p=Oe.size(u),h=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:o.length}],m=[{type:12,data:p},{type:12,data:a},{type:6,data:l},{type:12,data:o},...yt(e[0].dims,u)],v=g=>`
      ${g.registerUniforms(h).declareVariables(f,c)}
        ${dN(f,c,r)}
        ${g.mainStart()}
          ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${c.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${c.setByOffset("global_idx",f.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${a.length}_${o.length}`,inputDependencies:["rank"]},getShaderSource:v,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:m})}},J6=(e,t)=>{uN(e.inputs,t);let r=cN(e.inputs,t);e.compute(fN(e.inputs,r),{inputs:[0]})},eG=e=>{let t=e.starts,r=e.ends,n=e.axes;return dr({starts:t,ends:r,axes:n})}}),pN,hN,tG,rG,_ie=qe(()=>{$t(),zt(),ln(),kl(),Bt(),pN=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},hN=(e,t)=>{let r=e.inputs[0],n=r.dims,i=Oe.size(n),o=n.length,a=Oe.normalizeAxis(t.axis,o),s=a<n.length-1,l,u=[];s?(u=Array.from({length:o},(M,T)=>T),u[a]=o-1,u[o-1]=a,l=e.compute(po(r,u),{inputs:[r],outputs:[-1]})[0]):l=r;let d=l.dims,c=d[o-1],f=i/c,p=Zr(c),h=c/p,m=64;f===1&&(m=256);let v=(M,T)=>T===4?`max(max(${M}.x, ${M}.y), max(${M}.z, ${M}.w))`:T===2?`max(${M}.x, ${M}.y)`:T===3?`max(max(${M}.x, ${M}.y), ${M}.z)`:M,g=Fe("x",l.dataType,l.dims,p),_=mt("result",l.dataType,l.dims,p),b=g.type.value,w=Vn(l.dataType)==="f32"?`var threadMax = ${b}(-3.402823e+38f);`:`var threadMax = ${b}(-65504.0h);`,y=M=>`
      var<workgroup> rowMaxShared : ${b};
      var<workgroup> rowSumShared : ${b};
      var<workgroup> threadShared : array<${b}, ${m}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${b} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${b}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${M.registerUniform("packedCols","i32").declareVariables(g,_)}
      ${M.mainStart(m)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${m};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${w}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${b}(${v("threadShared[0]",p)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${b}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${b}(${Sl("threadShared[0]",p)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,x=e.compute({name:"Softmax",shaderCache:{hint:`${p};${m}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:d,dataType:l.dataType}],dispatchGroup:{x:f},programUniforms:[{type:6,data:h}]}),getShaderSource:y},{inputs:[l],outputs:[s?-1:0]})[0];s&&e.compute(po(x,u),{inputs:[x]})},tG=(e,t)=>{pN(e.inputs),hN(e,t)},rG=e=>dr({axis:e.axis})}),Yx,mN,gN,_N,nG,vie=qe(()=>{$t(),zt(),Bt(),Yx=e=>Array.from(e.getBigInt64Array(),Number),mN=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Yx(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},gN=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},_N=(e,t)=>{let r=e[0].dims,n=t??Yx(e[1]),i=gN(r,n),o=Oe.size(i),a=e[0].dataType,s=Fe("input",a,r.length),l=mt("output",a,i.length),u=d=>`
      const inputShape = ${s.indices(...r)};
      ${d.registerUniform("output_size","u32").declareVariables(s,l)}
      ${d.mainStart()}
      ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${s.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${s.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${s.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",s.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},...yt(e[0].dims,i)]}),getShaderSource:u}},nG=e=>{mN(e.inputs),e.compute(_N(e.inputs),{inputs:[0]})}}),vN,yN,iG,yie=qe(()=>{$t(),zt(),Bt(),vN=(e,t,r,n,i)=>{let o=mt("output_data",i,r.length,4),a=Fe("a_data",t[1].dataType,t[1].dims.length,4),s=Fe("b_data",t[2].dataType,t[2].dims.length,4),l=Fe("c_data",t[0].dataType,t[0].dims.length,4),u,d=(c,f,p)=>`select(${f}, ${c}, ${p})`;if(!n)u=o.setByOffset("global_idx",d(a.getByOffset("global_idx"),s.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let c=(f,p,h="")=>{let m=`a_data[index_a${p}][component_a${p}]`,v=`b_data[index_b${p}][component_b${p}]`,g=`bool(c_data[index_c${p}] & (0xffu << (component_c${p} * 8)))`;return`
            let output_indices${p} = ${o.offsetToIndices(`global_idx * 4u + ${p}u`)};
            let offset_a${p} = ${a.broadcastedIndicesToOffset(`output_indices${p}`,o)};
            let offset_b${p} = ${s.broadcastedIndicesToOffset(`output_indices${p}`,o)};
            let offset_c${p} = ${l.broadcastedIndicesToOffset(`output_indices${p}`,o)};
            let index_a${p} = offset_a${p} / 4u;
            let index_b${p} = offset_b${p} / 4u;
            let index_c${p} = offset_c${p} / 4u;
            let component_a${p} = offset_a${p} % 4u;
            let component_b${p} = offset_b${p} % 4u;
            let component_c${p} = offset_c${p} % 4u;
            ${f}[${p}] = ${h}(${d(m,v,g)});
          `};i===9?u=`
            var data = vec4<u32>(0);
            ${c("data",0,"u32")}
            ${c("data",1,"u32")}
            ${c("data",2,"u32")}
            ${c("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:u=`
            ${c("output_data[global_idx]",0)}
            ${c("output_data[global_idx]",1)}
            ${c("output_data[global_idx]",2)}
            ${c("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,a,s,o)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${u}
      }`},yN=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,i=e[1].dataType,o=!(Oe.areEqual(t,r)&&Oe.areEqual(r,n)),a=t,s=Oe.size(t);if(o){let u=Pd.calcShape(Pd.calcShape(t,r,!1),n,!1);if(!u)throw new Error("Can't perform where op on the given tensors");a=u,s=Oe.size(a)}let l=Math.ceil(s/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:u=>vN(u,e,a,o,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(s/64/4)},programUniforms:[{type:12,data:l},...yt(n,t,r,a)]})}},iG=e=>{e.compute(yN(e.inputs))}}),oG,bie=qe(()=>{Dne(),hS(),jne(),Fne(),Lne(),Nne(),Rne(),Vne(),Hne(),Kne(),qne(),Xne(),Qne(),Yne(),Zne(),Jne(),eie(),tie(),rie(),nie(),iie(),oie(),aie(),sie(),lie(),T6(),uie(),cie(),die(),fie(),pie(),pS(),hie(),$6(),mie(),gie(),_ie(),S6(),vie(),kl(),mS(),yie(),oG=new Map([["Abs",[Z5]],["Acos",[J5]],["Acosh",[e8]],["Add",[D8]],["ArgMax",[q5,KM]],["ArgMin",[K5,KM]],["Asin",[t8]],["Asinh",[r8]],["Atan",[n8]],["Atanh",[i8]],["Attention",[X5]],["AveragePool",[N6,L6]],["BatchNormalization",[Q5]],["BiasAdd",[Y5]],["BiasSplitGelu",[I8]],["Cast",[a8,o8]],["Ceil",[l8]],["Clip",[s8]],["Concat",[V8,G8]],["Conv",[JM,ZM]],["ConvTranspose",[t6,e6]],["Cos",[u8]],["Cosh",[c8]],["CumSum",[r6,n6]],["DepthToSpace",[i6,o6]],["DequantizeLinear",[G6,H6]],["Div",[j8]],["Einsum",[a6,s6]],["Elu",[d8,Ap]],["Equal",[F8]],["Erf",[f8]],["Exp",[p8]],["Expand",[l6]],["FastGelu",[u6]],["Floor",[h8]],["FusedConv",[JM,ZM]],["Gather",[d6,c6]],["GatherElements",[_6,g6]],["GatherBlockQuantized",[h6,m6]],["GatherND",[f6,p6]],["Gelu",[m8]],["Gemm",[y6,v6]],["GlobalAveragePool",[z6,R6]],["GlobalMaxPool",[V6,W6]],["Greater",[z8]],["GreaterOrEqual",[U8]],["GridSample",[b6,w6]],["GroupQueryAttention",[A6]],["HardSigmoid",[M8,x8]],["InstanceNormalization",[O6]],["LayerNormalization",[k6]],["LeakyRelu",[g8,Ap]],["Less",[B8]],["LessOrEqual",[W8]],["Log",[O8]],["MatMul",[I6]],["MatMulNBits",[D6,j6]],["MaxPool",[B6,U6]],["Mul",[L8]],["MultiHeadAttention",[M6,x6]],["Neg",[v8]],["Not",[_8]],["Pad",[F6]],["Pow",[N8]],["QuickGelu",[k8,Ap]],["Range",[K6]],["Reciprocal",[y8]],["ReduceMin",[U5]],["ReduceMean",[L5]],["ReduceMax",[B5]],["ReduceSum",[V5]],["ReduceProd",[W5]],["ReduceL1",[N5]],["ReduceL2",[R5]],["ReduceLogSum",[H5]],["ReduceLogSumExp",[z5]],["ReduceSumSquare",[G5]],["Relu",[b8]],["Resize",[Q6,Y6]],["RotaryEmbedding",[C6]],["ScatterND",[X6,q6]],["Sigmoid",[w8]],["Sin",[T8]],["Sinh",[P8]],["Slice",[J6,eG]],["SkipLayerNormalization",[Z6]],["Split",[P6,E6]],["Sqrt",[E8]],["Softmax",[tG,rG]],["Sub",[R8]],["Tan",[S8]],["Tanh",[C8]],["ThresholdedRelu",[A8,Ap]],["Tile",[nG]],["Transpose",[P5,E5]],["Where",[iG]]])}),aG,wie=qe(()=>{Ma(),Ds(),Bt(),aG=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,i){xa(e.programInfo.name);let o=this.backend.device,a=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let s=[];for(let u of t)s.push({binding:s.length,resource:{buffer:u.buffer}});for(let u of r)s.push({binding:s.length,resource:{buffer:u.buffer}});i&&s.push({binding:s.length,resource:i});let l=o.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:s,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let u={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(u)}a.setPipeline(e.computePipeline),a.setBindGroup(0,l),a.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Fo(e.programInfo.name)}dispose(){}build(e,t){xa(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(u=>{r.features.has(u.feature)&&n.push(`enable ${u.extension};`)});let i=T5(t,this.backend.device.limits),o=e.getShaderSource(i),a=`${n.join(`
`)}
${i.additionalImplementations}
${o}`,s=r.createShaderModule({code:a,label:e.name});rr("verbose",()=>`[WebGPU] ${e.name} shader code: ${a}`);let l=r.createComputePipeline({compute:{module:s,entryPoint:"main"},layout:"auto",label:e.name});return Fo(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:i.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,i=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=i&&r<=i&&n<=i)return[t,r,n];let o=t*r*n,a=Math.ceil(Math.sqrt(o));if(a>i){if(a=Math.ceil(Math.cbrt(o)),a>i)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[a,a,a]}else return[a,a,1]}}}),sG={};af(sG,{WebGpuBackend:()=>lG});var bN,wN,xN,lG,xie=qe(()=>{Ma(),$t(),Ds(),y5(),kne(),bie(),wie(),bN=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let i=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let o=e[n].dims.length;r.push(`${i};${o}`);break}case"dims":{let o=e[n].dims.join(",");r.push(`${i};${o}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},wN=(e,t,r)=>{var i,o;let n=e.name;return(i=e.shaderCache)!=null&&i.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${bN(t,((o=e.shaderCache)==null?void 0:o.inputDependencies)??new Array(t.length).fill("dims"))}`,n},xN=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},lG=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},i=o=>t.features.has(o)&&r.push(o)&&!0;i("chromium-experimental-timestamp-query-inside-passes")||i("timestamp-query"),i("shader-f16"),i("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new xN(t.info||await t.requestAdapterInfo()),this.gpuDataManager=x5(this),this.programManager=new aG(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,uS(e.logLevel,!!e.debug),this.device.onuncapturederror=o=>{o.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${o.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;xa(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{var n;let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let i=0;i<t.length/2;i++){let o=r[i],a=o.kernelId,s=this.kernels.get(a),l=s.kernelType,u=s.kernelName,d=o.programName,c=o.inputTensorViews,f=o.outputTensorViews,p=t[i*2],h=t[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=p);let m=Number(p-this.queryTimeBase),v=Number(h-this.queryTimeBase);if(!Number.isSafeInteger(m)||!Number.isSafeInteger(v))throw new RangeError("incorrect timestamp range");if((n=this.env.webgpu.profiling)!=null&&n.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:c.map(g=>({dims:g.dims,dataType:ps(g.dataType)})),outputsMetadata:f.map(g=>({dims:g.dims,dataType:ps(g.dataType)})),kernelId:a,kernelType:l,kernelName:u,programName:d,startTime:m,endTime:v});else{let g="";c.forEach((b,w)=>{g+=`input[${w}]: [${b.dims}] | ${ps(b.dataType)}, `});let _="";f.forEach((b,w)=>{_+=`output[${w}]: [${b.dims}] | ${ps(b.dataType)}, `}),console.log(`[profiling] kernel "${a}|${l}|${u}|${d}" ${g}${_}execution time: ${v-m} ns`)}Mh("GPU",`${d}::${p}::${h}`)}e.unmap(),this.pendingQueries.delete(e)}),Fo()}run(e,t,r,n,i,o){xa(e.name);let a=[];for(let _=0;_<t.length;++_){let b=t[_].data;if(b===0)continue;let w=this.gpuDataManager.get(b);if(!w)throw new Error(`no GPU data for input: ${b}`);a.push(w)}let{outputs:s,dispatchGroup:l,programUniforms:u}=e.getRunData(t),d=r.length===0?s.map((_,b)=>b):r;if(d.length!==s.length)throw new Error(`Output size ${d.length} must be equal to ${s.length}.`);let c=[],f=[];for(let _=0;_<s.length;++_){if(!Number.isInteger(d[_])||d[_]<-3||d[_]>=o)throw new Error(`Invalid output index: ${d[_]}`);if(d[_]===-3)continue;let b=d[_]===-1,w=d[_]===-2,y=b||w?i(s[_].dataType,s[_].dims):n(d[_],s[_].dataType,s[_].dims);if(c.push(y),y.data===0)continue;let x=this.gpuDataManager.get(y.data);if(!x)throw new Error(`no GPU data for output: ${y.data}`);if(b&&this.temporaryData.push(x),w){let M=this.kernelPersistentData.get(this.currentKernelId);M||(M=[],this.kernelPersistentData.set(this.currentKernelId,M)),M.push(x)}f.push(x)}if(a.length!==t.length||f.length!==c.length){if(f.length===0)return Fo(e.name),c;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let p;if(u){let _=0,b=[];u.forEach(M=>{let T=typeof M.data=="number"?[M.data]:M.data;if(T.length===0)return;let S=M.type===10?2:4,$,k;M.type===10?(k=T.length>4?16:T.length>2?8:T.length*S,$=T.length>4?16:S*T.length):(k=T.length<=2?T.length*S:16,$=16),_=Math.ceil(_/k)*k,b.push(_);let F=M.type===10?8:4;_+=T.length>4?Math.ceil(T.length/F)*$:T.length*S});let w=16;_=Math.ceil(_/w)*w;let y=new ArrayBuffer(_);u.forEach((M,T)=>{let S=b[T],$=typeof M.data=="number"?[M.data]:M.data;if(M.type===6)new Int32Array(y,S,$.length).set($);else if(M.type===12)new Uint32Array(y,S,$.length).set($);else if(M.type===10)new Uint16Array(y,S,$.length).set($);else if(M.type===1)new Float32Array(y,S,$.length).set($);else throw new Error(`Unsupported uniform type: ${ps(M.type)}`)});let x=this.gpuDataManager.create(_,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(x.buffer,0,y,0,_),this.gpuDataManager.release(x.id),p={offset:0,size:_,buffer:x.buffer}}let h=this.programManager.normalizeDispatchGroupSize(l),m=h[1]===1&&h[2]===1,v=wN(e,t,m),g=this.programManager.getArtifact(v);if(g||(g=this.programManager.build(e,h),this.programManager.setArtifact(v,g),rr("info",()=>`[artifact] key: ${v}, programName: ${e.name}`)),u&&g.uniformVariablesInfo){if(u.length!==g.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${g.uniformVariablesInfo.length}, got ${u.length} in program "${g.programInfo.name}".`);for(let _=0;_<u.length;_++){let b=u[_],w=b.type,y=typeof b.data=="number"?1:b.data.length,[x,M]=g.uniformVariablesInfo[_];if(w!==x||y!==M)throw new Error(`Uniform variable ${_} mismatch: expect type ${x} with size ${M}, got type ${w} with size ${y} in program "${g.programInfo.name}".`)}}if(rr("info",()=>`[ProgramManager] run "${e.name}" (key=${v}) with ${h[0]}x${h[1]}x${h[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let _={kernelId:this.currentKernelId,programName:g.programInfo.name,inputTensorViews:t,outputTensorViews:c};this.pendingKernels.push(_),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(_)}return this.programManager.run(g,a,f,h,p),Fo(e.name),c}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let i=oG.get(e);if(!i)throw new Error(`kernel not implemented: ${e}`);let o={kernelType:e,kernelName:n,kernelEntry:i[0],attributes:[i[1],r]};this.kernels.set(t,o)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let i=n.kernelType,o=n.kernelName,a=n.kernelEntry,s=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${i}] ${o}" is not allowed to be called recursively`);this.currentKernelId=e,s[0]&&(s[1]=s[0](s[1]),s[0]=void 0),rr("info",()=>`[WebGPU] Start to run kernel "[${i}] ${o}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),a(t,s[1]),0}catch(u){return r.push(Promise.resolve(`[WebGPU] Kernel "[${i}] ${o}" failed. ${u}`)),1}finally{l&&r.push(this.device.popErrorScope().then(u=>u?`GPU validation error for kernel "[${i}] ${o}": ${u.message}`:null));for(let u of this.temporaryData)this.gpuDataManager.release(u.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let i=this.sessionExternalDataMapping.get(e);i||(i=new Map,this.sessionExternalDataMapping.set(e,i));let o=i.get(t),a=this.gpuDataManager.registerExternalBuffer(r,n,o);return i.set(t,[a,r]),a}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await VM(this,e,t);return cS(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){var e;this.queryType="none",(((e=this.env.webgpu.profiling)==null?void 0:e.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){rr("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){rr("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){rr("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let i=this.getComputePassEncoder(),o=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),i.setPipeline(o.computePipeline),i.setBindGroup(0,o.bindGroup),i.dispatchWorkgroups(...o.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),uG={};af(uG,{init:()=>cG});var i_,MN,cG,Mie=qe(()=>{$t(),Ds(),zt(),One(),i_=class dG{constructor(t,r,n,i){this.module=t,this.dataType=r,this.data=n,this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Oe.size(t)!==Oe.size(this.dims))throw new Error("Invalid new shape");return new dG(this.module,this.dataType,this.data,t)}},MN=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,i=r/e.PTR_SIZE,o=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*i++,o));let a=Number(e.getValue(n*i++,o));this.outputCount=Number(e.getValue(n*i++,o)),this.customDataOffset=Number(e.getValue(n*i++,"*")),this.customDataSize=Number(e.getValue(n*i++,o));let s=[];for(let l=0;l<a;l++){let u=Number(e.getValue(n*i++,o)),d=Number(e.getValue(n*i++,"*")),c=Number(e.getValue(n*i++,o)),f=[];for(let p=0;p<c;p++)f.push(Number(e.getValue(n*i++,o)));s.push(new i_(e,u,d,f))}this.inputs=s}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){var a;let r=((a=t==null?void 0:t.inputs)==null?void 0:a.map(s=>typeof s=="number"?this.inputs[s]:s))??this.inputs,n=(t==null?void 0:t.outputs)??[],i=(s,l,u)=>new i_(this.module,l,this.output(s,u),u),o=(s,l)=>{let u=hu(s,l);if(!u)throw new Error(`Unsupported data type: ${s}`);let d=u>0?this.backend.gpuDataManager.create(u).id:0;return new i_(this.module,s,d,l)};return this.backend.run(e,r,n,i,o,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,i=n===4?"i32":"i64",o=this.module.stackAlloc((1+t.length)*n);this.module.setValue(o,t.length,i);for(let a=0;a<t.length;a++)this.module.setValue(o+n*(a+1),t[a],i);return this.module._JsepOutput(this.opKernelContext,e,o)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},cG=async(e,t,r,n)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let o=(xie(),xh(sG)).WebGpuBackend,a=new o;await a.initialize(r,n),i("webgpu",[a,s=>a.alloc(Number(s)),s=>a.free(s),(s,l,u,d=!1)=>{if(d)rr("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(s)}, dst=${Number(l)}, size=${Number(u)}`),a.memcpy(Number(s),Number(l));else{rr("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(s)}, gpuDataId=${Number(l)}, size=${Number(u)}`);let c=t.HEAPU8.subarray(Number(s>>>0),Number(s>>>0)+Number(u));a.upload(Number(l),c)}},async(s,l,u)=>{rr("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${s}, dataOffset=${l}, size=${u}`),await a.download(Number(s),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+u)>>>0))},(s,l,u)=>a.createKernel(s,Number(l),u,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),s=>a.releaseKernel(s),(s,l,u,d)=>{rr("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${u}, kernel=${s}, contextDataOffset=${l}`);let c=new MN(t,a,Number(l));return a.computeKernel(Number(s),c,d)},()=>a.captureBegin(),()=>a.captureEnd(),()=>a.replay()])}else{let o=new w5(r);i("webnn",[o,()=>o.reserveTensorId(),a=>o.releaseTensorId(a),async(a,s,l,u,d)=>o.ensureTensor(a,s,l,u,d),(a,s)=>{o.uploadTensor(a,s)},async(a,s)=>o.downloadTensor(a,s)])}}}),TN,wS,xS,Qs,PN,Zx,Ev,MS,TS,Jx,PS,ES,SS,fG=qe(()=>{Cne(),$ne(),$t(),Ju(),iS(),m5(),TN=(e,t)=>{Er()._OrtInit(e,t)!==0&&br("Can't initialize onnxruntime.")},wS=async e=>{TN(e.wasm.numThreads,wv(e.logLevel))},xS=async(e,t)=>{var r,n;(n=(r=Er()).asyncInit)==null||n.call(r);{let i=(Mie(),xh(uG)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let a=e.webgpu.powerPreference;if(a!==void 0&&a!=="low-power"&&a!=="high-performance")throw new Error(`Invalid powerPreference setting: "${a}"`);let s=e.webgpu.forceFallbackAdapter;if(s!==void 0&&typeof s!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${s}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:a,forceFallbackAdapter:s}),!o)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await i("webgpu",Er(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await i("webnn",Er(),e)}}},Qs=new Map,PN=e=>{let t=Er(),r=t.stackSave();try{let n=t.PTR_SIZE,i=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,i,i+n)!==0&&br("Can't get session input/output count.");let o=n===4?"i32":"i64";return[Number(t.getValue(i,o)),Number(t.getValue(i+n,o))]}finally{t.stackRestore(r)}},Zx=(e,t)=>{let r=Er(),n=r.stackSave(),i=0;try{let o=r.PTR_SIZE,a=r.stackAlloc(2*o);r._OrtGetInputOutputMetadata(e,t,a,a+o)!==0&&br("Can't get session input/output metadata.");let s=Number(r.getValue(a,"*"));i=Number(r.getValue(a+o,"*"));let l=r.HEAP32[i/4];if(l===0)return[s,0];let u=r.HEAPU32[i/4+1],d=[];for(let c=0;c<u;c++){let f=Number(r.getValue(i+8+c*o,"*"));d.push(f!==0?r.UTF8ToString(f):Number(r.getValue(i+8+(c+u)*o,"*")))}return[s,l,d]}finally{r.stackRestore(n),i!==0&&r._OrtFree(i)}},Ev=e=>{let t=Er(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},MS=async(e,t)=>{var c,f,p,h;let r,n,i=Er();Array.isArray(e)?[r,n]=e:e.buffer===i.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=Ev(e);let o=0,a=0,s=0,l=[],u=[],d=[];try{if([a,l]=await h5(t),(t==null?void 0:t.externalData)&&i.mountExternalData){let T=[];for(let S of t.externalData){let $=typeof S=="string"?S:S.path;T.push(lS(typeof S=="string"?S:S.data).then(k=>{i.mountExternalData($,k)}))}await Promise.all(T)}for(let T of(t==null?void 0:t.executionProviders)??[])if((typeof T=="string"?T:T.name)==="webnn"){if(i.shouldTransferToMLTensor=!1,typeof T!="string"){let S=T,$=S==null?void 0:S.context,k=S==null?void 0:S.gpuDevice,F=S==null?void 0:S.deviceType,j=S==null?void 0:S.powerPreference;$?i.currentContext=$:k?i.currentContext=await i.webnnCreateMLContext(k):i.currentContext=await i.webnnCreateMLContext({deviceType:F,powerPreference:j})}else i.currentContext=await i.webnnCreateMLContext();break}o=await i._OrtCreateSession(r,n,a),(c=i.webgpuOnCreateSession)==null||c.call(i,o),o===0&&br("Can't create a session."),(f=i.jsepOnCreateSession)==null||f.call(i),i.currentContext&&(i.webnnRegisterMLContext(o,i.currentContext),i.currentContext=void 0,i.shouldTransferToMLTensor=!0);let[m,v]=PN(o),g=!!(t!=null&&t.enableGraphCapture),_=[],b=[],w=[],y=[],x=[];for(let T=0;T<m;T++){let[S,$,k]=Zx(o,T);S===0&&br("Can't get an input name."),u.push(S);let F=i.UTF8ToString(S);_.push(F),w.push($===0?{name:F,isTensor:!1}:{name:F,isTensor:!0,type:ps($),shape:k})}for(let T=0;T<v;T++){let[S,$,k]=Zx(o,T+m);S===0&&br("Can't get an output name."),d.push(S);let F=i.UTF8ToString(S);b.push(F),y.push($===0?{name:F,isTensor:!1}:{name:F,isTensor:!0,type:ps($),shape:k});{if(g&&(t==null?void 0:t.preferredOutputLocation)===void 0){x.push("gpu-buffer");continue}let j=typeof(t==null?void 0:t.preferredOutputLocation)=="string"?t.preferredOutputLocation:((p=t==null?void 0:t.preferredOutputLocation)==null?void 0:p[F])??"cpu";if(j!=="cpu"&&j!=="cpu-pinned"&&j!=="gpu-buffer"&&j!=="ml-tensor")throw new Error(`Not supported preferred output location: ${j}.`);if(g&&j!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${j}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);x.push(j)}}let M=null;return x.some(T=>T==="gpu-buffer"||T==="ml-tensor")&&(s=i._OrtCreateBinding(o),s===0&&br("Can't create IO binding."),M={handle:s,outputPreferredLocations:x,outputPreferredLocationsEncoded:x.map(T=>UM(T))}),Qs.set(o,[o,u,d,M,g,!1]),[o,_,b,w,y]}catch(m){throw u.forEach(v=>i._OrtFree(v)),d.forEach(v=>i._OrtFree(v)),s!==0&&i._OrtReleaseBinding(s)!==0&&br("Can't release IO binding."),o!==0&&i._OrtReleaseSession(o)!==0&&br("Can't release session."),m}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a)!==0&&br("Can't release session options."),l.forEach(m=>i._free(m)),(h=i.unmountExternalData)==null||h.call(i)}},TS=e=>{var l,u,d;let t=Er(),r=Qs.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,i,o,a,s]=r;a&&(s&&t._OrtClearBoundOutputs(a.handle)!==0&&br("Can't clear bound outputs."),t._OrtReleaseBinding(a.handle)!==0&&br("Can't release IO binding.")),(l=t.jsepOnReleaseSession)==null||l.call(t,e),(u=t.webnnOnReleaseSession)==null||u.call(t,e),(d=t.webgpuOnReleaseSession)==null||d.call(t,e),i.forEach(c=>t._OrtFree(c)),o.forEach(c=>t._OrtFree(c)),t._OrtReleaseSession(n)!==0&&br("Can't release session."),Qs.delete(e)},Jx=async(e,t,r,n,i,o,a=!1)=>{if(!e){t.push(0);return}let s=Er(),l=s.PTR_SIZE,u=e[0],d=e[1],c=e[3],f=c,p,h;if(u==="string"&&(c==="gpu-buffer"||c==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(a&&c!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if(c==="gpu-buffer"){let g=e[2].gpuBuffer;h=hu(Cc(u),d);{let _=s.jsepRegisterBuffer;if(!_)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');p=_(n,o,g,h)}}else if(c==="ml-tensor"){let g=e[2].mlTensor;h=hu(Cc(u),d);let _=s.webnnRegisterMLTensor;if(!_)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');p=_(n,g,Cc(u),d)}else{let g=e[2];if(Array.isArray(g)){h=l*g.length,p=s._malloc(h),r.push(p);for(let _=0;_<g.length;_++){if(typeof g[_]!="string")throw new TypeError(`tensor data at index ${_} is not a string`);s.setValue(p+_*l,fa(g[_],r),"*")}}else{let _=s.webnnIsGraphInput;if(u!=="string"&&_){let b=s.UTF8ToString(i);if(_(n,b)){let w=Cc(u);h=hu(w,d),f="ml-tensor";let y=s.webnnCreateTemporaryTensor,x=s.webnnUploadTensor;if(!y||!x)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let M=await y(n,w,d);x(M,new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),p=M}else h=g.byteLength,p=s._malloc(h),r.push(p),s.HEAPU8.set(new Uint8Array(g.buffer,g.byteOffset,h),p)}else h=g.byteLength,p=s._malloc(h),r.push(p),s.HEAPU8.set(new Uint8Array(g.buffer,g.byteOffset,h),p)}}let m=s.stackSave(),v=s.stackAlloc(4*d.length);try{d.forEach((_,b)=>s.setValue(v+b*l,_,l===4?"i32":"i64"));let g=s._OrtCreateTensor(Cc(u),p,h,v,d.length,UM(f));g===0&&br(`Can't create tensor for input/output. session=${n}, index=${o}.`),t.push(g)}finally{s.stackRestore(m)}},PS=async(e,t,r,n,i,o)=>{var k,F,j,U;let a=Er(),s=a.PTR_SIZE,l=Qs.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let u=l[0],d=l[1],c=l[2],f=l[3],p=l[4],h=l[5],m=t.length,v=n.length,g=0,_=[],b=[],w=[],y=[],x=a.stackSave(),M=a.stackAlloc(m*s),T=a.stackAlloc(m*s),S=a.stackAlloc(v*s),$=a.stackAlloc(v*s);try{[g,_]=p5(o);for(let H=0;H<m;H++)await Jx(r[H],b,y,e,d[t[H]],t[H],p);for(let H=0;H<v;H++)await Jx(i[H],w,y,e,c[n[H]],m+n[H],p);for(let H=0;H<m;H++)a.setValue(M+H*s,b[H],"*"),a.setValue(T+H*s,d[t[H]],"*");for(let H=0;H<v;H++)a.setValue(S+H*s,w[H],"*"),a.setValue($+H*s,c[n[H]],"*");if(f&&!h){let{handle:H,outputPreferredLocations:W,outputPreferredLocationsEncoded:Y}=f;if(d.length!==m)throw new Error(`input count from feeds (${m}) is expected to be always equal to model's input count (${d.length}).`);for(let te=0;te<m;te++){let V=t[te];await a._OrtBindInput(H,d[V],b[te])!==0&&br(`Can't bind input[${te}] for session=${e}.`)}for(let te=0;te<v;te++){let V=n[te];(k=i[te])!=null&&k[3]?a._OrtBindOutput(H,c[V],w[te],0)!==0&&br(`Can't bind pre-allocated output[${te}] for session=${e}.`):a._OrtBindOutput(H,c[V],0,Y[V])!==0&&br(`Can't bind output[${te}] to ${W[te]} for session=${e}.`)}Qs.set(e,[u,d,c,f,p,!0])}(F=a.jsepOnRunStart)==null||F.call(a,u),(j=a.webnnOnRunStart)==null||j.call(a,u);let z;f?z=await a._OrtRunWithBinding(u,f.handle,v,S,g):z=await a._OrtRun(u,T,M,m,$,v,S,g),z!==0&&br("failed to call OrtRun().");let G=[];for(let H=0;H<v;H++){let W=Number(a.getValue(S+H*s,"*"));if(W===w[H]){G.push(i[H]);continue}let Y=a.stackSave(),te=a.stackAlloc(4*s),V=!1,I,K=0;try{a._OrtGetTensorData(W,te,te+s,te+2*s,te+3*s)!==0&&br(`Can't access output tensor data on index ${H}.`);let ae=s===4?"i32":"i64",pe=Number(a.getValue(te,ae));K=a.getValue(te+s,"*");let de=a.getValue(te+s*2,"*"),be=Number(a.getValue(te+s*3,ae)),Ne=[];for(let re=0;re<be;re++)Ne.push(Number(a.getValue(de+re*s,ae)));a._OrtFree(de)!==0&&br("Can't free memory for tensor dims.");let Te=Ne.reduce((re,ne)=>re*ne,1);I=ps(pe);let ge=f==null?void 0:f.outputPreferredLocations[n[H]];if(I==="string"){if(ge==="gpu-buffer"||ge==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let re=[];for(let ne=0;ne<Te;ne++){let Z=a.getValue(K+ne*s,"*"),ve=a.getValue(K+(ne+1)*s,"*"),Ae=ne===Te-1?void 0:ve-Z;re.push(a.UTF8ToString(Z,Ae))}G.push([I,Ne,re,"cpu"])}else if(ge==="gpu-buffer"&&Te>0){let re=a.jsepGetBuffer;if(!re)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let ne=re(K),Z=hu(pe,Te);if(Z===void 0||!aS(I))throw new Error(`Unsupported data type: ${I}`);V=!0,G.push([I,Ne,{gpuBuffer:ne,download:a.jsepCreateDownloader(ne,Z,I),dispose:()=>{a._OrtReleaseTensor(W)!==0&&br("Can't release tensor.")}},"gpu-buffer"])}else if(ge==="ml-tensor"&&Te>0){let re=a.webnnEnsureTensor,ne=a.webnnIsInt64Supported;if(!re||!ne)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(hu(pe,Te)===void 0||!sS(I))throw new Error(`Unsupported data type: ${I}`);if(I==="int64"&&!ne(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let Z=await re(e,K,pe,Ne,!1);V=!0,G.push([I,Ne,{mlTensor:Z,download:a.webnnCreateMLTensorDownloader(K,I),dispose:()=>{a.webnnReleaseTensorId(K),a._OrtReleaseTensor(W)}},"ml-tensor"])}else{let re=oS(I),ne=new re(Te);new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength).set(a.HEAPU8.subarray(K,K+ne.byteLength)),G.push([I,Ne,ne,"cpu"])}}finally{a.stackRestore(Y),I==="string"&&K&&a._free(K),V||a._OrtReleaseTensor(W),(U=a.webnnOnRunEnd)==null||U.call(a,u)}}return f&&!p&&(a._OrtClearBoundOutputs(f.handle)!==0&&br("Can't clear bound outputs."),Qs.set(e,[u,d,c,f,p,!1])),G}finally{a.stackRestore(x),b.forEach(z=>a._OrtReleaseTensor(z)),w.forEach(z=>a._OrtReleaseTensor(z)),y.forEach(z=>a._free(z)),g!==0&&a._OrtReleaseRunOptions(g),_.forEach(z=>a._free(z))}},ES=e=>{let t=Er(),r=Qs.get(e);if(!r)throw new Error("invalid session id");let n=r[0],i=t._OrtEndProfiling(n);i===0&&br("Can't get an profile file name."),t._OrtFree(i)},SS=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),Ys,Bi,xc,fp,pp,o_,e1,a_,ru,nu,EN,pG,hG,mG,gG,_G,vG,yG,bG=qe(()=>{Ma(),fG(),Ju(),rS(),Ys=()=>!!Or.wasm.proxy&&typeof document<"u",xc=!1,fp=!1,pp=!1,a_=new Map,ru=(e,t)=>{let r=a_.get(e);r?r.push(t):a_.set(e,[t])},nu=()=>{if(xc||!fp||pp||!Bi)throw new Error("worker not ready")},EN=e=>{switch(e.data.type){case"init-wasm":xc=!1,e.data.err?(pp=!0,e1[1](e.data.err)):(fp=!0,e1[0]()),o_&&(URL.revokeObjectURL(o_),o_=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=a_.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},pG=async()=>{if(!fp){if(xc)throw new Error("multiple calls to 'initWasm()' detected.");if(pp)throw new Error("previous call to 'initWasm()' failed.");if(xc=!0,Ys())return new Promise((e,t)=>{Bi==null||Bi.terminate(),d5().then(([r,n])=>{try{Bi=n,Bi.onerror=o=>t(o),Bi.onmessage=EN,e1=[e,t];let i={type:"init-wasm",in:Or};!i.in.wasm.wasmPaths&&(r||BM)&&(i.in.wasm.wasmPaths={wasm:new URL("/EcoGuard/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),Bi.postMessage(i),o_=r}catch(i){t(i)}},t)});try{await nS(Or.wasm),await wS(Or),fp=!0}catch(e){throw pp=!0,e}finally{xc=!1}}},hG=async e=>{if(Ys())return nu(),new Promise((t,r)=>{ru("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:Or}};Bi.postMessage(n)});await xS(Or,e)},mG=async e=>Ys()?(nu(),new Promise((t,r)=>{ru("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};Bi.postMessage(n,[e.buffer])})):Ev(e),gG=async(e,t)=>{if(Ys()){if(t!=null&&t.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return nu(),new Promise((r,n)=>{ru("create",[r,n]);let i={type:"create",in:{model:e,options:{...t}}},o=[];e instanceof Uint8Array&&o.push(e.buffer),Bi.postMessage(i,o)})}else return MS(e,t)},_G=async e=>{if(Ys())return nu(),new Promise((t,r)=>{ru("release",[t,r]);let n={type:"release",in:e};Bi.postMessage(n)});TS(e)},vG=async(e,t,r,n,i,o)=>{if(Ys()){if(r.some(a=>a[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(a=>a))throw new Error("pre-allocated output tensor is not supported for proxy.");return nu(),new Promise((a,s)=>{ru("run",[a,s]);let l=r,u={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:o}};Bi.postMessage(u,SS(l))})}else return PS(e,t,r,n,i,o)},yG=async e=>{if(Ys())return nu(),new Promise((t,r)=>{ru("end-profiling",[t,r]);let n={type:"end-profiling",in:e};Bi.postMessage(n)});ES(e)}}),t1,SN,wG,Tie=qe(()=>{Ma(),bG(),$t(),tS(),m5(),t1=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},SN=e=>{switch(e[3]){case"cpu":return new pa(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!aS(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=e[2];return pa.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:i})}case"ml-tensor":{let t=e[0];if(!sS(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:i}=e[2];return pa.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${e[3]}`)}},wG=class{async fetchModelAndCopyToWasmMemory(e){return mG(await lS(e))}async loadModel(e,t){xa();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await gG(r,t),Fo()}async dispose(){return _G(this.sessionId)}async run(e,t,r){xa();let n=[],i=[];Object.entries(e).forEach(c=>{let f=c[0],p=c[1],h=this.inputNames.indexOf(f);if(h===-1)throw new Error(`invalid input '${f}'`);n.push(p),i.push(h)});let o=[],a=[];Object.entries(t).forEach(c=>{let f=c[0],p=c[1],h=this.outputNames.indexOf(f);if(h===-1)throw new Error(`invalid output '${f}'`);o.push(p),a.push(h)});let s=n.map((c,f)=>t1(c,()=>`input "${this.inputNames[i[f]]}"`)),l=o.map((c,f)=>c?t1(c,()=>`output "${this.outputNames[a[f]]}"`):null),u=await vG(this.sessionId,i,s,a,l,r),d={};for(let c=0;c<u.length;c++)d[this.outputNames[a[c]]]=o[c]??SN(u[c]);return Fo(),d}startProfiling(){}endProfiling(){yG(this.sessionId)}}}),xG={};af(xG,{OnnxruntimeWebAssemblyBackend:()=>rT,initializeFlags:()=>tT,wasmBackend:()=>MG});var tT,rT,MG,Pie=qe(()=>{Ma(),bG(),Tie(),tT=()=>{(typeof Or.wasm.initTimeout!="number"||Or.wasm.initTimeout<0)&&(Or.wasm.initTimeout=0);let e=Or.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),Or.wasm.simd=!1),typeof Or.wasm.proxy!="boolean"&&(Or.wasm.proxy=!1),typeof Or.wasm.trace!="boolean"&&(Or.wasm.trace=!1),typeof Or.wasm.numThreads!="number"||!Number.isInteger(Or.wasm.numThreads)||Or.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)Or.wasm.numThreads=1;else{let t=typeof navigator>"u"?dne("node:os").cpus().length:navigator.hardwareConcurrency;Or.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},rT=class{async init(e){tT(),await pG(),await hG(e)}async createInferenceSessionHandler(e,t){let r=new wG;return await r.loadModel(e,t),r}},MG=new rT});Ma();Ma();Ma();var Eie="1.22.0-dev.20250409-89f8206ba4",Sie=o5;{let e=(Pie(),xh(xG)).wasmBackend;yu("webgpu",e,5),yu("webnn",e,5),yu("cpu",e,10),yu("wasm",e,10)}Object.defineProperty(Or.versions,"web",{value:Eie,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cie=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return eS},get TRACE(){return Mh},get TRACE_FUNC_BEGIN(){return xa},get TRACE_FUNC_END(){return Fo},get Tensor(){return pa},default:Sie,get env(){return Or},get registerBackend(){return yu}},Symbol.toStringTag,{value:"Module"}));var as={},$ie={"onnxruntime-common":e=>{e.exports=sne},"onnxruntime-web":e=>{e.exports=Cie},"?2ce3":()=>{},"?7992":()=>{},"?5af5":()=>{},"?2b25":()=>{},"?db59":()=>{},"?383f":()=>{},"?fa4b":()=>{},"./node_modules/@huggingface/jinja/dist/index.js":(e,t,r)=>{r.r(t),r.d(t,{Environment:()=>Ue,Interpreter:()=>lt,Template:()=>Xt,parse:()=>de,tokenize:()=>d});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),i=class{constructor(D,se){this.value=D,this.type=se}};function o(D){return/\w/.test(D)}function a(D){return/[0-9]/.test(D)}var s=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["~",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],l=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function u(D,se={}){return D.endsWith(`
`)&&(D=D.slice(0,-1)),se.lstrip_blocks&&(D=D.replace(/^[ \t]*({[#%-])/gm,"$1")),se.trim_blocks&&(D=D.replace(/([#%-]})\n/g,"$1")),D.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}function d(D,se={}){var dt,Ct;const Q=[],oe=u(D,se);let ce=0,Se=0;const Re=Mt=>{let jt="";for(;Mt(oe[ce]);){if(oe[ce]==="\\"){if(++ce,ce>=oe.length)throw new SyntaxError("Unexpected end of input");const ft=oe[ce++],ir=l.get(ft);if(ir===void 0)throw new SyntaxError(`Unexpected escaped character: ${ft}`);jt+=ir;continue}if(jt+=oe[ce++],ce>=oe.length)throw new SyntaxError("Unexpected end of input")}return jt};e:for(;ce<oe.length;){const Mt=(dt=Q.at(-1))==null?void 0:dt.type;if(Mt===void 0||Mt===n.CloseStatement||Mt===n.CloseExpression||Mt===n.Comment){let ft="";for(;ce<oe.length&&!(oe[ce]==="{"&&(oe[ce+1]==="%"||oe[ce+1]==="{"||oe[ce+1]==="#"));)ft+=oe[ce++];if(ft.length>0){Q.push(new i(ft,n.Text));continue}}if(oe[ce]==="{"&&oe[ce+1]==="#"){ce+=2;let ft="";for(;oe[ce]!=="#"||oe[ce+1]!=="}";){if(ce+2>=oe.length)throw new SyntaxError("Missing end of comment tag");ft+=oe[ce++]}Q.push(new i(ft,n.Comment)),ce+=2;continue}Re(ft=>/\s/.test(ft));const jt=oe[ce];if(jt==="-"||jt==="+"){const ft=(Ct=Q.at(-1))==null?void 0:Ct.type;if(ft===n.Text||ft===void 0)throw new SyntaxError(`Unexpected character: ${jt}`);switch(ft){case n.Identifier:case n.NumericLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++ce;const ir=Re(a);Q.push(new i(`${jt}${ir}`,ir.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[ft,ir]of s){if(ft==="}}"&&Se>0)continue;if(oe.slice(ce,ce+ft.length)===ft){Q.push(new i(ft,ir)),ir===n.OpenExpression?Se=0:ir===n.OpenCurlyBracket?++Se:ir===n.CloseCurlyBracket&&--Se,ce+=ft.length;continue e}}if(jt==="'"||jt==='"'){++ce;const ft=Re(ir=>ir!==jt);Q.push(new i(ft,n.StringLiteral)),++ce;continue}if(a(jt)){let ft=Re(a);if(oe[ce]==="."&&a(oe[ce+1])){++ce;const ir=Re(a);ft=`${ft}.${ir}`}Q.push(new i(ft,n.NumericLiteral));continue}if(o(jt)){const ft=Re(o);Q.push(new i(ft,n.Identifier));continue}throw new SyntaxError(`Unexpected character: ${jt}`)}return Q}var c=class{constructor(){le(this,"type","Statement")}},f=class extends c{constructor(se){super();le(this,"type","Program");this.body=se}},p=class extends c{constructor(se,Q,oe){super();le(this,"type","If");this.test=se,this.body=Q,this.alternate=oe}},h=class extends c{constructor(se,Q,oe,ce){super();le(this,"type","For");this.loopvar=se,this.iterable=Q,this.body=oe,this.defaultBlock=ce}},m=class extends c{constructor(){super(...arguments);le(this,"type","Break")}},v=class extends c{constructor(){super(...arguments);le(this,"type","Continue")}},g=class extends c{constructor(se,Q,oe){super();le(this,"type","Set");this.assignee=se,this.value=Q,this.body=oe}},_=class extends c{constructor(se,Q,oe){super();le(this,"type","Macro");this.name=se,this.args=Q,this.body=oe}},b=class extends c{constructor(se){super();le(this,"type","Comment");this.value=se}},w=class extends c{constructor(){super(...arguments);le(this,"type","Expression")}},y=class extends w{constructor(se,Q,oe){super();le(this,"type","MemberExpression");this.object=se,this.property=Q,this.computed=oe}},x=class extends w{constructor(se,Q){super();le(this,"type","CallExpression");this.callee=se,this.args=Q}},M=class extends w{constructor(se){super();le(this,"type","Identifier");this.value=se}},T=class extends w{constructor(se){super();le(this,"type","Literal");this.value=se}},S=class extends T{constructor(){super(...arguments);le(this,"type","IntegerLiteral")}},$=class extends T{constructor(){super(...arguments);le(this,"type","FloatLiteral")}},k=class extends T{constructor(){super(...arguments);le(this,"type","StringLiteral")}},F=class extends T{constructor(){super(...arguments);le(this,"type","ArrayLiteral")}},j=class extends T{constructor(){super(...arguments);le(this,"type","TupleLiteral")}},U=class extends T{constructor(){super(...arguments);le(this,"type","ObjectLiteral")}},z=class extends w{constructor(se,Q,oe){super();le(this,"type","BinaryExpression");this.operator=se,this.left=Q,this.right=oe}},G=class extends w{constructor(se,Q){super();le(this,"type","FilterExpression");this.operand=se,this.filter=Q}},H=class extends c{constructor(se,Q){super();le(this,"type","FilterStatement");this.filter=se,this.body=Q}},W=class extends w{constructor(se,Q){super();le(this,"type","SelectExpression");this.lhs=se,this.test=Q}},Y=class extends w{constructor(se,Q,oe){super();le(this,"type","TestExpression");this.operand=se,this.negate=Q,this.test=oe}},te=class extends w{constructor(se,Q){super();le(this,"type","UnaryExpression");this.operator=se,this.argument=Q}},V=class extends w{constructor(se=void 0,Q=void 0,oe=void 0){super();le(this,"type","SliceExpression");this.start=se,this.stop=Q,this.step=oe}},I=class extends w{constructor(se,Q){super();le(this,"type","KeywordArgumentExpression");this.key=se,this.value=Q}},K=class extends w{constructor(se){super();le(this,"type","SpreadExpression");this.argument=se}},ae=class extends c{constructor(se,Q,oe){super();le(this,"type","CallStatement");this.call=se,this.callerArgs=Q,this.body=oe}},pe=class extends w{constructor(se,Q,oe){super();le(this,"type","Ternary");this.condition=se,this.trueExpr=Q,this.falseExpr=oe}};function de(D){const se=new f([]);let Q=0;function oe(Ge,He){const ut=D[Q++];if(!ut||ut.type!==Ge)throw new Error(`Parser Error: ${He}. ${ut.type} !== ${Ge}.`);return ut}function ce(Ge){if(!Ct(Ge))throw new SyntaxError(`Expected ${Ge}`);++Q}function Se(){switch(D[Q].type){case n.Comment:return new b(D[Q++].value);case n.Text:return Mt();case n.OpenStatement:return jt();case n.OpenExpression:return ft();default:throw new SyntaxError(`Unexpected token type: ${D[Q].type}`)}}function Re(...Ge){return Q+Ge.length<=D.length&&Ge.every((He,ut)=>He===D[Q+ut].type)}function dt(...Ge){var He,ut,Mr;return((He=D[Q])==null?void 0:He.type)===n.OpenStatement&&((ut=D[Q+1])==null?void 0:ut.type)===n.Identifier&&Ge.includes((Mr=D[Q+1])==null?void 0:Mr.value)}function Ct(...Ge){return Q+Ge.length<=D.length&&Ge.every((He,ut)=>D[Q+ut].type==="Identifier"&&He===D[Q+ut].value)}function Mt(){return new k(oe(n.Text,"Expected text token").value)}function jt(){if(oe(n.OpenStatement,"Expected opening statement token"),D[Q].type!==n.Identifier)throw new SyntaxError(`Unknown statement, got ${D[Q].type}`);const Ge=D[Q].value;let He;switch(Ge){case"set":++Q,He=ir();break;case"if":++Q,He=lr(),oe(n.OpenStatement,"Expected {% token"),ce("endif"),oe(n.CloseStatement,"Expected %} token");break;case"macro":++Q,He=si(),oe(n.OpenStatement,"Expected {% token"),ce("endmacro"),oe(n.CloseStatement,"Expected %} token");break;case"for":++Q,He=zr(),oe(n.OpenStatement,"Expected {% token"),ce("endfor"),oe(n.CloseStatement,"Expected %} token");break;case"call":{++Q;let ut=null;Re(n.OpenParen)&&(ut=Ri());const Mr=di();if(Mr.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const ts=Ri();oe(n.CloseStatement,"Expected closing statement token");const Go=[];for(;!dt("endcall");)Go.push(Se());oe(n.OpenStatement,"Expected '{%'"),ce("endcall"),oe(n.CloseStatement,"Expected closing statement token");const rs=new x(Mr,ts);He=new ae(rs,ut,Go);break}case"break":++Q,oe(n.CloseStatement,"Expected closing statement token"),He=new m;break;case"continue":++Q,oe(n.CloseStatement,"Expected closing statement token"),He=new v;break;case"filter":{++Q;let ut=di();ut instanceof M&&Re(n.OpenParen)&&(ut=ci(ut)),oe(n.CloseStatement,"Expected closing statement token");const Mr=[];for(;!dt("endfilter");)Mr.push(Se());oe(n.OpenStatement,"Expected '{%'"),ce("endfilter"),oe(n.CloseStatement,"Expected '%}'"),He=new H(ut,Mr);break}default:throw new SyntaxError(`Unknown statement type: ${Ge}`)}return He}function ft(){oe(n.OpenExpression,"Expected opening expression token");const Ge=On();return oe(n.CloseExpression,"Expected closing expression token"),Ge}function ir(){const Ge=Ti();let He=null;const ut=[];if(Re(n.Equals))++Q,He=Ti();else{for(oe(n.CloseStatement,"Expected %} token");!dt("endset");)ut.push(Se());oe(n.OpenStatement,"Expected {% token"),ce("endset")}return oe(n.CloseStatement,"Expected closing statement token"),new g(Ge,He,ut)}function lr(){const Ge=On();oe(n.CloseStatement,"Expected closing statement token");const He=[],ut=[];for(;!dt("elif","else","endif");)He.push(Se());if(dt("elif")){++Q,++Q;const Mr=lr();ut.push(Mr)}else if(dt("else"))for(++Q,++Q,oe(n.CloseStatement,"Expected closing statement token");!dt("endif");)ut.push(Se());return new p(Ge,He,ut)}function si(){const Ge=di();if(Ge.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const He=Ri();oe(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!dt("endmacro");)ut.push(Se());return new _(Ge,He,ut)}function Ti(Ge=!1){const He=Ge?di:On,ut=[He()],Mr=Re(n.Comma);for(;Mr&&(++Q,ut.push(He()),!!Re(n.Comma)););return Mr?new j(ut):ut[0]}function zr(){const Ge=Ti(!0);if(!(Ge instanceof M||Ge instanceof j))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Ge.type} instead`);if(!Ct("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++Q;const He=On();oe(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!dt("endfor","else");)ut.push(Se());const Mr=[];if(dt("else"))for(++Q,++Q,oe(n.CloseStatement,"Expected closing statement token");!dt("endfor");)Mr.push(Se());return new h(Ge,He,ut,Mr)}function On(){return kn()}function kn(){const Ge=li();if(Ct("if")){++Q;const He=li();if(Ct("else")){++Q;const ut=kn();return new pe(He,Ge,ut)}else return new W(Ge,He)}return Ge}function li(){let Ge=bo();for(;Ct("or");){const He=D[Q];++Q;const ut=bo();Ge=new z(He,Ge,ut)}return Ge}function bo(){let Ge=In();for(;Ct("and");){const He=D[Q];++Q;const ut=In();Ge=new z(He,Ge,ut)}return Ge}function In(){let Ge;for(;Ct("not");){const He=D[Q];++Q;const ut=In();Ge=new te(He,ut)}return Ge??Ea()}function Ea(){let Ge=Sa();for(;;){let He;if(Ct("not","in"))He=new i("not in",n.Identifier),Q+=2;else if(Ct("in"))He=D[Q++];else if(Re(n.ComparisonBinaryOperator))He=D[Q++];else break;const ut=Sa();Ge=new z(He,Ge,ut)}return Ge}function Sa(){let Ge=gn();for(;Re(n.AdditiveBinaryOperator);){const He=D[Q];++Q;const ut=gn();Ge=new z(He,Ge,ut)}return Ge}function ui(){const Ge=dn(di());return Re(n.OpenParen)?ci(Ge):Ge}function ci(Ge){let He=new x(Ge,Ri());return He=dn(He),Re(n.OpenParen)&&(He=ci(He)),He}function Ri(){oe(n.OpenParen,"Expected opening parenthesis for arguments list");const Ge=Hn();return oe(n.CloseParen,"Expected closing parenthesis for arguments list"),Ge}function Hn(){const Ge=[];for(;!Re(n.CloseParen);){let He;if(D[Q].type===n.MultiplicativeBinaryOperator&&D[Q].value==="*"){++Q;const ut=On();He=new K(ut)}else if(He=On(),Re(n.Equals)){if(++Q,!(He instanceof M))throw new SyntaxError("Expected identifier for keyword argument");const ut=On();He=new I(He,ut)}Ge.push(He),Re(n.Comma)&&++Q}return Ge}function Vo(){const Ge=[];let He=!1;for(;!Re(n.CloseSquareBracket);)Re(n.Colon)?(Ge.push(void 0),++Q,He=!0):(Ge.push(On()),Re(n.Colon)&&(++Q,He=!0));if(Ge.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(He){if(Ge.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new V(...Ge)}return Ge[0]}function dn(Ge){for(;Re(n.Dot)||Re(n.OpenSquareBracket);){const He=D[Q];++Q;let ut;const Mr=He.type===n.OpenSquareBracket;if(Mr)ut=Vo(),oe(n.CloseSquareBracket,"Expected closing square bracket");else if(ut=di(),ut.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Ge=new y(Ge,ut,Mr)}return Ge}function gn(){let Ge=Pi();for(;Re(n.MultiplicativeBinaryOperator);){const He=D[Q++],ut=Pi();Ge=new z(He,Ge,ut)}return Ge}function Pi(){let Ge=es();for(;Ct("is");){++Q;const He=Ct("not");He&&++Q;const ut=di();if(!(ut instanceof M))throw new SyntaxError("Expected identifier for the test");Ge=new Y(Ge,He,ut)}return Ge}function es(){let Ge=ui();for(;Re(n.Pipe);){++Q;let He=di();if(!(He instanceof M))throw new SyntaxError("Expected identifier for the filter");Re(n.OpenParen)&&(He=ci(He)),Ge=new G(Ge,He)}return Ge}function di(){const Ge=D[Q++];switch(Ge.type){case n.NumericLiteral:{const He=Ge.value;return He.includes(".")?new $(Number(He)):new S(Number(He))}case n.StringLiteral:{let He=Ge.value;for(;Re(n.StringLiteral);)He+=D[Q++].value;return new k(He)}case n.Identifier:return new M(Ge.value);case n.OpenParen:{const He=Ti();return oe(n.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),He}case n.OpenSquareBracket:{const He=[];for(;!Re(n.CloseSquareBracket);)He.push(On()),Re(n.Comma)&&++Q;return++Q,new F(He)}case n.OpenCurlyBracket:{const He=new Map;for(;!Re(n.CloseCurlyBracket);){const ut=On();oe(n.Colon,"Expected colon between key and value in object literal");const Mr=On();He.set(ut,Mr),Re(n.Comma)&&++Q}return++Q,new U(He)}default:throw new SyntaxError(`Unexpected token: ${Ge.type}`)}}for(;Q<D.length;)se.body.push(Se());return se}function be(D,se,Q=1){se===void 0&&(se=D,D=0);const oe=[];for(let ce=D;ce<se;ce+=Q)oe.push(ce);return oe}function Ne(D,se,Q,oe=1){const ce=Math.sign(oe);ce>=0?(se=(se??(se=0))<0?Math.max(D.length+se,0):Math.min(se,D.length),Q=(Q??(Q=D.length))<0?Math.max(D.length+Q,0):Math.min(Q,D.length)):(se=(se??(se=D.length-1))<0?Math.max(D.length+se,-1):Math.min(se,D.length-1),Q=(Q??(Q=-1))<-1?Math.max(D.length+Q,-1):Math.min(Q,D.length-1));const Se=[];for(let Re=se;ce*Re<ce*Q;Re+=oe)Se.push(D[Re]);return Se}function Te(D){return D.replace(/\b\w/g,se=>se.toUpperCase())}function ge(D){return re(new Date,D)}function re(D,se){const Q=new Intl.DateTimeFormat(void 0,{month:"long"}),oe=new Intl.DateTimeFormat(void 0,{month:"short"}),ce=Se=>Se<10?"0"+Se:Se.toString();return se.replace(/%[YmdbBHM%]/g,Se=>{switch(Se){case"%Y":return D.getFullYear().toString();case"%m":return ce(D.getMonth()+1);case"%d":return ce(D.getDate());case"%b":return oe.format(D);case"%B":return Q.format(D);case"%H":return ce(D.getHours());case"%M":return ce(D.getMinutes());case"%%":return"%";default:return Se}})}function ne(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Z(D,se,Q,oe){if(oe===0)return D;let ce=oe==null||oe<0?1/0:oe;const Se=se.length===0?new RegExp("(?=)","gu"):new RegExp(ne(se),"gu");return D.replaceAll(Se,Re=>ce>0?(--ce,Q):Re)}var ve=class extends Error{},Ae=class extends Error{},Ee=class{constructor(D=void 0){le(this,"type","RuntimeValue");le(this,"value");le(this,"builtins",new Map);this.value=D}__bool__(){return new je(!!this.value)}toString(){return String(this.value)}},we=class extends Ee{constructor(){super(...arguments);le(this,"type","IntegerValue")}},$e=class extends Ee{constructor(){super(...arguments);le(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},Me=class extends Ee{constructor(){super(...arguments);le(this,"type","StringValue");le(this,"builtins",new Map([["upper",new Ye(()=>new Me(this.value.toUpperCase()))],["lower",new Ye(()=>new Me(this.value.toLowerCase()))],["strip",new Ye(()=>new Me(this.value.trim()))],["title",new Ye(()=>new Me(Te(this.value)))],["capitalize",new Ye(()=>new Me(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new we(this.value.length)],["rstrip",new Ye(()=>new Me(this.value.trimEnd()))],["lstrip",new Ye(()=>new Me(this.value.trimStart()))],["startswith",new Ye(se=>{if(se.length===0)throw new Error("startswith() requires at least one argument");const Q=se[0];if(Q instanceof Me)return new je(this.value.startsWith(Q.value));if(Q instanceof Ce){for(const oe of Q.value){if(!(oe instanceof Me))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(oe.value))return new je(!0)}return new je(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new Ye(se=>{if(se.length===0)throw new Error("endswith() requires at least one argument");const Q=se[0];if(Q instanceof Me)return new je(this.value.endsWith(Q.value));if(Q instanceof Ce){for(const oe of Q.value){if(!(oe instanceof Me))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(oe.value))return new je(!0)}return new je(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new Ye(se=>{const Q=se[0]??new rt;if(!(Q instanceof Me||Q instanceof rt))throw new Error("sep argument must be a string or null");const oe=se[1]??new we(-1);if(!(oe instanceof we))throw new Error("maxsplit argument must be a number");let ce=[];if(Q instanceof rt){const Se=this.value.trimStart();for(const{0:Re,index:dt}of Se.matchAll(/\S+/g)){if(oe.value!==-1&&ce.length>=oe.value&&dt!==void 0){ce.push(Re+Se.slice(dt+Re.length));break}ce.push(Re)}}else{if(Q.value==="")throw new Error("empty separator");ce=this.value.split(Q.value),oe.value!==-1&&ce.length>oe.value&&ce.push(ce.splice(oe.value).join(Q.value))}return new Ce(ce.map(Se=>new Me(Se)))})],["replace",new Ye(se=>{if(se.length<2)throw new Error("replace() requires at least two arguments");const Q=se[0],oe=se[1];if(!(Q instanceof Me&&oe instanceof Me))throw new Error("replace() arguments must be strings");let ce;if(se.length>2?se[2].type==="KeywordArgumentsValue"?ce=se[2].value.get("count")??new rt:ce=se[2]:ce=new rt,!(ce instanceof we||ce instanceof rt))throw new Error("replace() count argument must be a number or null");return new Me(Z(this.value,Q.value,oe.value,ce.value))})]]))}},je=class extends Ee{constructor(){super(...arguments);le(this,"type","BooleanValue")}},ze=class extends Ee{constructor(){super(...arguments);le(this,"type","ObjectValue");le(this,"builtins",new Map([["get",new Ye(([se,Q])=>{if(!(se instanceof Me))throw new Error(`Object key must be a string: got ${se.type}`);return this.value.get(se.value)??Q??new rt})],["items",new Ye(()=>this.items())],["keys",new Ye(()=>this.keys())],["values",new Ye(()=>this.values())]]))}__bool__(){return new je(this.value.size>0)}items(){return new Ce(Array.from(this.value.entries()).map(([se,Q])=>new Ce([new Me(se),Q])))}keys(){return new Ce(Array.from(this.value.keys()).map(se=>new Me(se)))}values(){return new Ce(Array.from(this.value.values()))}},Xe=class extends ze{constructor(){super(...arguments);le(this,"type","KeywordArgumentsValue")}},Ce=class extends Ee{constructor(){super(...arguments);le(this,"type","ArrayValue");le(this,"builtins",new Map([["length",new we(this.value.length)]]))}__bool__(){return new je(this.value.length>0)}},st=class extends Ce{constructor(){super(...arguments);le(this,"type","TupleValue")}},Ye=class extends Ee{constructor(){super(...arguments);le(this,"type","FunctionValue")}},rt=class extends Ee{constructor(){super(...arguments);le(this,"type","NullValue")}},Je=class extends Ee{constructor(){super(...arguments);le(this,"type","UndefinedValue")}},Ue=class{constructor(D){le(this,"variables",new Map([["namespace",new Ye(D=>{if(D.length===0)return new ze(new Map);if(D.length!==1||!(D[0]instanceof ze))throw new Error("`namespace` expects either zero arguments or a single object argument");return D[0]})]]));le(this,"tests",new Map([["boolean",D=>D.type==="BooleanValue"],["callable",D=>D instanceof Ye],["odd",D=>{if(!(D instanceof we))throw new Error(`cannot odd on ${D.type}`);return D.value%2!==0}],["even",D=>{if(!(D instanceof we))throw new Error(`cannot even on ${D.type}`);return D.value%2===0}],["false",D=>D.type==="BooleanValue"&&!D.value],["true",D=>D.type==="BooleanValue"&&D.value],["none",D=>D.type==="NullValue"],["string",D=>D.type==="StringValue"],["number",D=>D instanceof we||D instanceof $e],["integer",D=>D instanceof we],["iterable",D=>D.type==="ArrayValue"||D.type==="StringValue"],["mapping",D=>D.type==="ObjectValue"],["lower",D=>{const se=D.value;return D.type==="StringValue"&&se===se.toLowerCase()}],["upper",D=>{const se=D.value;return D.type==="StringValue"&&se===se.toUpperCase()}],["none",D=>D.type==="NullValue"],["defined",D=>D.type!=="UndefinedValue"],["undefined",D=>D.type==="UndefinedValue"],["equalto",(D,se)=>D.value===se.value],["eq",(D,se)=>D.value===se.value]]));this.parent=D}set(D,se){return this.declareVariable(D,Ut(se))}declareVariable(D,se){if(this.variables.has(D))throw new SyntaxError(`Variable already declared: ${D}`);return this.variables.set(D,se),se}setVariable(D,se){return this.variables.set(D,se),se}resolve(D){if(this.variables.has(D))return this;if(this.parent)return this.parent.resolve(D);throw new Error(`Unknown variable: ${D}`)}lookupVariable(D){try{return this.resolve(D).variables.get(D)??new Je}catch{return new Je}}};function ot(D){D.set("false",!1),D.set("true",!0),D.set("none",null),D.set("raise_exception",se=>{throw new Error(se)}),D.set("range",be),D.set("strftime_now",ge),D.set("True",!0),D.set("False",!1),D.set("None",null)}var lt=class{constructor(D){le(this,"global");this.global=D??new Ue}run(D){return this.evaluate(D,this.global)}evaluateBinaryExpression(D,se){const Q=this.evaluate(D.left,se);switch(D.operator.value){case"and":return Q.__bool__().value?this.evaluate(D.right,se):Q;case"or":return Q.__bool__().value?Q:this.evaluate(D.right,se)}const oe=this.evaluate(D.right,se);switch(D.operator.value){case"==":return new je(Q.value==oe.value);case"!=":return new je(Q.value!=oe.value)}if(Q instanceof Je||oe instanceof Je){if(oe instanceof Je&&["in","not in"].includes(D.operator.value))return new je(D.operator.value==="not in");throw new Error(`Cannot perform operation ${D.operator.value} on undefined values`)}else{if(Q instanceof rt||oe instanceof rt)throw new Error("Cannot perform operation on null values");if(D.operator.value==="~")return new Me(Q.value.toString()+oe.value.toString());if((Q instanceof we||Q instanceof $e)&&(oe instanceof we||oe instanceof $e)){const ce=Q.value,Se=oe.value;switch(D.operator.value){case"+":case"-":case"*":{const Re=D.operator.value==="+"?ce+Se:D.operator.value==="-"?ce-Se:ce*Se;return Q instanceof $e||oe instanceof $e?new $e(Re):new we(Re)}case"/":return new $e(ce/Se);case"%":{const Re=ce%Se;return Q instanceof $e||oe instanceof $e?new $e(Re):new we(Re)}case"<":return new je(ce<Se);case">":return new je(ce>Se);case">=":return new je(ce>=Se);case"<=":return new je(ce<=Se)}}else if(Q instanceof Ce&&oe instanceof Ce)switch(D.operator.value){case"+":return new Ce(Q.value.concat(oe.value))}else if(oe instanceof Ce){const ce=oe.value.find(Se=>Se.value===Q.value)!==void 0;switch(D.operator.value){case"in":return new je(ce);case"not in":return new je(!ce)}}}if(Q instanceof Me||oe instanceof Me)switch(D.operator.value){case"+":return new Me(Q.value.toString()+oe.value.toString())}if(Q instanceof Me&&oe instanceof Me)switch(D.operator.value){case"in":return new je(oe.value.includes(Q.value));case"not in":return new je(!oe.value.includes(Q.value))}if(Q instanceof Me&&oe instanceof ze)switch(D.operator.value){case"in":return new je(oe.value.has(Q.value));case"not in":return new je(!oe.value.has(Q.value))}throw new SyntaxError(`Unknown operator "${D.operator.value}" between ${Q.type} and ${oe.type}`)}evaluateArguments(D,se){const Q=[],oe=new Map;for(const ce of D)if(ce.type==="SpreadExpression"){const Se=ce,Re=this.evaluate(Se.argument,se);if(!(Re instanceof Ce))throw new Error(`Cannot unpack non-iterable type: ${Re.type}`);for(const dt of Re.value)Q.push(dt)}else if(ce.type==="KeywordArgumentExpression"){const Se=ce;oe.set(Se.key.value,this.evaluate(Se.value,se))}else{if(oe.size>0)throw new Error("Positional arguments must come before keyword arguments");Q.push(this.evaluate(ce,se))}return[Q,oe]}applyFilter(D,se,Q){if(se.type==="Identifier"){const oe=se;if(oe.value==="tojson")return new Me(Nt(D));if(D instanceof Ce)switch(oe.value){case"list":return D;case"first":return D.value[0];case"last":return D.value[D.value.length-1];case"length":return new we(D.value.length);case"reverse":return new Ce(D.value.reverse());case"sort":return new Ce(D.value.sort((ce,Se)=>{if(ce.type!==Se.type)throw new Error(`Cannot compare different types: ${ce.type} and ${Se.type}`);switch(ce.type){case"IntegerValue":case"FloatValue":return ce.value-Se.value;case"StringValue":return ce.value.localeCompare(Se.value);default:throw new Error(`Cannot compare type: ${ce.type}`)}}));case"join":return new Me(D.value.map(ce=>ce.value).join(""));case"string":return new Me(Nt(D));case"unique":{const ce=new Set,Se=[];for(const Re of D.value)ce.has(Re.value)||(ce.add(Re.value),Se.push(Re));return new Ce(Se)}default:throw new Error(`Unknown ArrayValue filter: ${oe.value}`)}else if(D instanceof Me)switch(oe.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const ce=D.builtins.get(oe.value);if(ce instanceof Ye)return ce.value([],Q);if(ce instanceof we)return ce;throw new Error(`Unknown StringValue filter: ${oe.value}`)}case"trim":return new Me(D.value.trim());case"indent":return new Me(D.value.split(`
`).map((ce,Se)=>Se===0||ce.length===0?ce:"    "+ce).join(`
`));case"join":case"string":return D;case"int":{const ce=parseInt(D.value,10);return new we(isNaN(ce)?0:ce)}case"float":{const ce=parseFloat(D.value);return new $e(isNaN(ce)?0:ce)}default:throw new Error(`Unknown StringValue filter: ${oe.value}`)}else if(D instanceof we||D instanceof $e)switch(oe.value){case"abs":return D instanceof we?new we(Math.abs(D.value)):new $e(Math.abs(D.value));case"int":return new we(Math.floor(D.value));case"float":return new $e(D.value);default:throw new Error(`Unknown NumericValue filter: ${oe.value}`)}else if(D instanceof ze)switch(oe.value){case"items":return new Ce(Array.from(D.value.entries()).map(([ce,Se])=>new Ce([new Me(ce),Se])));case"length":return new we(D.value.size);default:throw new Error(`Unknown ObjectValue filter: ${oe.value}`)}else if(D instanceof je)switch(oe.value){case"bool":return new je(D.value);case"int":return new we(D.value?1:0);case"float":return new $e(D.value?1:0);case"string":return new Me(D.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${oe.value}`)}throw new Error(`Cannot apply filter "${oe.value}" to type: ${D.type}`)}else if(se.type==="CallExpression"){const oe=se;if(oe.callee.type!=="Identifier")throw new Error(`Unknown filter: ${oe.callee.type}`);const ce=oe.callee.value;if(ce==="tojson"){const[,Se]=this.evaluateArguments(oe.args,Q),Re=Se.get("indent")??new rt;if(!(Re instanceof we||Re instanceof rt))throw new Error("If set, indent must be a number");return new Me(Nt(D,Re.value))}else if(ce==="join"){let Se;if(D instanceof Me)Se=Array.from(D.value);else if(D instanceof Ce)Se=D.value.map(Mt=>Mt.value);else throw new Error(`Cannot apply filter "${ce}" to type: ${D.type}`);const[Re,dt]=this.evaluateArguments(oe.args,Q),Ct=Re.at(0)??dt.get("separator")??new Me("");if(!(Ct instanceof Me))throw new Error("separator must be a string");return new Me(Se.join(Ct.value))}else if(ce==="int"||ce==="float"){const[Se,Re]=this.evaluateArguments(oe.args,Q),dt=Se.at(0)??Re.get("default")??(ce==="int"?new we(0):new $e(0));if(D instanceof Me){const Ct=ce==="int"?parseInt(D.value,10):parseFloat(D.value);return isNaN(Ct)?dt:ce==="int"?new we(Ct):new $e(Ct)}else{if(D instanceof we||D instanceof $e)return D;if(D instanceof je)return ce==="int"?new we(D.value?1:0):new $e(D.value?1:0);throw new Error(`Cannot apply filter "${ce}" to type: ${D.type}`)}}else if(ce==="default"){const[Se,Re]=this.evaluateArguments(oe.args,Q),dt=Se[0]??new Me(""),Ct=Se[1]??Re.get("boolean")??new je(!1);if(!(Ct instanceof je))throw new Error("`default` filter flag must be a boolean");return D instanceof Je||Ct.value&&!D.__bool__().value?dt:D}if(D instanceof Ce){switch(ce){case"selectattr":case"rejectattr":{const Se=ce==="selectattr";if(D.value.some(ft=>!(ft instanceof ze)))throw new Error(`\`${ce}\` can only be applied to array of objects`);if(oe.args.some(ft=>ft.type!=="StringLiteral"))throw new Error(`arguments of \`${ce}\` must be strings`);const[Re,dt,Ct]=oe.args.map(ft=>this.evaluate(ft,Q));let Mt;if(dt){const ft=Q.tests.get(dt.value);if(!ft)throw new Error(`Unknown test: ${dt.value}`);Mt=ft}else Mt=(...ft)=>ft[0].__bool__().value;const jt=D.value.filter(ft=>{const ir=ft.value.get(Re.value),lr=ir?Mt(ir,Ct):!1;return Se?lr:!lr});return new Ce(jt)}case"map":{const[,Se]=this.evaluateArguments(oe.args,Q);if(Se.has("attribute")){const Re=Se.get("attribute");if(!(Re instanceof Me))throw new Error("attribute must be a string");const dt=Se.get("default"),Ct=D.value.map(Mt=>{if(!(Mt instanceof ze))throw new Error("items in map must be an object");return Mt.value.get(Re.value)??dt??new Je});return new Ce(Ct)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${ce}`)}else if(D instanceof Me){switch(ce){case"indent":{const[Se,Re]=this.evaluateArguments(oe.args,Q),dt=Se.at(0)??Re.get("width")??new we(4);if(!(dt instanceof we))throw new Error("width must be a number");const Ct=Se.at(1)??Re.get("first")??new je(!1),Mt=Se.at(2)??Re.get("blank")??new je(!1),jt=D.value.split(`
`),ft=" ".repeat(dt.value),ir=jt.map((lr,si)=>!Ct.value&&si===0||!Mt.value&&lr.length===0?lr:ft+lr);return new Me(ir.join(`
`))}case"replace":{const Se=D.builtins.get("replace");if(!(Se instanceof Ye))throw new Error("replace filter not available");const[Re,dt]=this.evaluateArguments(oe.args,Q);return Se.value([...Re,new Xe(dt)],Q)}}throw new Error(`Unknown StringValue filter: ${ce}`)}else throw new Error(`Cannot apply filter "${ce}" to type: ${D.type}`)}throw new Error(`Unknown filter: ${se.type}`)}evaluateFilterExpression(D,se){const Q=this.evaluate(D.operand,se);return this.applyFilter(Q,D.filter,se)}evaluateTestExpression(D,se){const Q=this.evaluate(D.operand,se),oe=se.tests.get(D.test.value);if(!oe)throw new Error(`Unknown test: ${D.test.value}`);const ce=oe(Q);return new je(D.negate?!ce:ce)}evaluateSelectExpression(D,se){return this.evaluate(D.test,se).__bool__().value?this.evaluate(D.lhs,se):new Je}evaluateUnaryExpression(D,se){const Q=this.evaluate(D.argument,se);switch(D.operator.value){case"not":return new je(!Q.value);default:throw new SyntaxError(`Unknown operator: ${D.operator.value}`)}}evaluateTernaryExpression(D,se){return this.evaluate(D.condition,se).__bool__().value?this.evaluate(D.trueExpr,se):this.evaluate(D.falseExpr,se)}evalProgram(D,se){return this.evaluateBlock(D.body,se)}evaluateBlock(D,se){let Q="";for(const oe of D){const ce=this.evaluate(oe,se);ce.type!=="NullValue"&&ce.type!=="UndefinedValue"&&(Q+=ce.toString())}return new Me(Q)}evaluateIdentifier(D,se){return se.lookupVariable(D.value)}evaluateCallExpression(D,se){const[Q,oe]=this.evaluateArguments(D.args,se);oe.size>0&&Q.push(new Xe(oe));const ce=this.evaluate(D.callee,se);if(ce.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${ce.type}`);return ce.value(Q,se)}evaluateSliceExpression(D,se,Q){if(!(D instanceof Ce||D instanceof Me))throw new Error("Slice object must be an array or string");const oe=this.evaluate(se.start,Q),ce=this.evaluate(se.stop,Q),Se=this.evaluate(se.step,Q);if(!(oe instanceof we||oe instanceof Je))throw new Error("Slice start must be numeric or undefined");if(!(ce instanceof we||ce instanceof Je))throw new Error("Slice stop must be numeric or undefined");if(!(Se instanceof we||Se instanceof Je))throw new Error("Slice step must be numeric or undefined");return D instanceof Ce?new Ce(Ne(D.value,oe.value,ce.value,Se.value)):new Me(Ne(Array.from(D.value),oe.value,ce.value,Se.value).join(""))}evaluateMemberExpression(D,se){const Q=this.evaluate(D.object,se);let oe;if(D.computed){if(D.property.type==="SliceExpression")return this.evaluateSliceExpression(Q,D.property,se);oe=this.evaluate(D.property,se)}else oe=new Me(D.property.value);let ce;if(Q instanceof ze){if(!(oe instanceof Me))throw new Error(`Cannot access property with non-string: got ${oe.type}`);ce=Q.value.get(oe.value)??Q.builtins.get(oe.value)}else if(Q instanceof Ce||Q instanceof Me)if(oe instanceof we)ce=Q.value.at(oe.value),Q instanceof Me&&(ce=new Me(Q.value.at(oe.value)));else if(oe instanceof Me)ce=Q.builtins.get(oe.value);else throw new Error(`Cannot access property with non-string/non-number: got ${oe.type}`);else{if(!(oe instanceof Me))throw new Error(`Cannot access property with non-string: got ${oe.type}`);ce=Q.builtins.get(oe.value)}return ce instanceof Ee?ce:new Je}evaluateSet(D,se){const Q=D.value?this.evaluate(D.value,se):this.evaluateBlock(D.body,se);if(D.assignee.type==="Identifier"){const oe=D.assignee.value;se.setVariable(oe,Q)}else if(D.assignee.type==="TupleLiteral"){const oe=D.assignee;if(!(Q instanceof Ce))throw new Error(`Cannot unpack non-iterable type in set: ${Q.type}`);const ce=Q.value;if(ce.length!==oe.value.length)throw new Error(`Too ${oe.value.length>ce.length?"few":"many"} items to unpack in set`);for(let Se=0;Se<oe.value.length;++Se){const Re=oe.value[Se];if(Re.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${Re.type}`);se.setVariable(Re.value,ce[Se])}}else if(D.assignee.type==="MemberExpression"){const oe=D.assignee,ce=this.evaluate(oe.object,se);if(!(ce instanceof ze))throw new Error("Cannot assign to member of non-object");if(oe.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");ce.value.set(oe.property.value,Q)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(D.assignee)}`);return new rt}evaluateIf(D,se){const Q=this.evaluate(D.test,se);return this.evaluateBlock(Q.__bool__().value?D.body:D.alternate,se)}evaluateFor(D,se){const Q=new Ue(se);let oe,ce;if(D.iterable.type==="SelectExpression"){const Mt=D.iterable;ce=this.evaluate(Mt.lhs,Q),oe=Mt.test}else ce=this.evaluate(D.iterable,Q);if(!(ce instanceof Ce||ce instanceof ze))throw new Error(`Expected iterable or object type in for loop: got ${ce.type}`);ce instanceof ze&&(ce=ce.keys());const Se=[],Re=[];for(let Mt=0;Mt<ce.value.length;++Mt){const jt=new Ue(Q),ft=ce.value[Mt];let ir;if(D.loopvar.type==="Identifier")ir=lr=>lr.setVariable(D.loopvar.value,ft);else if(D.loopvar.type==="TupleLiteral"){const lr=D.loopvar;if(ft.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${ft.type}`);const si=ft;if(lr.value.length!==si.value.length)throw new Error(`Too ${lr.value.length>si.value.length?"few":"many"} items to unpack`);ir=Ti=>{for(let zr=0;zr<lr.value.length;++zr){if(lr.value[zr].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${lr.value[zr].type}`);Ti.setVariable(lr.value[zr].value,si.value[zr])}}}else throw new Error(`Invalid loop variable(s): ${D.loopvar.type}`);oe&&(ir(jt),!this.evaluate(oe,jt).__bool__().value)||(Se.push(ft),Re.push(ir))}let dt="",Ct=!0;for(let Mt=0;Mt<Se.length;++Mt){const jt=new Map([["index",new we(Mt+1)],["index0",new we(Mt)],["revindex",new we(Se.length-Mt)],["revindex0",new we(Se.length-Mt-1)],["first",new je(Mt===0)],["last",new je(Mt===Se.length-1)],["length",new we(Se.length)],["previtem",Mt>0?Se[Mt-1]:new Je],["nextitem",Mt<Se.length-1?Se[Mt+1]:new Je]]);Q.setVariable("loop",new ze(jt)),Re[Mt](Q);try{const ft=this.evaluateBlock(D.body,Q);dt+=ft.value}catch(ft){if(ft instanceof Ae)continue;if(ft instanceof ve)break;throw ft}Ct=!1}if(Ct){const Mt=this.evaluateBlock(D.defaultBlock,Q);dt+=Mt.value}return new Me(dt)}evaluateMacro(D,se){return se.setVariable(D.name.value,new Ye((Q,oe)=>{var Re;const ce=new Ue(oe);Q=Q.slice();let Se;((Re=Q.at(-1))==null?void 0:Re.type)==="KeywordArgumentsValue"&&(Se=Q.pop());for(let dt=0;dt<D.args.length;++dt){const Ct=D.args[dt],Mt=Q[dt];if(Ct.type==="Identifier"){const jt=Ct;if(!Mt)throw new Error(`Missing positional argument: ${jt.value}`);ce.setVariable(jt.value,Mt)}else if(Ct.type==="KeywordArgumentExpression"){const jt=Ct,ft=Mt??(Se==null?void 0:Se.value.get(jt.key.value))??this.evaluate(jt.value,ce);ce.setVariable(jt.key.value,ft)}else throw new Error(`Unknown argument type: ${Ct.type}`)}return this.evaluateBlock(D.body,ce)})),new rt}evaluateCallStatement(D,se){const Q=new Ye((dt,Ct)=>{const Mt=new Ue(Ct);if(D.callerArgs)for(let jt=0;jt<D.callerArgs.length;++jt){const ft=D.callerArgs[jt];if(ft.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${ft.type}`);Mt.setVariable(ft.value,dt[jt]??new Je)}return this.evaluateBlock(D.body,Mt)}),[oe,ce]=this.evaluateArguments(D.call.args,se);oe.push(new Xe(ce));const Se=this.evaluate(D.call.callee,se);if(Se.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Se.type}`);const Re=new Ue(se);return Re.setVariable("caller",Q),Se.value(oe,Re)}evaluateFilterStatement(D,se){const Q=this.evaluateBlock(D.body,se);return this.applyFilter(Q,D.filter,se)}evaluate(D,se){if(!D)return new Je;switch(D.type){case"Program":return this.evalProgram(D,se);case"Set":return this.evaluateSet(D,se);case"If":return this.evaluateIf(D,se);case"For":return this.evaluateFor(D,se);case"Macro":return this.evaluateMacro(D,se);case"CallStatement":return this.evaluateCallStatement(D,se);case"Break":throw new ve;case"Continue":throw new Ae;case"IntegerLiteral":return new we(D.value);case"FloatLiteral":return new $e(D.value);case"StringLiteral":return new Me(D.value);case"ArrayLiteral":return new Ce(D.value.map(Q=>this.evaluate(Q,se)));case"TupleLiteral":return new st(D.value.map(Q=>this.evaluate(Q,se)));case"ObjectLiteral":{const Q=new Map;for(const[oe,ce]of D.value){const Se=this.evaluate(oe,se);if(!(Se instanceof Me))throw new Error(`Object keys must be strings: got ${Se.type}`);Q.set(Se.value,this.evaluate(ce,se))}return new ze(Q)}case"Identifier":return this.evaluateIdentifier(D,se);case"CallExpression":return this.evaluateCallExpression(D,se);case"MemberExpression":return this.evaluateMemberExpression(D,se);case"UnaryExpression":return this.evaluateUnaryExpression(D,se);case"BinaryExpression":return this.evaluateBinaryExpression(D,se);case"FilterExpression":return this.evaluateFilterExpression(D,se);case"FilterStatement":return this.evaluateFilterStatement(D,se);case"TestExpression":return this.evaluateTestExpression(D,se);case"SelectExpression":return this.evaluateSelectExpression(D,se);case"Ternary":return this.evaluateTernaryExpression(D,se);case"Comment":return new rt;default:throw new SyntaxError(`Unknown node type: ${D.type}`)}}};function Ut(D){switch(typeof D){case"number":return Number.isInteger(D)?new we(D):new $e(D);case"string":return new Me(D);case"boolean":return new je(D);case"undefined":return new Je;case"object":return D===null?new rt:Array.isArray(D)?new Ce(D.map(Ut)):new ze(new Map(Object.entries(D).map(([se,Q])=>[se,Ut(Q)])));case"function":return new Ye((se,Q)=>{const oe=D(...se.map(ce=>ce.value))??null;return Ut(oe)});default:throw new Error(`Cannot convert to runtime value: ${D}`)}}function Nt(D,se,Q){const oe=Q??0;switch(D.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(D.value);case"ArrayValue":case"ObjectValue":{const ce=se?" ".repeat(se):"",Se=`
`+ce.repeat(oe),Re=Se+ce;if(D.type==="ArrayValue"){const dt=D.value.map(Ct=>Nt(Ct,se,oe+1));return se?`[${Re}${dt.join(`,${Re}`)}${Se}]`:`[${dt.join(", ")}]`}else{const dt=Array.from(D.value.entries()).map(([Ct,Mt])=>{const jt=`"${Ct}": ${Nt(Mt,se,oe+1)}`;return se?`${Re}${jt}`:jt});return se?`{${dt.join(",")}${Se}}`:`{${dt.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${D.type}`)}}var Pt=`
`,$r="{%- ",un=" -%}";function en(D){switch(D.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return D.operator.value==="and"?1:D.operator.value==="in"||D.operator.value==="not in"?2:0}return 0}function Ni(D,se="	"){const Q=typeof se=="number"?" ".repeat(se):se;return cn(D.body,0,Q).replace(/\n$/,"")}function vr(...D){return $r+D.join(" ")+un}function cn(D,se,Q){return D.map(oe=>Wo(oe,se,Q)).join(Pt)}function Wo(D,se,Q){const oe=Q.repeat(se);switch(D.type){case"Program":return cn(D.body,se,Q);case"If":return Pa(D,se,Q);case"For":return yo(D,se,Q);case"Set":return ei(D,se,Q);case"Macro":return bt(D,se,Q);case"Break":return oe+vr("break");case"Continue":return oe+vr("continue");case"CallStatement":return St(D,se,Q);case"FilterStatement":return Zt(D,se,Q);case"Comment":return oe+"{# "+D.value+" #}";default:return oe+"{{- "+pt(D)+" -}}"}}function Pa(D,se,Q){const oe=Q.repeat(se),ce=[];let Se=D;for(;Se&&(ce.push({test:Se.test,body:Se.body}),Se.alternate.length===1&&Se.alternate[0].type==="If");)Se=Se.alternate[0];let Re=oe+vr("if",pt(ce[0].test))+Pt+cn(ce[0].body,se+1,Q);for(let dt=1;dt<ce.length;++dt)Re+=Pt+oe+vr("elif",pt(ce[dt].test))+Pt+cn(ce[dt].body,se+1,Q);return Se&&Se.alternate.length>0&&(Re+=Pt+oe+vr("else")+Pt+cn(Se.alternate,se+1,Q)),Re+=Pt+oe+vr("endif"),Re}function yo(D,se,Q){const oe=Q.repeat(se);let ce="";if(D.iterable.type==="SelectExpression"){const Re=D.iterable;ce=`${pt(Re.lhs)} if ${pt(Re.test)}`}else ce=pt(D.iterable);let Se=oe+vr("for",pt(D.loopvar),"in",ce)+Pt+cn(D.body,se+1,Q);return D.defaultBlock.length>0&&(Se+=Pt+oe+vr("else")+Pt+cn(D.defaultBlock,se+1,Q)),Se+=Pt+oe+vr("endfor"),Se}function ei(D,se,Q){const oe=Q.repeat(se),ce=pt(D.assignee),Se=D.value?pt(D.value):"",Re=oe+vr("set",`${ce}${D.value?" = "+Se:""}`);return D.body.length===0?Re:Re+Pt+cn(D.body,se+1,Q)+Pt+oe+vr("endset")}function bt(D,se,Q){const oe=Q.repeat(se),ce=D.args.map(pt).join(", ");return oe+vr("macro",`${D.name.value}(${ce})`)+Pt+cn(D.body,se+1,Q)+Pt+oe+vr("endmacro")}function St(D,se,Q){const oe=Q.repeat(se),ce=D.callerArgs&&D.callerArgs.length>0?`(${D.callerArgs.map(pt).join(", ")})`:"",Se=pt(D.call);let Re=oe+vr(`call${ce}`,Se)+Pt;return Re+=cn(D.body,se+1,Q)+Pt,Re+=oe+vr("endcall"),Re}function Zt(D,se,Q){const oe=Q.repeat(se),ce=D.filter.type==="Identifier"?D.filter.value:pt(D.filter);let Se=oe+vr("filter",ce)+Pt;return Se+=cn(D.body,se+1,Q)+Pt,Se+=oe+vr("endfilter"),Se}function pt(D,se=-1){switch(D.type){case"SpreadExpression":return`*${pt(D.argument)}`;case"Identifier":return D.value;case"IntegerLiteral":return`${D.value}`;case"FloatLiteral":return`${D.value}`;case"StringLiteral":return JSON.stringify(D.value);case"BinaryExpression":{const Q=D,oe=en(Q),ce=pt(Q.left,oe),Se=pt(Q.right,oe+1),Re=`${ce} ${Q.operator.value} ${Se}`;return oe<se?`(${Re})`:Re}case"UnaryExpression":{const Q=D;return Q.operator.value+(Q.operator.value==="not"?" ":"")+pt(Q.argument,1/0)}case"CallExpression":{const Q=D,oe=Q.args.map(pt).join(", ");return`${pt(Q.callee)}(${oe})`}case"MemberExpression":{const Q=D;let oe=pt(Q.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(Q.object.type)||(oe=`(${oe})`);let ce=pt(Q.property);return!Q.computed&&Q.property.type!=="Identifier"&&(ce=`(${ce})`),Q.computed?`${oe}[${ce}]`:`${oe}.${ce}`}case"FilterExpression":{const Q=D,oe=pt(Q.operand,1/0);return Q.filter.type==="CallExpression"?`${oe} | ${pt(Q.filter)}`:`${oe} | ${Q.filter.value}`}case"SelectExpression":{const Q=D;return`${pt(Q.lhs)} if ${pt(Q.test)}`}case"TestExpression":{const Q=D;return`${pt(Q.operand)} is${Q.negate?" not":""} ${Q.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const Q=D.value.map(pt),oe=D.type==="ArrayLiteral"?"[]":"()";return`${oe[0]}${Q.join(", ")}${oe[1]}`}case"ObjectLiteral":return`{${Array.from(D.value.entries()).map(([oe,ce])=>`${pt(oe)}: ${pt(ce)}`).join(", ")}}`;case"SliceExpression":{const Q=D,oe=Q.start?pt(Q.start):"",ce=Q.stop?pt(Q.stop):"",Se=Q.step?`:${pt(Q.step)}`:"";return`${oe}:${ce}${Se}`}case"KeywordArgumentExpression":{const Q=D;return`${Q.key.value}=${pt(Q.value)}`}case"Ternary":{const Q=D,oe=`${pt(Q.trueExpr)} if ${pt(Q.condition,0)} else ${pt(Q.falseExpr)}`;return se>-1?`(${oe})`:oe}default:throw new Error(`Unknown expression type: ${D.type}`)}}var Xt=class{constructor(D){le(this,"parsed");const se=d(D,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=de(se)}render(D){const se=new Ue;if(ot(se),D)for(const[ce,Se]of Object.entries(D))se.set(ce,Se);return new lt(se).run(this.parsed).value}format(D){return Ni(this.parsed,(D==null?void 0:D.indent)||"	")}}},"./src/backends/onnx.js":(e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>s.Tensor,createInferenceSession:()=>v,deviceToExecutionProviders:()=>h,isONNXProxy:()=>b,isONNXTensor:()=>g});var i=r("./src/env.js"),o=r("?2ce3"),a=r("onnxruntime-web"),s=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),u=[];let d,c;const f=Symbol.for("onnxruntime");if(f in globalThis)c=globalThis[f];else if(i.apis.IS_NODE_ENV){switch(c=o??(n||(n=r.t(o,2))),process.platform){case"win32":u.push("dml");break;case"linux":process.arch==="x64"&&u.push("cuda");break}u.push("cpu"),d=["cpu"]}else c=a,i.apis.IS_WEBNN_AVAILABLE&&u.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),i.apis.IS_WEBGPU_AVAILABLE&&u.push("webgpu"),u.push("wasm"),d=["wasm"];const p=c.InferenceSession;function h(w=null){if(!w)return d;switch(w){case"auto":return u;case"gpu":return u.filter(y=>["webgpu","cuda","dml","webnn-gpu"].includes(y))}if(u.includes(w))return[l[w]??w];throw new Error(`Unsupported device: "${w}". Should be one of: ${u.join(", ")}.`)}let m=null;async function v(w,y,x){m&&await m;const M=p.create(w,y);m??(m=M);const T=await M;return T.config=x,T}function g(w){return w instanceof c.Tensor}const _=c==null?void 0:c.env;_!=null&&_.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!_.wasm.wasmPaths&&(_.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${i.env.version}/dist/`),_.wasm.proxy=!1),_!=null&&_.webgpu&&(_.webgpu.powerPreference="high-performance");function b(){var w;return(w=_==null?void 0:_.wasm)==null?void 0:w.proxy}i.env.backends.onnx=_},"./src/base/feature_extraction_utils.js":(e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>a,validate_audio_inputs:()=>s});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),o=r("./src/utils/hub.js");class a extends i.Callable{constructor(u){super(),this.config=u}static async from_pretrained(u,d={}){const c=await(0,o.getModelJSON)(u,n.FEATURE_EXTRACTOR_NAME,!0,d);return new this(c)}}function s(l,u){var d;if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${u} expects input to be a Float32Array or a Float64Array, but got ${((d=l==null?void 0:l.constructor)==null?void 0:d.name)??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}},"./src/base/image_processors_utils.js":(e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>w,center_to_corners_format:()=>c,post_process_instance_segmentation:()=>b,post_process_object_detection:()=>f,post_process_panoptic_segmentation:()=>_,post_process_semantic_segmentation:()=>p});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),o=r("./src/utils/maths.js");r("./src/utils/image.js");var a=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function u(y,x,M=0,T=null){const S=y/x;let $=(0,o.bankers_round)(S)*x;return T!==null&&$>T&&($=Math.floor(S)*x),$<M&&($=Math.ceil(S)*x),$}function d([y,x],M){return[Math.max(Math.floor(y/M),1)*M,Math.max(Math.floor(x/M),1)*M]}function c([y,x,M,T]){return[y-M/2,x-T/2,y+M/2,x+T/2]}function f(y,x=.5,M=null,T=!1){const S=y.logits,$=y.pred_boxes,[k,F,j]=S.dims;if(M!==null&&M.length!==k)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let U=[];for(let z=0;z<k;++z){let G=M!==null?M[z]:null,H={boxes:[],classes:[],scores:[]},W=S[z],Y=$[z];for(let te=0;te<F;++te){let V=W[te],I=[],K;if(T){K=V.sigmoid().data;for(let ae=0;ae<K.length;++ae)K[ae]>x&&I.push(ae)}else{let ae=(0,o.max)(V.data)[1];if(ae===j-1||(K=(0,o.softmax)(V.data),K[ae]<x))continue;I.push(ae)}for(const ae of I){let pe=Y[te].data;pe=c(pe),G!==null&&(pe=pe.map((de,be)=>de*G[(be+1)%2])),H.boxes.push(pe),H.classes.push(ae),H.scores.push(K[ae])}}U.push(H)}return U}function p(y,x=null){const M=y.logits,T=M.dims[0];if(x!==null&&x.length!==T)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const S=[];for(let $=0;$<T;++$){const k=x!==null?x[$]:null;let F=M[$];k!==null&&(F=(0,i.interpolate)(F,k,"bilinear",!1));const[j,U]=k??F.dims.slice(-2),z=new i.Tensor("int32",new Int32Array(j*U),[j,U]),G=F[0].data,H=z.data;for(let te=1;te<F.dims[0];++te){const V=F[te].data;for(let I=0;I<V.length;++I)V[I]>G[I]&&(G[I]=V[I],H[I]=te)}const W=new Array(F.dims[0]);for(let te=0;te<H.length;++te){const V=H[te];W[V]=V}const Y=W.filter(te=>te!==void 0);S.push({segmentation:z,labels:Y})}return S}function h(y,x,M,T){const S=[],$=[],k=[];for(let F=0;F<y.dims[0];++F){const j=y[F],U=x[F],z=(0,o.max)(j.data)[1];if(z===T)continue;const H=(0,o.softmax)(j.data)[z];H>M&&(S.push(U),$.push(H),k.push(z))}return[S,$,k]}function m(y,x,M,T=.5,S=.8){const $=[];let k=0,F=0;const j=x[M].data;for(let z=0;z<y.length;++z)y[z]===M&&($.push(z),++k),j[z]>=T&&++F;let U=k>0&&F>0;return U&&(U=k/F>S),[U,$]}function v(y,x,M,T,S,$=null,k=null){const[F,j]=k??y[0].dims,U=new i.Tensor("int32",new Int32Array(F*j),[F,j]),z=[];if(k!==null)for(let te=0;te<y.length;++te)y[te]=(0,i.interpolate)(y[te],k,"bilinear",!1);const G=new Int32Array(y[0].data.length),H=new Float32Array(y[0].data.length);for(let te=0;te<y.length;++te){let V=x[te];const I=y[te].data;for(let K=0;K<I.length;++K)I[K]*=V,I[K]>H[K]&&(G[K]=te,H[K]=I[K])}let W=0;const Y=U.data;for(let te=0;te<M.length;++te){const V=M[te],[I,K]=m(G,y,te,T,S);if(I){++W;for(const ae of K)Y[ae]=W;z.push({id:W,label_id:V,score:x[te]})}}return[U,z]}function g(y,x,M=28,T=56*56,S=14*14*4*1280){if(y<M||x<M)throw new Error(`height:${y} or width:${x} must be larger than factor:${M}`);if(Math.max(y,x)/Math.min(y,x)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(y,x)/Math.min(y,x)}`);let $=Math.round(y/M)*M,k=Math.round(x/M)*M;if($*k>S){const F=Math.sqrt(y*x/S);$=Math.floor(y/F/M)*M,k=Math.floor(x/F/M)*M}else if($*k<T){const F=Math.sqrt(T/(y*x));$=Math.ceil(y*F/M)*M,k=Math.ceil(x*F/M)*M}return[$,k]}function _(y,x=.5,M=.5,T=.8,S=null,$=null){S===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),S=new Set);const k=y.class_queries_logits??y.logits,j=(y.masks_queries_logits??y.pred_masks).sigmoid();let[U,z,G]=k.dims;if(G-=1,$!==null&&$.length!==U)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let H=[];for(let W=0;W<U;++W){let Y=$!==null?$[W]:null,te=k[W],V=j[W],[I,K,ae]=h(te,V,x,G);if(ae.length===0){let[be,Ne]=Y??V.dims.slice(-2),Te=new i.Tensor("int32",new Int32Array(be*Ne).fill(-1),[be,Ne]);H.push({segmentation:Te,segments_info:[]});continue}let[pe,de]=v(I,K,ae,M,T,S,Y);H.push({segmentation:pe,segments_info:de})}return H}function b(y,x=.5,M=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class w extends n.Callable{constructor(x){super(),this.image_mean=x.image_mean??x.mean,this.image_std=x.image_std??x.std,this.resample=x.resample??2,this.do_rescale=x.do_rescale??!0,this.rescale_factor=x.rescale_factor??1/255,this.do_normalize=x.do_normalize,this.do_thumbnail=x.do_thumbnail,this.size=x.size??x.image_size,this.do_resize=x.do_resize??this.size!==void 0,this.size_divisibility=x.size_divisibility??x.size_divisor,this.do_center_crop=x.do_center_crop,this.crop_size=x.crop_size,this.do_convert_rgb=x.do_convert_rgb??!0,this.do_crop_margin=x.do_crop_margin,this.pad_size=x.pad_size,this.do_pad=x.do_pad,this.min_pixels=x.min_pixels,this.max_pixels=x.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=x.do_flip_channel_order??!1,this.config=x}async thumbnail(x,M,T=2){const S=x.height,$=x.width,k=M.height,F=M.width;let j=Math.min(S,k),U=Math.min($,F);return j===S&&U===$?x:(S>$?U=Math.floor($*j/S):$>S&&(j=Math.floor(S*U/$)),await x.resize(U,j,{resample:T}))}async crop_margin(x,M=200){const T=x.clone().grayscale(),S=(0,o.min)(T.data)[0],k=(0,o.max)(T.data)[0]-S;if(k===0)return x;const F=M/255;let j=T.width,U=T.height,z=0,G=0;const H=T.data;for(let W=0;W<T.height;++W){const Y=W*T.width;for(let te=0;te<T.width;++te)(H[Y+te]-S)/k<F&&(j=Math.min(j,te),U=Math.min(U,W),z=Math.max(z,te),G=Math.max(G,W))}return x=await x.crop([j,U,z,G]),x}pad_image(x,M,T,{mode:S="constant",center:$=!1,constant_values:k=0}={}){const[F,j,U]=M;let z,G;if(typeof T=="number"?(z=T,G=T):T==="square"?z=G=Math.max(F,j):(z=T.width,G=T.height),z!==j||G!==F){const H=new Float32Array(z*G*U);if(Array.isArray(k))for(let te=0;te<H.length;++te)H[te]=k[te%U];else k!==0&&H.fill(k);const[W,Y]=$?[Math.floor((z-j)/2),Math.floor((G-F)/2)]:[0,0];for(let te=0;te<F;++te){const V=(te+Y)*z,I=te*j;for(let K=0;K<j;++K){const ae=(V+K+W)*U,pe=(I+K)*U;for(let de=0;de<U;++de)H[ae+de]=x[pe+de]}}if(S==="symmetric"){if($)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const te=F-1,V=j-1;for(let I=0;I<G;++I){const K=I*z,ae=(0,a.calculateReflectOffset)(I,te)*j;for(let pe=0;pe<z;++pe){if(I<F&&pe<j)continue;const de=(K+pe)*U,be=(ae+(0,a.calculateReflectOffset)(pe,V))*U;for(let Ne=0;Ne<U;++Ne)H[de+Ne]=x[be+Ne]}}}x=H,M=[G,z,U]}return[x,M]}rescale(x){for(let M=0;M<x.length;++M)x[M]=this.rescale_factor*x[M]}get_resize_output_image_size(x,M){const[T,S]=x.size;let $,k;if(this.do_thumbnail){const{height:F,width:j}=M;$=Math.min(F,j)}else Number.isInteger(M)?($=M,k=this.config.max_size??$):M!==void 0&&($=M.shortest_edge,k=M.longest_edge);if($!==void 0||k!==void 0){const F=$===void 0?1:Math.max($/T,$/S),j=T*F,U=S*F,z=k===void 0?1:Math.min(k/j,k/U);let G=Math.floor(Number((j*z).toFixed(2))),H=Math.floor(Number((U*z).toFixed(2)));return this.size_divisibility!==void 0&&([G,H]=d([G,H],this.size_divisibility)),[G,H]}else if(M!==void 0&&M.width!==void 0&&M.height!==void 0){let F=M.width,j=M.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let U=j/S,z=F/T;Math.abs(1-z)<Math.abs(1-U)?U=z:z=U,j=u(U*S,this.config.ensure_multiple_of),F=u(z*T,this.config.ensure_multiple_of)}return[F,j]}else{if(this.size_divisibility!==void 0)return d([T,S],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const F=this.config.patch_size*this.config.merge_size;return g(S,T,F,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(M)}`)}}async resize(x){const[M,T]=this.get_resize_output_image_size(x,this.size);return await x.resize(M,T,{resample:this.resample})}async preprocess(x,{do_normalize:M=null,do_pad:T=null,do_convert_rgb:S=null,do_convert_grayscale:$=null,do_flip_channel_order:k=null}={}){this.do_crop_margin&&(x=await this.crop_margin(x));const[F,j]=x.size;if(S??this.do_convert_rgb?x=x.rgb():$&&(x=x.grayscale()),this.do_resize&&(x=await this.resize(x)),this.do_thumbnail&&(x=await this.thumbnail(x,this.size,this.resample)),this.do_center_crop){let W,Y;Number.isInteger(this.crop_size)?(W=this.crop_size,Y=this.crop_size):(W=this.crop_size.width,Y=this.crop_size.height),x=await x.center_crop(W,Y)}const U=[x.height,x.width];let z=Float32Array.from(x.data),G=[x.height,x.width,x.channels];if(this.do_rescale&&this.rescale(z),M??this.do_normalize){let W=this.image_mean;Array.isArray(this.image_mean)||(W=new Array(x.channels).fill(W));let Y=this.image_std;if(Array.isArray(this.image_std)||(Y=new Array(x.channels).fill(W)),W.length!==x.channels||Y.length!==x.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${W.length}) and \`image_std\` (${Y.length}) must match the number of channels in the image (${x.channels}).`);for(let te=0;te<z.length;te+=x.channels)for(let V=0;V<x.channels;++V)z[te+V]=(z[te+V]-W[V])/Y[V]}if(T??this.do_pad){if(this.pad_size)[z,G]=this.pad_image(z,[x.height,x.width,x.channels],this.pad_size);else if(this.size_divisibility){const[W,Y]=d([G[1],G[0]],this.size_divisibility);[z,G]=this.pad_image(z,G,{width:W,height:Y})}}if(k??this.do_flip_channel_order){if(G[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let W=0;W<z.length;W+=3){const Y=z[W];z[W]=z[W+2],z[W+2]=Y}}const H=new i.Tensor("float32",z,G).permute(2,0,1);return{original_size:[j,F],reshaped_input_size:U,pixel_values:H}}async _call(x,...M){Array.isArray(x)||(x=[x]);const T=await Promise.all(x.map($=>this.preprocess($)));return{pixel_values:(0,i.stack)(T.map($=>$.pixel_values),0),original_sizes:T.map($=>$.original_size),reshaped_input_sizes:T.map($=>$.reshaped_input_size)}}static async from_pretrained(x,M={}){const T=await(0,s.getModelJSON)(x,l.IMAGE_PROCESSOR_NAME,!0,M);return new this(T)}}},"./src/base/processing_utils.js":(e,t,r)=>{r.r(t),r.d(t,{Processor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/generic.js"),o=r("./src/utils/hub.js");class a extends i.Callable{constructor(l,u,d){super(),this.config=l,this.components=u,this.chat_template=d}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,u={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...u})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...u){for(const d of[this.image_processor,this.feature_extractor,this.tokenizer])if(d)return d(l,...u);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,u={}){const[d,c,f]=await Promise.all([this.uses_processor_config?(0,o.getModelJSON)(l,n.PROCESSOR_NAME,!0,u):{},Promise.all(this.classes.filter(p=>p in this).map(async p=>{const h=await this[p].from_pretrained(l,u);return[p.replace(/_class$/,""),h]})).then(Object.fromEntries),this.uses_chat_template_file?(0,o.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,u):null]);return new this(d,c,f)}}le(a,"classes",["image_processor_class","tokenizer_class","feature_extractor_class"]),le(a,"uses_processor_config",!1),le(a,"uses_chat_template_file",!1)},"./src/configs.js":(e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>d,PretrainedConfig:()=>u,getCacheShapes:()=>s});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js");async function o(c,f){return await(0,i.getModelJSON)(c,"config.json",!0,f)}function a(c){const f={};let p={};switch(c.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":p=a(c.text_config);break;case"moondream1":p=a(c.phi_config);break;case"musicgen":p=a(c.decoder);break;case"multi_modality":p=a(c.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":f.num_heads="num_attention_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size";break;case"llama":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size",f.num_attention_heads="num_attention_heads",f.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.dim_kv="head_dim";break;case"openelm":f.num_heads="num_kv_heads",f.num_layers="num_transformer_layers",f.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":f.num_heads="num_heads",f.num_layers="num_layers",f.hidden_size="hidden_size";break;case"bloom":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="hidden_size";break;case"mpt":f.num_heads="n_heads",f.num_layers="n_layers",f.hidden_size="d_model";break;case"exaone":f.num_heads="num_key_value_heads",f.num_layers="num_layers",f.dim_kv="head_dim",f.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":f.num_decoder_layers="num_decoder_layers",f.num_decoder_heads="num_heads",f.decoder_dim_kv="d_kv",f.num_encoder_layers="num_layers",f.num_encoder_heads="num_heads",f.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="d_model",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="d_model";break;case"speecht5":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="hidden_size",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="hidden_size";break;case"trocr":f.num_encoder_layers=f.num_decoder_layers="decoder_layers",f.num_encoder_heads=f.num_decoder_heads="decoder_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="d_model";break;case"musicgen_decoder":f.num_encoder_layers=f.num_decoder_layers="num_hidden_layers",f.num_encoder_heads=f.num_decoder_heads="num_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"moonshine":f.num_decoder_layers="decoder_num_hidden_layers",f.num_decoder_heads="decoder_num_key_value_heads",f.num_encoder_layers="encoder_num_hidden_layers",f.num_encoder_heads="encoder_num_key_value_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const m=a(c.decoder),v="num_decoder_layers"in m,g=(0,n.pick)(c,["model_type","is_encoder_decoder"]);return v?(g.num_decoder_layers=m.num_decoder_layers,g.num_decoder_heads=m.num_decoder_heads,g.decoder_hidden_size=m.decoder_hidden_size,g.num_encoder_layers=m.num_encoder_layers,g.num_encoder_heads=m.num_encoder_heads,g.encoder_hidden_size=m.encoder_hidden_size):(g.num_layers=m.num_layers,g.num_heads=m.num_heads,g.hidden_size=m.hidden_size),g}const h={...p,...(0,n.pick)(c,["model_type","multi_query","is_encoder_decoder"])};for(const m in f)h[m]=c[f[m]];return h}function s(c,f){if(c.model_type==="lfm2"){const p=(f==null?void 0:f.prefix)??"past_key_values",h=p==="present"?"present":"past",m={},{layer_types:v,num_attention_heads:g,num_key_value_heads:_,hidden_size:b,conv_L_cache:w}=c,y=b/g,x=(f==null?void 0:f.batch_size)??1;for(let M=0;M<v.length;++M)if(v[M]==="full_attention")for(const T of["key","value"])m[`${p}.${M}.${T}`]=[x,_,0,y];else if(v[M]==="conv")m[`${h}_conv.${M}`]=[x,b,w];else throw new Error(`Unsupported layer type: ${v[M]}`);return m}return l(c,f)}function l(c,{prefix:f="past_key_values",batch_size:p=1}={}){const h={},m=c.normalized_config;if(m.is_encoder_decoder&&"num_encoder_heads"in m&&"num_decoder_heads"in m){const v=m.encoder_dim_kv??m.encoder_hidden_size/m.num_encoder_heads,g=m.decoder_dim_kv??m.decoder_hidden_size/m.num_decoder_heads,_=[p,m.num_encoder_heads,0,v],b=[p,m.num_decoder_heads,0,g];for(let w=0;w<m.num_decoder_layers;++w)h[`${f}.${w}.encoder.key`]=_,h[`${f}.${w}.encoder.value`]=_,h[`${f}.${w}.decoder.key`]=b,h[`${f}.${w}.decoder.value`]=b}else{const v=m.num_heads,g=m.num_layers,_=m.dim_kv??m.hidden_size/(m.num_attention_heads??v);if(m.model_type==="falcon"){const b=[p*v,0,_];for(let w=0;w<g;++w)h[`${f}.${w}.key`]=b,h[`${f}.${w}.value`]=b}else if(m.multi_query){const b=[p*v,0,2*_];for(let w=0;w<g;++w)h[`${f}.${w}.key_value`]=b}else if(m.model_type==="bloom"){const b=[p*v,_,0],w=[p*v,0,_];for(let y=0;y<g;++y)h[`${f}.${y}.key`]=b,h[`${f}.${y}.value`]=w}else if(m.model_type==="openelm")for(let b=0;b<g;++b){const w=[p,v[b],0,_];h[`${f}.${b}.key`]=w,h[`${f}.${b}.value`]=w}else{const b=[p,v,0,_];for(let w=0;w<g;++w)h[`${f}.${w}.key`]=b,h[`${f}.${w}.value`]=b}}return h}class u{constructor(f){le(this,"model_type",null);le(this,"is_encoder_decoder",!1);le(this,"max_position_embeddings");le(this,"transformers.js_config");Object.assign(this,f),this.normalized_config=a(this)}static async from_pretrained(f,{progress_callback:p=null,config:h=null,cache_dir:m=null,local_files_only:v=!1,revision:g="main"}={}){h&&!(h instanceof u)&&(h=new u(h));const _=h??await o(f,{progress_callback:p,config:h,cache_dir:m,local_files_only:v,revision:g});return new this(_)}}class d{static async from_pretrained(...f){return u.from_pretrained(...f)}}},"./src/env.js":(e,t,r)=>{var S,$;r.r(t),r.d(t,{apis:()=>g,env:()=>M});var n=r("?db59"),i=r("?383f"),o=r("?fa4b");const a="3.7.0",s=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes((S=self.constructor)==null?void 0:S.name),u=typeof self<"u"&&"caches"in self,d=typeof navigator<"u"&&"gpu"in navigator,c=typeof navigator<"u"&&"ml"in navigator,f=typeof process<"u",p=f&&(($=process==null?void 0:process.release)==null?void 0:$.name)==="node",h=!T(n),m=!T(i),v=typeof globalThis.Deno<"u",g=Object.freeze({IS_BROWSER_ENV:s,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:u,IS_WEBGPU_AVAILABLE:d,IS_WEBNN_AVAILABLE:c,IS_PROCESS_AVAILABLE:f,IS_NODE_ENV:p,IS_FS_AVAILABLE:h,IS_PATH_AVAILABLE:m}),_=h&&m;let b="./";if(_){const k=Object(import.meta).url;k?b=i.dirname(i.dirname(o.fileURLToPath(k))):typeof __dirname<"u"&&(b=i.dirname(__dirname))}const w=_?i.join(b,"/.cache/"):null,y="/models/",x=_?i.join(b,y):y,M={version:a,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(s||l),localModelPath:x,useFS:h,useBrowserCache:u&&!v,useFSCache:h,cacheDir:w,useCustomCache:!1,customCache:null};function T(k){return Object.keys(k).length===0}},"./src/generation/configuration_utils.js":(e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>i});var n=r("./src/utils/core.js");class i{constructor(a){le(this,"max_length",20);le(this,"max_new_tokens",null);le(this,"min_length",0);le(this,"min_new_tokens",null);le(this,"early_stopping",!1);le(this,"max_time",null);le(this,"do_sample",!1);le(this,"num_beams",1);le(this,"num_beam_groups",1);le(this,"penalty_alpha",null);le(this,"use_cache",!0);le(this,"temperature",1);le(this,"top_k",50);le(this,"top_p",1);le(this,"typical_p",1);le(this,"epsilon_cutoff",0);le(this,"eta_cutoff",0);le(this,"diversity_penalty",0);le(this,"repetition_penalty",1);le(this,"encoder_repetition_penalty",1);le(this,"length_penalty",1);le(this,"no_repeat_ngram_size",0);le(this,"bad_words_ids",null);le(this,"force_words_ids",null);le(this,"renormalize_logits",!1);le(this,"constraints",null);le(this,"forced_bos_token_id",null);le(this,"forced_eos_token_id",null);le(this,"remove_invalid_values",!1);le(this,"exponential_decay_length_penalty",null);le(this,"suppress_tokens",null);le(this,"streamer",null);le(this,"begin_suppress_tokens",null);le(this,"forced_decoder_ids",null);le(this,"guidance_scale",null);le(this,"num_return_sequences",1);le(this,"output_attentions",!1);le(this,"output_hidden_states",!1);le(this,"output_scores",!1);le(this,"return_dict_in_generate",!1);le(this,"pad_token_id",null);le(this,"bos_token_id",null);le(this,"eos_token_id",null);le(this,"encoder_no_repeat_ngram_size",0);le(this,"decoder_start_token_id",null);le(this,"generation_kwargs",{});Object.assign(this,(0,n.pick)(a,Object.getOwnPropertyNames(this)))}}},"./src/generation/logits_process.js":(e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>g,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>u,LogitsProcessor:()=>o,LogitsProcessorList:()=>s,LogitsWarper:()=>a,MinLengthLogitsProcessor:()=>h,MinNewTokensLengthLogitsProcessor:()=>m,NoBadWordsLogitsProcessor:()=>v,NoRepeatNGramLogitsProcessor:()=>f,RepetitionPenaltyLogitsProcessor:()=>p,SuppressTokensAtBeginLogitsProcessor:()=>d,TemperatureLogitsWarper:()=>_,TopKLogitsWarper:()=>w,TopPLogitsWarper:()=>b,WhisperTimeStampLogitsProcessor:()=>c});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var i=r("./src/utils/maths.js");class o extends n.Callable{_call(x,M){throw Error("`_call` should be implemented in a subclass")}}class a extends n.Callable{_call(x,M){throw Error("`_call` should be implemented in a subclass")}}class s extends n.Callable{constructor(){super(),this.processors=[]}push(x){this.processors.push(x)}extend(x){this.processors.push(...x)}_call(x,M){let T=M;for(const S of this.processors)T=S(x,T);return T}[Symbol.iterator](){return this.processors.values()}}class l extends o{constructor(x){super(),this.bos_token_id=x}_call(x,M){for(let T=0;T<x.length;++T)if(x[T].length===1){const S=M[T].data;S.fill(-1/0),S[this.bos_token_id]=0}return M}}class u extends o{constructor(x,M){super(),this.max_length=x,this.eos_token_id=Array.isArray(M)?M:[M]}_call(x,M){for(let T=0;T<x.length;++T)if(x[T].length===this.max_length-1){const S=M[T].data;S.fill(-1/0);for(const $ of this.eos_token_id)S[$]=0}return M}}class d extends o{constructor(x,M){super(),this.begin_suppress_tokens=x,this.begin_index=M}_call(x,M){for(let T=0;T<x.length;++T)if(x[T].length===this.begin_index){const S=M[T].data;for(const $ of this.begin_suppress_tokens)S[$]=-1/0}return M}}class c extends o{constructor(x,M){super(),this.eos_token_id=Array.isArray(x.eos_token_id)?x.eos_token_id[0]:x.eos_token_id,this.no_timestamps_token_id=x.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=M.length,M.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=x.max_initial_timestamp_index}_call(x,M){for(let T=0;T<x.length;++T){const S=M[T].data;if(S[this.no_timestamps_token_id]=-1/0,x[T].length===this.begin_index-1){S.fill(-1/0),S[this.timestamp_begin]=0;continue}const $=x[T].slice(this.begin_index),k=$.length>=1&&$[$.length-1]>=this.timestamp_begin,F=$.length<2||$[$.length-2]>=this.timestamp_begin;if(k&&(F?S.subarray(this.timestamp_begin).fill(-1/0):S.subarray(0,this.eos_token_id).fill(-1/0)),x[T].length===this.begin_index&&this.max_initial_timestamp_index!==null){const G=this.timestamp_begin+this.max_initial_timestamp_index;S.subarray(G+1).fill(-1/0)}const j=(0,i.log_softmax)(S),U=Math.log(j.subarray(this.timestamp_begin).map(Math.exp).reduce((G,H)=>G+H)),z=(0,i.max)(j.subarray(0,this.timestamp_begin))[0];U>z&&S.subarray(0,this.timestamp_begin).fill(-1/0)}return M}}class f extends o{constructor(x){super(),this.no_repeat_ngram_size=x}getNgrams(x){const M=x.length,T=[];for(let $=0;$<M+1-this.no_repeat_ngram_size;++$){const k=[];for(let F=0;F<this.no_repeat_ngram_size;++F)k.push(x[$+F]);T.push(k.map(Number))}const S=new Map;for(const $ of T){const k=$.slice(0,$.length-1),F=JSON.stringify(k),j=S.get(F)??[];j.push($[$.length-1]),S.set(F,j)}return S}getGeneratedNgrams(x,M){const T=M.slice(M.length+1-this.no_repeat_ngram_size,M.length);return x.get(JSON.stringify(T.map(Number)))??[]}calcBannedNgramTokens(x){const M=[];if(x.length+1<this.no_repeat_ngram_size)return M;{const T=this.getNgrams(x);return this.getGeneratedNgrams(T,x)}}_call(x,M){for(let T=0;T<x.length;++T){const S=M[T].data,$=this.calcBannedNgramTokens(x[T]);for(const k of $)S[k]=-1/0}return M}}class p extends o{constructor(x){super(),this.penalty=x}_call(x,M){for(let T=0;T<x.length;++T){const S=M[T].data;for(const $ of new Set(x[T])){const k=Number($);S[k]<0?S[k]*=this.penalty:S[k]/=this.penalty}}return M}}class h extends o{constructor(x,M){super(),this.min_length=x,this.eos_token_id=Array.isArray(M)?M:[M]}_call(x,M){for(let T=0;T<x.length;++T)if(x[T].length<this.min_length){const S=M[T].data;for(const $ of this.eos_token_id)S[$]=-1/0}return M}}class m extends o{constructor(x,M,T){super(),this.prompt_length_to_skip=x,this.min_new_tokens=M,this.eos_token_id=Array.isArray(T)?T:[T]}_call(x,M){for(let T=0;T<x.length;++T)if(x[T].length-this.prompt_length_to_skip<this.min_new_tokens){const $=M[T].data;for(const k of this.eos_token_id)$[k]=-1/0}return M}}class v extends o{constructor(x,M){super(),this.bad_words_ids=x,this.eos_token_id=Array.isArray(M)?M:[M]}_call(x,M){for(let T=0;T<x.length;++T){const S=M[T].data,$=x[T];for(const k of this.bad_words_ids){if($.length<k.length-1)continue;let F=!0;for(let j=1;j<=k.length-1;++j)if(k.at(-j-1)!=$.at(-j)){F=!1;break}F&&(S[k.at(-1)]=-1/0)}}return M}}class g extends o{constructor(x){if(super(),x<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${x}.`);this.guidance_scale=x}_call(x,M){if(M.dims[0]!==2*x.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${M.dims[0]} for the logits and ${x.length} for the input ids.`);const T=x.length,S=M.slice([0,T],null),$=M.slice([T,M.dims[0]],null);for(let k=0;k<$.data.length;++k)$.data[k]+=(S.data[k]-$.data[k])*this.guidance_scale;return $}}class _ extends a{constructor(x){super(),this.temperature=x}_call(x,M){const T=M.data;for(let S=0;S<T.length;++S)T[S]/=this.temperature;return M}}class b extends a{constructor(x,{filter_value:M=-1/0,min_tokens_to_keep:T=1}={}){if(super(),x<0||x>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${x}`);if(!Number.isInteger(T)||T<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${T}`);this.top_p=x,this.filter_value=M,this.min_tokens_to_keep=T}}class w extends a{constructor(x,{filter_value:M=-1/0,min_tokens_to_keep:T=1}={}){if(super(),!Number.isInteger(x)||x<0)throw new Error(`\`top_k\` must be a positive integer, but is ${x}`);this.top_k=Math.max(x,T),this.filter_value=M}}},"./src/generation/logits_sampler.js":(e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>a});var n=r("./src/utils/generic.js"),i=r("./src/utils/tensor.js"),o=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class a extends n.Callable{constructor(c){super(),this.generation_config=c}async _call(c){return this.sample(c)}async sample(c){throw Error("sample should be implemented in subclasses.")}getLogits(c,f){let p=c.dims.at(-1),h=c.data;if(f===-1)h=h.slice(-p);else{let m=f*p;h=h.slice(m,m+p)}return h}randomSelect(c){let f=0;for(let h=0;h<c.length;++h)f+=c[h];let p=Math.random()*f;for(let h=0;h<c.length;++h)if(p-=c[h],p<=0)return h;return 0}static getSampler(c){if(c.do_sample)return new l(c);if(c.num_beams>1)return new u(c);if(c.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${c.num_return_sequences}.`);return new s(c)}}class s extends a{async sample(c){const f=(0,o.max)(c.data)[1];return[[BigInt(f),0]]}}class l extends a{async sample(c){let f=c.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,h]=await(0,i.topk)(c,f),m=(0,o.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},()=>{const v=this.randomSelect(m);return[h.data[v],Math.log(m[v])]})}}class u extends a{async sample(c){let f=c.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,h]=await(0,i.topk)(c,f),m=(0,o.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},(v,g)=>[h.data[g],Math.log(m[g])])}}},"./src/generation/stopping_criteria.js":(e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>s,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>a,StoppingCriteria:()=>i,StoppingCriteriaList:()=>o});var n=r("./src/utils/generic.js");class i extends n.Callable{_call(d,c){throw Error("StoppingCriteria needs to be subclassed")}}class o extends n.Callable{constructor(){super(),this.criteria=[]}push(d){this.criteria.push(d)}extend(d){d instanceof o?d=d.criteria:d instanceof i&&(d=[d]),this.criteria.push(...d)}_call(d,c){const f=new Array(d.length).fill(!1);for(const p of this.criteria){const h=p(d,c);for(let m=0;m<f.length;++m)f[m]||(f[m]=h[m])}return f}[Symbol.iterator](){return this.criteria.values()}}class a extends i{constructor(d,c=null){super(),this.max_length=d,this.max_position_embeddings=c}_call(d){return d.map(c=>c.length>=this.max_length)}}class s extends i{constructor(d){super(),Array.isArray(d)||(d=[d]),this.eos_token_id=d}_call(d,c){return d.map(f=>{const p=f.at(-1);return this.eos_token_id.some(h=>p==h)})}}class l extends i{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(d,c){return new Array(d.length).fill(this.interrupted)}}},"./src/generation/streamers.js":(e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>a,TextStreamer:()=>l,WhisperTextStreamer:()=>u});var n=r("./src/utils/core.js"),i=r("./src/tokenizers.js"),o=r("./src/env.js");class a{put(c){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const s=o.apis.IS_PROCESS_AVAILABLE?d=>process.stdout.write(d):d=>console.log(d);class l extends a{constructor(c,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:h=null,skip_special_tokens:m=!0,decode_kwargs:v={},...g}={}){super(),this.tokenizer=c,this.skip_prompt=f,this.callback_function=p??s,this.token_callback_function=h,this.decode_kwargs={skip_special_tokens:m,...v,...g},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(c){var v;if(c.length>1)throw Error("TextStreamer only supports batch size of 1");const f=this.next_tokens_are_prompt;if(f&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const p=c[0];(v=this.token_callback_function)==null||v.call(this,p),this.token_cache=(0,n.mergeArrays)(this.token_cache,p);const h=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let m;f||h.endsWith(`
`)?(m=h.slice(this.print_len),this.token_cache=[],this.print_len=0):h.length>0&&(0,i.is_chinese_char)(h.charCodeAt(h.length-1))?(m=h.slice(this.print_len),this.print_len+=m.length):(m=h.slice(this.print_len,h.lastIndexOf(" ")+1),this.print_len+=m.length),this.on_finalized_text(m,!1)}end(){let c;this.token_cache.length>0?(c=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):c="",this.next_tokens_are_prompt=!0,this.on_finalized_text(c,!0)}on_finalized_text(c,f){var p,h;c.length>0&&((p=this.callback_function)==null||p.call(this,c)),f&&this.callback_function===s&&o.apis.IS_PROCESS_AVAILABLE&&((h=this.callback_function)==null||h.call(this,`
`))}}class u extends l{constructor(c,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:h=null,on_chunk_start:m=null,on_chunk_end:v=null,on_finalize:g=null,time_precision:_=.02,skip_special_tokens:b=!0,decode_kwargs:w={}}={}){super(c,{skip_prompt:f,skip_special_tokens:b,callback_function:p,token_callback_function:h,decode_kwargs:w}),this.timestamp_begin=c.timestamp_begin,this.on_chunk_start=m,this.on_chunk_end=v,this.on_finalize=g,this.time_precision=_,this.waiting_for_timestamp=!1}put(c){var p,h,m;if(c.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const f=c[0];if(f.length===1){const v=Number(f[0])-this.timestamp_begin;if(v>=0){const g=v*this.time_precision;this.waiting_for_timestamp?(p=this.on_chunk_end)==null||p.call(this,g):(h=this.on_chunk_start)==null||h.call(this,g),this.waiting_for_timestamp=!this.waiting_for_timestamp,(m=this.token_callback_function)==null||m.call(this,f);return}}return super.put(c)}end(){var c;super.end(),(c=this.on_finalize)==null||c.call(this)}}},"./src/models.js":(e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>Ef,ASTModel:()=>Bm,ASTPreTrainedModel:()=>Pf,AlbertForMaskedLM:()=>At,AlbertForQuestionAnswering:()=>ct,AlbertForSequenceClassification:()=>et,AlbertModel:()=>it,AlbertPreTrainedModel:()=>Ke,AutoModel:()=>mw,AutoModelForAudioClassification:()=>Nk,AutoModelForAudioFrameClassification:()=>zk,AutoModelForAudioTextToText:()=>Xk,AutoModelForCTC:()=>Lk,AutoModelForCausalLM:()=>Ek,AutoModelForDepthEstimation:()=>Vk,AutoModelForDocumentQuestionAnswering:()=>Bk,AutoModelForImageClassification:()=>Ak,AutoModelForImageFeatureExtraction:()=>Kk,AutoModelForImageMatting:()=>Uk,AutoModelForImageSegmentation:()=>Ok,AutoModelForImageTextToText:()=>qk,AutoModelForImageToImage:()=>Wk,AutoModelForMaskGeneration:()=>Fk,AutoModelForMaskedLM:()=>Sk,AutoModelForNormalEstimation:()=>Gk,AutoModelForObjectDetection:()=>Dk,AutoModelForPoseEstimation:()=>Hk,AutoModelForQuestionAnswering:()=>Ck,AutoModelForSemanticSegmentation:()=>kk,AutoModelForSeq2SeqLM:()=>xk,AutoModelForSequenceClassification:()=>bk,AutoModelForSpeechSeq2Seq:()=>Mk,AutoModelForTextToSpectrogram:()=>Tk,AutoModelForTextToWaveform:()=>Pk,AutoModelForTokenClassification:()=>wk,AutoModelForUniversalSegmentation:()=>Ik,AutoModelForVision2Seq:()=>$k,AutoModelForXVector:()=>Rk,AutoModelForZeroShotObjectDetection:()=>jk,BartForConditionalGeneration:()=>yn,BartForSequenceClassification:()=>fi,BartModel:()=>Ar,BartPretrainedModel:()=>Ei,BaseModelOutput:()=>Ae,BeitForImageClassification:()=>e2,BeitModel:()=>J$,BeitPreTrainedModel:()=>Ab,BertForMaskedLM:()=>$e,BertForQuestionAnswering:()=>ze,BertForSequenceClassification:()=>Me,BertForTokenClassification:()=>je,BertModel:()=>we,BertPreTrainedModel:()=>Ee,BlenderbotForConditionalGeneration:()=>Ur,BlenderbotModel:()=>fn,BlenderbotPreTrainedModel:()=>Xr,BlenderbotSmallForConditionalGeneration:()=>ac,BlenderbotSmallModel:()=>ns,BlenderbotSmallPreTrainedModel:()=>pi,BloomForCausalLM:()=>x$,BloomModel:()=>w$,BloomPreTrainedModel:()=>vb,CLIPModel:()=>Of,CLIPPreTrainedModel:()=>qo,CLIPSegForImageSegmentation:()=>fc,CLIPSegModel:()=>Gl,CLIPSegPreTrainedModel:()=>zi,CLIPTextModel:()=>Zm,CLIPTextModelWithProjection:()=>kf,CLIPVisionModel:()=>Jm,CLIPVisionModelWithProjection:()=>If,CamembertForMaskedLM:()=>Mt,CamembertForQuestionAnswering:()=>ir,CamembertForSequenceClassification:()=>jt,CamembertForTokenClassification:()=>ft,CamembertModel:()=>Ct,CamembertPreTrainedModel:()=>dt,CausalLMOutput:()=>Xl,CausalLMOutputWithPast:()=>O7,ChineseCLIPModel:()=>xt,ChineseCLIPPreTrainedModel:()=>Wl,ClapAudioModelWithProjection:()=>rO,ClapModel:()=>eO,ClapPreTrainedModel:()=>lg,ClapTextModelWithProjection:()=>tO,CodeGenForCausalLM:()=>ee,CodeGenModel:()=>X,CodeGenPreTrainedModel:()=>B,CohereForCausalLM:()=>r$,CohereModel:()=>t$,CoherePreTrainedModel:()=>ub,ConvBertForMaskedLM:()=>Zt,ConvBertForQuestionAnswering:()=>D,ConvBertForSequenceClassification:()=>pt,ConvBertForTokenClassification:()=>Xt,ConvBertModel:()=>St,ConvBertPreTrainedModel:()=>bt,ConvNextForImageClassification:()=>q2,ConvNextModel:()=>K2,ConvNextPreTrainedModel:()=>Gb,ConvNextV2ForImageClassification:()=>Q2,ConvNextV2Model:()=>X2,ConvNextV2PreTrainedModel:()=>Hb,DFineForObjectDetection:()=>p2,DFineModel:()=>f2,DFinePreTrainedModel:()=>Fb,DPTForDepthEstimation:()=>$2,DPTModel:()=>C2,DPTPreTrainedModel:()=>Ub,DacDecoderModel:()=>VO,DacDecoderOutput:()=>BO,DacEncoderModel:()=>WO,DacEncoderOutput:()=>zO,DacModel:()=>UO,DacPreTrainedModel:()=>mg,DebertaForMaskedLM:()=>Ti,DebertaForQuestionAnswering:()=>kn,DebertaForSequenceClassification:()=>zr,DebertaForTokenClassification:()=>On,DebertaModel:()=>si,DebertaPreTrainedModel:()=>lr,DebertaV2ForMaskedLM:()=>In,DebertaV2ForQuestionAnswering:()=>ui,DebertaV2ForSequenceClassification:()=>Ea,DebertaV2ForTokenClassification:()=>Sa,DebertaV2Model:()=>bo,DebertaV2PreTrainedModel:()=>li,DecisionTransformerModel:()=>MO,DecisionTransformerPreTrainedModel:()=>xO,DeiTForImageClassification:()=>v2,DeiTModel:()=>_2,DeiTPreTrainedModel:()=>Nb,DepthAnythingForDepthEstimation:()=>O2,DepthAnythingPreTrainedModel:()=>A2,DepthProForDepthEstimation:()=>F2,DepthProPreTrainedModel:()=>j2,DetrForObjectDetection:()=>r2,DetrForSegmentation:()=>Ob,DetrModel:()=>t2,DetrObjectDetectionOutput:()=>kb,DetrPreTrainedModel:()=>rg,DetrSegmentationOutput:()=>n2,Dinov2ForImageClassification:()=>Z2,Dinov2Model:()=>Y2,Dinov2PreTrainedModel:()=>Kb,Dinov2WithRegistersForImageClassification:()=>eA,Dinov2WithRegistersModel:()=>J2,Dinov2WithRegistersPreTrainedModel:()=>qb,DistilBertForMaskedLM:()=>gn,DistilBertForQuestionAnswering:()=>dn,DistilBertForSequenceClassification:()=>Hn,DistilBertForTokenClassification:()=>Vo,DistilBertModel:()=>Ri,DistilBertPreTrainedModel:()=>ci,DonutSwinModel:()=>H2,DonutSwinPreTrainedModel:()=>G2,EfficientNetForImageClassification:()=>uO,EfficientNetModel:()=>lO,EfficientNetPreTrainedModel:()=>ow,ElectraForMaskedLM:()=>oe,ElectraForQuestionAnswering:()=>Re,ElectraForSequenceClassification:()=>ce,ElectraForTokenClassification:()=>Se,ElectraModel:()=>Q,ElectraPreTrainedModel:()=>se,Ernie4_5_ForCausalLM:()=>XA,Ernie4_5_Model:()=>qA,Ernie4_5_PretrainedModel:()=>ew,EsmForMaskedLM:()=>di,EsmForSequenceClassification:()=>Ge,EsmForTokenClassification:()=>He,EsmModel:()=>es,EsmPreTrainedModel:()=>Pi,ExaoneForCausalLM:()=>HC,ExaoneModel:()=>GC,ExaonePreTrainedModel:()=>ib,FalconForCausalLM:()=>JA,FalconModel:()=>ZA,FalconPreTrainedModel:()=>rw,FastViTForImageClassification:()=>U$,FastViTModel:()=>B$,FastViTPreTrainedModel:()=>Pb,Florence2ForConditionalGeneration:()=>Hm,Florence2PreTrainedModel:()=>Gm,GLPNForDepthEstimation:()=>V2,GLPNModel:()=>W2,GLPNPreTrainedModel:()=>Vb,GPT2LMHeadModel:()=>Rf,GPT2Model:()=>Nf,GPT2PreTrainedModel:()=>pc,GPTBigCodeForCausalLM:()=>A,GPTBigCodeModel:()=>P,GPTBigCodePreTrainedModel:()=>_c,GPTJForCausalLM:()=>Gf,GPTJModel:()=>Vf,GPTJPreTrainedModel:()=>gc,GPTNeoForCausalLM:()=>mc,GPTNeoModel:()=>Kl,GPTNeoPreTrainedModel:()=>hc,GPTNeoXForCausalLM:()=>Wf,GPTNeoXModel:()=>Uf,GPTNeoXPreTrainedModel:()=>ql,Gemma2ForCausalLM:()=>a$,Gemma2Model:()=>o$,Gemma2PreTrainedModel:()=>db,Gemma3ForCausalLM:()=>l$,Gemma3Model:()=>s$,Gemma3PreTrainedModel:()=>fb,Gemma3nForConditionalGeneration:()=>Us,Gemma3nPreTrainedModel:()=>Qm,GemmaForCausalLM:()=>i$,GemmaModel:()=>n$,GemmaPreTrainedModel:()=>cb,GlmForCausalLM:()=>VC,GlmModel:()=>WC,GlmPreTrainedModel:()=>nb,GraniteForCausalLM:()=>e$,GraniteModel:()=>JC,GranitePreTrainedModel:()=>lb,GroundingDinoForObjectDetection:()=>rA,GroundingDinoPreTrainedModel:()=>tA,GroupViTModel:()=>z$,GroupViTPreTrainedModel:()=>R$,HeliumForCausalLM:()=>UC,HeliumModel:()=>tg,HeliumPreTrainedModel:()=>Ca,HieraForImageClassification:()=>b2,HieraModel:()=>y2,HieraPreTrainedModel:()=>Rb,HubertForCTC:()=>kA,HubertForSequenceClassification:()=>IA,HubertModel:()=>OA,HubertPreTrainedModel:()=>_7,IJepaForImageClassification:()=>A$,IJepaModel:()=>$$,IJepaPreTrainedModel:()=>xb,Idefics3ForConditionalGeneration:()=>Bl,Idefics3PreTrainedModel:()=>Ws,ImageMattingOutput:()=>Yk,JAISLMHeadModel:()=>Bf,JAISModel:()=>zf,JAISPreTrainedModel:()=>Hl,JinaCLIPModel:()=>Ff,JinaCLIPPreTrainedModel:()=>dc,JinaCLIPTextModel:()=>Lf,JinaCLIPVisionModel:()=>Vl,Lfm2ForCausalLM:()=>Ft,Lfm2Model:()=>ht,Lfm2PreTrainedModel:()=>nt,LiteWhisperForConditionalGeneration:()=>Cf,LlamaForCausalLM:()=>We,LlamaModel:()=>Ie,LlamaPreTrainedModel:()=>me,LlavaForConditionalGeneration:()=>uc,LlavaOnevisionForConditionalGeneration:()=>Wm,LlavaPreTrainedModel:()=>lc,LlavaQwen2ForCausalLM:()=>Xm,LongT5ForConditionalGeneration:()=>xn,LongT5Model:()=>_n,LongT5PreTrainedModel:()=>fr,M2M100ForConditionalGeneration:()=>fA,M2M100Model:()=>dA,M2M100PreTrainedModel:()=>Yb,MBartForCausalLM:()=>tn,MBartForConditionalGeneration:()=>Dn,MBartForSequenceClassification:()=>wo,MBartModel:()=>Ko,MBartPreTrainedModel:()=>ti,MPNetForMaskedLM:()=>Nl,MPNetForQuestionAnswering:()=>R,MPNetForSequenceClassification:()=>Rl,MPNetForTokenClassification:()=>ye,MPNetModel:()=>Ll,MPNetPreTrainedModel:()=>Ho,MT5ForConditionalGeneration:()=>Kn,MT5Model:()=>vn,MT5PreTrainedModel:()=>qr,MarianMTModel:()=>cA,MarianModel:()=>uA,MarianPreTrainedModel:()=>Qb,MaskFormerForInstanceSegmentation:()=>U2,MaskFormerModel:()=>B2,MaskFormerPreTrainedModel:()=>Wb,MaskedLMOutput:()=>jn,Metric3DForDepthEstimation:()=>N2,Metric3DPreTrainedModel:()=>L2,Metric3Dv2ForDepthEstimation:()=>z2,Metric3Dv2PreTrainedModel:()=>R2,MgpstrForSceneTextRecognition:()=>CO,MgpstrModelOutput:()=>EO,MgpstrPreTrainedModel:()=>SO,MimiDecoderModel:()=>RO,MimiDecoderOutput:()=>FO,MimiEncoderModel:()=>NO,MimiEncoderOutput:()=>jO,MimiModel:()=>LO,MimiPreTrainedModel:()=>hg,MistralForCausalLM:()=>KA,MistralModel:()=>HA,MistralPreTrainedModel:()=>Jb,MobileBertForMaskedLM:()=>ts,MobileBertForQuestionAnswering:()=>rs,MobileBertForSequenceClassification:()=>Go,MobileBertModel:()=>Mr,MobileBertPreTrainedModel:()=>ut,MobileLLMForCausalLM:()=>qC,MobileLLMModel:()=>KC,MobileLLMPreTrainedModel:()=>ob,MobileNetV1ForImageClassification:()=>dO,MobileNetV1ForSemanticSegmentation:()=>fO,MobileNetV1Model:()=>cO,MobileNetV1PreTrainedModel:()=>cg,MobileNetV2ForImageClassification:()=>hO,MobileNetV2ForSemanticSegmentation:()=>mO,MobileNetV2Model:()=>pO,MobileNetV2PreTrainedModel:()=>dg,MobileNetV3ForImageClassification:()=>_O,MobileNetV3ForSemanticSegmentation:()=>vO,MobileNetV3Model:()=>gO,MobileNetV3PreTrainedModel:()=>fg,MobileNetV4ForImageClassification:()=>bO,MobileNetV4ForSemanticSegmentation:()=>wO,MobileNetV4Model:()=>yO,MobileNetV4PreTrainedModel:()=>pg,MobileViTForImageClassification:()=>H$,MobileViTModel:()=>G$,MobileViTPreTrainedModel:()=>Eb,MobileViTV2ForImageClassification:()=>q$,MobileViTV2Model:()=>K$,MobileViTV2PreTrainedModel:()=>Sb,ModelOutput:()=>ve,ModernBertDecoderForCausalLM:()=>un,ModernBertDecoderModel:()=>$r,ModernBertDecoderPreTrainedModel:()=>Pt,ModernBertForMaskedLM:()=>lt,ModernBertForSequenceClassification:()=>Ut,ModernBertForTokenClassification:()=>Nt,ModernBertModel:()=>ot,ModernBertPreTrainedModel:()=>Ue,Moondream1ForConditionalGeneration:()=>Vm,MoonshineForConditionalGeneration:()=>Um,MoonshineModel:()=>rb,MoonshinePreTrainedModel:()=>$f,MptForCausalLM:()=>T$,MptModel:()=>M$,MptPreTrainedModel:()=>yb,MultiModalityCausalLM:()=>PO,MultiModalityPreTrainedModel:()=>TO,MusicgenForCausalLM:()=>w7,MusicgenForConditionalGeneration:()=>sw,MusicgenModel:()=>b7,MusicgenPreTrainedModel:()=>aw,NeoBertForMaskedLM:()=>st,NeoBertForQuestionAnswering:()=>Je,NeoBertForSequenceClassification:()=>Ye,NeoBertForTokenClassification:()=>rt,NeoBertModel:()=>Ce,NeoBertPreTrainedModel:()=>Xe,NomicBertModel:()=>Ni,NomicBertPreTrainedModel:()=>en,OPTForCausalLM:()=>E$,OPTModel:()=>P$,OPTPreTrainedModel:()=>bb,Olmo2ForCausalLM:()=>ZC,Olmo2Model:()=>YC,Olmo2PreTrainedModel:()=>sb,OlmoForCausalLM:()=>QC,OlmoModel:()=>XC,OlmoPreTrainedModel:()=>ab,OpenELMForCausalLM:()=>c$,OpenELMModel:()=>u$,OpenELMPreTrainedModel:()=>pb,OwlViTForObjectDetection:()=>Q$,OwlViTModel:()=>X$,OwlViTPreTrainedModel:()=>Cb,Owlv2ForObjectDetection:()=>Z$,Owlv2Model:()=>Y$,Owlv2PreTrainedModel:()=>$b,PaliGemmaForConditionalGeneration:()=>qm,PaliGemmaPreTrainedModel:()=>Km,PatchTSMixerForPrediction:()=>kO,PatchTSMixerModel:()=>OO,PatchTSMixerPreTrainedModel:()=>uw,PatchTSTForPrediction:()=>AO,PatchTSTModel:()=>$O,PatchTSTPreTrainedModel:()=>lw,Phi3ForCausalLM:()=>b$,Phi3Model:()=>y$,Phi3PreTrainedModel:()=>_b,Phi3VForCausalLM:()=>Ul,Phi3VPreTrainedModel:()=>Ym,PhiForCausalLM:()=>v$,PhiModel:()=>_$,PhiPreTrainedModel:()=>gb,PreTrainedModel:()=>Z,PretrainedMixin:()=>ar,PvtForImageClassification:()=>D$,PvtModel:()=>I$,PvtPreTrainedModel:()=>Mb,PyAnnoteForAudioFrameClassification:()=>vA,PyAnnoteModel:()=>_A,PyAnnotePreTrainedModel:()=>Zb,QuestionAnsweringModelOutput:()=>ri,Qwen2ForCausalLM:()=>f$,Qwen2Model:()=>d$,Qwen2PreTrainedModel:()=>hb,Qwen2VLForConditionalGeneration:()=>g$,Qwen2VLPreTrainedModel:()=>m$,Qwen3ForCausalLM:()=>h$,Qwen3Model:()=>p$,Qwen3PreTrainedModel:()=>mb,RFDetrForObjectDetection:()=>c2,RFDetrModel:()=>u2,RFDetrObjectDetectionOutput:()=>d2,RFDetrPreTrainedModel:()=>jb,RTDetrForObjectDetection:()=>o2,RTDetrModel:()=>i2,RTDetrObjectDetectionOutput:()=>Hf,RTDetrPreTrainedModel:()=>Ib,RTDetrV2ForObjectDetection:()=>s2,RTDetrV2Model:()=>a2,RTDetrV2ObjectDetectionOutput:()=>l2,RTDetrV2PreTrainedModel:()=>Db,ResNetForImageClassification:()=>x2,ResNetModel:()=>w2,ResNetPreTrainedModel:()=>zb,RoFormerForMaskedLM:()=>Wo,RoFormerForQuestionAnswering:()=>ei,RoFormerForSequenceClassification:()=>Pa,RoFormerForTokenClassification:()=>yo,RoFormerModel:()=>cn,RoFormerPreTrainedModel:()=>vr,RobertaForMaskedLM:()=>wf,RobertaForQuestionAnswering:()=>Im,RobertaForSequenceClassification:()=>Om,RobertaForTokenClassification:()=>km,RobertaModel:()=>Am,RobertaPreTrainedModel:()=>Ns,SamImageSegmentationOutput:()=>lA,SamModel:()=>sA,SamPreTrainedModel:()=>aA,SapiensForDepthEstimation:()=>I2,SapiensForNormalEstimation:()=>D2,SapiensForSemanticSegmentation:()=>k2,SapiensPreTrainedModel:()=>ig,SegformerForImageClassification:()=>iO,SegformerForSemanticSegmentation:()=>oO,SegformerModel:()=>y7,SegformerPreTrainedModel:()=>ug,Seq2SeqLMOutput:()=>A7,SequenceClassifierOutput:()=>Lt,SiglipModel:()=>eg,SiglipPreTrainedModel:()=>cc,SiglipTextModel:()=>Df,SiglipVisionModel:()=>jf,SmolLM3ForCausalLM:()=>Mn,SmolLM3Model:()=>pr,SmolLM3PreTrainedModel:()=>er,SmolVLMForConditionalGeneration:()=>Af,SnacDecoderModel:()=>KO,SnacEncoderModel:()=>HO,SnacModel:()=>GO,SnacPreTrainedModel:()=>gg,SpeechT5ForSpeechToText:()=>BA,SpeechT5ForTextToSpeech:()=>UA,SpeechT5HifiGan:()=>WA,SpeechT5Model:()=>v7,SpeechT5PreTrainedModel:()=>sg,SqueezeBertForMaskedLM:()=>he,SqueezeBertForQuestionAnswering:()=>ke,SqueezeBertForSequenceClassification:()=>_e,SqueezeBertModel:()=>ue,SqueezeBertPreTrainedModel:()=>J,StableLmForCausalLM:()=>sO,StableLmModel:()=>aO,StableLmPreTrainedModel:()=>iw,Starcoder2ForCausalLM:()=>YA,Starcoder2Model:()=>QA,Starcoder2PreTrainedModel:()=>tw,StyleTextToSpeech2Model:()=>zA,StyleTextToSpeech2PreTrainedModel:()=>RA,Swin2SRForImageSuperResolution:()=>S2,Swin2SRModel:()=>E2,Swin2SRPreTrainedModel:()=>Bb,SwinForImageClassification:()=>T2,SwinForSemanticSegmentation:()=>P2,SwinModel:()=>M2,SwinPreTrainedModel:()=>ng,T5ForConditionalGeneration:()=>Br,T5Model:()=>tr,T5PreTrainedModel:()=>or,TableTransformerForObjectDetection:()=>m2,TableTransformerModel:()=>h2,TableTransformerObjectDetectionOutput:()=>g2,TableTransformerPreTrainedModel:()=>Lb,TokenClassifierOutput:()=>Tn,TrOCRForCausalLM:()=>GA,TrOCRPreTrainedModel:()=>VA,UltravoxModel:()=>cw,UltravoxPreTrainedModel:()=>IO,UniSpeechForCTC:()=>xA,UniSpeechForSequenceClassification:()=>MA,UniSpeechModel:()=>wA,UniSpeechPreTrainedModel:()=>og,UniSpeechSatForAudioFrameClassification:()=>SA,UniSpeechSatForCTC:()=>PA,UniSpeechSatForSequenceClassification:()=>EA,UniSpeechSatModel:()=>TA,UniSpeechSatPreTrainedModel:()=>Kf,ViTForImageClassification:()=>C$,ViTMAEModel:()=>F$,ViTMAEPreTrainedModel:()=>j$,ViTMSNForImageClassification:()=>N$,ViTMSNModel:()=>L$,ViTMSNPreTrainedModel:()=>Tb,ViTModel:()=>S$,ViTPreTrainedModel:()=>wb,VisionEncoderDecoderModel:()=>zl,VitMatteForImageMatting:()=>V$,VitMattePreTrainedModel:()=>W$,VitPoseForPoseEstimation:()=>k$,VitPosePreTrainedModel:()=>O$,VitsModel:()=>nw,VitsModelOutput:()=>Zk,VitsPreTrainedModel:()=>nO,VoxtralForConditionalGeneration:()=>DO,Wav2Vec2BertForCTC:()=>$A,Wav2Vec2BertForSequenceClassification:()=>AA,Wav2Vec2BertModel:()=>CA,Wav2Vec2BertPreTrainedModel:()=>ag,Wav2Vec2ForAudioFrameClassification:()=>gA,Wav2Vec2ForCTC:()=>hA,Wav2Vec2ForSequenceClassification:()=>mA,Wav2Vec2Model:()=>pA,Wav2Vec2PreTrainedModel:()=>Vs,WavLMForAudioFrameClassification:()=>NA,WavLMForCTC:()=>jA,WavLMForSequenceClassification:()=>FA,WavLMForXVector:()=>LA,WavLMModel:()=>DA,WavLMPreTrainedModel:()=>vc,WeSpeakerResNetModel:()=>bA,WeSpeakerResNetPreTrainedModel:()=>yA,WhisperForConditionalGeneration:()=>Sf,WhisperModel:()=>Bs,WhisperPreTrainedModel:()=>sc,XLMForQuestionAnswering:()=>Nm,XLMForSequenceClassification:()=>Fm,XLMForTokenClassification:()=>Lm,XLMModel:()=>Dm,XLMPreTrainedModel:()=>Rs,XLMRobertaForMaskedLM:()=>zm,XLMRobertaForQuestionAnswering:()=>Tf,XLMRobertaForSequenceClassification:()=>xf,XLMRobertaForTokenClassification:()=>Mf,XLMRobertaModel:()=>Rm,XLMRobertaPreTrainedModel:()=>zs,XLMWithLMHeadModel:()=>jm,XVectorOutput:()=>Qk,YolosForObjectDetection:()=>iA,YolosModel:()=>nA,YolosObjectDetectionOutput:()=>oA,YolosPreTrainedModel:()=>Xb});var n=r("./src/configs.js"),i=r("./src/backends/onnx.js"),o=r("./src/utils/dtypes.js"),a=r("./src/utils/generic.js"),s=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),u=r("./src/utils/constants.js"),d=r("./src/generation/logits_process.js"),c=r("./src/generation/configuration_utils.js"),f=r("./src/utils/tensor.js"),p=r("./src/utils/image.js"),h=r("./src/utils/maths.js"),m=r("./src/generation/stopping_criteria.js"),v=r("./src/generation/logits_sampler.js"),g=r("./src/env.js"),_=r("./src/models/whisper/generation_whisper.js"),b=r("./src/models/whisper/common_whisper.js");const w={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12},y=new Map,x=new Map,M=new Map;async function T(C,O,q){var Fn;let fe=((Fn=q.config)==null?void 0:Fn["transformers.js_config"])??{},Pe=q.device??fe.device;Pe&&typeof Pe!="string"&&(Pe.hasOwnProperty(O)?Pe=Pe[O]:(console.warn(`device not specified for "${O}". Using the default device.`),Pe=null));const xe=Pe??(g.apis.IS_NODE_ENV?"cpu":"wasm"),De=(0,i.deviceToExecutionProviders)(xe),Ve=fe.device_config??{};Ve.hasOwnProperty(xe)&&(fe={...fe,...Ve[xe]});let Ze=q.dtype??fe.dtype;if(typeof Ze!="string"&&(Ze&&Ze.hasOwnProperty(O)?Ze=Ze[O]:(Ze=o.DEFAULT_DEVICE_DTYPE_MAPPING[xe]??o.DATA_TYPES.fp32,console.warn(`dtype not specified for "${O}". Using the default dtype (${Ze}) for this device (${xe}).`))),Ze===o.DATA_TYPES.auto){let Gt=fe.dtype;typeof Gt!="string"&&(Gt=Gt==null?void 0:Gt[O]),Gt&&Gt!==o.DATA_TYPES.auto&&o.DATA_TYPES.hasOwnProperty(Gt)?Ze=Gt:Ze=o.DEFAULT_DEVICE_DTYPE_MAPPING[xe]??o.DATA_TYPES.fp32}const at=Ze;if(o.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(at)){if(at===o.DATA_TYPES.fp16&&xe==="webgpu"&&!await(0,o.isWebGpuFp16Supported)())throw new Error(`The device (${xe}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${at}. Should be one of: ${Object.keys(o.DATA_TYPES).join(", ")}`);const Tt=fe.kv_cache_dtype,kt=Tt?typeof Tt=="string"?Tt:Tt[at]??"float32":void 0;if(kt&&!["float32","float16"].includes(kt))throw new Error(`Invalid kv_cache_dtype: ${kt}. Should be one of: float32, float16`);const It={dtype:at,kv_cache_dtype:kt,device:xe},Jt=o.DEFAULT_DTYPE_SUFFIX_MAPPING[at],Et=`${O}${Jt}.onnx`,Wt=`${q.subfolder??""}/${Et}`,wt={...q.session_options};wt.executionProviders??(wt.executionProviders=De);const Yt=fe.free_dimension_overrides;Yt?wt.freeDimensionOverrides??(wt.freeDimensionOverrides=Yt):xe.startsWith("webnn")&&!wt.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${xe}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const yr=g.apis.IS_NODE_ENV&&g.env.useFSCache,Ir=(0,l.getModelFile)(C,Wt,!0,q,yr),rn=q.use_external_data_format??fe.use_external_data_format;let Qr=[];if(rn){let Gt;typeof rn=="object"?rn.hasOwnProperty(Et)?Gt=rn[Et]:rn.hasOwnProperty(O)?Gt=rn[O]:Gt=!1:Gt=rn;const Pn=+Gt;if(Pn>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${Pn}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let Yi=0;Yi<Pn;++Yi){const Ql=`${Et}_data${Yi===0?"":"_"+Yi}`,Si=`${q.subfolder??""}/${Ql}`;Qr.push(new Promise(async(xo,_g)=>{const Yl=await(0,l.getModelFile)(C,Si,!0,q,yr);xo(Yl instanceof Uint8Array?{path:Ql,data:Yl}:Ql)}))}}else wt.externalData!==void 0&&(Qr=wt.externalData.map(async Gt=>{if(typeof Gt.data=="string"){const Pn=await(0,l.getModelFile)(C,Gt.data,!0,q);return{...Gt,data:Pn}}return Gt}));if(Qr.length>0){const Gt=await Promise.all(Qr);g.apis.IS_NODE_ENV||(wt.externalData=Gt)}if(xe==="webgpu"){const Gt=(0,n.getCacheShapes)(q.config,{prefix:"present"});if(Object.keys(Gt).length>0&&!(0,i.isONNXProxy)()){const Pn={};for(const Yi in Gt)Pn[Yi]="gpu-buffer";wt.preferredOutputLocation=Pn}}return{buffer_or_path:await Ir,session_options:wt,session_config:It}}async function S(C,O,q){return Object.fromEntries(await Promise.all(Object.keys(O).map(async fe=>{const{buffer_or_path:Pe,session_options:xe,session_config:De}=await T(C,O[fe],q),Ve=await(0,i.createInferenceSession)(Pe,xe,De);return[fe,Ve]})))}async function $(C,O,q){return Object.fromEntries(await Promise.all(Object.keys(O).map(async fe=>{const Pe=await(0,l.getModelJSON)(C,O[fe],!1,q);return[fe,Pe]})))}function k(C,O){const q=Object.create(null),fe=[];for(const De of C.inputNames){const Ve=O[De];if(!(Ve instanceof f.Tensor)){fe.push(De);continue}q[De]=(0,i.isONNXProxy)()?Ve.clone():Ve}if(fe.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${fe.join(", ")}.`);const Pe=Object.keys(O).length,xe=C.inputNames.length;if(Pe>xe){let De=Object.keys(O).filter(Ve=>!C.inputNames.includes(Ve));console.warn(`WARNING: Too many inputs were provided (${Pe} > ${xe}). The following inputs will be ignored: "${De.join(", ")}".`)}return q}let F=Promise.resolve();async function j(C,O){const q=k(C,O);try{const fe=Object.fromEntries(Object.entries(q).map(([De,Ve])=>[De,Ve.ort_tensor])),Pe=()=>C.run(fe),xe=await(g.apis.IS_BROWSER_ENV||g.apis.IS_WEBWORKER_ENV?F=F.then(Pe):Pe());return U(xe)}catch(fe){const Pe=Object.fromEntries(Object.entries(q).map(([xe,De])=>{const Ve={type:De.type,dims:De.dims,location:De.location};return Ve.location!=="gpu-buffer"&&(Ve.data=De.data),[xe,Ve]}));throw console.error(`An error occurred during model execution: "${fe}".`),console.error("Inputs given to model:",Pe),fe}}function U(C){for(let O in C)(0,i.isONNXTensor)(C[O])?C[O]=new f.Tensor(C[O]):typeof C[O]=="object"&&U(C[O]);return C}function z(C){if(C instanceof f.Tensor)return C;if(C.length===0)throw Error("items must be non-empty");if(Array.isArray(C[0])){if(C.some(O=>O.length!==C[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new f.Tensor("int64",BigInt64Array.from(C.flat().map(O=>BigInt(O))),[C.length,C[0].length])}else return new f.Tensor("int64",BigInt64Array.from(C.map(O=>BigInt(O))),[1,C.length])}function G(C){return new f.Tensor("bool",[C],[1])}async function H(C,O){let{encoder_outputs:q,input_ids:fe,decoder_input_ids:Pe,...xe}=O;if(!q){const Ve=(0,s.pick)(O,C.sessions.model.inputNames);q=(await W(C,Ve)).last_hidden_state}return xe.input_ids=Pe,xe.encoder_hidden_states=q,C.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(xe.encoder_attention_mask=O.attention_mask),await te(C,xe,!0)}async function W(C,O){const q=C.sessions.model,fe=(0,s.pick)(O,q.inputNames);if(q.inputNames.includes("inputs_embeds")&&!fe.inputs_embeds){if(!O.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");fe.inputs_embeds=await C.encode_text({input_ids:O.input_ids})}if(q.inputNames.includes("token_type_ids")&&!fe.token_type_ids){if(!fe.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");fe.token_type_ids=(0,f.zeros_like)(fe.input_ids)}if(q.inputNames.includes("pixel_mask")&&!fe.pixel_mask){if(!fe.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Pe=fe.pixel_values.dims;fe.pixel_mask=(0,f.ones)([Pe[0],Pe[2],Pe[3]])}return await j(q,fe)}async function Y(C,O){const q=await C.encode(O);return await C.decode(q)}async function te(C,O,q=!1){const fe=C.sessions[q?"decoder_model_merged":"model"],{past_key_values:Pe,...xe}=O;if(fe.inputNames.includes("use_cache_branch")&&(xe.use_cache_branch=G(!!Pe)),fe.inputNames.includes("position_ids")&&xe.attention_mask&&!xe.position_ids){const Ve=["paligemma","gemma3_text","gemma3"].includes(C.config.model_type)?1:0;xe.position_ids=Ne(xe,Pe,Ve)}C.addPastKeyValues(xe,Pe);const De=(0,s.pick)(xe,fe.inputNames);return await j(fe,De)}function V({modality_token_id:C,inputs_embeds:O,modality_features:q,input_ids:fe,attention_mask:Pe}){const xe=fe.tolist().map(at=>at.reduce((Tt,kt,It)=>(kt==C&&Tt.push(It),Tt),[])),De=xe.reduce((at,Tt)=>at+Tt.length,0),Ve=q.dims[0];if(De!==Ve)throw new Error(`Number of tokens and features do not match: tokens: ${De}, features ${Ve}`);let Ze=0;for(let at=0;at<xe.length;++at){const Tt=xe[at],kt=O[at];for(let It=0;It<Tt.length;++It)kt[Tt[It]].data.set(q[Ze++].data)}return{inputs_embeds:O,attention_mask:Pe}}function I({image_token_id:C,inputs_embeds:O,image_features:q,input_ids:fe,attention_mask:Pe}){return V({modality_token_id:C,inputs_embeds:O,modality_features:q,input_ids:fe,attention_mask:Pe})}function K({audio_token_id:C,inputs_embeds:O,audio_features:q,input_ids:fe,attention_mask:Pe}){return V({modality_token_id:C,inputs_embeds:O,modality_features:q,input_ids:fe,attention_mask:Pe})}async function ae(C,{encode_function:O,merge_function:q,modality_input_name:fe,modality_output_name:Pe,input_ids:xe=null,attention_mask:De=null,position_ids:Ve=null,inputs_embeds:Ze=null,past_key_values:at=null,generation_config:Tt=null,logits_processor:kt=null,...It}){const Jt=It[fe];if(!Ze){if(Ze=await C.encode_text({input_ids:xe,...It}),Jt&&xe.dims[1]!==1){const Wt=await O({[fe]:Jt,...It});({inputs_embeds:Ze,attention_mask:De}=q({[Pe]:Wt,inputs_embeds:Ze,input_ids:xe,attention_mask:De}))}else if(at&&Jt&&xe.dims[1]===1){const Wt=xe.dims[1],wt=Object.values(at)[0].dims.at(-2);De=(0,f.cat)([(0,f.ones)([xe.dims[0],wt]),De.slice(null,[De.dims[1]-Wt,De.dims[1]])],1)}}if(!Ve&&C.config.model_type==="qwen2_vl"){const{image_grid_thw:Wt,video_grid_thw:wt}=It;[Ve]=C.get_rope_index(xe,Wt,wt,De)}return await te(C,{inputs_embeds:Ze,past_key_values:at,attention_mask:De,position_ids:Ve,generation_config:Tt,logits_processor:kt},!0)}async function pe(C,O){return await ae(C,{...O,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:C.encode_audio.bind(C),merge_function:C._merge_input_ids_with_audio_features.bind(C)})}async function de(C,O){return await ae(C,{...O,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:C.encode_image.bind(C),merge_function:C._merge_input_ids_with_image_features.bind(C)})}function be(C,O=0){const[q,fe]=C.dims,Pe=C.data,xe=new BigInt64Array(Pe.length);for(let De=0;De<q;++De){const Ve=De*fe;let Ze=BigInt(O);for(let at=0;at<fe;++at){const Tt=Ve+at;Pe[Tt]===0n?xe[Tt]=BigInt(1):(xe[Tt]=Ze,Ze+=Pe[Tt])}}return{data:xe,dims:C.dims}}function Ne(C,O=null,q=0){const{input_ids:fe,inputs_embeds:Pe,attention_mask:xe}=C,{data:De,dims:Ve}=be(xe,q);let Ze=new f.Tensor("int64",De,Ve);if(O){const at=-(fe??Pe).dims.at(1);Ze=Ze.slice(null,[at,null])}return Ze}function Te(C,O,q,fe){const Pe=q.past_key_values?Object.values(q.past_key_values)[0].dims.at(-2):0;if(!q.attention_mask){let xe;for(const De of["input_ids","inputs_embeds","position_ids"])if(q[De]){xe=q[De].dims;break}if(!xe)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");q.attention_mask=(0,f.ones)([xe[0],Pe+xe[1]])}if(q.past_key_values){const{input_ids:xe,attention_mask:De}=q;De&&De.dims[1]>xe.dims[1]||Pe<xe.dims[1]&&(q.input_ids=xe.slice(null,[Pe,null]))}return q}function ge(C,O,q,fe){return q.past_key_values&&(O=O.map(Pe=>[Pe.at(-1)])),{...q,decoder_input_ids:z(O)}}function re(C,...O){return C.config.is_encoder_decoder?ge(C,...O):Te(C,...O)}function ne(C,O,q,fe){const Pe=!!q.past_key_values;return fe.guidance_scale!==null&&fe.guidance_scale>1&&(Pe?q.input_ids=(0,f.cat)([q.input_ids,q.input_ids],0):(q.input_ids=(0,f.cat)([q.input_ids,(0,f.full_like)(q.input_ids,BigInt(fe.pad_token_id))],0),q.attention_mask=(0,f.cat)([q.attention_mask,(0,f.full_like)(q.attention_mask,0n)],0))),(Pe||!q.pixel_values)&&(q.pixel_values=(0,f.full)([0,0,3,384,384],1)),Pe&&(q.images_seq_mask=new f.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),q.images_emb_mask=new f.Tensor("bool",new Array(0).fill(!1),[1,1,0])),q}class Z extends a.Callable{constructor(q,fe,Pe){super();le(this,"main_input_name","input_ids");le(this,"forward_params",["input_ids","attention_mask"]);this.config=q,this.sessions=fe,this.configs=Pe;const xe=M.get(this.constructor),De=y.get(xe);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,De){case w.DecoderOnly:this.can_generate=!0,this._forward=te,this._prepare_inputs_for_generation=Te;break;case w.Seq2Seq:case w.Vision2Seq:case w.Musicgen:this.can_generate=!0,this._forward=H,this._prepare_inputs_for_generation=ge;break;case w.EncoderDecoder:this._forward=H;break;case w.ImageTextToText:this.can_generate=!0,this._forward=de,this._prepare_inputs_for_generation=re;break;case w.AudioTextToText:this.can_generate=!0,this._forward=pe,this._prepare_inputs_for_generation=re;break;case w.Phi3V:case w.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=re;break;case w.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=ne;break;case w.AutoEncoder:this._forward=Y;break;default:this._forward=W;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){var fe;const q=[];for(const Pe of Object.values(this.sessions))(fe=Pe==null?void 0:Pe.handler)!=null&&fe.dispose&&q.push(Pe.handler.dispose());return await Promise.all(q)}static async from_pretrained(q,{progress_callback:fe=null,config:Pe=null,cache_dir:xe=null,local_files_only:De=!1,revision:Ve="main",model_file_name:Ze=null,subfolder:at="onnx",device:Tt=null,dtype:kt=null,use_external_data_format:It=null,session_options:Jt={}}={}){let Et={progress_callback:fe,config:Pe,cache_dir:xe,local_files_only:De,revision:Ve,model_file_name:Ze,subfolder:at,device:Tt,dtype:kt,use_external_data_format:It,session_options:Jt};const Wt=M.get(this),wt=y.get(Wt);Pe=Et.config=await n.AutoConfig.from_pretrained(q,Et);let Yt;if(wt===w.DecoderOnly)Yt=await Promise.all([S(q,{model:Et.model_file_name??"model"},Et),$(q,{generation_config:"generation_config.json"},Et)]);else if(wt===w.Seq2Seq||wt===w.Vision2Seq)Yt=await Promise.all([S(q,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Et),$(q,{generation_config:"generation_config.json"},Et)]);else if(wt===w.MaskGeneration)Yt=await Promise.all([S(q,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},Et)]);else if(wt===w.EncoderDecoder)Yt=await Promise.all([S(q,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},Et)]);else if(wt===w.ImageTextToText){const yr={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Pe.is_encoder_decoder&&(yr.model="encoder_model"),Yt=await Promise.all([S(q,yr,Et),$(q,{generation_config:"generation_config.json"},Et)])}else if(wt===w.AudioTextToText){const yr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};Yt=await Promise.all([S(q,yr,Et),$(q,{generation_config:"generation_config.json"},Et)])}else if(wt===w.ImageAudioTextToText){const yr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Yt=await Promise.all([S(q,yr,Et),$(q,{generation_config:"generation_config.json"},Et)])}else if(wt===w.Musicgen)Yt=await Promise.all([S(q,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},Et),$(q,{generation_config:"generation_config.json"},Et)]);else if(wt===w.MultiModality)Yt=await Promise.all([S(q,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},Et),$(q,{generation_config:"generation_config.json"},Et)]);else if(wt===w.Phi3V)Yt=await Promise.all([S(q,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},Et),$(q,{generation_config:"generation_config.json"},Et)]);else if(wt===w.AutoEncoder)Yt=await Promise.all([S(q,{encoder_model:"encoder_model",decoder_model:"decoder_model"},Et)]);else{if(wt!==w.EncoderOnly){const yr=Wt??(Pe==null?void 0:Pe.model_type);yr!=="custom"&&console.warn(`Model type for '${yr}' not found, assuming encoder-only architecture. Please report this at ${u.GITHUB_ISSUE_URL}.`)}Yt=await Promise.all([S(q,{model:Et.model_file_name??"model"},Et)])}return new this(Pe,...Yt)}async _call(q){return await this.forward(q)}async forward(q){return await this._forward(this,q)}get generation_config(){var q;return((q=this.configs)==null?void 0:q.generation_config)??null}_get_logits_warper(q){const fe=new d.LogitsProcessorList;return q.temperature!==null&&q.temperature!==1&&fe.push(new d.TemperatureLogitsWarper(q.temperature)),q.top_k!==null&&q.top_k!==0&&fe.push(new d.TopKLogitsWarper(q.top_k)),q.top_p!==null&&q.top_p<1&&fe.push(new d.TopPLogitsWarper(q.top_p)),fe}_get_logits_processor(q,fe,Pe=null){const xe=new d.LogitsProcessorList;if(q.repetition_penalty!==null&&q.repetition_penalty!==1&&xe.push(new d.RepetitionPenaltyLogitsProcessor(q.repetition_penalty)),q.no_repeat_ngram_size!==null&&q.no_repeat_ngram_size>0&&xe.push(new d.NoRepeatNGramLogitsProcessor(q.no_repeat_ngram_size)),q.bad_words_ids!==null&&xe.push(new d.NoBadWordsLogitsProcessor(q.bad_words_ids,q.eos_token_id)),q.min_length!==null&&q.eos_token_id!==null&&q.min_length>0&&xe.push(new d.MinLengthLogitsProcessor(q.min_length,q.eos_token_id)),q.min_new_tokens!==null&&q.eos_token_id!==null&&q.min_new_tokens>0&&xe.push(new d.MinNewTokensLengthLogitsProcessor(fe,q.min_new_tokens,q.eos_token_id)),q.forced_bos_token_id!==null&&xe.push(new d.ForcedBOSTokenLogitsProcessor(q.forced_bos_token_id)),q.forced_eos_token_id!==null&&xe.push(new d.ForcedEOSTokenLogitsProcessor(q.max_length,q.forced_eos_token_id)),q.begin_suppress_tokens!==null){const De=fe>1||q.forced_bos_token_id===null?fe:fe+1;xe.push(new d.SuppressTokensAtBeginLogitsProcessor(q.begin_suppress_tokens,De))}return q.guidance_scale!==null&&q.guidance_scale>1&&xe.push(new d.ClassifierFreeGuidanceLogitsProcessor(q.guidance_scale)),Pe!==null&&xe.extend(Pe),xe}_prepare_generation_config(q,fe,Pe=c.GenerationConfig){const xe={...this.config};for(const Ve of["decoder","generator","text_config"])Ve in xe&&Object.assign(xe,xe[Ve]);const De=new Pe(xe);return Object.assign(De,this.generation_config??{}),q&&Object.assign(De,q),fe&&Object.assign(De,(0,s.pick)(fe,Object.getOwnPropertyNames(De))),De}_get_stopping_criteria(q,fe=null){const Pe=new m.StoppingCriteriaList;return q.max_length!==null&&Pe.push(new m.MaxLengthCriteria(q.max_length,this.config.max_position_embeddings??null)),q.eos_token_id!==null&&Pe.push(new m.EosTokenCriteria(q.eos_token_id)),fe&&Pe.extend(fe),Pe}_validate_model_class(){if(!this.can_generate){const q=[pw,hw,fw,dw],fe=M.get(this.constructor),Pe=new Set,xe=this.config.model_type;for(const Ve of q){const Ze=Ve.get(xe);Ze&&Pe.add(Ze[0])}let De=`The current model class (${fe}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw Pe.size>0&&(De+=` Please use the following class instead: ${[...Pe].join(", ")}`),Error(De)}}prepare_inputs_for_generation(...q){return this._prepare_inputs_for_generation(this,...q)}_update_model_kwargs_for_generation({generated_input_ids:q,outputs:fe,model_inputs:Pe,is_encoder_decoder:xe}){return Pe.past_key_values=this.getPastKeyValues(fe,Pe.past_key_values),Pe.input_ids=new f.Tensor("int64",q.flat(),[q.length,1]),xe||(Pe.attention_mask=(0,f.cat)([Pe.attention_mask,(0,f.ones)([Pe.attention_mask.dims[0],1])],1)),Pe.position_ids=null,Pe}_prepare_model_inputs({inputs:q,bos_token_id:fe,model_kwargs:Pe}){const xe=(0,s.pick)(Pe,this.forward_params),De=this.main_input_name;if(De in xe){if(q)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else xe[De]=q;return{inputs_tensor:xe[De],model_inputs:xe,model_input_name:De}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:q,model_inputs:fe,model_input_name:Pe,generation_config:xe}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!fe.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:Ve,pixel_values:Ze,attention_mask:at,...Tt}=fe,kt=await this._prepare_inputs_embeds(fe);fe={...Tt,...(0,s.pick)(kt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:De}=await W(this,fe);if(xe.guidance_scale!==null&&xe.guidance_scale>1)De=(0,f.cat)([De,(0,f.full_like)(De,0)],0),"attention_mask"in fe&&(fe.attention_mask=(0,f.cat)([fe.attention_mask,(0,f.zeros_like)(fe.attention_mask)],0));else if(fe.decoder_input_ids){const Ve=z(fe.decoder_input_ids).dims[0];if(Ve!==De.dims[0]){if(De.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${De.dims[0]}) than the decoder inputs (${Ve}).`);De=(0,f.cat)(Array.from({length:Ve},()=>De),0)}}return fe.encoder_outputs=De,fe}_prepare_decoder_input_ids_for_generation({batch_size:q,model_input_name:fe,model_kwargs:Pe,decoder_start_token_id:xe,bos_token_id:De,generation_config:Ve}){let{decoder_input_ids:Ze,...at}=Pe;if(!(Ze instanceof f.Tensor)){if(Ze)Array.isArray(Ze[0])||(Ze=Array.from({length:q},()=>Ze));else if(xe??(xe=De),this.config.model_type==="musicgen")Ze=Array.from({length:q*this.config.decoder.num_codebooks},()=>[xe]);else if(Array.isArray(xe)){if(xe.length!==q)throw new Error(`\`decoder_start_token_id\` expcted to have length ${q} but got ${xe.length}`);Ze=xe}else Ze=Array.from({length:q},()=>[xe]);Ze=z(Ze)}return Pe.decoder_attention_mask=(0,f.ones_like)(Ze),{input_ids:Ze,model_inputs:at}}async generate({inputs:q=null,generation_config:fe=null,logits_processor:Pe=null,stopping_criteria:xe=null,streamer:De=null,...Ve}){this._validate_model_class(),fe=this._prepare_generation_config(fe,Ve);let{inputs_tensor:Ze,model_inputs:at,model_input_name:Tt}=this._prepare_model_inputs({inputs:q,model_kwargs:Ve});const kt=this.config.is_encoder_decoder;kt&&("encoder_outputs"in at||(at=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:Ze,model_inputs:at,model_input_name:Tt,generation_config:fe})));let It;kt?{input_ids:It,model_inputs:at}=this._prepare_decoder_input_ids_for_generation({batch_size:at[Tt].dims.at(0),model_input_name:Tt,model_kwargs:at,decoder_start_token_id:fe.decoder_start_token_id,bos_token_id:fe.bos_token_id,generation_config:fe}):It=at[Tt];let Jt=It.dims.at(-1);fe.max_new_tokens!==null&&(fe.max_length=Jt+fe.max_new_tokens);const Et=this._get_logits_processor(fe,Jt,Pe),Wt=this._get_stopping_criteria(fe,xe),wt=at[Tt].dims.at(0),Yt=v.LogitsSampler.getSampler(fe),yr=new Array(wt).fill(0),Ir=It.tolist();De&&De.put(Ir);let rn,Qr={};for(;;){if(at=this.prepare_inputs_for_generation(Ir,at,fe),rn=await this.forward(at),fe.output_attentions&&fe.return_dict_in_generate){const Si=this.getAttentions(rn);for(const xo in Si)xo in Qr||(Qr[xo]=[]),Qr[xo].push(Si[xo])}const Gt=rn.logits.slice(null,-1,null),Pn=Et(Ir,Gt),Yi=[];for(let Si=0;Si<Pn.dims.at(0);++Si){const xo=Pn[Si],_g=await Yt(xo);for(const[Yl,vg]of _g){const yg=BigInt(Yl);yr[Si]+=vg,Ir[Si].push(yg),Yi.push([yg]);break}}if(De&&De.put(Yi),Wt(Ir).every(Si=>Si))break;at=this._update_model_kwargs_for_generation({generated_input_ids:Yi,outputs:rn,model_inputs:at,is_encoder_decoder:kt})}De&&De.end();const bn=this.getPastKeyValues(rn,at.past_key_values,!0),Fn=new f.Tensor("int64",Ir.flat(),[Ir.length,Ir[0].length]);if(fe.return_dict_in_generate)return{sequences:Fn,past_key_values:bn,...Qr};for(const Gt of Object.values(rn))Gt.location==="gpu-buffer"&&Gt.dispose();return Fn}getPastKeyValues(q,fe,Pe=!1){const xe=Object.create(null);for(const De in q)if(De.startsWith("present")){const Ve=De.replace("present_conv","past_conv").replace("present","past_key_values"),Ze=De.includes("encoder");if(Ze&&fe?xe[Ve]=fe[Ve]:xe[Ve]=q[De],fe&&(!Ze||Pe)){const at=fe[Ve];at.location==="gpu-buffer"&&at.dispose()}}return xe}getAttentions(q){const fe={};for(const Pe of["cross_attentions","encoder_attentions","decoder_attentions"])for(const xe in q)xe.startsWith(Pe)&&(Pe in fe||(fe[Pe]=[]),fe[Pe].push(q[xe]));return fe}addPastKeyValues(q,fe){var Pe,xe,De;if(fe)Object.assign(q,fe);else{const Ve=this.sessions.decoder_model_merged??this.sessions.model,Ze=((xe=(Pe=q[this.main_input_name]??q.attention_mask)==null?void 0:Pe.dims)==null?void 0:xe[0])??1,at=((De=Ve==null?void 0:Ve.config)==null?void 0:De.kv_cache_dtype)??"float32",Tt=at==="float16"?f.DataTypeMap.float16:f.DataTypeMap.float32,kt=(0,n.getCacheShapes)(this.config,{batch_size:Ze});for(const It in kt){const Jt=kt[It].reduce((Et,Wt)=>Et*Wt,1);q[It]=new f.Tensor(at,new Tt(Jt),kt[It])}}}async encode_image({pixel_values:q}){return(await j(this.sessions.vision_encoder,{pixel_values:q})).image_features}async encode_text({input_ids:q}){return(await j(this.sessions.embed_tokens,{input_ids:q})).inputs_embeds}async encode_audio({audio_values:q}){return(await j(this.sessions.audio_encoder,{audio_values:q})).audio_features}}class ve{}class Ae extends ve{constructor({last_hidden_state:O,hidden_states:q=null,attentions:fe=null}){super(),this.last_hidden_state=O,this.hidden_states=q,this.attentions=fe}}class Ee extends Z{}class we extends Ee{}class $e extends Ee{async _call(O){return new jn(await super._call(O))}}class Me extends Ee{async _call(O){return new Lt(await super._call(O))}}class je extends Ee{async _call(O){return new Tn(await super._call(O))}}class ze extends Ee{async _call(O){return new ri(await super._call(O))}}class Xe extends Z{}class Ce extends Xe{}class st extends Xe{async _call(O){return new jn(await super._call(O))}}class Ye extends Xe{async _call(O){return new Lt(await super._call(O))}}class rt extends Xe{async _call(O){return new Tn(await super._call(O))}}class Je extends Xe{async _call(O){return new ri(await super._call(O))}}class Ue extends Z{}class ot extends Ue{}class lt extends Ue{async _call(O){return new jn(await super._call(O))}}class Ut extends Ue{async _call(O){return new Lt(await super._call(O))}}class Nt extends Ue{async _call(O){return new Tn(await super._call(O))}}class Pt extends Z{}class $r extends Pt{}class un extends Pt{}class en extends Z{}class Ni extends en{}class vr extends Z{}class cn extends vr{}class Wo extends vr{async _call(O){return new jn(await super._call(O))}}class Pa extends vr{async _call(O){return new Lt(await super._call(O))}}class yo extends vr{async _call(O){return new Tn(await super._call(O))}}class ei extends vr{async _call(O){return new ri(await super._call(O))}}class bt extends Z{}class St extends bt{}class Zt extends bt{async _call(O){return new jn(await super._call(O))}}class pt extends bt{async _call(O){return new Lt(await super._call(O))}}class Xt extends bt{async _call(O){return new Tn(await super._call(O))}}class D extends bt{async _call(O){return new ri(await super._call(O))}}class se extends Z{}class Q extends se{}class oe extends se{async _call(O){return new jn(await super._call(O))}}class ce extends se{async _call(O){return new Lt(await super._call(O))}}class Se extends se{async _call(O){return new Tn(await super._call(O))}}class Re extends se{async _call(O){return new ri(await super._call(O))}}class dt extends Z{}class Ct extends dt{}class Mt extends dt{async _call(O){return new jn(await super._call(O))}}class jt extends dt{async _call(O){return new Lt(await super._call(O))}}class ft extends dt{async _call(O){return new Tn(await super._call(O))}}class ir extends dt{async _call(O){return new ri(await super._call(O))}}class lr extends Z{}class si extends lr{}class Ti extends lr{async _call(O){return new jn(await super._call(O))}}class zr extends lr{async _call(O){return new Lt(await super._call(O))}}class On extends lr{async _call(O){return new Tn(await super._call(O))}}class kn extends lr{async _call(O){return new ri(await super._call(O))}}class li extends Z{}class bo extends li{}class In extends li{async _call(O){return new jn(await super._call(O))}}class Ea extends li{async _call(O){return new Lt(await super._call(O))}}class Sa extends li{async _call(O){return new Tn(await super._call(O))}}class ui extends li{async _call(O){return new ri(await super._call(O))}}class ci extends Z{}class Ri extends ci{}class Hn extends ci{async _call(O){return new Lt(await super._call(O))}}class Vo extends ci{async _call(O){return new Tn(await super._call(O))}}class dn extends ci{async _call(O){return new ri(await super._call(O))}}class gn extends ci{async _call(O){return new jn(await super._call(O))}}class Pi extends Z{}class es extends Pi{}class di extends Pi{async _call(O){return new jn(await super._call(O))}}class Ge extends Pi{async _call(O){return new Lt(await super._call(O))}}class He extends Pi{async _call(O){return new Tn(await super._call(O))}}class ut extends Z{}class Mr extends ut{}class ts extends ut{async _call(O){return new jn(await super._call(O))}}class Go extends ut{async _call(O){return new Lt(await super._call(O))}}class rs extends ut{async _call(O){return new ri(await super._call(O))}}class Ho extends Z{}class Ll extends Ho{}class Nl extends Ho{async _call(O){return new jn(await super._call(O))}}class Rl extends Ho{async _call(O){return new Lt(await super._call(O))}}class ye extends Ho{async _call(O){return new Tn(await super._call(O))}}class R extends Ho{async _call(O){return new ri(await super._call(O))}}class J extends Z{}class ue extends J{}class he extends J{async _call(O){return new jn(await super._call(O))}}class _e extends J{async _call(O){return new Lt(await super._call(O))}}class ke extends J{async _call(O){return new ri(await super._call(O))}}class Ke extends Z{}class it extends Ke{}class et extends Ke{async _call(O){return new Lt(await super._call(O))}}class ct extends Ke{async _call(O){return new ri(await super._call(O))}}class At extends Ke{async _call(O){return new jn(await super._call(O))}}class or extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class tr extends or{}class Br extends or{}class fr extends Z{}class _n extends fr{}class xn extends fr{}class qr extends Z{}class vn extends qr{}class Kn extends qr{}class Ei extends Z{}class Ar extends Ei{}class yn extends Ei{}class fi extends Ei{async _call(O){return new Lt(await super._call(O))}}class ti extends Z{}class Ko extends ti{}class Dn extends ti{}class wo extends ti{async _call(O){return new Lt(await super._call(O))}}class tn extends ti{}class Xr extends Z{}class fn extends Xr{}class Ur extends Xr{}class pi extends Z{}class ns extends pi{}class ac extends pi{}class Ns extends Z{}class Am extends Ns{}class wf extends Ns{async _call(O){return new jn(await super._call(O))}}class Om extends Ns{async _call(O){return new Lt(await super._call(O))}}class km extends Ns{async _call(O){return new Tn(await super._call(O))}}class Im extends Ns{async _call(O){return new ri(await super._call(O))}}class Rs extends Z{}class Dm extends Rs{}class jm extends Rs{async _call(O){return new jn(await super._call(O))}}class Fm extends Rs{async _call(O){return new Lt(await super._call(O))}}class Lm extends Rs{async _call(O){return new Tn(await super._call(O))}}class Nm extends Rs{async _call(O){return new ri(await super._call(O))}}class zs extends Z{}class Rm extends zs{}class zm extends zs{async _call(O){return new jn(await super._call(O))}}class xf extends zs{async _call(O){return new Lt(await super._call(O))}}class Mf extends zs{async _call(O){return new Tn(await super._call(O))}}class Tf extends zs{async _call(O){return new ri(await super._call(O))}}class Pf extends Z{}class Bm extends Pf{}class Ef extends Pf{}class sc extends Z{constructor(){super(...arguments);le(this,"requires_attention_mask",!1);le(this,"main_input_name","input_features");le(this,"forward_params",["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class Bs extends sc{}class Sf extends sc{_prepare_generation_config(O,q){return super._prepare_generation_config(O,q,_.WhisperGenerationConfig)}_retrieve_init_tokens(O){const q=[O.decoder_start_token_id];let fe=O.language;const Pe=O.task;if(O.is_multilingual){fe||(console.warn("No language specified - defaulting to English (en)."),fe="en");const De=`<|${(0,b.whisper_language_to_code)(fe)}|>`;q.push(O.lang_to_id[De]),q.push(O.task_to_id[Pe??"transcribe"])}else if(fe||Pe)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!O.return_timestamps&&O.no_timestamps_token_id&&q.at(-1)!==O.no_timestamps_token_id?q.push(O.no_timestamps_token_id):O.return_timestamps&&q.at(-1)===O.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),q.pop()),q.filter(xe=>xe!=null)}async generate({inputs:O=null,generation_config:q=null,logits_processor:fe=null,stopping_criteria:Pe=null,...xe}){q=this._prepare_generation_config(q,xe);const De=xe.decoder_input_ids??this._retrieve_init_tokens(q);if(q.return_timestamps&&(fe??(fe=new d.LogitsProcessorList),fe.push(new d.WhisperTimeStampLogitsProcessor(q,De))),q.begin_suppress_tokens&&(fe??(fe=new d.LogitsProcessorList),fe.push(new d.SuppressTokensAtBeginLogitsProcessor(q.begin_suppress_tokens,De.length))),q.return_token_timestamps){if(!q.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");q.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),q.output_attentions=!0,q.return_dict_in_generate=!0}const Ve=await super.generate({inputs:O,generation_config:q,logits_processor:fe,decoder_input_ids:De,...xe});return q.return_token_timestamps&&(Ve.token_timestamps=this._extract_token_timestamps(Ve,q.alignment_heads,q.num_frames)),Ve}_extract_token_timestamps(O,q,fe=null,Pe=.02){if(!O.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");fe==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let xe=this.config.median_filter_width;xe===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),xe=7);const De=O.cross_attentions,Ve=Array.from({length:this.config.decoder_layers},(Wt,wt)=>(0,f.cat)(De.map(Yt=>Yt[wt]),2)),Ze=(0,f.stack)(q.map(([Wt,wt])=>{if(Wt>=Ve.length)throw new Error(`Layer index ${Wt} is out of bounds for cross attentions (length ${Ve.length}).`);return fe?Ve[Wt].slice(null,wt,null,[0,fe]):Ve[Wt].slice(null,wt)})).transpose(1,0,2,3),[at,Tt]=(0,f.std_mean)(Ze,-2,0,!0),kt=Ze.clone();for(let Wt=0;Wt<kt.dims[0];++Wt){const wt=kt[Wt];for(let Yt=0;Yt<wt.dims[0];++Yt){const yr=wt[Yt],Ir=at[Wt][Yt][0].data,rn=Tt[Wt][Yt][0].data;for(let Qr=0;Qr<yr.dims[0];++Qr){let bn=yr[Qr].data;for(let Fn=0;Fn<bn.length;++Fn)bn[Fn]=(bn[Fn]-rn[Fn])/Ir[Fn];bn.set((0,h.medianFilter)(bn,xe))}}}const It=[(0,f.mean)(kt,1)],Jt=O.sequences.dims,Et=new f.Tensor("float32",new Float32Array(Jt[0]*Jt[1]),Jt);for(let Wt=0;Wt<Jt[0];++Wt){const wt=It[Wt].neg().squeeze_(0),[Yt,yr]=(0,h.dynamic_time_warping)(wt.tolist()),Ir=Array.from({length:Yt.length-1},(bn,Fn)=>Yt[Fn+1]-Yt[Fn]),rn=(0,s.mergeArrays)([1],Ir).map(bn=>!!bn),Qr=[];for(let bn=0;bn<rn.length;++bn)rn[bn]&&Qr.push(yr[bn]*Pe);Et[Wt].data.set(Qr,1)}return Et}}class Cf extends Sf{}class $f extends Z{constructor(){super(...arguments);le(this,"requires_attention_mask",!1);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values","decoder_input_ids","past_key_values"])}}class rb extends $f{}class Um extends $f{}class zl extends Z{constructor(){super(...arguments);le(this,"main_input_name","pixel_values");le(this,"forward_params",["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"])}}class lc extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class uc extends lc{_merge_input_ids_with_image_features(O){const q=O.image_features.dims.at(-1),fe=O.image_features.view(-1,q);return I({image_token_id:this.config.image_token_index,...O,image_features:fe})}}class Wm extends uc{}class Vm extends uc{}class Gm extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"]);le(this,"main_input_name","inputs_embeds")}}class Hm extends Gm{_merge_input_ids_with_image_features({inputs_embeds:O,image_features:q,input_ids:fe,attention_mask:Pe}){return{inputs_embeds:(0,f.cat)([q,O],1),attention_mask:(0,f.cat)([(0,f.ones)(q.dims.slice(0,2)),Pe],1)}}async _prepare_inputs_embeds({input_ids:O,pixel_values:q,inputs_embeds:fe,attention_mask:Pe}){if(!O&&!q)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let xe,De;return O&&(xe=await this.encode_text({input_ids:O})),q&&(De=await this.encode_image({pixel_values:q})),xe&&De?{inputs_embeds:fe,attention_mask:Pe}=this._merge_input_ids_with_image_features({inputs_embeds:xe,image_features:De,input_ids:O,attention_mask:Pe}):fe=xe||De,{inputs_embeds:fe,attention_mask:Pe}}async forward({input_ids:O,pixel_values:q,attention_mask:fe,decoder_input_ids:Pe,decoder_attention_mask:xe,encoder_outputs:De,past_key_values:Ve,inputs_embeds:Ze,decoder_inputs_embeds:at}){if(Ze||({inputs_embeds:Ze,attention_mask:fe}=await this._prepare_inputs_embeds({input_ids:O,pixel_values:q,inputs_embeds:Ze,attention_mask:fe})),!De){let{last_hidden_state:It}=await W(this,{inputs_embeds:Ze,attention_mask:fe});De=It}if(!at){if(!Pe)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");at=await this.encode_text({input_ids:Pe})}return await te(this,{inputs_embeds:at,attention_mask:xe,encoder_attention_mask:fe,encoder_hidden_states:De,past_key_values:Ve},!0)}}class Km extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class qm extends Km{_merge_input_ids_with_image_features(O){const q=O.image_features.dims.at(-1),fe=O.image_features.view(-1,q);return I({image_token_id:this.config.image_token_index,...O,image_features:fe})}}class Xm extends lc{_merge_input_ids_with_image_features(O){const q=O.image_features.dims.at(-1),fe=O.image_features.view(-1,q);return I({image_token_id:this.config.image_token_index,...O,image_features:fe})}}class Qm extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"])}}class Us extends Qm{async forward({input_ids:O=null,attention_mask:q=null,pixel_values:fe=null,input_features:Pe=null,input_features_mask:xe=null,position_ids:De=null,inputs_embeds:Ve=null,per_layer_inputs:Ze=null,past_key_values:at=null,generation_config:Tt=null,logits_processor:kt=null,...It}){if((!Ve||!Ze)&&({inputs_embeds:Ve,per_layer_inputs:Ze}=await j(this.sessions.embed_tokens,{input_ids:O}),O.dims[1]!==1)){if(fe){const{image_features:Et}=await j(this.sessions.vision_encoder,{pixel_values:fe});({inputs_embeds:Ve,attention_mask:q}=this._merge_input_ids_with_image_features({image_features:Et,inputs_embeds:Ve,input_ids:O,attention_mask:q}))}if(Pe){const{audio_features:Et}=await j(this.sessions.audio_encoder,{input_features:Pe,input_features_mask:xe});({inputs_embeds:Ve,attention_mask:q}=this._merge_input_ids_with_audio_features({audio_features:Et,inputs_embeds:Ve,input_ids:O,attention_mask:q}))}}return await te(this,{inputs_embeds:Ve,per_layer_inputs:Ze,past_key_values:at,attention_mask:q,position_ids:De,generation_config:Tt,logits_processor:kt},!0)}_merge_input_ids_with_image_features(O){const q=O.image_features.dims.at(-1),fe=O.image_features.view(-1,q);return I({image_token_id:this.config.image_token_id,...O,image_features:fe})}_merge_input_ids_with_audio_features(O){const q=O.audio_features.dims.at(-1),fe=O.audio_features.view(-1,q);return K({audio_token_id:this.config.audio_token_id,...O,audio_features:fe})}}class Ws extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"])}}class Bl extends Ws{async encode_image({pixel_values:O,pixel_attention_mask:q}){return(await j(this.sessions.vision_encoder,{pixel_values:O,pixel_attention_mask:q})).image_features}_merge_input_ids_with_image_features(O){const q=O.image_features.dims.at(-1),fe=O.image_features.view(-1,q);return I({image_token_id:this.config.image_token_id,...O,image_features:fe})}}class Af extends Bl{}class Ym extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"])}}class Ul extends Ym{async forward({input_ids:O=null,attention_mask:q=null,pixel_values:fe=null,image_sizes:Pe=null,position_ids:xe=null,inputs_embeds:De=null,past_key_values:Ve=null,generation_config:Ze=null,logits_processor:at=null,...Tt}){if(!De){let It;if(fe&&O.dims[1]!==1){if(!Pe)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:It}=await j(this.sessions.vision_encoder,{pixel_values:fe,image_sizes:Pe}))}else{const Jt=this.config.normalized_config.hidden_size;It=new f.Tensor("float32",[],[0,Jt])}({inputs_embeds:De}=await j(this.sessions.prepare_inputs_embeds,{input_ids:O,image_features:It}))}return await te(this,{inputs_embeds:De,past_key_values:Ve,attention_mask:q,position_ids:xe,generation_config:Ze,logits_processor:at},!1)}}class qo extends Z{}class Of extends qo{}class Zm extends qo{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"text_model"})}}class kf extends qo{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"text_model"})}}class Jm extends qo{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"vision_model"})}}class If extends qo{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"vision_model"})}}class cc extends Z{}class eg extends cc{}class Df extends cc{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"text_model"})}}class jf extends qo{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"vision_model"})}}class Wl extends Z{}class xt extends Wl{}class dc extends Z{}class Ff extends dc{async forward(O){const q=!O.input_ids,fe=!O.pixel_values;if(q&&fe)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(q&&(O.input_ids=(0,f.ones)([O.pixel_values.dims[0],1])),fe){const{image_size:at}=this.config.vision_config;O.pixel_values=(0,f.full)([0,3,at,at],0)}const{text_embeddings:Pe,image_embeddings:xe,l2norm_text_embeddings:De,l2norm_image_embeddings:Ve}=await super.forward(O),Ze={};return q||(Ze.text_embeddings=Pe,Ze.l2norm_text_embeddings=De),fe||(Ze.image_embeddings=xe,Ze.l2norm_image_embeddings=Ve),Ze}}class Lf extends dc{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"text_model"})}}class Vl extends dc{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"vision_model"})}}class zi extends Z{}class Gl extends zi{}class fc extends zi{}class pc extends Z{}class Nf extends pc{}class Rf extends pc{}class Hl extends Z{}class zf extends Hl{}class Bf extends Hl{}class hc extends Z{}class Kl extends hc{}class mc extends hc{}class ql extends Z{}class Uf extends ql{}class Wf extends ql{}class gc extends Z{}class Vf extends gc{}class Gf extends gc{}class _c extends Z{}class P extends _c{}class A extends _c{}class B extends Z{}class X extends B{}class ee extends B{}class me extends Z{}class Ie extends me{}class We extends me{}class nt extends Z{}class ht extends nt{}class Ft extends nt{}class er extends Z{}class pr extends er{}class Mn extends er{}class Ca extends Z{}class tg extends Ca{}class UC extends Ca{}class nb extends Z{}class WC extends nb{}class VC extends nb{}class ib extends Z{}class GC extends ib{}class HC extends ib{}class ob extends Z{}class KC extends ob{}class qC extends ob{}class ab extends Z{}class XC extends ab{}class QC extends ab{}class sb extends Z{}class YC extends sb{}class ZC extends sb{}class lb extends Z{}class JC extends lb{}class e$ extends lb{}class ub extends Z{}class t$ extends ub{}class r$ extends ub{}class cb extends Z{}class n$ extends cb{}class i$ extends cb{}class db extends Z{}class o$ extends db{}class a$ extends db{}class fb extends Z{}class s$ extends fb{}class l$ extends fb{}class pb extends Z{}class u$ extends pb{}class c$ extends pb{}class hb extends Z{}class d$ extends hb{}class f$ extends hb{}class mb extends Z{}class p$ extends mb{}class h$ extends mb{}class m$ extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"])}}class g$ extends m${get_rope_index(O,q,fe,Pe){const{vision_config:xe,image_token_id:De,video_token_id:Ve,vision_start_token_id:Ze}=this.config,at=xe.spatial_merge_size??2,Tt=[];if(q||fe){let kt=O.tolist();Pe||(Pe=(0,f.ones_like)(O));const It=Pe.tolist(),Jt=Array.from({length:3},yr=>Array.from({length:O.dims[0]},Ir=>Array.from({length:O.dims[1]},rn=>1))),Et=q?q.tolist():[],Wt=fe?fe.tolist():[];let wt=0,Yt=0;for(let yr=0;yr<kt.length;++yr){const Ir=kt[yr].filter((Dr,En)=>It[yr][En]==1),Qr=Ir.reduce((Dr,En,Gs)=>(En==Ze&&Dr.push(Gs),Dr),[]).map(Dr=>Ir[Dr+1]),bn=Qr.filter(Dr=>Dr==De).length,Fn=Qr.filter(Dr=>Dr==Ve).length;let Gt=[],Pn=0,Yi=bn,Ql=Fn;for(let Dr=0;Dr<Qr.length;++Dr){const En=Ir.findIndex((Jl,Xo)=>Xo>Pn&&Jl==De),Gs=Ir.findIndex((Jl,Xo)=>Xo>Pn&&Jl==Ve),Zl=Yi>0&&En!==-1?En:Ir.length+1,bc=Ql>0&&Gs!==-1?Gs:Ir.length+1;let bg,gw,_w,vw;Zl<bc?([gw,_w,vw]=Et[wt],++wt,--Yi,bg=Zl):([gw,_w,vw]=Wt[Yt],++Yt,--Ql,bg=bc);const[k7,yw,wg]=[Number(gw),Math.floor(Number(_w)/at),Math.floor(Number(vw)/at)],bw=bg-Pn,Jk=Gt.length>0?(0,h.max)(Gt.at(-1))[0]+1:0;Gt.push(Array.from({length:3*bw},(Jl,Xo)=>Jk+Xo%bw));const ww=bw+Jk,xg=k7*yw*wg,I7=Array.from({length:xg},(Jl,Xo)=>ww+Math.floor(Xo/(yw*wg))),D7=Array.from({length:xg},(Jl,Xo)=>ww+Math.floor(Xo/wg)%yw),j7=Array.from({length:xg},(Jl,Xo)=>ww+Xo%wg);Gt.push([I7,D7,j7].flat()),Pn=bg+xg}if(Pn<Ir.length){const Dr=Gt.length>0?(0,h.max)(Gt.at(-1))[0]+1:0,En=Ir.length-Pn;Gt.push(Array.from({length:3*En},(Gs,Zl)=>Dr+Zl%En))}const Si=Gt.reduce((Dr,En)=>Dr+En.length,0),xo=new Array(Si);let _g=0;for(let Dr=0;Dr<3;++Dr)for(let En=0;En<Gt.length;++En){const Gs=Gt[En],Zl=Gs.length/3;for(let bc=Dr*Zl;bc<(Dr+1)*Zl;++bc)xo[_g++]=Gs[bc]}let Yl=0;const vg=It[yr];for(let Dr=0;Dr<vg.length;++Dr)if(vg[Dr]==1){for(let En=0;En<3;++En)Jt[En][yr][Dr]=xo[En*Si/3+Yl];++Yl}const yg=(0,h.max)(xo)[0];Tt.push(yg+1-kt[yr].length)}return[new f.Tensor("int64",Jt.flat(1/0),[3,O.dims[0],O.dims[1]]),new f.Tensor("int64",Tt,[Tt.length,1])]}else if(Pe){const{data:kt,dims:It}=be(Pe),Jt=BigInt64Array.from({length:3*kt.length},(Wt,wt)=>kt[wt%kt.length]),Et=Array.from({length:It[0]},(Wt,wt)=>(0,h.max)(kt.subarray(It[1]*wt,It[1]*(wt+1)))[0]+1n+BigInt(It[1]));return[new f.Tensor("int64",Jt,[3,...It]),new f.Tensor("int64",Et,[Et.length,1])]}else{const[kt,It]=O.dims,Jt=BigInt64Array.from({length:3*kt*It},(Et,Wt)=>BigInt(Math.floor(Wt%It/kt)));return[new f.Tensor("int64",Jt,[3,...O.dims]),(0,f.zeros)([kt,1])]}}async encode_image({pixel_values:O,image_grid_thw:q}){return(await j(this.sessions.vision_encoder,{pixel_values:O,grid_thw:q})).image_features}_merge_input_ids_with_image_features(O){return I({image_token_id:this.config.image_token_id,...O})}prepare_inputs_for_generation(O,q,fe){if(q.attention_mask&&!q.position_ids)if(!q.past_key_values)[q.position_ids,q.rope_deltas]=this.get_rope_index(q.input_ids,q.image_grid_thw,q.video_grid_thw,q.attention_mask);else{q.pixel_values=null;const Pe=BigInt(Object.values(q.past_key_values)[0].dims.at(-2)),xe=q.rope_deltas.map(De=>Pe+De);q.position_ids=(0,f.stack)([xe,xe,xe],0)}return q}}class gb extends Z{}class _$ extends gb{}class v$ extends gb{}class _b extends Z{}class y$ extends _b{}class b$ extends _b{}class vb extends Z{}class w$ extends vb{}class x$ extends vb{}class yb extends Z{}class M$ extends yb{}class T$ extends yb{}class bb extends Z{}class P$ extends bb{}class E$ extends bb{}class wb extends Z{}class S$ extends wb{}class C$ extends wb{async _call(O){return new Lt(await super._call(O))}}class xb extends Z{}class $$ extends xb{}class A$ extends xb{async _call(O){return new Lt(await super._call(O))}}class O$ extends Z{}class k$ extends O${}class Mb extends Z{}class I$ extends Mb{}class D$ extends Mb{async _call(O){return new Lt(await super._call(O))}}class j$ extends Z{}class F$ extends j${}class Tb extends Z{}class L$ extends Tb{}class N$ extends Tb{async _call(O){return new Lt(await super._call(O))}}class R$ extends Z{}class z$ extends R${}class Pb extends Z{}class B$ extends Pb{}class U$ extends Pb{async _call(O){return new Lt(await super._call(O))}}class W$ extends Z{}class V$ extends W${async _call(O){return new Yk(await super._call(O))}}class Eb extends Z{}class G$ extends Eb{}class H$ extends Eb{async _call(O){return new Lt(await super._call(O))}}class Sb extends Z{}class K$ extends Sb{}class q$ extends Sb{async _call(O){return new Lt(await super._call(O))}}class Cb extends Z{}class X$ extends Cb{}class Q$ extends Cb{}class $b extends Z{}class Y$ extends $b{}class Z$ extends $b{}class Ab extends Z{}class J$ extends Ab{}class e2 extends Ab{async _call(O){return new Lt(await super._call(O))}}class rg extends Z{}class t2 extends rg{}class r2 extends rg{async _call(O){return new kb(await super._call(O))}}class Ob extends rg{async _call(O){return new n2(await super._call(O))}}class kb extends ve{constructor({logits:O,pred_boxes:q}){super(),this.logits=O,this.pred_boxes=q}}class n2 extends ve{constructor({logits:O,pred_boxes:q,pred_masks:fe}){super(),this.logits=O,this.pred_boxes=q,this.pred_masks=fe}}class Ib extends Z{}class i2 extends Ib{}class o2 extends Ib{async _call(O){return new Hf(await super._call(O))}}class Hf extends ve{constructor({logits:O,pred_boxes:q}){super(),this.logits=O,this.pred_boxes=q}}class Db extends Z{}class a2 extends Db{}class s2 extends Db{async _call(O){return new l2(await super._call(O))}}class l2 extends Hf{}class jb extends Z{}class u2 extends jb{}class c2 extends jb{async _call(O){return new d2(await super._call(O))}}class d2 extends Hf{}class Fb extends Z{}class f2 extends Fb{}class p2 extends Fb{async _call(O){return new Hf(await super._call(O))}}class Lb extends Z{}class h2 extends Lb{}class m2 extends Lb{async _call(O){return new g2(await super._call(O))}}class g2 extends kb{}class Nb extends Z{}class _2 extends Nb{}class v2 extends Nb{async _call(O){return new Lt(await super._call(O))}}class Rb extends Z{}class y2 extends Rb{}class b2 extends Rb{async _call(O){return new Lt(await super._call(O))}}class zb extends Z{}class w2 extends zb{}class x2 extends zb{async _call(O){return new Lt(await super._call(O))}}class ng extends Z{}class M2 extends ng{}class T2 extends ng{async _call(O){return new Lt(await super._call(O))}}class P2 extends ng{}class Bb extends Z{}class E2 extends Bb{}class S2 extends Bb{}class Ub extends Z{}class C2 extends Ub{}class $2 extends Ub{}class A2 extends Z{}class O2 extends A2{}class ig extends Z{}class k2 extends ig{}class I2 extends ig{}class D2 extends ig{}class j2 extends Z{}class F2 extends j2{}class L2 extends Z{}class N2 extends L2{}class R2 extends Z{}class z2 extends R2{}class Wb extends Z{}class B2 extends Wb{}class U2 extends Wb{}class Vb extends Z{}class W2 extends Vb{}class V2 extends Vb{}class G2 extends Z{}class H2 extends G2{}class Gb extends Z{}class K2 extends Gb{}class q2 extends Gb{async _call(O){return new Lt(await super._call(O))}}class Hb extends Z{}class X2 extends Hb{}class Q2 extends Hb{async _call(O){return new Lt(await super._call(O))}}class Kb extends Z{}class Y2 extends Kb{}class Z2 extends Kb{async _call(O){return new Lt(await super._call(O))}}class qb extends Z{}class J2 extends qb{}class eA extends qb{async _call(O){return new Lt(await super._call(O))}}class tA extends Z{}class rA extends tA{}class Xb extends Z{}class nA extends Xb{}class iA extends Xb{async _call(O){return new oA(await super._call(O))}}class oA extends ve{constructor({logits:O,pred_boxes:q}){super(),this.logits=O,this.pred_boxes=q}}class aA extends Z{}class sA extends aA{async get_image_embeddings({pixel_values:O}){return await W(this,{pixel_values:O})}async forward(O){if((!O.image_embeddings||!O.image_positional_embeddings)&&(O={...O,...await this.get_image_embeddings(O)}),!O.input_labels&&O.input_points){const fe=O.input_points.dims.slice(0,-1),Pe=fe.reduce((xe,De)=>xe*De,1);O.input_labels=new f.Tensor("int64",new BigInt64Array(Pe).fill(1n),fe)}const q={image_embeddings:O.image_embeddings,image_positional_embeddings:O.image_positional_embeddings};return O.input_points&&(q.input_points=O.input_points),O.input_labels&&(q.input_labels=O.input_labels),O.input_boxes&&(q.input_boxes=O.input_boxes),await j(this.sessions.prompt_encoder_mask_decoder,q)}async _call(O){return new lA(await super._call(O))}}class lA extends ve{constructor({iou_scores:O,pred_masks:q}){super(),this.iou_scores=O,this.pred_masks=q}}class Qb extends Z{}class uA extends Qb{}class cA extends Qb{}class Yb extends Z{}class dA extends Yb{}class fA extends Yb{}class Vs extends Z{}class pA extends Vs{}class hA extends Vs{async _call(O){return new Xl(await super._call(O))}}class mA extends Vs{async _call(O){return new Lt(await super._call(O))}}class gA extends Vs{async _call(O){return new Tn(await super._call(O))}}class Zb extends Z{}class _A extends Zb{}class vA extends Zb{async _call(O){return new Tn(await super._call(O))}}class yA extends Z{}class bA extends yA{}class og extends Z{}class wA extends og{}class xA extends og{async _call(O){return new Xl(await super._call(O))}}class MA extends og{async _call(O){return new Lt(await super._call(O))}}class Kf extends Z{}class TA extends Kf{}class PA extends Kf{async _call(O){return new Xl(await super._call(O))}}class EA extends Kf{async _call(O){return new Lt(await super._call(O))}}class SA extends Kf{async _call(O){return new Tn(await super._call(O))}}class ag extends Z{}class CA extends ag{}class $A extends ag{async _call(O){return new Xl(await super._call(O))}}class AA extends ag{async _call(O){return new Lt(await super._call(O))}}class _7 extends Z{}class OA extends Vs{}class kA extends Vs{async _call(O){return new Xl(await super._call(O))}}class IA extends Vs{async _call(O){return new Lt(await super._call(O))}}class vc extends Z{}class DA extends vc{}class jA extends vc{async _call(O){return new Xl(await super._call(O))}}class FA extends vc{async _call(O){return new Lt(await super._call(O))}}class LA extends vc{async _call(O){return new Qk(await super._call(O))}}class NA extends vc{async _call(O){return new Tn(await super._call(O))}}class RA extends Z{}class zA extends RA{}class sg extends Z{}class v7 extends sg{}class BA extends sg{}class UA extends sg{async generate_speech(O,q,{threshold:fe=.5,minlenratio:Pe=0,maxlenratio:xe=20,vocoder:De=null}={}){const Ve={input_ids:O},{encoder_outputs:Ze,encoder_attention_mask:at}=await W(this,Ve),Tt=Ze.dims[1]/this.config.reduction_factor,kt=Math.floor(Tt*xe),It=Math.floor(Tt*Pe),Jt=this.config.num_mel_bins;let Et=[],Wt=null,wt=null,Yt=0;for(;;){++Yt;const rn=G(!!wt);let Qr;wt?Qr=wt.output_sequence_out:Qr=new f.Tensor("float32",new Float32Array(Jt),[1,1,Jt]);let bn={use_cache_branch:rn,output_sequence:Qr,encoder_attention_mask:at,speaker_embeddings:q,encoder_hidden_states:Ze};this.addPastKeyValues(bn,Wt),wt=await j(this.sessions.decoder_model_merged,bn),Wt=this.getPastKeyValues(wt,Wt);const{prob:Fn,spectrum:Gt}=wt;if(Et.push(Gt),Yt>=It&&(Array.from(Fn.data).filter(Pn=>Pn>=fe).length>0||Yt>=kt))break}const yr=(0,f.cat)(Et),{waveform:Ir}=await j(De.sessions.model,{spectrogram:yr});return{spectrogram:yr,waveform:Ir}}}class WA extends Z{constructor(){super(...arguments);le(this,"main_input_name","spectrogram")}}class VA extends Z{}class GA extends VA{}class Jb extends Z{}class HA extends Jb{}class KA extends Jb{}class ew extends Z{}class qA extends ew{}class XA extends ew{}class tw extends Z{}class QA extends tw{}class YA extends tw{}class rw extends Z{}class ZA extends rw{}class JA extends rw{}class lg extends Z{}class eO extends lg{}class tO extends lg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"text_model"})}}class rO extends lg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"audio_model"})}}class nO extends Z{}class nw extends nO{async _call(O){return new Zk(await super._call(O))}}class ug extends Z{}class y7 extends ug{}class iO extends ug{}class oO extends ug{}class iw extends Z{}class aO extends iw{}class sO extends iw{}class ow extends Z{}class lO extends ow{}class uO extends ow{async _call(O){return new Lt(await super._call(O))}}class aw extends Z{}class b7 extends aw{}class w7 extends aw{}class sw extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}_apply_and_filter_by_delay_pattern_mask(q){const[fe,Pe]=q.dims,xe=this.config.decoder.num_codebooks,De=Pe-xe;let Ve=0;for(let Tt=0;Tt<q.size;++Tt){if(q.data[Tt]===this.config.decoder.pad_token_id)continue;const kt=Tt%Pe,It=Math.floor(Tt/Pe)%xe,Jt=kt-It;Jt>0&&Jt<=De&&(q.data[Ve++]=q.data[Tt])}const Ze=Math.floor(fe/xe),at=Ve/(Ze*xe);return new f.Tensor(q.type,q.data.slice(0,Ve),[Ze,xe,at])}prepare_inputs_for_generation(q,fe,Pe){let xe=structuredClone(q);for(let Ve=0;Ve<xe.length;++Ve)for(let Ze=0;Ze<xe[Ve].length;++Ze)Ve%this.config.decoder.num_codebooks>=Ze&&(xe[Ve][Ze]=BigInt(this.config.decoder.pad_token_id));return Pe.guidance_scale!==null&&Pe.guidance_scale>1&&(xe=xe.concat(xe)),super.prepare_inputs_for_generation(xe,fe,Pe)}async generate(q){const fe=await super.generate(q),Pe=this._apply_and_filter_by_delay_pattern_mask(fe).unsqueeze_(0),{audio_values:xe}=await j(this.sessions.encodec_decode,{audio_codes:Pe});return xe}}class cg extends Z{}class cO extends cg{}class dO extends cg{async _call(O){return new Lt(await super._call(O))}}class fO extends cg{}class dg extends Z{}class pO extends dg{}class hO extends dg{async _call(O){return new Lt(await super._call(O))}}class mO extends dg{}class fg extends Z{}class gO extends fg{}class _O extends fg{async _call(O){return new Lt(await super._call(O))}}class vO extends fg{}class pg extends Z{}class yO extends pg{}class bO extends pg{async _call(O){return new Lt(await super._call(O))}}class wO extends pg{}class xO extends Z{}class MO extends xO{}class TO extends Z{}class PO extends TO{constructor(...q){super(...q);le(this,"forward_params",["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"]);this._generation_mode="text"}async forward(q){const fe=this._generation_mode??"text";let Pe;if(fe==="text"||!q.past_key_values){const at=this.sessions.prepare_inputs_embeds,Tt=(0,s.pick)(q,at.inputNames);Pe=await j(at,Tt)}else{const at=this.sessions.gen_img_embeds,Tt=(0,s.pick)({image_ids:q.input_ids},at.inputNames);Pe=await j(at,Tt)}const xe={...q,...Pe},De=await te(this,xe),Ve=this.sessions[fe==="text"?"lm_head":"gen_head"];if(!Ve)throw new Error(`Unable to find "${Ve}" generation head`);const Ze=await j(Ve,(0,s.pick)(De,Ve.inputNames));return{...Pe,...De,...Ze}}async generate(q){return this._generation_mode="text",super.generate(q)}async generate_images(q){this._generation_mode="image";const fe=(q.inputs??q[this.main_input_name]).dims[1],xe=(await super.generate(q)).slice(null,[fe,null]),De=this.sessions.image_decode,{decoded_image:Ve}=await j(De,{generated_tokens:xe}),Ze=Ve.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),at=[];for(const Tt of Ze){const kt=p.RawImage.fromTensor(Tt);at.push(kt)}return at}}class EO extends ve{constructor({char_logits:O,bpe_logits:q,wp_logits:fe}){super(),this.char_logits=O,this.bpe_logits=q,this.wp_logits=fe}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class SO extends Z{}class CO extends SO{async _call(O){return new EO(await super._call(O))}}class lw extends Z{}class $O extends lw{}class AO extends lw{}class uw extends Z{}class OO extends uw{}class kO extends uw{}class IO extends Z{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","position_ids","audio_values","past_key_values"])}}class cw extends IO{_merge_input_ids_with_audio_features(O){const q=O.audio_features.dims.at(-1),fe=O.audio_features.view(-1,q);return K({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...O,audio_features:fe})}}class DO extends cw{}class hg extends Z{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class jO extends ve{constructor({audio_codes:O}){super(),this.audio_codes=O}}class FO extends ve{constructor({audio_values:O}){super(),this.audio_values=O}}class LO extends hg{async encode(O){return new jO(await j(this.sessions.encoder_model,O))}async decode(O){return new FO(await j(this.sessions.decoder_model,O))}}class NO extends hg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class RO extends hg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class mg extends Z{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class zO extends ve{constructor({audio_codes:O}){super(),this.audio_codes=O}}class BO extends ve{constructor({audio_values:O}){super(),this.audio_values=O}}class UO extends mg{async encode(O){return new zO(await j(this.sessions.encoder_model,O))}async decode(O){return new BO(await j(this.sessions.decoder_model,O))}}class WO extends mg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class VO extends mg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class gg extends Z{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class GO extends gg{async encode(O){return await j(this.sessions.encoder_model,O)}async decode(O){return await j(this.sessions.decoder_model,O)}}class HO extends gg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"encoder_model"})}}class KO extends gg{static async from_pretrained(O,q={}){return super.from_pretrained(O,{...q,model_file_name:q.model_file_name??"decoder_model"})}}class ar{static async from_pretrained(O,{progress_callback:q=null,config:fe=null,cache_dir:Pe=null,local_files_only:xe=!1,revision:De="main",model_file_name:Ve=null,subfolder:Ze="onnx",device:at=null,dtype:Tt=null,use_external_data_format:kt=null,session_options:It={}}={}){const Jt={progress_callback:q,config:fe,cache_dir:Pe,local_files_only:xe,revision:De,model_file_name:Ve,subfolder:Ze,device:at,dtype:Tt,use_external_data_format:kt,session_options:It};if(Jt.config=await n.AutoConfig.from_pretrained(O,Jt),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const Et=Jt.config.model_type;for(const Wt of this.MODEL_CLASS_MAPPINGS){let wt=Wt.get(Et);if(!wt){for(const Yt of Wt.values())if(Yt[0]===Et){wt=Yt;break}if(!wt)continue}return await wt[1].from_pretrained(O,Jt)}if(this.BASE_IF_FAIL)return yk.has(Et)||console.warn(`Unknown model class "${Et}", attempting to construct from base class.`),await Z.from_pretrained(O,Jt);throw Error(`Unsupported model type: ${Et}`)}}le(ar,"MODEL_CLASS_MAPPINGS",null),le(ar,"BASE_IF_FAIL",!1);const x7=new Map([["bert",["BertModel",we]],["neobert",["NeoBertModel",Ce]],["modernbert",["ModernBertModel",ot]],["nomic_bert",["NomicBertModel",Ni]],["roformer",["RoFormerModel",cn]],["electra",["ElectraModel",Q]],["esm",["EsmModel",es]],["convbert",["ConvBertModel",St]],["camembert",["CamembertModel",Ct]],["deberta",["DebertaModel",si]],["deberta-v2",["DebertaV2Model",bo]],["mpnet",["MPNetModel",Ll]],["albert",["AlbertModel",it]],["distilbert",["DistilBertModel",Ri]],["roberta",["RobertaModel",Am]],["xlm",["XLMModel",Dm]],["xlm-roberta",["XLMRobertaModel",Rm]],["clap",["ClapModel",eO]],["clip",["CLIPModel",Of]],["clipseg",["CLIPSegModel",Gl]],["chinese_clip",["ChineseCLIPModel",xt]],["siglip",["SiglipModel",eg]],["jina_clip",["JinaCLIPModel",Ff]],["mobilebert",["MobileBertModel",Mr]],["squeezebert",["SqueezeBertModel",ue]],["wav2vec2",["Wav2Vec2Model",pA]],["wav2vec2-bert",["Wav2Vec2BertModel",CA]],["unispeech",["UniSpeechModel",wA]],["unispeech-sat",["UniSpeechSatModel",TA]],["hubert",["HubertModel",OA]],["wavlm",["WavLMModel",DA]],["audio-spectrogram-transformer",["ASTModel",Bm]],["vits",["VitsModel",nw]],["pyannote",["PyAnnoteModel",_A]],["wespeaker-resnet",["WeSpeakerResNetModel",bA]],["detr",["DetrModel",t2]],["rt_detr",["RTDetrModel",i2]],["rt_detr_v2",["RTDetrV2Model",a2]],["rf_detr",["RFDetrModel",u2]],["d_fine",["DFineModel",f2]],["table-transformer",["TableTransformerModel",h2]],["vit",["ViTModel",S$]],["ijepa",["IJepaModel",$$]],["pvt",["PvtModel",I$]],["vit_msn",["ViTMSNModel",L$]],["vit_mae",["ViTMAEModel",F$]],["groupvit",["GroupViTModel",z$]],["fastvit",["FastViTModel",B$]],["mobilevit",["MobileViTModel",G$]],["mobilevitv2",["MobileViTV2Model",K$]],["owlvit",["OwlViTModel",X$]],["owlv2",["Owlv2Model",Y$]],["beit",["BeitModel",J$]],["deit",["DeiTModel",_2]],["hiera",["HieraModel",y2]],["convnext",["ConvNextModel",K2]],["convnextv2",["ConvNextV2Model",X2]],["dinov2",["Dinov2Model",Y2]],["dinov2_with_registers",["Dinov2WithRegistersModel",J2]],["resnet",["ResNetModel",w2]],["swin",["SwinModel",M2]],["swin2sr",["Swin2SRModel",E2]],["donut-swin",["DonutSwinModel",H2]],["yolos",["YolosModel",nA]],["dpt",["DPTModel",C2]],["glpn",["GLPNModel",W2]],["hifigan",["SpeechT5HifiGan",WA]],["efficientnet",["EfficientNetModel",lO]],["decision_transformer",["DecisionTransformerModel",MO]],["patchtst",["PatchTSTForPrediction",$O]],["patchtsmixer",["PatchTSMixerForPrediction",OO]],["mobilenet_v1",["MobileNetV1Model",cO]],["mobilenet_v2",["MobileNetV2Model",pO]],["mobilenet_v3",["MobileNetV3Model",gO]],["mobilenet_v4",["MobileNetV4Model",yO]],["maskformer",["MaskFormerModel",B2]],["mgp-str",["MgpstrForSceneTextRecognition",CO]],["style_text_to_speech_2",["StyleTextToSpeech2Model",zA]]]),M7=new Map([["t5",["T5Model",tr]],["longt5",["LongT5Model",_n]],["mt5",["MT5Model",vn]],["bart",["BartModel",Ar]],["mbart",["MBartModel",Ko]],["marian",["MarianModel",uA]],["whisper",["WhisperModel",Bs]],["m2m_100",["M2M100Model",dA]],["blenderbot",["BlenderbotModel",fn]],["blenderbot-small",["BlenderbotSmallModel",ns]]]),T7=new Map([["mimi",["MimiModel",LO]],["dac",["DacModel",UO]],["snac",["SnacModel",GO]]]),P7=new Map([["bloom",["BloomModel",w$]],["jais",["JAISModel",zf]],["gpt2",["GPT2Model",Nf]],["gptj",["GPTJModel",Vf]],["gpt_bigcode",["GPTBigCodeModel",P]],["gpt_neo",["GPTNeoModel",Kl]],["gpt_neox",["GPTNeoXModel",Uf]],["codegen",["CodeGenModel",X]],["llama",["LlamaModel",Ie]],["lfm2",["Lfm2Model",ht]],["smollm3",["SmolLM3Model",pr]],["exaone",["ExaoneModel",GC]],["olmo",["OlmoModel",XC]],["olmo2",["Olmo2Model",YC]],["mobilellm",["MobileLLMModel",KC]],["granite",["GraniteModel",JC]],["cohere",["CohereModel",t$]],["gemma",["GemmaModel",n$]],["gemma2",["Gemma2Model",o$]],["gemma3_text",["Gemma3Model",s$]],["helium",["HeliumModel",tg]],["glm",["GlmModel",WC]],["openelm",["OpenELMModel",u$]],["qwen2",["Qwen2Model",d$]],["qwen3",["Qwen3Model",p$]],["phi",["PhiModel",_$]],["phi3",["Phi3Model",y$]],["mpt",["MptModel",M$]],["opt",["OPTModel",P$]],["mistral",["MistralModel",HA]],["ernie4_5",["Ernie4_5_Model",qA]],["starcoder2",["Starcoder2Model",QA]],["falcon",["FalconModel",ZA]],["stablelm",["StableLmModel",aO]],["modernbert-decoder",["ModernBertDecoderModel",$r]]]),dw=new Map([["speecht5",["SpeechT5ForSpeechToText",BA]],["whisper",["WhisperForConditionalGeneration",Sf]],["lite-whisper",["LiteWhisperForConditionalGeneration",Cf]],["moonshine",["MoonshineForConditionalGeneration",Um]]]),qO=new Map([["speecht5",["SpeechT5ForTextToSpeech",UA]]]),XO=new Map([["vits",["VitsModel",nw]],["musicgen",["MusicgenForConditionalGeneration",sw]]]),QO=new Map([["bert",["BertForSequenceClassification",Me]],["neobert",["NeoBertForSequenceClassification",Ye]],["modernbert",["ModernBertForSequenceClassification",Ut]],["roformer",["RoFormerForSequenceClassification",Pa]],["electra",["ElectraForSequenceClassification",ce]],["esm",["EsmForSequenceClassification",Ge]],["convbert",["ConvBertForSequenceClassification",pt]],["camembert",["CamembertForSequenceClassification",jt]],["deberta",["DebertaForSequenceClassification",zr]],["deberta-v2",["DebertaV2ForSequenceClassification",Ea]],["mpnet",["MPNetForSequenceClassification",Rl]],["albert",["AlbertForSequenceClassification",et]],["distilbert",["DistilBertForSequenceClassification",Hn]],["roberta",["RobertaForSequenceClassification",Om]],["xlm",["XLMForSequenceClassification",Fm]],["xlm-roberta",["XLMRobertaForSequenceClassification",xf]],["bart",["BartForSequenceClassification",fi]],["mbart",["MBartForSequenceClassification",wo]],["mobilebert",["MobileBertForSequenceClassification",Go]],["squeezebert",["SqueezeBertForSequenceClassification",_e]]]),YO=new Map([["bert",["BertForTokenClassification",je]],["neobert",["NeoBertForTokenClassification",rt]],["modernbert",["ModernBertForTokenClassification",Nt]],["roformer",["RoFormerForTokenClassification",yo]],["electra",["ElectraForTokenClassification",Se]],["esm",["EsmForTokenClassification",He]],["convbert",["ConvBertForTokenClassification",Xt]],["camembert",["CamembertForTokenClassification",ft]],["deberta",["DebertaForTokenClassification",On]],["deberta-v2",["DebertaV2ForTokenClassification",Sa]],["mpnet",["MPNetForTokenClassification",ye]],["distilbert",["DistilBertForTokenClassification",Vo]],["roberta",["RobertaForTokenClassification",km]],["xlm",["XLMForTokenClassification",Lm]],["xlm-roberta",["XLMRobertaForTokenClassification",Mf]]]),fw=new Map([["t5",["T5ForConditionalGeneration",Br]],["longt5",["LongT5ForConditionalGeneration",xn]],["mt5",["MT5ForConditionalGeneration",Kn]],["bart",["BartForConditionalGeneration",yn]],["mbart",["MBartForConditionalGeneration",Dn]],["marian",["MarianMTModel",cA]],["m2m_100",["M2M100ForConditionalGeneration",fA]],["blenderbot",["BlenderbotForConditionalGeneration",Ur]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",ac]]]),pw=new Map([["bloom",["BloomForCausalLM",x$]],["gpt2",["GPT2LMHeadModel",Rf]],["jais",["JAISLMHeadModel",Bf]],["gptj",["GPTJForCausalLM",Gf]],["gpt_bigcode",["GPTBigCodeForCausalLM",A]],["gpt_neo",["GPTNeoForCausalLM",mc]],["gpt_neox",["GPTNeoXForCausalLM",Wf]],["codegen",["CodeGenForCausalLM",ee]],["llama",["LlamaForCausalLM",We]],["lfm2",["Lfm2ForCausalLM",Ft]],["smollm3",["SmolLM3ForCausalLM",Mn]],["exaone",["ExaoneForCausalLM",HC]],["olmo",["OlmoForCausalLM",QC]],["olmo2",["Olmo2ForCausalLM",ZC]],["mobilellm",["MobileLLMForCausalLM",qC]],["granite",["GraniteForCausalLM",e$]],["cohere",["CohereForCausalLM",r$]],["gemma",["GemmaForCausalLM",i$]],["gemma2",["Gemma2ForCausalLM",a$]],["gemma3_text",["Gemma3ForCausalLM",l$]],["helium",["HeliumForCausalLM",UC]],["glm",["GlmForCausalLM",VC]],["openelm",["OpenELMForCausalLM",c$]],["qwen2",["Qwen2ForCausalLM",f$]],["qwen3",["Qwen3ForCausalLM",h$]],["phi",["PhiForCausalLM",v$]],["phi3",["Phi3ForCausalLM",b$]],["mpt",["MptForCausalLM",T$]],["opt",["OPTForCausalLM",E$]],["mbart",["MBartForCausalLM",tn]],["mistral",["MistralForCausalLM",KA]],["ernie4_5",["Ernie4_5_ForCausalLM",XA]],["starcoder2",["Starcoder2ForCausalLM",YA]],["falcon",["FalconForCausalLM",JA]],["trocr",["TrOCRForCausalLM",GA]],["stablelm",["StableLmForCausalLM",sO]],["modernbert-decoder",["ModernBertDecoderForCausalLM",un]],["phi3_v",["Phi3VForCausalLM",Ul]]]),E7=new Map([["multi_modality",["MultiModalityCausalLM",PO]]]),ZO=new Map([["bert",["BertForMaskedLM",$e]],["neobert",["NeoBertForMaskedLM",st]],["modernbert",["ModernBertForMaskedLM",lt]],["roformer",["RoFormerForMaskedLM",Wo]],["electra",["ElectraForMaskedLM",oe]],["esm",["EsmForMaskedLM",di]],["convbert",["ConvBertForMaskedLM",Zt]],["camembert",["CamembertForMaskedLM",Mt]],["deberta",["DebertaForMaskedLM",Ti]],["deberta-v2",["DebertaV2ForMaskedLM",In]],["mpnet",["MPNetForMaskedLM",Nl]],["albert",["AlbertForMaskedLM",At]],["distilbert",["DistilBertForMaskedLM",gn]],["roberta",["RobertaForMaskedLM",wf]],["xlm",["XLMWithLMHeadModel",jm]],["xlm-roberta",["XLMRobertaForMaskedLM",zm]],["mobilebert",["MobileBertForMaskedLM",ts]],["squeezebert",["SqueezeBertForMaskedLM",he]]]),JO=new Map([["bert",["BertForQuestionAnswering",ze]],["neobert",["NeoBertForQuestionAnswering",Je]],["roformer",["RoFormerForQuestionAnswering",ei]],["electra",["ElectraForQuestionAnswering",Re]],["convbert",["ConvBertForQuestionAnswering",D]],["camembert",["CamembertForQuestionAnswering",ir]],["deberta",["DebertaForQuestionAnswering",kn]],["deberta-v2",["DebertaV2ForQuestionAnswering",ui]],["mpnet",["MPNetForQuestionAnswering",R]],["albert",["AlbertForQuestionAnswering",ct]],["distilbert",["DistilBertForQuestionAnswering",dn]],["roberta",["RobertaForQuestionAnswering",Im]],["xlm",["XLMForQuestionAnswering",Nm]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Tf]],["mobilebert",["MobileBertForQuestionAnswering",rs]],["squeezebert",["SqueezeBertForQuestionAnswering",ke]]]),hw=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",zl]],["idefics3",["Idefics3ForConditionalGeneration",Bl]],["smolvlm",["SmolVLMForConditionalGeneration",Af]]]),ek=new Map([["llava",["LlavaForConditionalGeneration",uc]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",Wm]],["moondream1",["Moondream1ForConditionalGeneration",Vm]],["florence2",["Florence2ForConditionalGeneration",Hm]],["qwen2-vl",["Qwen2VLForConditionalGeneration",g$]],["idefics3",["Idefics3ForConditionalGeneration",Bl]],["smolvlm",["SmolVLMForConditionalGeneration",Af]],["paligemma",["PaliGemmaForConditionalGeneration",qm]],["llava_qwen2",["LlavaQwen2ForCausalLM",Xm]],["gemma3n",["Gemma3nForConditionalGeneration",Us]]]),tk=new Map([["ultravox",["UltravoxModel",cw]],["voxtral",["VoxtralForConditionalGeneration",DO]]]),S7=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",zl]]]),rk=new Map([["vit",["ViTForImageClassification",C$]],["ijepa",["IJepaForImageClassification",A$]],["pvt",["PvtForImageClassification",D$]],["vit_msn",["ViTMSNForImageClassification",N$]],["fastvit",["FastViTForImageClassification",U$]],["mobilevit",["MobileViTForImageClassification",H$]],["mobilevitv2",["MobileViTV2ForImageClassification",q$]],["beit",["BeitForImageClassification",e2]],["deit",["DeiTForImageClassification",v2]],["hiera",["HieraForImageClassification",b2]],["convnext",["ConvNextForImageClassification",q2]],["convnextv2",["ConvNextV2ForImageClassification",Q2]],["dinov2",["Dinov2ForImageClassification",Z2]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",eA]],["resnet",["ResNetForImageClassification",x2]],["swin",["SwinForImageClassification",T2]],["segformer",["SegformerForImageClassification",iO]],["efficientnet",["EfficientNetForImageClassification",uO]],["mobilenet_v1",["MobileNetV1ForImageClassification",dO]],["mobilenet_v2",["MobileNetV2ForImageClassification",hO]],["mobilenet_v3",["MobileNetV3ForImageClassification",_O]],["mobilenet_v4",["MobileNetV4ForImageClassification",bO]]]),nk=new Map([["detr",["DetrForObjectDetection",r2]],["rt_detr",["RTDetrForObjectDetection",o2]],["rt_detr_v2",["RTDetrV2ForObjectDetection",s2]],["rf_detr",["RFDetrForObjectDetection",c2]],["d_fine",["DFineForObjectDetection",p2]],["table-transformer",["TableTransformerForObjectDetection",m2]],["yolos",["YolosForObjectDetection",iA]]]),ik=new Map([["owlvit",["OwlViTForObjectDetection",Q$]],["owlv2",["Owlv2ForObjectDetection",Z$]],["grounding-dino",["GroundingDinoForObjectDetection",rA]]]),yc=new Map([["detr",["DetrForSegmentation",Ob]],["clipseg",["CLIPSegForImageSegmentation",fc]]]),ok=new Map([["segformer",["SegformerForSemanticSegmentation",oO]],["sapiens",["SapiensForSemanticSegmentation",k2]],["swin",["SwinForSemanticSegmentation",P2]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",fO]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",mO]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",vO]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",wO]]]),ak=new Map([["detr",["DetrForSegmentation",Ob]],["maskformer",["MaskFormerForInstanceSegmentation",U2]]]),sk=new Map([["sam",["SamModel",sA]]]),lk=new Map([["wav2vec2",["Wav2Vec2ForCTC",hA]],["wav2vec2-bert",["Wav2Vec2BertForCTC",$A]],["unispeech",["UniSpeechForCTC",xA]],["unispeech-sat",["UniSpeechSatForCTC",PA]],["wavlm",["WavLMForCTC",jA]],["hubert",["HubertForCTC",kA]]]),uk=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",mA]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",AA]],["unispeech",["UniSpeechForSequenceClassification",MA]],["unispeech-sat",["UniSpeechSatForSequenceClassification",EA]],["wavlm",["WavLMForSequenceClassification",FA]],["hubert",["HubertForSequenceClassification",IA]],["audio-spectrogram-transformer",["ASTForAudioClassification",Ef]]]),ck=new Map([["wavlm",["WavLMForXVector",LA]]]),dk=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",SA]],["wavlm",["WavLMForAudioFrameClassification",NA]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",gA]],["pyannote",["PyAnnoteForAudioFrameClassification",vA]]]),fk=new Map([["vitmatte",["VitMatteForImageMatting",V$]]]),C7=new Map([["patchtst",["PatchTSTForPrediction",AO]],["patchtsmixer",["PatchTSMixerForPrediction",kO]]]),pk=new Map([["swin2sr",["Swin2SRForImageSuperResolution",S2]]]),hk=new Map([["dpt",["DPTForDepthEstimation",$2]],["depth_anything",["DepthAnythingForDepthEstimation",O2]],["glpn",["GLPNForDepthEstimation",V2]],["sapiens",["SapiensForDepthEstimation",I2]],["depth_pro",["DepthProForDepthEstimation",F2]],["metric3d",["Metric3DForDepthEstimation",N2]],["metric3dv2",["Metric3Dv2ForDepthEstimation",z2]]]),mk=new Map([["sapiens",["SapiensForNormalEstimation",D2]]]),gk=new Map([["vitpose",["VitPoseForPoseEstimation",k$]]]),_k=new Map([["clip",["CLIPVisionModelWithProjection",If]],["siglip",["SiglipVisionModel",jf]],["jina_clip",["JinaCLIPVisionModel",Vl]]]),vk=[[x7,w.EncoderOnly],[M7,w.EncoderDecoder],[P7,w.DecoderOnly],[T7,w.AutoEncoder],[QO,w.EncoderOnly],[YO,w.EncoderOnly],[fw,w.Seq2Seq],[dw,w.Seq2Seq],[pw,w.DecoderOnly],[E7,w.MultiModality],[ZO,w.EncoderOnly],[JO,w.EncoderOnly],[hw,w.Vision2Seq],[ek,w.ImageTextToText],[tk,w.AudioTextToText],[rk,w.EncoderOnly],[yc,w.EncoderOnly],[ak,w.EncoderOnly],[ok,w.EncoderOnly],[fk,w.EncoderOnly],[C7,w.EncoderOnly],[pk,w.EncoderOnly],[hk,w.EncoderOnly],[mk,w.EncoderOnly],[gk,w.EncoderOnly],[nk,w.EncoderOnly],[ik,w.EncoderOnly],[sk,w.MaskGeneration],[lk,w.EncoderOnly],[uk,w.EncoderOnly],[qO,w.Seq2Seq],[XO,w.EncoderOnly],[ck,w.EncoderOnly],[dk,w.EncoderOnly],[_k,w.EncoderOnly]];for(const[C,O]of vk)for(const[q,fe]of C.values())y.set(q,O),M.set(fe,q),x.set(q,fe);const $7=[["MusicgenForConditionalGeneration",sw,w.Musicgen],["Phi3VForCausalLM",Ul,w.Phi3V],["CLIPTextModelWithProjection",kf,w.EncoderOnly],["SiglipTextModel",Df,w.EncoderOnly],["JinaCLIPTextModel",Lf,w.EncoderOnly],["ClapTextModelWithProjection",tO,w.EncoderOnly],["ClapAudioModelWithProjection",rO,w.EncoderOnly],["DacEncoderModel",WO,w.EncoderOnly],["DacDecoderModel",VO,w.EncoderOnly],["MimiEncoderModel",NO,w.EncoderOnly],["MimiDecoderModel",RO,w.EncoderOnly],["SnacEncoderModel",HO,w.EncoderOnly],["SnacDecoderModel",KO,w.EncoderOnly],["Gemma3nForConditionalGeneration",Us,w.ImageAudioTextToText]];for(const[C,O,q]of $7)y.set(C,q),M.set(O,C),x.set(C,O);const yk=new Map([["modnet",yc],["birefnet",yc],["isnet",yc],["ben",yc]]);for(const[C,O]of yk.entries())O.set(C,["PreTrainedModel",Z]),y.set(C,w.EncoderOnly),M.set(Z,C),x.set(C,Z);class mw extends ar{}le(mw,"MODEL_CLASS_MAPPINGS",vk.map(O=>O[0])),le(mw,"BASE_IF_FAIL",!0);class bk extends ar{}le(bk,"MODEL_CLASS_MAPPINGS",[QO]);class wk extends ar{}le(wk,"MODEL_CLASS_MAPPINGS",[YO]);class xk extends ar{}le(xk,"MODEL_CLASS_MAPPINGS",[fw]);class Mk extends ar{}le(Mk,"MODEL_CLASS_MAPPINGS",[dw]);class Tk extends ar{}le(Tk,"MODEL_CLASS_MAPPINGS",[qO]);class Pk extends ar{}le(Pk,"MODEL_CLASS_MAPPINGS",[XO]);class Ek extends ar{}le(Ek,"MODEL_CLASS_MAPPINGS",[pw]);class Sk extends ar{}le(Sk,"MODEL_CLASS_MAPPINGS",[ZO]);class Ck extends ar{}le(Ck,"MODEL_CLASS_MAPPINGS",[JO]);class $k extends ar{}le($k,"MODEL_CLASS_MAPPINGS",[hw]);class Ak extends ar{}le(Ak,"MODEL_CLASS_MAPPINGS",[rk]);class Ok extends ar{}le(Ok,"MODEL_CLASS_MAPPINGS",[yc]);class kk extends ar{}le(kk,"MODEL_CLASS_MAPPINGS",[ok]);class Ik extends ar{}le(Ik,"MODEL_CLASS_MAPPINGS",[ak]);class Dk extends ar{}le(Dk,"MODEL_CLASS_MAPPINGS",[nk]);class jk extends ar{}le(jk,"MODEL_CLASS_MAPPINGS",[ik]);class Fk extends ar{}le(Fk,"MODEL_CLASS_MAPPINGS",[sk]);class Lk extends ar{}le(Lk,"MODEL_CLASS_MAPPINGS",[lk]);class Nk extends ar{}le(Nk,"MODEL_CLASS_MAPPINGS",[uk]);class Rk extends ar{}le(Rk,"MODEL_CLASS_MAPPINGS",[ck]);class zk extends ar{}le(zk,"MODEL_CLASS_MAPPINGS",[dk]);class Bk extends ar{}le(Bk,"MODEL_CLASS_MAPPINGS",[S7]);class Uk extends ar{}le(Uk,"MODEL_CLASS_MAPPINGS",[fk]);class Wk extends ar{}le(Wk,"MODEL_CLASS_MAPPINGS",[pk]);class Vk extends ar{}le(Vk,"MODEL_CLASS_MAPPINGS",[hk]);class Gk extends ar{}le(Gk,"MODEL_CLASS_MAPPINGS",[mk]);class Hk extends ar{}le(Hk,"MODEL_CLASS_MAPPINGS",[gk]);class Kk extends ar{}le(Kk,"MODEL_CLASS_MAPPINGS",[_k]);class qk extends ar{}le(qk,"MODEL_CLASS_MAPPINGS",[ek]);class Xk extends ar{}le(Xk,"MODEL_CLASS_MAPPINGS",[tk]);class A7 extends ve{constructor({logits:O,past_key_values:q,encoder_outputs:fe,decoder_attentions:Pe=null,cross_attentions:xe=null}){super(),this.logits=O,this.past_key_values=q,this.encoder_outputs=fe,this.decoder_attentions=Pe,this.cross_attentions=xe}}class Lt extends ve{constructor({logits:O,...q}){super(),this.logits=O;const fe=Object.values(q);fe.length>0&&(this.attentions=fe)}}class Qk extends ve{constructor({logits:O,embeddings:q}){super(),this.logits=O,this.embeddings=q}}class Tn extends ve{constructor({logits:O}){super(),this.logits=O}}class jn extends ve{constructor({logits:O}){super(),this.logits=O}}class ri extends ve{constructor({start_logits:O,end_logits:q}){super(),this.start_logits=O,this.end_logits=q}}class Xl extends ve{constructor({logits:O}){super(),this.logits=O}}class O7 extends ve{constructor({logits:O,past_key_values:q}){super(),this.logits=O,this.past_key_values=q}}class Yk extends ve{constructor({alphas:O}){super(),this.alphas=O}}class Zk extends ve{constructor({waveform:O,spectrogram:q}){super(),this.waveform=O,this.spectrogram=q}}},"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(s){super(s);const l=this.config.sampling_rate,u=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=u,this.window=(0,i.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(s,l){return(0,i.spectrogram)(s,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(s){(0,n.validate_audio_inputs)(s,"ASTFeatureExtractor");const l=await this._extract_fbank_features(s,this.config.max_length);if(this.config.do_normalize){const u=this.std*2,d=l.data;for(let c=0;c<d.length;++c)d[c]=(d[c]-this.mean)/u}return{input_values:l.unsqueeze_(0)}}}},"./src/models/auto/feature_extraction_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>a});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var o=r("./src/models/feature_extractors.js");class a{static async from_pretrained(l,u={}){const d=await(0,i.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,u),c=d.feature_extractor_type,f=o[c];if(!f)throw new Error(`Unknown feature_extractor_type: '${c}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new f(d)}}},"./src/models/auto/image_processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>s});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),o=r("./src/base/image_processors_utils.js"),a=r("./src/models/image_processors.js");class s{static async from_pretrained(u,d={}){const c=await(0,i.getModelJSON)(u,n.IMAGE_PROCESSOR_NAME,!0,d),f=c.image_processor_type??c.feature_extractor_type;let p=a[f==null?void 0:f.replace(/Fast$/,"")];return p||(f!==void 0&&console.warn(`Image processor type '${f}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),p=o.ImageProcessor),new p(c)}}},"./src/models/auto/processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>u});var n=r("./src/utils/constants.js"),i=r("./src/utils/hub.js"),o=r("./src/base/processing_utils.js"),a=r("./src/models/processors.js"),s=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class u{static async from_pretrained(c,f={}){const p=await(0,i.getModelJSON)(c,n.IMAGE_PROCESSOR_NAME,!0,f),{image_processor_type:h,feature_extractor_type:m,processor_class:v}=p;if(v&&a[v])return a[v].from_pretrained(c,f);if(!h&&!m)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const g={};if(h){const b=s[h.replace(/Fast$/,"")];if(!b)throw new Error(`Unknown image_processor_type: '${h}'.`);g.image_processor=new b(p)}if(m){const b=s[m];if(b)g.image_processor=new b(p);else{const w=l[m];if(!w)throw new Error(`Unknown feature_extractor_type: '${m}'.`);g.feature_extractor=new w(p)}}const _={};return new o.Processor(_,g,null)}}},"./src/models/beit/image_processing_beit.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/bit/image_processing_bit.js":(e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/chinese_clip/image_processing_chinese_clip.js":(e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/clap/feature_extraction_clap.js":(e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(s){super(s),this.mel_filters=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,i.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,i.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(s,l,u,d){let c;const f=s.length-l;if(f>0)if(u==="rand_trunc"){const p=Math.floor(Math.random()*(f+1));s=s.subarray(p,p+l),c=await this._extract_fbank_features(s,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${u}" not implemented`);else{if(f<0){let p=new Float64Array(l);if(p.set(s),d==="repeat")for(let h=s.length;h<l;h+=s.length)p.set(s.subarray(0,Math.min(s.length,l-h)),h);else if(d==="repeatpad")for(let h=s.length;h<-f;h+=s.length)p.set(s,h);s=p}if(u==="fusion")throw new Error(`Truncation strategy "${u}" not implemented`);c=await this._extract_fbank_features(s,this.mel_filters_slaney,this.config.nb_max_samples)}return c.unsqueeze_(0)}async _extract_fbank_features(s,l,u=null){return(0,i.spectrogram)(s,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:u,do_pad:!1,transpose:!0})}async _call(s,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(s,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(s,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}},"./src/models/clip/image_processing_clip.js":(e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>o,CLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/convnext/image_processing_convnext.js":(e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>o,ConvNextImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(s){super(s),this.crop_pct=this.config.crop_pct??224/256}async resize(s){var u;const l=(u=this.size)==null?void 0:u.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const d=Math.floor(l/this.crop_pct),[c,f]=this.get_resize_output_image_size(s,{shortest_edge:d});s=await s.resize(c,f,{resample:this.resample}),s=await s.center_crop(l,l)}else s=await s.resize(l,l,{resample:this.resample});return s}}class o extends i{}},"./src/models/dac/feature_extraction_dac.js":(e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>i});var n=r("./src/models/encodec/feature_extraction_encodec.js");class i extends n.EncodecFeatureExtractor{}},"./src/models/deit/image_processing_deit.js":(e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>o,DeiTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/detr/image_processing_detr.js":(e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>a,DetrImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class o extends n.ImageProcessor{async _call(l){const u=await super._call(l),d=[u.pixel_values.dims[0],64,64],c=(0,i.full)(d,1n);return{...u,pixel_mask:c}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class a extends o{}},"./src/models/donut/image_processing_donut.js":(e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>o,DonutImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(s,l,u,d={}){const[c,f,p]=l;let h=this.image_mean;Array.isArray(this.image_mean)||(h=new Array(p).fill(h));let m=this.image_std;Array.isArray(m)||(m=new Array(p).fill(h));const v=h.map((g,_)=>-g/m[_]);return super.pad_image(s,l,u,{center:!0,constant_values:v,...d})}}class o extends i{}},"./src/models/dpt/image_processing_dpt.js":(e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>o,DPTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/efficientnet/image_processing_efficientnet.js":(e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super(a),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(s=>s*s))}}},"./src/models/encodec/feature_extraction_encodec.js":(e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class o extends n.FeatureExtractor{async _call(s){(0,n.validate_audio_inputs)(s,"EncodecFeatureExtractor"),s instanceof Float64Array&&(s=new Float32Array(s));const l=this.config.feature_size;if(s.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const u=[1,l,s.length/l];return{input_values:new i.Tensor("float32",s,u)}}}},"./src/models/feature_extractors.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>o.ClapFeatureExtractor,DacFeatureExtractor:()=>a.DacFeatureExtractor,EncodecFeatureExtractor:()=>i.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>s.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>v.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>u.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>d.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>c.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>f.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>p.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>h.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>m.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),i=r("./src/models/encodec/feature_extraction_encodec.js"),o=r("./src/models/clap/feature_extraction_clap.js"),a=r("./src/models/dac/feature_extraction_dac.js"),s=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),u=r("./src/models/pyannote/feature_extraction_pyannote.js"),d=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),c=r("./src/models/snac/feature_extraction_snac.js"),f=r("./src/models/speecht5/feature_extraction_speecht5.js"),p=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),h=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),m=r("./src/models/whisper/feature_extraction_whisper.js"),v=r("./src/base/image_processors_utils.js")},"./src/models/florence2/processing_florence2.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");class a extends n.Processor{constructor(l,u,d){super(l,u,d);const{tasks_answer_post_processing_type:c,task_prompts_without_inputs:f,task_prompts_with_input:p}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(c??{})),this.task_prompts_without_inputs=new Map(Object.entries(f??{})),this.task_prompts_with_input=new Map(Object.entries(p??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const u=[];for(const d of l)if(this.task_prompts_without_inputs.has(d))u.push(this.task_prompts_without_inputs.get(d));else{for(const[c,f]of this.task_prompts_with_input)if(d.includes(c)){u.push(f.replaceAll("{input}",d).replaceAll(c,""));break}u.length!==l.length&&u.push(d)}return u}post_process_generation(l,u,d){const c=this.tasks_answer_post_processing_type.get(u)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let f;switch(c){case"pure_text":f=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const p=c==="ocr"?"quad_boxes":"bboxes",h=l.matchAll(this.regexes[p]),m=[],v=[];for(const[g,_,...b]of h)m.push(_?_.trim():m.at(-1)??""),v.push(b.map((w,y)=>(Number(w)+.5)/this.size_per_bin*d[y%2]));f={labels:m,[p]:v};break;default:throw new Error(`Task "${u}" (of type "${c}") not yet implemented.`)}return{[u]:f}}async _call(l,u=null,d={}){if(!l&&!u)throw new Error("Either text or images must be provided");const c=await this.image_processor(l,d),f=u?this.tokenizer(this.construct_prompts(u),d):{};return{...c,...f}}}le(a,"tokenizer_class",o.AutoTokenizer),le(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/gemma3n/feature_extraction_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),o=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:u,feature_size:d,min_frequency:c,max_frequency:f,sampling_rate:p,frame_length:h}=this.config,m=(0,o.mel_filter_bank)(Math.floor(1+u/2),d,c,f,p,null,"htk",!1);this.mel_filters=m,this.window=(0,o.window_function)(h,"hann")}async _extract_fbank_features(l,u){return(0,o.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:u=48e4,truncation:d=!0,padding:c=!0,pad_to_multiple_of:f=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),d&&l.length>u&&(l=l.slice(0,u)),c&&l.length%f!==0){const m=f-l.length%f,v=new Float64Array(l.length+m);v.set(l),this.config.padding_value!==0&&v.fill(this.config.padding_value,l.length),l=v}const p=await this._extract_fbank_features(l,this.config.max_length),h=(0,i.full)([1,p.dims[0]],!0);return{input_features:p.unsqueeze_(0),input_features_mask:h}}}},"./src/models/gemma3n/processing_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>s});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class s extends n.Processor{constructor(u,d,c){super(u,d,c),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:f,boa_token:p,audio_token:h,eoa_token:m,image_token_id:v,boi_token:g,image_token:_,eoi_token:b}=this.tokenizer.config;this.audio_token_id=f,this.boa_token=p,this.audio_token=h;const w=h.repeat(this.audio_seq_length);this.full_audio_sequence=`

${p}${w}${m}

`,this.image_token_id=v,this.boi_token=g,this.image_token=_;const y=_.repeat(this.image_seq_length);this.full_image_sequence=`

${g}${y}${b}

`}async _call(u,d=null,c=null,f={}){typeof u=="string"&&(u=[u]);let p;c&&(p=await this.feature_extractor(c,f),u=u.map(v=>v.replaceAll(this.audio_token,this.full_audio_sequence)));let h;return d&&(h=await this.image_processor(d,f),u=u.map(v=>v.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(u,f),...h,...p}}}le(s,"image_processor_class",i.AutoImageProcessor),le(s,"feature_extractor_class",o.AutoFeatureExtractor),le(s,"tokenizer_class",a.AutoTokenizer),le(s,"uses_processor_config",!0),le(s,"uses_chat_template_file",!0)},"./src/models/glpn/image_processing_glpn.js":(e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/grounding_dino/image_processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class o extends n.ImageProcessor{async _call(s){const l=await super._call(s),u=l.pixel_values.dims,d=(0,i.ones)([u[0],u[2],u[3]]);return{...l,pixel_mask:d}}}},"./src/models/grounding_dino/processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js"),a=r("./src/base/image_processors_utils.js");function s(u,d){const f=u.dims.at(-1)-1,p=u.tolist();p.fill(!1,0,1),p.fill(!1,f);const h=d.tolist();return p.map((m,v)=>m?v:null).filter(m=>m!==null).map(m=>h[m])}class l extends n.Processor{async _call(d,c,f={}){const p=d?await this.image_processor(d,f):{};return{...c?this.tokenizer(c,f):{},...p}}post_process_grounded_object_detection(d,c,{box_threshold:f=.25,text_threshold:p=.25,target_sizes:h=null}={}){const{logits:m,pred_boxes:v}=d,g=m.dims[0];if(h!==null&&h.length!==g)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const _=m.dims.at(1),b=m.sigmoid(),w=b.max(-1).tolist(),y=v.tolist().map(M=>M.map(T=>(0,a.center_to_corners_format)(T))),x=[];for(let M=0;M<g;++M){const T=h!==null?h[M]:null;T!==null&&(y[M]=y[M].map(j=>j.map((U,z)=>U*T[(z+1)%2])));const S=w[M],$=[],k=[],F=[];for(let j=0;j<_;++j){const U=S[j];if(U<=f)continue;const z=y[M][j],G=b[M][j];$.push(U),F.push(z);const H=s(G.gt(p),c[M]);k.push(H)}x.push({scores:$,boxes:F,labels:this.batch_decode(k)})}return x}}le(l,"tokenizer_class",o.AutoTokenizer),le(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/idefics3/image_processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class o extends n.ImageProcessor{constructor(s){super(s),this.do_image_splitting=s.do_image_splitting??!0,this.max_image_size=s.max_image_size}get_resize_for_vision_encoder(s,l){let[u,d]=s.dims.slice(-2);const c=d/u;return d>=u?(d=Math.ceil(d/l)*l,u=Math.floor(d/c),u=Math.ceil(u/l)*l):(u=Math.ceil(u/l)*l,d=Math.floor(u*c),d=Math.ceil(d/l)*l),{height:u,width:d}}async _call(s,{do_image_splitting:l=null,return_row_col_info:u=!1}={}){let d;if(!Array.isArray(s))d=[[s]];else{if(s.length===0||!s[0])throw new Error("No images provided.");Array.isArray(s[0])?d=s:d=[s]}let c=[],f=[],p=[];const h=[],m=[];for(const M of d){let T=await Promise.all(M.map(k=>this.preprocess(k)));h.push(...T.map(k=>k.original_size)),m.push(...T.map(k=>k.reshaped_input_size)),T.forEach(k=>k.pixel_values.unsqueeze_(0));const{longest_edge:S}=this.max_image_size;let $;if(l??this.do_image_splitting){let k=new Array(T.length),F=new Array(T.length);$=await Promise.all(T.map(async(j,U)=>{const z=this.get_resize_for_vision_encoder(j.pixel_values,S),G=await(0,i.interpolate_4d)(j.pixel_values,{size:[z.height,z.width]}),{frames:H,num_splits_h:W,num_splits_w:Y}=await this.split_image(G,this.max_image_size);return k[U]=W,F[U]=Y,(0,i.cat)(H,0)})),f.push(k),p.push(F)}else{const k=[S,S];$=await Promise.all(T.map(F=>(0,i.interpolate_4d)(F.pixel_values,{size:k}))),f.push(new Array(T.length).fill(0)),p.push(new Array(T.length).fill(0))}c.push((0,i.cat)($,0))}const v=c.length,[g,_,b,w]=c[0].dims;let y,x;if(v===1)y=c[0].unsqueeze_(0),x=(0,i.full)([v,g,b,w],!0);else{const M=Math.max(...c.map($=>$.dims.at(0)));x=(0,i.full)([v,M,b,w],!0);const T=x.data,S=M*b*w;for(let $=0;$<v;++$){const k=c[$].dims[0];if(k<M){c[$]=(0,i.cat)([c[$],(0,i.full)([M-k,_,b,w],0)],0);const F=$*S+k*b*w,j=($+1)*S;T.fill(!1,F,j)}}y=(0,i.stack)(c,0)}return{pixel_values:y,pixel_attention_mask:x,original_sizes:h,reshaped_input_sizes:m,...u?{rows:f,cols:p}:{}}}async split_image(s,{longest_edge:l}){const u=l,d=l,c=[],[f,p]=s.dims.slice(-2);let h=0,m=0;if(f>u||p>d){h=Math.ceil(f/u),m=Math.ceil(p/d);const v=Math.ceil(f/h),g=Math.ceil(p/m);for(let w=0;w<h;++w)for(let y=0;y<m;++y){let x,M,T,S;w===h-1?(M=f-v,S=f):(M=w*v,S=(w+1)*v),y===m-1?(x=p-g,T=p):(x=y*g,T=(y+1)*g);const $=[M,x],k=[S,T],F=await(0,i.slice)(s,$,k,[2,3]);c.push(F)}const _=u,b=d;(f!==_||p!==b)&&(s=await(0,i.interpolate_4d)(s,{size:[_,b]}))}return c.push(s),{frames:c,num_splits_h:h,num_splits_w:m}}}},"./src/models/idefics3/processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>d});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");r("./src/utils/image.js");var a=r("./src/utils/core.js");function s(c,f,p,h,m,v){let g="";for(let _=0;_<f;++_){for(let b=0;b<p;++b)g+=h+`<row_${_+1}_col_${b+1}>`+m.repeat(c);g+=`
`}return g+=`
${h}${v}`+m.repeat(c)+`${h}`,g}function l(c,f,p,h){return`${f}${h}`+p.repeat(c)+`${f}`}function u(c,f,p,h,m,v){return c===0&&f===0?l(p,h,m,v):s(p,c,f,h,m,v)}class d extends n.Processor{constructor(){super(...arguments);le(this,"fake_image_token","<fake_token_around_image>");le(this,"image_token","<image>");le(this,"global_img_token","<global-img>")}async _call(p,h=null,m={}){m.return_row_col_info??(m.return_row_col_info=!0);let v;h&&(v=await this.image_processor(h,m)),Array.isArray(p)||(p=[p]);const g=v.rows??[new Array(p.length).fill(0)],_=v.cols??[new Array(p.length).fill(0)],b=this.config.image_seq_len,w=[],y=[];for(let M=0;M<p.length;++M){const T=p[M],S=g[M],$=_[M];w.push((0,a.count)(T,this.image_token));const k=S.map((U,z)=>u(U,$[z],b,this.fake_image_token,this.image_token,this.global_img_token)),F=T.split(this.image_token);if(F.length===0)throw new Error("The image token should be present in the text.");let j=F[0];for(let U=0;U<k.length;++U)j+=k[U]+F[U+1];y.push(j)}return{...this.tokenizer(y),...v}}}le(d,"image_processor_class",i.AutoImageProcessor),le(d,"tokenizer_class",o.AutoTokenizer),le(d,"uses_processor_config",!0)},"./src/models/image_processors.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>i.BitImageProcessor,CLIPFeatureExtractor:()=>a.CLIPFeatureExtractor,CLIPImageProcessor:()=>a.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>o.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>s.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>s.ConvNextImageProcessor,DPTFeatureExtractor:()=>c.DPTFeatureExtractor,DPTImageProcessor:()=>c.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>u.DetrFeatureExtractor,DetrImageProcessor:()=>u.DetrImageProcessor,DonutFeatureExtractor:()=>d.DonutFeatureExtractor,DonutImageProcessor:()=>d.DonutImageProcessor,EfficientNetImageProcessor:()=>f.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>p.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>h.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>m.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>g.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>_.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>b.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>w.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>w.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>y.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>y.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>x.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>x.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>M.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>M.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>T.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>T.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>S.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>S.MobileViTImageProcessor,NougatImageProcessor:()=>$.NougatImageProcessor,OwlViTFeatureExtractor:()=>F.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>F.OwlViTImageProcessor,Owlv2ImageProcessor:()=>k.Owlv2ImageProcessor,Phi3VImageProcessor:()=>j.Phi3VImageProcessor,PvtImageProcessor:()=>U.PvtImageProcessor,Qwen2VLImageProcessor:()=>z.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>G.RTDetrImageProcessor,SamImageProcessor:()=>H.SamImageProcessor,SegformerFeatureExtractor:()=>W.SegformerFeatureExtractor,SegformerImageProcessor:()=>W.SegformerImageProcessor,SiglipImageProcessor:()=>Y.SiglipImageProcessor,SmolVLMImageProcessor:()=>te.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>V.Swin2SRImageProcessor,VLMImageProcessor:()=>v.VLMImageProcessor,ViTFeatureExtractor:()=>I.ViTFeatureExtractor,ViTImageProcessor:()=>I.ViTImageProcessor,VitMatteImageProcessor:()=>K.VitMatteImageProcessor,VitPoseImageProcessor:()=>ae.VitPoseImageProcessor,YolosFeatureExtractor:()=>pe.YolosFeatureExtractor,YolosImageProcessor:()=>pe.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),i=r("./src/models/bit/image_processing_bit.js"),o=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),a=r("./src/models/clip/image_processing_clip.js"),s=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),u=r("./src/models/detr/image_processing_detr.js"),d=r("./src/models/donut/image_processing_donut.js"),c=r("./src/models/dpt/image_processing_dpt.js"),f=r("./src/models/efficientnet/image_processing_efficientnet.js"),p=r("./src/models/glpn/image_processing_glpn.js"),h=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),m=r("./src/models/idefics3/image_processing_idefics3.js"),v=r("./src/models/janus/image_processing_janus.js"),g=r("./src/models/jina_clip/image_processing_jina_clip.js"),_=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),b=r("./src/models/mask2former/image_processing_mask2former.js"),w=r("./src/models/maskformer/image_processing_maskformer.js"),y=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),x=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),M=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),T=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),S=r("./src/models/mobilevit/image_processing_mobilevit.js"),$=r("./src/models/nougat/image_processing_nougat.js"),k=r("./src/models/owlv2/image_processing_owlv2.js"),F=r("./src/models/owlvit/image_processing_owlvit.js"),j=r("./src/models/phi3_v/image_processing_phi3_v.js"),U=r("./src/models/pvt/image_processing_pvt.js"),z=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),G=r("./src/models/rt_detr/image_processing_rt_detr.js"),H=r("./src/models/sam/image_processing_sam.js"),W=r("./src/models/segformer/image_processing_segformer.js"),Y=r("./src/models/siglip/image_processing_siglip.js"),te=r("./src/models/smolvlm/image_processing_smolvlm.js"),V=r("./src/models/swin2sr/image_processing_swin2sr.js"),I=r("./src/models/vit/image_processing_vit.js"),K=r("./src/models/vitmatte/image_processing_vitmatte.js"),ae=r("./src/models/vitpose/image_processing_vitpose.js"),pe=r("./src/models/yolos/image_processing_yolos.js")},"./src/models/janus/image_processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){super({do_pad:!0,pad_size:{width:a.image_size,height:a.image_size},...a}),this.constant_values=this.config.background_color.map(s=>s*this.rescale_factor)}pad_image(a,s,l,u){return super.pad_image(a,s,l,{constant_values:this.constant_values,center:!0,...u})}}},"./src/models/janus/processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>u});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js"),a=r("./src/utils/core.js"),s=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class u extends n.Processor{constructor(c,f,p){super(c,f,p),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(c,{images:f=null,chat_template:p="default"}={}){f?Array.isArray(f)||(f=[f]):f=await Promise.all(c.filter($=>$.images).flatMap($=>$.images).map($=>l.RawImage.read($)));const h=this.tokenizer,m=h.apply_chat_template(c,{tokenize:!1,add_generation_prompt:!0,chat_template:p}),v=$=>h.encode($,{add_special_tokens:!1}),g=m.split(this.image_tag),_=g.length-1;if(f.length!==_)throw new Error(`Number of images provided (${f.length}) does not match number of "${this.image_tag}" image tags (${_})`);const[b,w,y]=h.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let x=v(g[0]),M=new Array(x.length).fill(!1);for(let $=1;$<g.length;++$){const k=new Array(this.num_image_tokens).fill(b),F=v(g[$]);x=(0,a.mergeArrays)(x,[w],k,[y],F);const j=new Array(this.num_image_tokens).fill(!0);M=(0,a.mergeArrays)(M,[!1],j,[!1],new Array(F.length).fill(!1))}const T=[1,x.length],S={input_ids:new s.Tensor("int64",x,T),attention_mask:new s.Tensor("int64",new Array(x.length).fill(1),T),images_seq_mask:new s.Tensor("bool",M,T),images_emb_mask:new s.Tensor("bool",new Array(_*this.num_image_tokens).fill(!0),[1,_,this.num_image_tokens])};if(f&&f.length>0){const $=await this.image_processor(f);return $.pixel_values.unsqueeze_(0),{...S,...$}}return S}}le(u,"image_processor_class",i.AutoImageProcessor),le(u,"tokenizer_class",o.AutoTokenizer),le(u,"uses_processor_config",!0)},"./src/models/jina_clip/image_processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{constructor(a){const{resize_mode:s,fill_color:l,interpolation:u,size:d,...c}=a,f=s==="squash"?{width:d,height:d}:s==="shortest"?{shortest_edge:d}:{longest_edge:d},p=u==="bicubic"?3:2;super({...c,size:f,resample:p,do_center_crop:!0,crop_size:d,do_normalize:!0})}}},"./src/models/jina_clip/processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");class a extends n.Processor{async _call(l=null,u=null,d={}){if(!l&&!u)throw new Error("Either text or images must be provided");const c=l?this.tokenizer(l,d):{},f=u?await this.image_processor(u,d):{};return{...c,...f}}}le(a,"tokenizer_class",o.AutoTokenizer),le(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/llava/processing_llava.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");class a extends n.Processor{async _call(l,u=null,d={}){const c=await this.image_processor(l,d);if(u){const[p,h]=c.pixel_values.dims.slice(-2),{image_token:m,patch_size:v,num_additional_image_tokens:g}=this.config,_=Math.floor(p/v)*Math.floor(h/v)+g;u=structuredClone(u),Array.isArray(u)||(u=[u]);for(let b=0;b<u.length;++b)u[b]=u[b].replace(m,m.repeat(_))}const f=u?this.tokenizer(u,d):{};return{...c,...f}}}le(a,"tokenizer_class",o.AutoTokenizer),le(a,"image_processor_class",i.AutoImageProcessor),le(a,"uses_processor_config",!0)},"./src/models/llava_onevision/image_processing_llava_onevision.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/mask2former/image_processing_mask2former.js":(e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>i});var n=r("./src/models/maskformer/image_processing_maskformer.js");class i extends n.MaskFormerImageProcessor{}},"./src/models/maskformer/image_processing_maskformer.js":(e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>o,MaskFormerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_panoptic_segmentation(...s){return(0,n.post_process_panoptic_segmentation)(...s)}post_process_instance_segmentation(...s){return(0,n.post_process_instance_segmentation)(...s)}}class o extends i{}},"./src/models/mgp_str/processing_mgp_str.js":(e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js"),a=r("./src/utils/maths.js");const s={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(d,c){if(!s.hasOwnProperty(c))throw new Error(`Format ${c} is not supported.`);const[f,p]=s[c],h=this[f].bind(this),[m,v]=d.dims,g=[],_=[],b=d.tolist();for(let y=0;y<m;++y){const x=b[y],M=[],T=[];for(let $=1;$<v;++$){const[k,F]=(0,a.max)((0,a.softmax)(x[$]));if(T.push(k),F==p)break;M.push(F)}const S=T.length>0?T.reduce(($,k)=>$*k,1):0;_.push(M),g.push(S)}return[h(_),g]}char_decode(d){return this.char_tokenizer.batch_decode(d).map(c=>c.replaceAll(" ",""))}bpe_decode(d){return this.bpe_tokenizer.batch_decode(d)}wp_decode(d){return this.wp_tokenizer.batch_decode(d).map(c=>c.replaceAll(" ",""))}batch_decode([d,c,f]){const[p,h]=this._decode_helper(d,"char"),[m,v]=this._decode_helper(c,"bpe"),[g,_]=this._decode_helper(f,"wp"),b=[],w=[];for(let y=0;y<p.length;++y){const[x,M]=(0,a.max)([h[y],v[y],_[y]]);b.push([p[y],m[y],g[y]][M]),w.push(x)}return{generated_text:b,scores:w,char_preds:p,bpe_preds:m,wp_preds:g}}static async from_pretrained(...d){const c=await super.from_pretrained(...d),f=await o.AutoTokenizer.from_pretrained("Xenova/gpt2"),p=await o.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return c.components={image_processor:c.image_processor,char_tokenizer:c.tokenizer,bpe_tokenizer:f,wp_tokenizer:p},c}async _call(d,c=null){const f=await this.image_processor(d);return c&&(f.labels=this.tokenizer(c).input_ids),f}}le(l,"tokenizer_class",o.AutoTokenizer),le(l,"image_processor_class",i.AutoImageProcessor)},"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>o,MobileNetV1ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>o,MobileNetV2ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>o,MobileNetV3ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>o,MobileNetV4ImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/mobilevit/image_processing_mobilevit.js":(e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>o,MobileViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/moonshine/feature_extraction_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class o extends n.FeatureExtractor{async _call(s){(0,n.validate_audio_inputs)(s,"MoonshineFeatureExtractor"),s instanceof Float64Array&&(s=new Float32Array(s));const l=[1,s.length];return{input_values:new i.Tensor("float32",s,l)}}}},"./src/models/moonshine/processing_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),o=r("./src/base/processing_utils.js");class a extends o.Processor{async _call(l){return await this.feature_extractor(l)}}le(a,"tokenizer_class",i.AutoTokenizer),le(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/nougat/image_processing_nougat.js":(e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>i});var n=r("./src/models/donut/image_processing_donut.js");class i extends n.DonutImageProcessor{}},"./src/models/owlv2/image_processing_owlv2.js":(e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>i});var n=r("./src/models/owlvit/image_processing_owlvit.js");class i extends n.OwlViTImageProcessor{}},"./src/models/owlvit/image_processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>o,OwlViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...s){return(0,n.post_process_object_detection)(...s)}}class o extends i{}},"./src/models/owlvit/processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");class a extends n.Processor{}le(a,"tokenizer_class",o.AutoTokenizer),le(a,"image_processor_class",i.AutoImageProcessor)},"./src/models/paligemma/processing_paligemma.js":(e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");const a="<image>";function s(u,d,c,f,p){return`${f.repeat(c*p)}${d}${u}
`}class l extends n.Processor{async _call(d,c=null,f={}){c||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),c=""),Array.isArray(d)||(d=[d]),Array.isArray(c)||(c=[c]);const p=this.tokenizer.bos_token,h=this.image_processor.config.image_seq_length;let m;c.some(_=>_.includes(a))?m=c.map(_=>{const b=_.replaceAll(a,a.repeat(h)),w=b.lastIndexOf(a),y=w===-1?0:w+a.length;return b.slice(0,y)+p+b.slice(y)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),m=c.map(_=>s(_,p,h,a,d.length)));const v=this.tokenizer(m,f);return{...await this.image_processor(d,f),...v}}}le(l,"tokenizer_class",o.AutoTokenizer),le(l,"image_processor_class",i.AutoImageProcessor),le(l,"uses_processor_config",!1)},"./src/models/phi3_v/image_processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>d});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");const o=336,a=[2,3],{ceil:s,floor:l,sqrt:u}=Math;class d extends n.ImageProcessor{constructor(f){super({...f,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=f.num_crops}calc_num_image_tokens_from_image_size(f,p){const{num_img_tokens:h}=this.config;return l((l(p/o)*l(f/o)+1)*h+1+(l(p/o)+1)*u(h))}get_resize_output_image_size(f,p){const h=this._num_crops,[m,v]=f.size;let g=m/v,_=1;for(;_*Math.ceil(_/g)<=h;)_+=1;_-=1;const b=Math.floor(_*336),w=Math.floor(b/g);return[b,w]}pad_image(f,p,h,m={}){const[v,g]=p,_=o*s(v/o),b=o*s(g/o),w=[1,1,1].map((y,x)=>(y-this.image_mean[x])/this.image_std[x]);return super.pad_image(f,p,{width:b,height:_},{center:!0,constant_values:w,...m})}async _call(f,{num_crops:p=null}={}){if(this._num_crops=p??(p=this.config.num_crops),p<4||u(p)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(f)||(f=[f]);const h=f.length,m=await Promise.all(f.map(M=>this.preprocess(M))),v=m.map(M=>M.original_size),g=m.map(M=>M.reshaped_input_size),_=[];for(const{pixel_values:M}of m){M.unsqueeze_(0);const[T,S]=M.dims.slice(-2),$=await(0,i.interpolate_4d)(M,{size:[o,o],mode:"bicubic"});if(p>0){const k=[],F=u(p),j=l(S/F),U=l(T/F);for(let G=0;G<F;++G)for(let H=0;H<F;++H){let W,Y,te,V;G===F-1?(Y=T-U,V=T):(Y=G*U,V=(G+1)*U),H===F-1?(W=S-j,te=S):(W=H*j,te=(H+1)*j);const I=[Y,W],K=[V,te],ae=await(0,i.slice)(M,I,K,a);k.push(ae)}const z=await(0,i.interpolate_4d)((0,i.cat)(k,0),{size:[o,o],mode:"bicubic"});_.push((0,i.cat)([$,z],0))}else _.push($)}const b=(0,i.stack)(_,0),w=g.map(M=>M.map(T=>o*s(T/o))),y=new i.Tensor("int64",w.flat(),[h,2]),x=w.map(([M,T])=>this.calc_num_image_tokens_from_image_size(T,M));return{pixel_values:b,original_sizes:v,reshaped_input_sizes:g,image_sizes:y,num_img_tokens:x}}}},"./src/models/phi3_v/processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");r("./src/utils/image.js");const a="<|image|>",s=/<\|image_\d+\|>/g;class l extends n.Processor{async _call(d,c=null,{padding:f=!0,truncation:p=!0,num_crops:h=null}={}){Array.isArray(d)||(d=[d]);let m,v;if(c){v=await this.image_processor(c,{num_crops:h});const{num_img_tokens:g}=v,_=d.map((w,y)=>w.split(s).join(a.repeat(g[y])));m=this.tokenizer(_,{padding:f,truncation:p});const b=this.tokenizer.model.convert_tokens_to_ids([a])[0];m.input_ids.map_(w=>w==b?-w:w)}else m=this.tokenizer(d);return{...m,...v}}}le(l,"image_processor_class",i.AutoImageProcessor),le(l,"tokenizer_class",o.AutoTokenizer)},"./src/models/processors.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>i.Gemma3nProcessor,GroundingDinoProcessor:()=>o.GroundingDinoProcessor,Idefics3Processor:()=>a.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>u.LlavaProcessor,MgpstrProcessor:()=>d.MgpstrProcessor,MoonshineProcessor:()=>c.MoonshineProcessor,OwlViTProcessor:()=>f.OwlViTProcessor,PaliGemmaProcessor:()=>h.PaliGemmaProcessor,Phi3VProcessor:()=>p.Phi3VProcessor,PyAnnoteProcessor:()=>m.PyAnnoteProcessor,Qwen2VLProcessor:()=>v.Qwen2VLProcessor,SamProcessor:()=>g.SamProcessor,SmolVLMProcessor:()=>_.SmolVLMProcessor,SpeechT5Processor:()=>b.SpeechT5Processor,UltravoxProcessor:()=>w.UltravoxProcessor,VLChatProcessor:()=>s.VLChatProcessor,VoxtralProcessor:()=>y.VoxtralProcessor,Wav2Vec2Processor:()=>x.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>M.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>T.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),i=r("./src/models/gemma3n/processing_gemma3n.js"),o=r("./src/models/grounding_dino/processing_grounding_dino.js"),a=r("./src/models/idefics3/processing_idefics3.js"),s=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),u=r("./src/models/llava/processing_llava.js"),d=r("./src/models/mgp_str/processing_mgp_str.js"),c=r("./src/models/moonshine/processing_moonshine.js"),f=r("./src/models/owlvit/processing_owlvit.js"),p=r("./src/models/phi3_v/processing_phi3_v.js"),h=r("./src/models/paligemma/processing_paligemma.js"),m=r("./src/models/pyannote/processing_pyannote.js"),v=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),g=r("./src/models/sam/processing_sam.js"),_=r("./src/models/smolvlm/processing_smolvlm.js"),b=r("./src/models/speecht5/processing_speecht5.js"),w=r("./src/models/ultravox/processing_ultravox.js"),y=r("./src/models/voxtral/processing_voxtral.js"),x=r("./src/models/wav2vec2/processing_wav2vec2.js"),M=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),T=r("./src/models/whisper/processing_whisper.js")},"./src/models/pvt/image_processing_pvt.js":(e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/pyannote/feature_extraction_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),o=r("./src/utils/maths.js");class a extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const u=[1,1,l.length];return{input_values:new i.Tensor("float32",l,u)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,u){const d=u/this.samples_to_frames(u)/this.config.sampling_rate,c=[];for(const f of l.tolist()){const p=[];let h=-1;for(let m=0;m<f.length;++m){const v=(0,o.softmax)(f[m]),[g,_]=(0,o.max)(v),[b,w]=[m,m+1];_!==h?(h=_,p.push({id:_,start:b,end:w,score:g})):(p.at(-1).end=w,p.at(-1).score+=g)}c.push(p.map(({id:m,start:v,end:g,score:_})=>({id:m,start:v*d,end:g*d,confidence:_/(g-v)})))}return c}}},"./src/models/pyannote/processing_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/pyannote/feature_extraction_pyannote.js");class o extends n.Processor{async _call(s){return await this.feature_extractor(s)}post_process_speaker_diarization(...s){return this.feature_extractor.post_process_speaker_diarization(...s)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}le(o,"feature_extractor_class",i.PyAnnoteFeatureExtractor)},"./src/models/qwen2_vl/image_processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class o extends n.ImageProcessor{async _call(s,...l){const{pixel_values:u,original_sizes:d,reshaped_input_sizes:c}=await super._call(s,...l);let f=u;const{temporal_patch_size:p,merge_size:h,patch_size:m}=this.config;f.dims[0]===1&&(f=(0,i.cat)(Array.from({length:p},()=>f),0));const v=f.dims[0]/p,g=f.dims[1],_=Math.floor(f.dims[2]/m),b=Math.floor(f.dims[3]/m),w=f.view(v,p,g,Math.floor(_/h),h,m,Math.floor(b/h),h,m).permute(0,3,6,4,7,2,1,5,8).view(v*_*b,g*p*m*m),y=new i.Tensor("int64",[v,_,b],[1,3]);return{pixel_values:w,image_grid_thw:y,original_sizes:d,reshaped_input_sizes:c}}}},"./src/models/qwen2_vl/processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js"),o=r("./src/tokenizers.js");r("./src/utils/image.js");class a extends n.Processor{async _call(l,u=null,...d){Array.isArray(l)||(l=[l]);let c,f;if(u&&(c=await this.image_processor(u),f=c.image_grid_thw),f){let h=this.image_processor.config.merge_size**2,m=0;const v=f.tolist();l=l.map(g=>{for(;g.includes("<|image_pad|>");){const _=Number(v[m++].reduce((b,w)=>b*w,1n));g=g.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(_/h)))}return g.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...c}}}le(a,"image_processor_class",i.AutoImageProcessor),le(a,"tokenizer_class",o.AutoTokenizer)},"./src/models/rt_detr/image_processing_rt_detr.js":(e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}},"./src/models/sam/image_processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/core.js"),o=r("./src/utils/tensor.js");class a extends n.ImageProcessor{reshape_input_points(l,u,d,c=!1){l=structuredClone(l);let f=(0,i.calculateDimensions)(l);if(f.length===3)c||(f=[1,...f]),l=[l];else if(f.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let p=0;p<l.length;++p){let h=u[p],m=d[p],v=[m[0]/h[0],m[1]/h[1]];for(let g=0;g<l[p].length;++g)for(let _=0;_<l[p][g].length;++_)for(let b=0;b<l[p][g][_].length;++b)l[p][g][_][b]*=v[b%2]}return new o.Tensor("float32",Float32Array.from(l.flat(1/0)),f)}add_input_labels(l,u){let d=(0,i.calculateDimensions)(l);if(d.length===2)d=[1,...d],l=[l];else if(d.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(d.some((c,f)=>c!==u.dims[f]))throw Error(`The first ${d.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new o.Tensor("int64",l.flat(1/0).map(BigInt),d)}async _call(l,{input_points:u=null,input_labels:d=null,input_boxes:c=null}={}){const f=await super._call(l);if(u&&(f.input_points=this.reshape_input_points(u,f.original_sizes,f.reshaped_input_sizes)),d){if(!f.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");f.input_labels=this.add_input_labels(d,f.input_points)}return c&&(f.input_boxes=this.reshape_input_points(c,f.original_sizes,f.reshaped_input_sizes,!0)),f}async post_process_masks(l,u,d,{mask_threshold:c=0,binarize:f=!0,pad_size:p=null}={}){const h=[];p=p??this.pad_size;const m=[p.height,p.width];for(let v=0;v<u.length;++v){const g=u[v],_=d[v];let b=await(0,o.interpolate_4d)(l[v],{mode:"bilinear",size:m});if(b=b.slice(null,null,[0,_[0]],[0,_[1]]),b=await(0,o.interpolate_4d)(b,{mode:"bilinear",size:g}),f){const w=b.data,y=new Uint8Array(w.length);for(let x=0;x<w.length;++x)w[x]>c&&(y[x]=1);b=new o.Tensor("bool",y,b.dims)}h.push(b)}return h}generate_crop_boxes(l,u,{crop_n_layers:d=0,overlap_ratio:c=512/1500,points_per_crop:f=32,crop_n_points_downscale_factor:p=1}={}){}}},"./src/models/sam/processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>o});var n=r("./src/base/processing_utils.js"),i=r("./src/models/auto/image_processing_auto.js");class o extends n.Processor{async _call(...s){return await this.image_processor(...s)}post_process_masks(...s){return this.image_processor.post_process_masks(...s)}reshape_input_points(...s){return this.image_processor.reshape_input_points(...s)}}le(o,"image_processor_class",i.AutoImageProcessor)},"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":(e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js"),o=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(l){super(l);const u=this.config.sampling_rate,d=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(u/2),u,null,"kaldi",!0);this.mel_filters=d,this.window=(0,o.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,u){return l=l.map(d=>d*32768),(0,o.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:u,transpose:!0})}async _call(l,{padding:u=!0,pad_to_multiple_of:d=2,do_normalize_per_mel_bins:c=!0,return_attention_mask:f=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let p=await this._extract_fbank_features(l,this.config.max_length);if(c){const[y,x]=p.dims,M=p.data;for(let T=0;T<x;++T){let S=0;for(let j=0;j<y;++j)S+=M[j*x+T];const $=S/y;let k=0;for(let j=0;j<y;++j)k+=(M[j*x+T]-$)**2;k/=y-1;const F=Math.sqrt(k+1e-7);for(let j=0;j<y;++j){const U=j*x+T;M[U]=(M[U]-$)/F}}}let h;if(u){const[y,x]=p.dims,M=p.data,T=y%d;if(T>0){const S=new Float32Array(x*(y+T));S.set(M),S.fill(this.config.padding_value,M.length);const $=y+T;p=new i.Tensor(p.type,S,[$,x]),f&&(h=new i.Tensor("int64",new BigInt64Array($),[1,$]),h.data.fill(1n,0,y))}}const[m,v]=p.dims,g=this.config.stride;if(m%g!==0)throw new Error(`The number of frames (${m}) must be a multiple of the stride (${g}).`);const b=p.view(1,Math.floor(m/g),v*g),w={input_features:b};if(f){const y=b.dims[1],x=new BigInt64Array(y);if(h){const M=h.data;for(let T=1,S=0;T<m;T+=g,++S)x[S]=M[T]}else x.fill(1n);w.attention_mask=new i.Tensor("int64",x,[1,y])}return w}}},"./src/models/segformer/image_processing_segformer.js":(e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>o,SegformerImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_semantic_segmentation(...s){return(0,n.post_process_semantic_segmentation)(...s)}}class o extends i{}},"./src/models/siglip/image_processing_siglip.js":(e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}},"./src/models/smolvlm/image_processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")},"./src/models/smolvlm/processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")},"./src/models/snac/feature_extraction_snac.js":(e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>i});var n=r("./src/models/dac/feature_extraction_dac.js");class i extends n.DacFeatureExtractor{}},"./src/models/speecht5/feature_extraction_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js");class i extends n.FeatureExtractor{}},"./src/models/speecht5/processing_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>a});var n=r("./src/base/processing_utils.js"),i=r("./src/tokenizers.js"),o=r("./src/models/auto/feature_extraction_auto.js");class a extends n.Processor{async _call(l){return await this.feature_extractor(l)}}le(a,"tokenizer_class",i.AutoTokenizer),le(a,"feature_extractor_class",o.AutoFeatureExtractor)},"./src/models/swin2sr/image_processing_swin2sr.js":(e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{pad_image(a,s,l,u={}){const[d,c,f]=s;return super.pad_image(a,s,{width:c+(l-c%l)%l,height:d+(l-d%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...u})}}},"./src/models/ultravox/processing_ultravox.js":(e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),o=r("./src/base/processing_utils.js");class a extends o.Processor{async _call(l,u=null,d={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let c={};if(u){const p=u.length,{input_features:h}=await this.feature_extractor(u,{...d,max_length:p}),m=Math.round(p/this.config.encoder_ds_factor+1e-4),v=1+Math.ceil(m/this.config.stack_factor);c.audio_token_len=[v],c.audio_values=h;const g=this.config.audio_placeholder;if(!l.includes(g))throw new Error(`The input text does not contain the image token ${g}.`);l=l.replaceAll(g,g.repeat(v))}return{...this.tokenizer(l,{add_special_tokens:!1,...d}),...c}}}le(a,"tokenizer_class",i.AutoTokenizer),le(a,"feature_extractor_class",n.AutoFeatureExtractor),le(a,"uses_processor_config",!0)},"./src/models/vit/image_processing_vit.js":(e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>o,ViTImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{}class o extends i{}},"./src/models/vitmatte/image_processing_vitmatte.js":(e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),i=r("./src/utils/tensor.js");class o extends n.ImageProcessor{async _call(s,l){Array.isArray(s)||(s=[s]),Array.isArray(l)||(l=[l]);const u=await Promise.all(s.map(f=>this.preprocess(f))),d=await Promise.all(l.map(f=>this.preprocess(f,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,i.stack)(u.map((f,p)=>(0,i.cat)([f.pixel_values,d[p].pixel_values],0)),0),original_sizes:u.map(f=>f.original_size),reshaped_input_sizes:u.map(f=>f.reshaped_input_size)}}}},"./src/models/vitpose/image_processing_vitpose.js":(e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_pose_estimation(a,s,{threshold:l=null}={}){const u=a.tolist(),[d,c,f,p]=a.dims,h=[];for(let m=0;m<d;++m){const v=u[m],g=s[m],_=[];for(let b=0;b<g.length;++b){const w=g[b],y=[],x=[],M=[],T=w.at(-2)/p,S=w.at(-1)/f;for(let $=0;$<v.length;++$){let[k,F]=[0,0],j=0,U=-1/0;const z=v[$];for(let H=0;H<z.length;++H){const W=z[H];for(let Y=0;Y<W.length;++Y){const te=W[Y];j+=te,U=Math.max(U,te),k+=(Y+.5)*te,F+=H*te}}if(l!=null&&U<l)continue;const G=[T*k/j,S*F/j];y.push(G),M.push($),x.push(U)}_.push({bbox:w,scores:x,labels:M,keypoints:y})}h.push(_)}return h}}},"./src/models/voxtral/processing_voxtral.js":(e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>c});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),o=r("./src/base/processing_utils.js"),a=r("./src/utils/tensor.js");const s="[AUDIO]",l="[BEGIN_AUDIO]",u=375;function d(f,p){const h=[];for(let m=0;m<f.length;m+=p)h.push(f.subarray(m,Math.min(m+p,f.length)));return h}class c extends o.Processor{async _call(p,h=null,m={}){if(Array.isArray(p))throw new Error("Batched inputs are not supported yet.");const v={};if(h){if(!p.includes(s))throw new Error(`The input text does not contain the audio token ${s}.`);Array.isArray(h)||(h=[h]);const _=p.split(s),b=_.length-1;if(b!==h.length)throw new Error(`The number of audio inputs (${h.length}) does not match the number of audio tokens in the text (${b}).`);const w=this.feature_extractor.config.n_samples,y=h.map($=>d($,w)),x=y.map($=>$.length),M=y.flat(),T=(await Promise.all(M.map($=>this.feature_extractor($,m)))).map($=>$.input_features);v.audio_values=T.length>1?(0,a.cat)(T,0):T[0];let S=_[0];for(let $=0;$<x.length;++$){S+=l;for(let k=0;k<x[$];++k)S+=s.repeat(u);S+=_[$+1]}p=S}return{...this.tokenizer(p,{add_special_tokens:!1,...m}),...v}}}le(c,"tokenizer_class",i.AutoTokenizer),le(c,"feature_extractor_class",n.AutoFeatureExtractor),le(c,"uses_processor_config",!1)},"./src/models/wav2vec2/feature_extraction_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),i=r("./src/utils/tensor.js");class o extends n.FeatureExtractor{_zero_mean_unit_var_norm(s){const u=s.reduce((c,f)=>c+f,0)/s.length,d=s.reduce((c,f)=>c+(f-u)**2,0)/s.length;return s.map(c=>(c-u)/Math.sqrt(d+1e-7))}async _call(s){(0,n.validate_audio_inputs)(s,"Wav2Vec2FeatureExtractor"),s instanceof Float64Array&&(s=new Float32Array(s));let l=s;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const u=[1,l.length];return{input_values:new i.Tensor("float32",l,u),attention_mask:new i.Tensor("int64",new BigInt64Array(l.length).fill(1n),u)}}}},"./src/models/wav2vec2/processing_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/base/processing_utils.js");class a extends o.Processor{async _call(l){return await this.feature_extractor(l)}}le(a,"tokenizer_class",n.AutoTokenizer),le(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>a});var n=r("./src/tokenizers.js"),i=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/base/processing_utils.js");class a extends o.Processor{async _call(l){return await this.feature_extractor(l)}}le(a,"tokenizer_class",n.AutoTokenizer),le(a,"feature_extractor_class",i.AutoFeatureExtractor)},"./src/models/wespeaker/feature_extraction_wespeaker.js":(e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(s){super(s);const l=this.config.sampling_rate,u=(0,i.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=u,this.window=(0,i.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(s){return s=s.map(l=>l*32768),(0,i.spectrogram)(s,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(s){(0,n.validate_audio_inputs)(s,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(s)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const u=l.mean(1).data,d=l.data,[c,f,p]=l.dims;for(let h=0;h<c;++h){const m=h*f*p,v=h*p;for(let g=0;g<f;++g){const _=m+g*p;for(let b=0;b<p;++b)d[_+b]-=u[v+b]}}}return{input_features:l}}}},"./src/models/whisper/common_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>i,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>o,whisper_language_to_code:()=>a});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],i=new Map(n),o=new Map([...n.map(([s,l])=>[l,s]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function a(s){s=s.toLowerCase();let l=o.get(s);if(l===void 0){const u=s.match(/^<\|([a-z]{2})\|>$/);if(u&&(s=u[1]),i.has(s))l=s;else{const c=s.length===2?i.keys():i.values();throw new Error(`Language "${s}" is not supported. Must be one of: ${JSON.stringify(Array.from(c))}`)}}return l}},"./src/models/whisper/feature_extraction_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var i=r("./src/utils/audio.js"),o=r("./src/utils/maths.js");class a extends n.FeatureExtractor{constructor(l){var u;super(l),(u=this.config).mel_filters??(u.mel_filters=(0,i.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=(0,i.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const u=await(0,i.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),d=u.data,c=(0,o.max)(d)[0];for(let f=0;f<d.length;++f)d[f]=(Math.max(d[f],c-8)+4)/4;return u}async _call(l,{max_length:u=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let d;const c=u??this.config.n_samples;return l.length>c?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),d=l.slice(0,c)):(d=new Float32Array(c),d.set(l)),{input_features:(await this._extract_fbank_features(d)).unsqueeze_(0)}}}},"./src/models/whisper/generation_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>i});var n=r("./src/generation/configuration_utils.js");class i extends n.GenerationConfig{constructor(){super(...arguments);le(this,"return_timestamps",null);le(this,"return_token_timestamps",null);le(this,"num_frames",null);le(this,"alignment_heads",null);le(this,"task",null);le(this,"language",null);le(this,"no_timestamps_token_id",null);le(this,"prompt_ids",null);le(this,"is_multilingual",null);le(this,"lang_to_id",null);le(this,"task_to_id",null);le(this,"max_initial_timestamp_index",1)}}},"./src/models/whisper/processing_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>a});var n=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js"),o=r("./src/base/processing_utils.js");class a extends o.Processor{async _call(l){return await this.feature_extractor(l)}}le(a,"tokenizer_class",i.AutoTokenizer),le(a,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/yolos/image_processing_yolos.js":(e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>o,YolosImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js");class i extends n.ImageProcessor{post_process_object_detection(...s){return(0,n.post_process_object_detection)(...s)}}class o extends i{}},"./src/ops/registry.js":(e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>l});var n=r("./src/backends/onnx.js"),i=r("./src/utils/tensor.js"),o=r("./src/env.js");const a=o.apis.IS_BROWSER_ENV||o.apis.IS_WEBWORKER_ENV,s=async(u,d,c)=>{const f=await(0,n.createInferenceSession)(new Uint8Array(u),d);let p=Promise.resolve();return async h=>{const m=(0,n.isONNXProxy)(),v=Object.fromEntries(Object.entries(h).map(([_,b])=>[_,(m?b.clone():b).ort_tensor])),g=await(p=a?p.then(()=>f.run(v)):f.run(v));return Array.isArray(c)?c.map(_=>new i.Tensor(g[_])):new i.Tensor(g[c])}};class l{static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=s([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=s([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=s([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=s([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=s([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=s([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=s([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=s([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}le(l,"session_options",{})},"./src/pipelines.js":(e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>F,AutomaticSpeechRecognitionPipeline:()=>U,BackgroundRemovalPipeline:()=>W,DepthEstimationPipeline:()=>pe,DocumentQuestionAnsweringPipeline:()=>I,FeatureExtractionPipeline:()=>$,FillMaskPipeline:()=>b,ImageClassificationPipeline:()=>G,ImageFeatureExtractionPipeline:()=>k,ImageSegmentationPipeline:()=>H,ImageToImagePipeline:()=>ae,ImageToTextPipeline:()=>z,ObjectDetectionPipeline:()=>te,Pipeline:()=>m,QuestionAnsweringPipeline:()=>_,SummarizationPipeline:()=>y,Text2TextGenerationPipeline:()=>w,TextClassificationPipeline:()=>v,TextGenerationPipeline:()=>T,TextToAudioPipeline:()=>K,TokenClassificationPipeline:()=>g,TranslationPipeline:()=>x,ZeroShotAudioClassificationPipeline:()=>j,ZeroShotClassificationPipeline:()=>S,ZeroShotImageClassificationPipeline:()=>Y,ZeroShotObjectDetectionPipeline:()=>V,pipeline:()=>Ne});var n=r("./src/tokenizers.js"),i=r("./src/models.js"),o=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var a=r("./src/utils/generic.js"),s=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),u=r("./src/utils/audio.js"),d=r("./src/utils/tensor.js"),c=r("./src/utils/image.js");async function f(ge){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(re=>c.RawImage.read(re)))}async function p(ge,re){return Array.isArray(ge)||(ge=[ge]),await Promise.all(ge.map(ne=>typeof ne=="string"||ne instanceof URL?(0,u.read_audio)(ne,re):ne instanceof Float64Array?new Float32Array(ne):ne))}function h(ge,re){re&&(ge=ge.map(Ee=>Ee|0));const[ne,Z,ve,Ae]=ge;return{xmin:ne,ymin:Z,xmax:ve,ymax:Ae}}class m extends a.Callable{constructor({task:re,model:ne,tokenizer:Z=null,processor:ve=null}){super(),this.task=re,this.model=ne,this.tokenizer=Z,this.processor=ve}async dispose(){await this.model.dispose()}}class v extends m{constructor(re){super(re)}async _call(re,{top_k:ne=1}={}){const Z=this.tokenizer(re,{padding:!0,truncation:!0}),ve=await this.model(Z),Ae=this.model.config.problem_type==="multi_label_classification"?$e=>$e.sigmoid():$e=>new d.Tensor("float32",(0,l.softmax)($e.data),$e.dims),Ee=this.model.config.id2label,we=[];for(const $e of ve.logits){const Me=Ae($e),je=await(0,d.topk)(Me,ne),ze=je[0].tolist(),Ce=je[1].tolist().map((st,Ye)=>({label:Ee?Ee[st]:`LABEL_${st}`,score:ze[Ye]}));ne===1?we.push(...Ce):we.push(Ce)}return Array.isArray(re)||ne===1?we:we[0]}}class g extends m{constructor(re){super(re)}async _call(re,{ignore_labels:ne=["O"]}={}){const Z=Array.isArray(re),ve=this.tokenizer(Z?re:[re],{padding:!0,truncation:!0}),Ee=(await this.model(ve)).logits,we=this.model.config.id2label,$e=[];for(let Me=0;Me<Ee.dims[0];++Me){const je=ve.input_ids[Me],ze=Ee[Me],Xe=[];for(let Ce=0;Ce<ze.dims[0];++Ce){const st=ze[Ce],Ye=(0,l.max)(st.data)[1],rt=we?we[Ye]:`LABEL_${Ye}`;if(ne.includes(rt))continue;const Je=this.tokenizer.decode([je[Ce].item()],{skip_special_tokens:!0});if(Je==="")continue;const Ue=(0,l.softmax)(st.data);Xe.push({entity:rt,score:Ue[Ye],index:Ce,word:Je})}$e.push(Xe)}return Z?$e:$e[0]}}class _ extends m{constructor(re){super(re)}async _call(re,ne,{top_k:Z=1}={}){const ve=this.tokenizer(re,{text_pair:ne,padding:!0,truncation:!0}),{start_logits:Ae,end_logits:Ee}=await this.model(ve),we=ve.input_ids.tolist(),$e=ve.attention_mask.tolist(),Me=this.tokenizer.all_special_ids,je=[];for(let ze=0;ze<Ae.dims[0];++ze){const Xe=we[ze],Ce=Xe.findIndex(ot=>ot==this.tokenizer.sep_token_id);$e[ze].map((ot,lt)=>ot==1&&(lt===0||lt>Ce&&Me.findIndex(Ut=>Ut==Xe[lt])===-1));const st=Ae[ze].tolist(),Ye=Ee[ze].tolist();for(let ot=1;ot<st.length;++ot)($e[ze]==0||ot<=Ce||Me.findIndex(lt=>lt==Xe[ot])!==-1)&&(st[ot]=-1/0,Ye[ot]=-1/0);const rt=(0,l.softmax)(st).map((ot,lt)=>[ot,lt]),Je=(0,l.softmax)(Ye).map((ot,lt)=>[ot,lt]);rt[0][0]=0,Je[0][0]=0;const Ue=(0,s.product)(rt,Je).filter(ot=>ot[0][1]<=ot[1][1]).map(ot=>[ot[0][1],ot[1][1],ot[0][0]*ot[1][0]]).sort((ot,lt)=>lt[2]-ot[2]);for(let ot=0;ot<Math.min(Ue.length,Z);++ot){const[lt,Ut,Nt]=Ue[ot],Pt=Xe.slice(lt,Ut+1),$r=this.tokenizer.decode(Pt,{skip_special_tokens:!0});je.push({answer:$r,score:Nt})}}return Z===1?je[0]:je}}class b extends m{constructor(re){super(re)}async _call(re,{top_k:ne=5}={}){const Z=this.tokenizer(re,{padding:!0,truncation:!0}),{logits:ve}=await this.model(Z),Ae=[],Ee=Z.input_ids.tolist();for(let we=0;we<Ee.length;++we){const $e=Ee[we],Me=$e.findIndex(st=>st==this.tokenizer.mask_token_id);if(Me===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const je=ve[we][Me],ze=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)(je.data),je.dims),ne),Xe=ze[0].tolist(),Ce=ze[1].tolist();Ae.push(Ce.map((st,Ye)=>{const rt=$e.slice();return rt[Me]=st,{score:Xe[Ye],token:Number(st),token_str:this.tokenizer.decode([st]),sequence:this.tokenizer.decode(rt,{skip_special_tokens:!0})}}))}return Array.isArray(re)?Ae:Ae[0]}}class w extends m{constructor(ne){super(ne);le(this,"_key","generated_text")}async _call(ne,Z={}){Array.isArray(ne)||(ne=[ne]),this.model.config.prefix&&(ne=ne.map(Me=>this.model.config.prefix+Me));const ve=this.model.config.task_specific_params;ve&&ve[this.task]&&ve[this.task].prefix&&(ne=ne.map(Me=>ve[this.task].prefix+Me));const Ae=this.tokenizer,Ee={padding:!0,truncation:!0};let we;this instanceof x&&"_build_translation_inputs"in Ae?we=Ae._build_translation_inputs(ne,Ee,Z):we=Ae(ne,Ee);const $e=await this.model.generate({...we,...Z});return Ae.batch_decode($e,{skip_special_tokens:!0}).map(Me=>({[this._key]:Me}))}}class y extends w{constructor(ne){super(ne);le(this,"_key","summary_text")}}class x extends w{constructor(ne){super(ne);le(this,"_key","translation_text")}}function M(ge){return Array.isArray(ge)&&ge.every(re=>"role"in re&&"content"in re)}class T extends m{constructor(re){super(re)}async _call(re,ne={}){let Z=!1,ve=!1,Ae=ne.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,Ee;if(typeof re=="string")Ee=re=[re];else if(Array.isArray(re)&&re.every(Ce=>typeof Ce=="string"))Z=!0,Ee=re;else{if(M(re))re=[re];else if(Array.isArray(re)&&re.every(M))Z=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");ve=!0,Ee=re.map(Ce=>this.tokenizer.apply_chat_template(Ce,{tokenize:!1,add_generation_prompt:!0})),Ae=!1}const we=ve?!1:ne.return_full_text??!0;this.tokenizer.padding_side="left";const $e=this.tokenizer(Ee,{add_special_tokens:Ae,padding:!0,truncation:!0}),Me=await this.model.generate({...$e,...ne}),je=this.tokenizer.batch_decode(Me,{skip_special_tokens:!0});let ze;!we&&$e.input_ids.dims.at(-1)>0&&(ze=this.tokenizer.batch_decode($e.input_ids,{skip_special_tokens:!0}).map(Ce=>Ce.length));const Xe=Array.from({length:re.length},Ce=>[]);for(let Ce=0;Ce<je.length;++Ce){const st=Math.floor(Ce/Me.dims[0]*re.length);ze&&(je[Ce]=je[Ce].slice(ze[st])),Xe[st].push({generated_text:ve?[...re[st],{role:"assistant",content:je[Ce]}]:je[Ce]})}return!Z&&Xe.length===1?Xe[0]:Xe}}class S extends m{constructor(re){super(re),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([ne,Z])=>[ne.toLowerCase(),Z])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(re,ne,{hypothesis_template:Z="This example is {}.",multi_label:ve=!1}={}){const Ae=Array.isArray(re);Ae||(re=[re]),Array.isArray(ne)||(ne=[ne]);const Ee=ne.map(Me=>Z.replace("{}",Me)),we=ve||ne.length===1,$e=[];for(const Me of re){const je=[];for(const Ce of Ee){const st=this.tokenizer(Me,{text_pair:Ce,padding:!0,truncation:!0}),Ye=await this.model(st);we?je.push([Ye.logits.data[this.contradiction_id],Ye.logits.data[this.entailment_id]]):je.push(Ye.logits.data[this.entailment_id])}const Xe=(we?je.map(Ce=>(0,l.softmax)(Ce)[1]):(0,l.softmax)(je)).map((Ce,st)=>[Ce,st]).sort((Ce,st)=>st[0]-Ce[0]);$e.push({sequence:Me,labels:Xe.map(Ce=>ne[Ce[1]]),scores:Xe.map(Ce=>Ce[0])})}return Ae?$e:$e[0]}}class $ extends m{constructor(re){super(re)}async _call(re,{pooling:ne="none",normalize:Z=!1,quantize:ve=!1,precision:Ae="binary"}={}){const Ee=this.tokenizer(re,{padding:!0,truncation:!0}),we=await this.model(Ee);let $e=we.last_hidden_state??we.logits??we.token_embeddings;switch(ne){case"none":break;case"mean":$e=(0,d.mean_pooling)($e,Ee.attention_mask);break;case"first_token":case"cls":$e=$e.slice(null,0);break;case"last_token":case"eos":$e=$e.slice(null,-1);break;default:throw Error(`Pooling method '${ne}' not supported.`)}return Z&&($e=$e.normalize(2,-1)),ve&&($e=(0,d.quantize_embeddings)($e,Ae)),$e}}class k extends m{constructor(re){super(re)}async _call(re,{pool:ne=null}={}){const Z=await f(re),{pixel_values:ve}=await this.processor(Z),Ae=await this.model({pixel_values:ve});let Ee;if(ne){if(!("pooler_output"in Ae))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ee=Ae.pooler_output}else Ee=Ae.last_hidden_state??Ae.logits??Ae.image_embeds;return Ee}}class F extends m{constructor(re){super(re)}async _call(re,{top_k:ne=5}={}){const Z=this.processor.feature_extractor.config.sampling_rate,ve=await p(re,Z),Ae=this.model.config.id2label,Ee=[];for(const we of ve){const $e=await this.processor(we),je=(await this.model($e)).logits[0],ze=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)(je.data),je.dims),ne),Xe=ze[0].tolist(),st=ze[1].tolist().map((Ye,rt)=>({label:Ae?Ae[Ye]:`LABEL_${Ye}`,score:Xe[rt]}));Ee.push(st)}return Array.isArray(re)?Ee:Ee[0]}}class j extends m{constructor(re){super(re)}async _call(re,ne,{hypothesis_template:Z="This is a sound of {}."}={}){const ve=!Array.isArray(re);ve&&(re=[re]);const Ae=ne.map(je=>Z.replace("{}",je)),Ee=this.tokenizer(Ae,{padding:!0,truncation:!0}),we=this.processor.feature_extractor.config.sampling_rate,$e=await p(re,we),Me=[];for(const je of $e){const ze=await this.processor(je),Xe=await this.model({...Ee,...ze}),Ce=(0,l.softmax)(Xe.logits_per_audio.data);Me.push([...Ce].map((st,Ye)=>({score:st,label:ne[Ye]})))}return ve?Me[0]:Me}}class U extends m{constructor(re){super(re)}async _call(re,ne={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(re,ne);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(re,ne);case"moonshine":return this._call_moonshine(re,ne);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(re,ne){ne.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),ne.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const Z=!Array.isArray(re);Z&&(re=[re]);const ve=this.processor.feature_extractor.config.sampling_rate,Ae=await p(re,ve),Ee=[];for(const we of Ae){const $e=await this.processor(we),je=(await this.model($e)).logits[0],ze=[];for(const Ce of je)ze.push((0,l.max)(Ce.data)[1]);const Xe=this.tokenizer.decode(ze);Ee.push({text:Xe})}return Z?Ee[0]:Ee}async _call_whisper(re,ne){const Z=ne.return_timestamps??!1,ve=ne.chunk_length_s??0,Ae=ne.force_full_sequences??!1;let Ee=ne.stride_length_s??null;const we={...ne};Z==="word"&&(we.return_token_timestamps=!0,we.return_timestamps=!1);const $e=!Array.isArray(re);$e&&(re=[re]);const Me=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,je=this.processor.feature_extractor.config.hop_length,ze=this.processor.feature_extractor.config.sampling_rate,Xe=await p(re,ze),Ce=[];for(const st of Xe){let Ye=[];if(ve>0){if(Ee===null)Ee=ve/6;else if(ve<=Ee)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const Ue=ze*ve,ot=ze*Ee,lt=Ue-2*ot;let Ut=0;for(;;){const Nt=Ut+Ue,Pt=st.subarray(Ut,Nt),$r=await this.processor(Pt),un=Ut===0,en=Nt>=st.length;if(Ye.push({stride:[Pt.length,un?0:ot,en?0:ot],input_features:$r.input_features,is_last:en}),en)break;Ut+=lt}}else Ye=[{stride:[st.length,0,0],input_features:(await this.processor(st)).input_features,is_last:!0}];for(const Ue of Ye){we.num_frames=Math.floor(Ue.stride[0]/je);const ot=await this.model.generate({inputs:Ue.input_features,...we});Z==="word"?(Ue.tokens=ot.sequences.tolist()[0],Ue.token_timestamps=ot.token_timestamps.tolist()[0].map(lt=>(0,l.round)(lt,2))):Ue.tokens=ot[0].tolist(),Ue.stride=Ue.stride.map(lt=>lt/ze)}const[rt,Je]=this.tokenizer._decode_asr(Ye,{time_precision:Me,return_timestamps:Z,force_full_sequences:Ae});Ce.push({text:rt,...Je})}return $e?Ce[0]:Ce}async _call_moonshine(re,ne){const Z=!Array.isArray(re);Z&&(re=[re]);const ve=this.processor.feature_extractor.config.sampling_rate,Ae=await p(re,ve),Ee=[];for(const we of Ae){const $e=await this.processor(we),Me=Math.floor(we.length/ve)*6,je=await this.model.generate({max_new_tokens:Me,...ne,...$e}),ze=this.processor.batch_decode(je,{skip_special_tokens:!0})[0];Ee.push({text:ze})}return Z?Ee[0]:Ee}}class z extends m{constructor(re){super(re)}async _call(re,ne={}){const Z=Array.isArray(re),ve=await f(re),{pixel_values:Ae}=await this.processor(ve),Ee=[];for(const we of Ae){we.dims=[1,...we.dims];const $e=await this.model.generate({inputs:we,...ne}),Me=this.tokenizer.batch_decode($e,{skip_special_tokens:!0}).map(je=>({generated_text:je.trim()}));Ee.push(Me)}return Z?Ee:Ee[0]}}class G extends m{constructor(re){super(re)}async _call(re,{top_k:ne=5}={}){const Z=await f(re),{pixel_values:ve}=await this.processor(Z),Ae=await this.model({pixel_values:ve}),Ee=this.model.config.id2label,we=[];for(const $e of Ae.logits){const Me=await(0,d.topk)(new d.Tensor("float32",(0,l.softmax)($e.data),$e.dims),ne),je=Me[0].tolist(),Xe=Me[1].tolist().map((Ce,st)=>({label:Ee?Ee[Ce]:`LABEL_${Ce}`,score:je[st]}));we.push(Xe)}return Array.isArray(re)?we:we[0]}}class H extends m{constructor(re){super(re),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(re,{threshold:ne=.5,mask_threshold:Z=.5,overlap_mask_area_threshold:ve=.8,label_ids_to_fuse:Ae=null,target_sizes:Ee=null,subtask:we=null}={}){if(Array.isArray(re)&&re.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const Me=await f(re),je=Me.map(Ue=>[Ue.height,Ue.width]),ze=await this.processor(Me),{inputNames:Xe,outputNames:Ce}=this.model.sessions.model;if(!Xe.includes("pixel_values")){if(Xe.length!==1)throw Error(`Expected a single input name, but got ${Xe.length} inputs: ${Xe}.`);const Ue=Xe[0];if(Ue in ze)throw Error(`Input name ${Ue} already exists in the inputs.`);ze[Ue]=ze.pixel_values}const st=await this.model(ze);let Ye=null;if(we!==null)Ye=this.subtasks_mapping[we];else if(this.processor.image_processor){for(const[Ue,ot]of Object.entries(this.subtasks_mapping))if(ot in this.processor.image_processor){Ye=this.processor.image_processor[ot].bind(this.processor.image_processor),we=Ue;break}}const rt=this.model.config.id2label,Je=[];if(we)if(we==="panoptic"||we==="instance"){const Ue=Ye(st,ne,Z,ve,Ae,Ee??je)[0],ot=Ue.segmentation;for(const lt of Ue.segments_info){const Ut=new Uint8ClampedArray(ot.data.length);for(let Pt=0;Pt<ot.data.length;++Pt)ot.data[Pt]===lt.id&&(Ut[Pt]=255);const Nt=new c.RawImage(Ut,ot.dims[1],ot.dims[0],1);Je.push({score:lt.score,label:rt[lt.label_id],mask:Nt})}}else if(we==="semantic"){const{segmentation:Ue,labels:ot}=Ye(st,Ee??je)[0];for(const lt of ot){const Ut=new Uint8ClampedArray(Ue.data.length);for(let Pt=0;Pt<Ue.data.length;++Pt)Ue.data[Pt]===lt&&(Ut[Pt]=255);const Nt=new c.RawImage(Ut,Ue.dims[1],Ue.dims[0],1);Je.push({score:null,label:rt[lt],mask:Nt})}}else throw Error(`Subtask ${we} not supported.`);else{const ot=st[Ce[0]];for(let lt=0;lt<je.length;++lt){const Ut=je[lt],Nt=ot[lt];Nt.data.some($r=>$r<-1e-5||$r>1+1e-5)&&Nt.sigmoid_();const Pt=await c.RawImage.fromTensor(Nt.mul_(255).to("uint8")).resize(Ut[1],Ut[0]);Je.push({label:null,score:null,mask:Pt})}}return Je}}class W extends H{constructor(re){super(re)}async _call(re,ne={}){if(Array.isArray(re)&&re.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const ve=await f(re),Ae=await super._call(re,ne);return ve.map((we,$e)=>{const Me=we.clone();return Me.putAlpha(Ae[$e].mask),Me})}}class Y extends m{constructor(re){super(re)}async _call(re,ne,{hypothesis_template:Z="This is a photo of {}"}={}){const ve=Array.isArray(re),Ae=await f(re),Ee=ne.map(Xe=>Z.replace("{}",Xe)),we=this.tokenizer(Ee,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:$e}=await this.processor(Ae),Me=await this.model({...we,pixel_values:$e}),je=this.model.config.model_type==="siglip"?Xe=>Xe.sigmoid().data:Xe=>(0,l.softmax)(Xe.data),ze=[];for(const Xe of Me.logits_per_image){const st=[...je(Xe)].map((Ye,rt)=>({score:Ye,label:ne[rt]}));st.sort((Ye,rt)=>rt.score-Ye.score),ze.push(st)}return ve?ze:ze[0]}}class te extends m{constructor(re){super(re)}async _call(re,{threshold:ne=.9,percentage:Z=!1}={}){const ve=Array.isArray(re);if(ve&&re.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Ae=await f(re),Ee=Z?null:Ae.map(Ce=>[Ce.height,Ce.width]),{pixel_values:we,pixel_mask:$e}=await this.processor(Ae),Me=await this.model({pixel_values:we,pixel_mask:$e}),je=this.processor.image_processor.post_process_object_detection(Me,ne,Ee),ze=this.model.config.id2label,Xe=je.map(Ce=>Ce.boxes.map((st,Ye)=>({score:Ce.scores[Ye],label:ze[Ce.classes[Ye]],box:h(st,!Z)})));return ve?Xe:Xe[0]}}class V extends m{constructor(re){super(re)}async _call(re,ne,{threshold:Z=.1,top_k:ve=null,percentage:Ae=!1}={}){const Ee=Array.isArray(re),we=await f(re),$e=this.tokenizer(ne,{padding:!0,truncation:!0}),Me=await this.processor(we),je=[];for(let ze=0;ze<we.length;++ze){const Xe=we[ze],Ce=Ae?null:[[Xe.height,Xe.width]],st=Me.pixel_values[ze].unsqueeze_(0),Ye=await this.model({...$e,pixel_values:st});let rt;if("post_process_grounded_object_detection"in this.processor){const Je=this.processor.post_process_grounded_object_detection(Ye,$e.input_ids,{box_threshold:Z,text_threshold:Z,target_sizes:Ce})[0];rt=Je.boxes.map((Ue,ot)=>({score:Je.scores[ot],label:Je.labels[ot],box:h(Ue,!Ae)}))}else{const Je=this.processor.image_processor.post_process_object_detection(Ye,Z,Ce,!0)[0];rt=Je.boxes.map((Ue,ot)=>({score:Je.scores[ot],label:ne[Je.classes[ot]],box:h(Ue,!Ae)}))}rt.sort((Je,Ue)=>Ue.score-Je.score),ve!==null&&(rt=rt.slice(0,ve)),je.push(rt)}return Ee?je:je[0]}}class I extends m{constructor(re){super(re)}async _call(re,ne,Z={}){const ve=(await f(re))[0],{pixel_values:Ae}=await this.processor(ve),Ee=`<s_docvqa><s_question>${ne}</s_question><s_answer>`,we=this.tokenizer(Ee,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,$e=await this.model.generate({inputs:Ae,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:we,...Z}),je=this.tokenizer.batch_decode($e)[0].match(/<s_answer>(.*?)<\/s_answer>/);let ze=null;return je&&je.length>=2&&(ze=je[1].trim()),[{answer:ze}]}}class K extends m{constructor(ne){super(ne);le(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=ne.vocoder??null}async _call(ne,{speaker_embeddings:Z=null}={}){return this.processor?this._call_text_to_spectrogram(ne,{speaker_embeddings:Z}):this._call_text_to_waveform(ne)}async _call_text_to_waveform(ne){const Z=this.tokenizer(ne,{padding:!0,truncation:!0}),{waveform:ve}=await this.model(Z),Ae=this.model.config.sampling_rate;return new u.RawAudio(ve.data,Ae)}async _call_text_to_spectrogram(ne,{speaker_embeddings:Z}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await i.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),(typeof Z=="string"||Z instanceof URL)&&(Z=new Float32Array(await(await fetch(Z)).arrayBuffer())),Z instanceof Float32Array)Z=new d.Tensor("float32",Z,[1,Z.length]);else if(!(Z instanceof d.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:ve}=this.tokenizer(ne,{padding:!0,truncation:!0}),{waveform:Ae}=await this.model.generate_speech(ve,Z,{vocoder:this.vocoder}),Ee=this.processor.feature_extractor.config.sampling_rate;return new u.RawAudio(Ae.data,Ee)}}class ae extends m{constructor(re){super(re)}async _call(re){const ne=await f(re),Z=await this.processor(ne),ve=await this.model(Z),Ae=[];for(const Ee of ve.reconstruction){const we=Ee.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Ae.push(c.RawImage.fromTensor(we))}return Ae.length>1?Ae:Ae[0]}}class pe extends m{constructor(re){super(re)}async _call(re){const ne=await f(re),Z=await this.processor(ne),{predicted_depth:ve}=await this.model(Z),Ae=[];for(let Ee=0;Ee<ne.length;++Ee){const we=ve[Ee],[$e,Me]=we.dims.slice(-2),[je,ze]=ne[Ee].size,Xe=(await(0,d.interpolate_4d)(we.view(1,1,$e,Me),{size:[ze,je],mode:"bilinear"})).view(ze,je),Ce=Xe.min().item(),st=Xe.max().item(),Ye=Xe.sub(Ce).div_(st-Ce).mul_(255).to("uint8").unsqueeze(0),rt=c.RawImage.fromTensor(Ye);Ae.push({predicted_depth:Xe,depth:rt})}return Ae.length>1?Ae:Ae[0]}}const de=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:v,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:g,model:i.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:_,model:i.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:b,model:i.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:y,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:x,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:w,model:i.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:T,model:i.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:S,model:i.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:F,model:i.AutoModelForAudioClassification,processor:o.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:j,model:i.AutoModel,processor:o.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:U,model:[i.AutoModelForSpeechSeq2Seq,i.AutoModelForCTC],processor:o.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:K,model:[i.AutoModelForTextToWaveform,i.AutoModelForTextToSpectrogram],processor:[o.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:z,model:i.AutoModelForVision2Seq,processor:o.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:G,model:i.AutoModelForImageClassification,processor:o.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:H,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:o.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:W,model:[i.AutoModelForImageSegmentation,i.AutoModelForSemanticSegmentation,i.AutoModelForUniversalSegmentation],processor:o.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:Y,model:i.AutoModel,processor:o.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:te,model:i.AutoModelForObjectDetection,processor:o.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:V,model:i.AutoModelForZeroShotObjectDetection,processor:o.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:I,model:i.AutoModelForDocumentQuestionAnswering,processor:o.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ae,model:i.AutoModelForImageToImage,processor:o.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:pe,model:i.AutoModelForDepthEstimation,processor:o.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:$,model:i.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:o.AutoProcessor,pipeline:k,model:[i.AutoModelForImageFeatureExtraction,i.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),be=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function Ne(ge,re=null,{progress_callback:ne=null,config:Z=null,cache_dir:ve=null,local_files_only:Ae=!1,revision:Ee="main",device:we=null,dtype:$e=null,subfolder:Me="onnx",use_external_data_format:je=null,model_file_name:ze=null,session_options:Xe={}}={}){ge=be[ge]??ge;const Ce=de[ge.split("_",1)[0]];if(!Ce)throw Error(`Unsupported pipeline: ${ge}. Must be one of [${Object.keys(de)}]`);re||(re=Ce.default.model,console.log(`No model specified. Using default model: "${re}".`));const st={progress_callback:ne,config:Z,cache_dir:ve,local_files_only:Ae,revision:Ee,device:we,dtype:$e,subfolder:Me,use_external_data_format:je,model_file_name:ze,session_options:Xe},Ye=new Map([["tokenizer",Ce.tokenizer],["model",Ce.model],["processor",Ce.processor]]),rt=await Te(Ye,re,st);rt.task=ge,(0,s.dispatchCallback)(ne,{status:"ready",task:ge,model:re});const Je=Ce.pipeline;return new Je(rt)}async function Te(ge,re,ne){const Z=Object.create(null),ve=[];for(const[Ae,Ee]of ge.entries()){if(!Ee)continue;let we;Array.isArray(Ee)?we=new Promise(async($e,Me)=>{var ze,Xe;let je;for(const Ce of Ee){if(Ce===null){$e(null);return}try{$e(await Ce.from_pretrained(re,ne));return}catch(st){if((ze=st.message)!=null&&ze.includes("Unsupported model type"))je=st;else if((Xe=st.message)!=null&&Xe.includes("Could not locate file"))je=st;else{Me(st);return}}}Me(je)}):we=Ee.from_pretrained(re,ne),Z[Ae]=we,ve.push(we)}await Promise.all(ve);for(const[Ae,Ee]of Object.entries(Z))Z[Ae]=await Ee;return Z}},"./src/tokenizers.js":(e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>Zt,AutoTokenizer:()=>Rl,BartTokenizer:()=>ft,BertTokenizer:()=>St,BlenderbotSmallTokenizer:()=>Mr,BlenderbotTokenizer:()=>ut,BloomTokenizer:()=>Ti,CLIPTokenizer:()=>es,CamembertTokenizer:()=>Re,CodeGenTokenizer:()=>Pi,CodeLlamaTokenizer:()=>kn,CohereTokenizer:()=>Ho,ConvBertTokenizer:()=>oe,DebertaTokenizer:()=>D,DebertaV2Tokenizer:()=>se,DistilBertTokenizer:()=>Se,ElectraTokenizer:()=>Ct,Ernie4_5_Tokenizer:()=>Nl,EsmTokenizer:()=>Sa,FalconTokenizer:()=>In,GPT2Tokenizer:()=>jt,GPTNeoXTokenizer:()=>Ea,GemmaTokenizer:()=>ci,Grok1Tokenizer:()=>Ri,HerbertTokenizer:()=>Q,LlamaTokenizer:()=>On,M2M100Tokenizer:()=>dn,MBart50Tokenizer:()=>lr,MBartTokenizer:()=>ir,MPNetTokenizer:()=>bo,MarianTokenizer:()=>Ge,MgpstrTokenizer:()=>Ll,MobileBertTokenizer:()=>pt,NllbTokenizer:()=>Vo,NougatTokenizer:()=>Go,PreTrainedTokenizer:()=>bt,Qwen2Tokenizer:()=>ui,RoFormerTokenizer:()=>ce,RobertaTokenizer:()=>si,SiglipTokenizer:()=>di,SpeechT5Tokenizer:()=>ts,SqueezeBertTokenizer:()=>Xt,T5Tokenizer:()=>Mt,TokenizerModel:()=>k,VitsTokenizer:()=>rs,Wav2Vec2CTCTokenizer:()=>He,WhisperTokenizer:()=>gn,XLMRobertaTokenizer:()=>li,XLMTokenizer:()=>dt,is_chinese_char:()=>b});var n=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),o=r("./src/utils/hub.js"),a=r("./src/utils/maths.js"),s=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),u=r("./node_modules/@huggingface/jinja/dist/index.js"),d=r("./src/models/whisper/common_whisper.js");async function c(ye,R){const J=await Promise.all([(0,o.getModelJSON)(ye,"tokenizer.json",!0,R),(0,o.getModelJSON)(ye,"tokenizer_config.json",!0,R)]);return R.legacy!==null&&(J[1].legacy=R.legacy),J}function f(ye,R){const J=[];let ue=0;for(const he of ye.matchAll(R)){const _e=he[0];ue<he.index&&J.push(ye.slice(ue,he.index)),_e.length>0&&J.push(_e),ue=he.index+_e.length}return ue<ye.length&&J.push(ye.slice(ue)),J}function p(ye,R=!0){if(ye.Regex!==void 0){let J=ye.Regex.replace(/\\([#&~])/g,"$1");for(const[ue,he]of S)J=J.replaceAll(ue,he);return new RegExp(J,"gu")}else if(ye.String!==void 0){const J=(0,i.escapeRegExp)(ye.String);return new RegExp(R?J:`(${J})`,"gu")}else return console.warn("Unknown pattern type:",ye),null}function h(ye){return new Map(Object.entries(ye))}function m(ye){const R=ye.dims;switch(R.length){case 1:return ye.tolist();case 2:if(R[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return ye.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${R.length}.`)}}function v(ye){return ye.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function g(ye){return ye.replace(new RegExp("\\p{M}","gu"),"")}function _(ye){return g(ye.toLowerCase())}function b(ye){return ye>=19968&&ye<=40959||ye>=13312&&ye<=19903||ye>=131072&&ye<=173791||ye>=173824&&ye<=177983||ye>=177984&&ye<=178207||ye>=178208&&ye<=183983||ye>=63744&&ye<=64255||ye>=194560&&ye<=195103}function w(ye,R,J){const ue=[];let he=0;for(;he<ye.length;){if(ue.push(ye[he]),(R.get(ye[he])??J)!==J){++he;continue}for(;++he<ye.length&&(R.get(ye[he])??J)===J;)R.get(ue.at(-1))!==J&&(ue[ue.length-1]+=ye[he])}return ue}function y(ye){return ye.match(/\S+/g)||[]}const x="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",M=new RegExp(`^[${x}]+$`,"gu"),T=".,!?…。，、।۔،",S=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${T}])]+`,` ?[^\\s${T}]+`]]);class ${constructor(R){this.content=R.content,this.id=R.id,this.single_word=R.single_word??!1,this.lstrip=R.lstrip??!1,this.rstrip=R.rstrip??!1,this.special=R.special??!1,this.normalized=R.normalized??null}}class k extends n.Callable{constructor(R){super(),this.config=R,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(R,...J){switch(R.type){case"WordPiece":return new F(R);case"Unigram":return new j(R,...J);case"BPE":return new G(R);default:if(R.vocab)return Array.isArray(R.vocab)?new j(R,...J):Object.hasOwn(R,"continuing_subword_prefix")&&Object.hasOwn(R,"unk_token")?Object.hasOwn(R,"merges")?new G(R):new F(R):new H(R,...J);throw new Error(`Unknown TokenizerModel type: ${R.type}`)}}_call(R){return R=this.encode(R),this.fuse_unk&&(R=w(R,this.tokens_to_ids,this.unk_token_id)),R}encode(R){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(R){return R.map(J=>this.tokens_to_ids.get(J)??this.unk_token_id)}convert_ids_to_tokens(R){return R.map(J=>this.vocab[J]??this.unk_token)}}class F extends k{constructor(R){super(R),this.tokens_to_ids=h(R.vocab),this.unk_token_id=this.tokens_to_ids.get(R.unk_token),this.unk_token=R.unk_token,this.max_input_chars_per_word=R.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[J,ue]of this.tokens_to_ids)this.vocab[ue]=J}encode(R){const J=[];for(const ue of R){const he=[...ue];if(he.length>this.max_input_chars_per_word){J.push(this.unk_token);continue}let _e=!1,ke=0;const Ke=[];for(;ke<he.length;){let it=he.length,et=null;for(;ke<it;){let ct=he.slice(ke,it).join("");if(ke>0&&(ct=this.config.continuing_subword_prefix+ct),this.tokens_to_ids.has(ct)){et=ct;break}--it}if(et===null){_e=!0;break}Ke.push(et),ke=it}_e?J.push(this.unk_token):J.push(...Ke)}return J}}class j extends k{constructor(R,J){super(R);const ue=R.vocab.length;this.vocab=new Array(ue),this.scores=new Array(ue);for(let he=0;he<ue;++he)[this.vocab[he],this.scores[he]]=R.vocab[he];this.unk_token_id=R.unk_id,this.unk_token=this.vocab[R.unk_id],this.tokens_to_ids=new Map(this.vocab.map((he,_e)=>[he,_e])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=J.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,a.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(R){const J=R.chars,ue=1;let he=0;for(;he<J.length;){let _e=!1;const ke=J.slice(he).join(""),Ke=this.trie.commonPrefixSearch(ke);for(const it of Ke){const et=this.tokens_to_ids.get(it),ct=this.scores[et],At=(0,i.len)(it);R.insert(he,At,ct,et),!_e&&At===ue&&(_e=!0)}_e||R.insert(he,ue,this.unk_score,this.unk_token_id),he+=ue}}tokenize(R){const J=new l.TokenLattice(R,this.bos_token_id,this.eos_token_id);return this.populateNodes(J),J.tokens()}encode(R){const J=[];for(const ue of R){const he=this.tokenize(ue);J.push(...he)}return J}}const U=(()=>{const ye=[...Array.from({length:94},(he,_e)=>_e+33),...Array.from({length:12},(he,_e)=>_e+161),...Array.from({length:82},(he,_e)=>_e+174)],R=ye.slice();let J=0;for(let he=0;he<256;++he)ye.includes(he)||(ye.push(he),R.push(256+J),J+=1);const ue=R.map(he=>String.fromCharCode(he));return Object.fromEntries(ye.map((he,_e)=>[he,ue[_e]]))})(),z=(0,i.reverseDictionary)(U);class G extends k{constructor(R){super(R),this.tokens_to_ids=h(R.vocab),this.unk_token_id=this.tokens_to_ids.get(R.unk_token),this.unk_token=R.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[ue,he]of this.tokens_to_ids)this.vocab[he]=ue;const J=Array.isArray(R.merges[0]);this.merges=J?R.merges:R.merges.map(ue=>ue.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((ue,he)=>[JSON.stringify(ue),he])),this.end_of_word_suffix=R.end_of_word_suffix,this.continuing_subword_suffix=R.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(R){if(R.length===0)return[];const J=this.cache.get(R);if(J!==void 0)return J;const ue=Array.from(R);this.end_of_word_suffix&&(ue[ue.length-1]+=this.end_of_word_suffix);let he=[];if(ue.length>1){const _e=new l.PriorityQueue((it,et)=>it.score<et.score);let ke={token:ue[0],bias:0,prev:null,next:null},Ke=ke;for(let it=1;it<ue.length;++it){const et={bias:it/ue.length,token:ue[it],prev:Ke,next:null};Ke.next=et,this._add_node(_e,Ke),Ke=et}for(;!_e.isEmpty();){const it=_e.pop();if(it.deleted||!it.next||it.next.deleted)continue;if(it.deleted=!0,it.next.deleted=!0,it.prev){const ct={...it.prev};it.prev.deleted=!0,it.prev=ct,ct.prev?ct.prev.next=ct:ke=ct}const et={token:it.token+it.next.token,bias:it.bias,prev:it.prev,next:it.next.next};et.prev?(et.prev.next=et,this._add_node(_e,et.prev)):ke=et,et.next&&(et.next.prev=et,this._add_node(_e,et))}for(let it=ke;it!==null;it=it.next)he.push(it.token)}else he=ue;if(this.continuing_subword_suffix)for(let _e=0;_e<he.length-1;++_e)he[_e]+=this.continuing_subword_suffix;return R.length<this.max_length_to_cache&&this.cache.put(R,he),he}_add_node(R,J){const ue=this.bpe_ranks.get(JSON.stringify([J.token,J.next.token]));ue!==void 0&&(J.score=ue+J.bias,R.push(J))}encode(R){const J=[];for(const ue of R){if(this.ignore_merges&&this.tokens_to_ids.has(ue)){J.push(ue);continue}const he=this.bpe(ue);for(const _e of he)if(this.tokens_to_ids.has(_e))J.push(_e);else if(this.byte_fallback){const ke=Array.from(this.text_encoder.encode(_e)).map(Ke=>`<0x${Ke.toString(16).toUpperCase().padStart(2,"0")}>`);ke.every(Ke=>this.tokens_to_ids.has(Ke))?J.push(...ke):J.push(this.unk_token)}else J.push(this.unk_token)}return J}}class H extends k{constructor(R,J){super(R),this.tokens_to_ids=h(J.target_lang?R.vocab[J.target_lang]:R.vocab),this.bos_token=J.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=J.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=J.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=J.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[ue,he]of this.tokens_to_ids)this.vocab[he]=ue}encode(R){return R}}class W extends n.Callable{constructor(R){super(),this.config=R}static fromConfig(R){if(R===null)return null;switch(R.type){case"BertNormalizer":return new ge(R);case"Precompiled":return new en(R);case"Sequence":return new Te(R);case"Replace":return new Y(R);case"NFC":return new V(R);case"NFD":return new I(R);case"NFKC":return new K(R);case"NFKD":return new ae(R);case"Strip":return new pe(R);case"StripAccents":return new de(R);case"Lowercase":return new be(R);case"Prepend":return new Ne(R);default:throw new Error(`Unknown Normalizer type: ${R.type}`)}}normalize(R){throw Error("normalize should be implemented in subclass.")}_call(R){return this.normalize(R)}}class Y extends W{normalize(R){const J=p(this.config.pattern);return J===null?R:R.replaceAll(J,this.config.content)}}class te extends W{constructor(){super(...arguments);le(this,"form")}normalize(J){return J=J.normalize(this.form),J}}class V extends te{constructor(){super(...arguments);le(this,"form","NFC")}}class I extends te{constructor(){super(...arguments);le(this,"form","NFD")}}class K extends te{constructor(){super(...arguments);le(this,"form","NFKC")}}class ae extends te{constructor(){super(...arguments);le(this,"form","NFKD")}}class pe extends W{normalize(R){return this.config.strip_left&&this.config.strip_right?R=R.trim():(this.config.strip_left&&(R=R.trimStart()),this.config.strip_right&&(R=R.trimEnd())),R}}class de extends W{normalize(R){return R=g(R),R}}class be extends W{normalize(R){return R=R.toLowerCase(),R}}class Ne extends W{normalize(R){return R=this.config.prepend+R,R}}class Te extends W{constructor(R){super(R),this.normalizers=R.normalizers.map(J=>W.fromConfig(J))}normalize(R){return this.normalizers.reduce((J,ue)=>ue.normalize(J),R)}}class ge extends W{_tokenize_chinese_chars(R){const J=[];for(let ue=0;ue<R.length;++ue){const he=R[ue],_e=he.charCodeAt(0);b(_e)?(J.push(" "),J.push(he),J.push(" ")):J.push(he)}return J.join("")}stripAccents(R){return R.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(R){switch(R){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(R)}}_clean_text(R){const J=[];for(const ue of R){const he=ue.charCodeAt(0);he===0||he===65533||this._is_control(ue)||(/^\s$/.test(ue)?J.push(" "):J.push(ue))}return J.join("")}normalize(R){return this.config.clean_text&&(R=this._clean_text(R)),this.config.handle_chinese_chars&&(R=this._tokenize_chinese_chars(R)),this.config.lowercase?(R=R.toLowerCase(),this.config.strip_accents!==!1&&(R=this.stripAccents(R))):this.config.strip_accents&&(R=this.stripAccents(R)),R}}class re extends n.Callable{static fromConfig(R){if(R===null)return null;switch(R.type){case"BertPreTokenizer":return new ne(R);case"Sequence":return new Ni(R);case"Whitespace":return new vr(R);case"WhitespaceSplit":return new cn(R);case"Metaspace":return new $r(R);case"ByteLevel":return new Z(R);case"Split":return new ve(R);case"Punctuation":return new Ae(R);case"Digits":return new Ee(R);case"Replace":return new Wo(R);default:throw new Error(`Unknown PreTokenizer type: ${R.type}`)}}pre_tokenize_text(R,J){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(R,J){return(Array.isArray(R)?R.map(ue=>this.pre_tokenize_text(ue,J)):this.pre_tokenize_text(R,J)).flat()}_call(R,J){return this.pre_tokenize(R,J)}}class ne extends re{constructor(R){super(),this.pattern=new RegExp(`[^\\s${x}]+|[${x}]`,"gu")}pre_tokenize_text(R,J){return R.trim().match(this.pattern)||[]}}class Z extends re{constructor(R){super(),this.config=R,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=U,this.text_encoder=new TextEncoder}pre_tokenize_text(R,J){return this.add_prefix_space&&!R.startsWith(" ")&&(R=" "+R),(this.use_regex?R.match(this.pattern)||[]:[R]).map(he=>Array.from(this.text_encoder.encode(he),_e=>this.byte_encoder[_e]).join(""))}}class ve extends re{constructor(R){super(),this.config=R,this.pattern=p(this.config.pattern,this.config.invert)}pre_tokenize_text(R,J){var ue;return this.pattern===null?[]:this.config.invert?R.match(this.pattern)||[]:((ue=this.config.behavior)==null?void 0:ue.toLowerCase())==="removed"?R.split(this.pattern).filter(he=>he):f(R,this.pattern)}}class Ae extends re{constructor(R){super(),this.config=R,this.pattern=new RegExp(`[^${x}]+|[${x}]+`,"gu")}pre_tokenize_text(R,J){return R.match(this.pattern)||[]}}class Ee extends re{constructor(R){super(),this.config=R;const J=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(J,"gu")}pre_tokenize_text(R,J){return R.match(this.pattern)||[]}}class we extends n.Callable{constructor(R){super(),this.config=R}static fromConfig(R){if(R===null)return null;switch(R.type){case"TemplateProcessing":return new je(R);case"ByteLevel":return new ze(R);case"RobertaProcessing":return new Me(R);case"BertProcessing":return new $e(R);case"Sequence":return new Xe(R);default:throw new Error(`Unknown PostProcessor type: ${R.type}`)}}post_process(R,...J){throw Error("post_process should be implemented in subclass.")}_call(R,...J){return this.post_process(R,...J)}}class $e extends we{constructor(R){super(R),this.cls=R.cls[0],this.sep=R.sep[0]}post_process(R,J=null,{add_special_tokens:ue=!0}={}){ue&&(R=(0,i.mergeArrays)([this.cls],R,[this.sep]));let he=new Array(R.length).fill(0);if(J!==null){const _e=ue&&this instanceof Me?[this.sep]:[],ke=ue?[this.sep]:[];R=(0,i.mergeArrays)(R,_e,J,ke),he=(0,i.mergeArrays)(he,new Array(J.length+_e.length+ke.length).fill(1))}return{tokens:R,token_type_ids:he}}}class Me extends $e{}class je extends we{constructor(R){super(R),this.single=R.single,this.pair=R.pair}post_process(R,J=null,{add_special_tokens:ue=!0}={}){const he=J===null?this.single:this.pair;let _e=[],ke=[];for(const Ke of he)"SpecialToken"in Ke?ue&&(_e.push(Ke.SpecialToken.id),ke.push(Ke.SpecialToken.type_id)):"Sequence"in Ke&&(Ke.Sequence.id==="A"?(_e=(0,i.mergeArrays)(_e,R),ke=(0,i.mergeArrays)(ke,new Array(R.length).fill(Ke.Sequence.type_id))):Ke.Sequence.id==="B"&&(_e=(0,i.mergeArrays)(_e,J),ke=(0,i.mergeArrays)(ke,new Array(J.length).fill(Ke.Sequence.type_id))));return{tokens:_e,token_type_ids:ke}}}class ze extends we{post_process(R,J=null){return J&&(R=(0,i.mergeArrays)(R,J)),{tokens:R}}}class Xe extends we{constructor(R){super(R),this.processors=R.processors.map(J=>we.fromConfig(J))}post_process(R,J=null,ue={}){let he;for(const _e of this.processors)if(_e instanceof ze)R=_e.post_process(R).tokens,J&&(J=_e.post_process(J).tokens);else{const ke=_e.post_process(R,J,ue);R=ke.tokens,he=ke.token_type_ids}return{tokens:R,token_type_ids:he}}}class Ce extends n.Callable{constructor(R){super(),this.config=R,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=R.trim_offsets}static fromConfig(R){if(R===null)return null;switch(R.type){case"WordPiece":return new Ue(R);case"Metaspace":return new un(R);case"ByteLevel":return new ot(R);case"Replace":return new st(R);case"ByteFallback":return new Ye(R);case"Fuse":return new rt(R);case"Strip":return new Je(R);case"Sequence":return new Ut(R);case"CTC":return new lt(R);case"BPEDecoder":return new Nt(R);default:throw new Error(`Unknown Decoder type: ${R.type}`)}}_call(R){return this.decode(R)}decode(R){return this.decode_chain(R).join("")}decode_chain(R){throw Error("`decode_chain` should be implemented in subclass.")}}class st extends Ce{decode_chain(R){const J=p(this.config.pattern);return J===null?R:R.map(ue=>ue.replaceAll(J,this.config.content))}}class Ye extends Ce{constructor(R){super(R),this.text_decoder=new TextDecoder}decode_chain(R){const J=[];let ue=[];for(const he of R){let _e=null;if(he.length===6&&he.startsWith("<0x")&&he.endsWith(">")){const ke=parseInt(he.slice(3,5),16);isNaN(ke)||(_e=ke)}if(_e!==null)ue.push(_e);else{if(ue.length>0){const ke=this.text_decoder.decode(Uint8Array.from(ue));J.push(ke),ue=[]}J.push(he)}}if(ue.length>0){const he=this.text_decoder.decode(Uint8Array.from(ue));J.push(he),ue=[]}return J}}class rt extends Ce{decode_chain(R){return[R.join("")]}}class Je extends Ce{constructor(R){super(R),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(R){return R.map(J=>{let ue=0;for(let _e=0;_e<this.start&&J[_e]===this.content;++_e){ue=_e+1;continue}let he=J.length;for(let _e=0;_e<this.stop;++_e){const ke=J.length-_e-1;if(J[ke]===this.content){he=ke;continue}else break}return J.slice(ue,he)})}}class Ue extends Ce{constructor(R){super(R),this.cleanup=R.cleanup}decode_chain(R){return R.map((J,ue)=>(ue!==0&&(J.startsWith(this.config.prefix)?J=J.replace(this.config.prefix,""):J=" "+J),this.cleanup&&(J=v(J)),J))}}class ot extends Ce{constructor(R){super(R),this.byte_decoder=z,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(R){const J=R.join(""),ue=new Uint8Array([...J].map(_e=>this.byte_decoder[_e]));return this.text_decoder.decode(ue)}decode_chain(R){const J=[];let ue=[];for(const he of R)this.added_tokens.find(_e=>_e.content===he)!==void 0?(ue.length>0&&(J.push(this.convert_tokens_to_string(ue)),ue=[]),J.push(he)):ue.push(he);return ue.length>0&&J.push(this.convert_tokens_to_string(ue)),J}}class lt extends Ce{constructor(R){super(R),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(R){if(R.length===0)return"";const J=[R[0]];for(let _e=1;_e<R.length;++_e)R[_e]!==J.at(-1)&&J.push(R[_e]);let he=J.filter(_e=>_e!==this.pad_token).join("");return this.cleanup&&(he=v(he).replaceAll(this.word_delimiter_token," ").trim()),he}decode_chain(R){return[this.convert_tokens_to_string(R)]}}class Ut extends Ce{constructor(R){super(R),this.decoders=R.decoders.map(J=>Ce.fromConfig(J))}decode_chain(R){return this.decoders.reduce((J,ue)=>ue.decode_chain(J),R)}}class Nt extends Ce{constructor(R){super(R),this.suffix=this.config.suffix}decode_chain(R){return R.map((J,ue)=>J.replaceAll(this.suffix,ue===R.length-1?"":" "))}}class Pt extends Ce{decode_chain(R){let J="";for(let ue=1;ue<R.length;ue+=2)J+=R[ue];return[J]}}class $r extends re{constructor(R){super(),this.addPrefixSpace=R.add_prefix_space,this.replacement=R.replacement,this.strRep=R.str_rep||this.replacement,this.prepend_scheme=R.prepend_scheme??"always"}pre_tokenize_text(R,{section_index:J=void 0}={}){let ue=R.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!ue.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&J===0)&&(ue=this.strRep+ue),[ue]}}class un extends Ce{constructor(R){super(R),this.addPrefixSpace=R.add_prefix_space,this.replacement=R.replacement}decode_chain(R){const J=[];for(let ue=0;ue<R.length;++ue){let he=R[ue].replaceAll(this.replacement," ");this.addPrefixSpace&&ue==0&&he.startsWith(" ")&&(he=he.substring(1)),J.push(he)}return J}}class en extends W{constructor(R){super(R),this.charsmap=R.precompiled_charsmap}normalize(R){return R=R.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),R=R.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),R.includes("～")?R=R.split("～").map(ue=>ue.normalize("NFKC")).join("～"):R=R.normalize("NFKC"),R}}class Ni extends re{constructor(R){super(),this.tokenizers=R.pretokenizers.map(J=>re.fromConfig(J))}pre_tokenize_text(R,J){return this.tokenizers.reduce((ue,he)=>he.pre_tokenize(ue,J),[R])}}class vr extends re{constructor(R){super()}pre_tokenize_text(R,J){return R.match(/\w+|[^\w\s]+/g)||[]}}class cn extends re{constructor(R){super()}pre_tokenize_text(R,J){return y(R)}}class Wo extends re{constructor(R){super(),this.config=R,this.pattern=p(this.config.pattern),this.content=this.config.content}pre_tokenize_text(R,J){return this.pattern===null?[R]:[R.replaceAll(this.pattern,this.config.content)]}}const Pa=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function yo(ye,R,J,ue){for(const he of Object.keys(ye)){const _e=R-ye[he].length,ke=J(he),Ke=new Array(_e).fill(ke);ye[he]=ue==="right"?(0,i.mergeArrays)(ye[he],Ke):(0,i.mergeArrays)(Ke,ye[he])}}function ei(ye,R){for(const J of Object.keys(ye))ye[J].length=R}class bt extends n.Callable{constructor(J,ue){super();le(this,"return_token_type_ids",!1);le(this,"padding_side","right");this.config=ue,this.normalizer=W.fromConfig(J.normalizer),this.pre_tokenizer=re.fromConfig(J.pre_tokenizer),this.model=k.fromConfig(J.model,ue),this.post_processor=we.fromConfig(J.post_processor),this.decoder=Ce.fromConfig(J.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const he of J.added_tokens){const _e=new $(he);this.added_tokens.push(_e),this.model.tokens_to_ids.set(_e.content,_e.id),this.model.vocab[_e.id]=_e.content,_e.special&&(this.special_tokens.push(_e.content),this.all_special_ids.push(_e.id))}if(this.additional_special_tokens=ue.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(he=>he.content)),this.added_tokens_map=new Map(this.added_tokens.map(he=>[he.content,he])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=ue.model_max_length,this.remove_space=ue.remove_space,this.clean_up_tokenization_spaces=ue.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=ue.do_lowercase_and_remove_accent??!1,ue.padding_side&&(this.padding_side=ue.padding_side),this.add_bos_token=ue.add_bos_token,this.add_eos_token=ue.add_eos_token,this.legacy=!1,this.chat_template=ue.chat_template??null,Array.isArray(this.chat_template)){const he=Object.create(null);for(const{name:_e,template:ke}of this.chat_template){if(typeof _e!="string"||typeof ke!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');he[_e]=ke}this.chat_template=he}this._compiled_template_cache=new Map}getToken(...J){for(const ue of J){const he=this.config[ue];if(he)if(typeof he=="object"){if(he.__type==="AddedToken")return he.content;throw Error(`Unknown token: ${he}`)}else return he}return null}static async from_pretrained(J,{progress_callback:ue=null,config:he=null,cache_dir:_e=null,local_files_only:ke=!1,revision:Ke="main",legacy:it=null}={}){const et=await c(J,{progress_callback:ue,config:he,cache_dir:_e,local_files_only:ke,revision:Ke,legacy:it});return new this(...et)}_call(J,{text_pair:ue=null,add_special_tokens:he=!0,padding:_e=!1,truncation:ke=null,max_length:Ke=null,return_tensor:it=!0,return_token_type_ids:et=null}={}){const ct=Array.isArray(J);let At;if(ct){if(J.length===0)throw Error("text array must be non-empty");if(ue!==null){if(Array.isArray(ue)){if(J.length!==ue.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");At=J.map((tr,Br)=>this._encode_plus(tr,{text_pair:ue[Br],add_special_tokens:he,return_token_type_ids:et}))}else At=J.map(tr=>this._encode_plus(tr,{add_special_tokens:he,return_token_type_ids:et}))}else{if(J==null)throw Error("text may not be null or undefined");if(Array.isArray(ue))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");At=[this._encode_plus(J,{text_pair:ue,add_special_tokens:he,return_token_type_ids:et})]}if(Ke===null?Ke=this.model_max_length:ke===null&&(_e===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Ke=this.model_max_length):_e===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),ke=!0)),_e===!0&&(Ke=Math.min((0,a.max)(At.map(tr=>tr.input_ids.length))[0],Ke??1/0)),Ke=Math.min(Ke,this.model_max_length??1/0),_e||ke)for(let tr=0;tr<At.length;++tr)At[tr].input_ids.length!==Ke&&(At[tr].input_ids.length>Ke?ke&&ei(At[tr],Ke):_e&&yo(At[tr],Ke,Br=>Br==="input_ids"?this.pad_token_id:0,this.padding_side));const or={};if(it){if(!(_e&&ke)&&At.some(Br=>{var fr;for(const _n of Object.keys(Br))if(Br[_n].length!==((fr=At[0][_n])==null?void 0:fr.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const tr=[At.length,At[0].input_ids.length];for(const Br of Object.keys(At[0]))or[Br]=new s.Tensor("int64",BigInt64Array.from(At.flatMap(fr=>fr[Br]).map(BigInt)),tr)}else{for(const tr of Object.keys(At[0]))or[tr]=At.map(Br=>Br[tr]);if(!ct)for(const tr of Object.keys(or))or[tr]=or[tr][0]}return or}_encode_text(J){if(J===null)return null;const ue=this.added_tokens_splitter.split(J);for(let _e=0;_e<ue.length;++_e){const ke=this.added_tokens_map.get(ue[_e]);ke&&(ke.lstrip&&_e>0&&(ue[_e-1]=ue[_e-1].trimEnd()),ke.rstrip&&_e<ue.length-1&&(ue[_e+1]=ue[_e+1].trimStart()))}return ue.flatMap((_e,ke)=>{if(_e.length===0)return[];if(this.added_tokens_map.has(_e))return[_e];if(this.remove_space===!0&&(_e=_e.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(_e=_(_e)),this.normalizer!==null&&(_e=this.normalizer(_e)),_e.length===0)return[];const Ke=this.pre_tokenizer!==null?this.pre_tokenizer(_e,{section_index:ke}):[_e];return this.model(Ke)})}_encode_plus(J,{text_pair:ue=null,add_special_tokens:he=!0,return_token_type_ids:_e=null}={}){const{tokens:ke,token_type_ids:Ke}=this._tokenize_helper(J,{pair:ue,add_special_tokens:he}),it=this.model.convert_tokens_to_ids(ke),et={input_ids:it,attention_mask:new Array(it.length).fill(1)};return(_e??this.return_token_type_ids)&&Ke&&(et.token_type_ids=Ke),et}_tokenize_helper(J,{pair:ue=null,add_special_tokens:he=!1}={}){const _e=this._encode_text(J),ke=this._encode_text(ue);return this.post_processor?this.post_processor(_e,ke,{add_special_tokens:he}):{tokens:(0,i.mergeArrays)(_e??[],ke??[])}}tokenize(J,{pair:ue=null,add_special_tokens:he=!1}={}){return this._tokenize_helper(J,{pair:ue,add_special_tokens:he}).tokens}encode(J,{text_pair:ue=null,add_special_tokens:he=!0,return_token_type_ids:_e=null}={}){return this._encode_plus(J,{text_pair:ue,add_special_tokens:he,return_token_type_ids:_e}).input_ids}batch_decode(J,ue={}){return J instanceof s.Tensor&&(J=J.tolist()),J.map(he=>this.decode(he,ue))}decode(J,ue={}){if(J instanceof s.Tensor&&(J=m(J)),!Array.isArray(J)||J.length===0||!(0,i.isIntegralNumber)(J[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(J,ue)}decode_single(J,{skip_special_tokens:ue=!1,clean_up_tokenization_spaces:he=null}){let _e=this.model.convert_ids_to_tokens(J);ue&&(_e=_e.filter(Ke=>!this.special_tokens.includes(Ke)));let ke=this.decoder?this.decoder(_e):_e.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(ke=ke.replaceAll(this.decoder.end_of_word_suffix," "),ue&&(ke=ke.trim())),(he??this.clean_up_tokenization_spaces)&&(ke=v(ke)),ke}get_chat_template({chat_template:J=null,tools:ue=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const he=this.chat_template;if(J!==null&&Object.hasOwn(he,J))J=he[J];else if(J===null)if(ue!==null&&"tool_use"in he)J=he.tool_use;else if("default"in he)J=he.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(he).sort()}.`)}else if(J===null)if(this.chat_template)J=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return J}apply_chat_template(J,{tools:ue=null,documents:he=null,chat_template:_e=null,add_generation_prompt:ke=!1,tokenize:Ke=!0,padding:it=!1,truncation:et=!1,max_length:ct=null,return_tensor:At=!0,return_dict:or=!1,tokenizer_kwargs:tr={},...Br}={}){if(_e=this.get_chat_template({chat_template:_e,tools:ue}),typeof _e!="string")throw Error(`chat_template must be a string, but got ${typeof _e}`);let fr=this._compiled_template_cache.get(_e);fr===void 0&&(fr=new u.Template(_e),this._compiled_template_cache.set(_e,fr));const _n=Object.create(null);for(const qr of Pa){const vn=this.getToken(qr);vn&&(_n[qr]=vn)}const xn=fr.render({messages:J,add_generation_prompt:ke,tools:ue,documents:he,..._n,...Br});if(Ke){const qr=this._call(xn,{add_special_tokens:!1,padding:it,truncation:et,max_length:ct,return_tensor:At,...tr});return or?qr:qr.input_ids}return xn}}class St extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Zt extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class pt extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Xt extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class D extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class se extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Q extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class oe extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class ce extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Se extends bt{}class Re extends bt{}class dt extends bt{constructor(J,ue){super(J,ue);le(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class Ct extends bt{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Mt extends bt{}class jt extends bt{}class ft extends bt{}class ir extends bt{constructor(R,J){super(R,J),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(ue=>this.languageRegex.test(ue)),this.lang_to_token=ue=>ue}_build_translation_inputs(R,J,ue){return Hn(this,R,J,ue)}}class lr extends ir{}class si extends bt{}class Ti extends bt{}const zr="▁";class On extends bt{constructor(J,ue){super(J,ue);le(this,"padding_side","left");this.legacy=ue.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new $r({replacement:zr,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(J){if(J===null)return null;if(this.legacy||J.length===0)return super._encode_text(J);let ue=super._encode_text(zr+J.replaceAll(zr," "));return ue.length>1&&ue[0]===zr&&this.special_tokens.includes(ue[1])&&(ue=ue.slice(1)),ue}}class kn extends bt{}class li extends bt{}class bo extends bt{}class In extends bt{}class Ea extends bt{}class Sa extends bt{}class ui extends bt{}class ci extends bt{}class Ri extends bt{}function Hn(ye,R,J,ue){if(!("language_codes"in ye)||!Array.isArray(ye.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in ye)||!(ye.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in ye)||typeof ye.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const he=ue.src_lang,_e=ue.tgt_lang;if(!ye.language_codes.includes(_e))throw new Error(`Target language code "${_e}" is not valid. Must be one of: {${ye.language_codes.join(", ")}}`);if(he!==void 0){if(!ye.language_codes.includes(he))throw new Error(`Source language code "${he}" is not valid. Must be one of: {${ye.language_codes.join(", ")}}`);for(const ke of ye.post_processor.config.single)if("SpecialToken"in ke&&ye.languageRegex.test(ke.SpecialToken.id)){ke.SpecialToken.id=ye.lang_to_token(he);break}}return ue.forced_bos_token_id=ye.model.convert_tokens_to_ids([ye.lang_to_token(_e)])[0],ye._call(R,J)}class Vo extends bt{constructor(R,J){super(R,J),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(ue=>this.languageRegex.test(ue)),this.lang_to_token=ue=>ue}_build_translation_inputs(R,J,ue){return Hn(this,R,J,ue)}}class dn extends bt{constructor(R,J){super(R,J),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(ue=>this.languageRegex.test(ue)).map(ue=>ue.slice(2,-2)),this.lang_to_token=ue=>`__${ue}__`}_build_translation_inputs(R,J,ue){return Hn(this,R,J,ue)}}class gn extends bt{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(R,{return_timestamps:J=!1,return_language:ue=!1,time_precision:he=null,force_full_sequences:_e=!0}={}){if(he===null)throw Error("Must specify time_precision");let ke=null;const Ke=J==="word";function it(){return{language:ke,timestamp:[null,null],text:""}}const et=[];let ct=it(),At=0;const or=this.timestamp_begin,Br=or+1500;let fr=[],_n=[],xn=!1,qr=null;const vn=new Set(this.all_special_ids);for(const Ar of R){const yn=Ar.tokens,fi=Ke?Ar.token_timestamps:null;let ti=null,Ko=or;if("stride"in Ar){const[tn,Xr,fn]=Ar.stride;if(At-=Xr,qr=tn-fn,Xr&&(Ko=Xr/he+or),fn)for(let Ur=yn.length-1;Ur>=0;--Ur){const pi=Number(yn[Ur]);if(pi>=or){if(ti!==null&&(pi-or)*he<qr)break;ti=pi}}}let Dn=[],wo=[];for(let tn=0;tn<yn.length;++tn){const Xr=Number(yn[tn]);if(vn.has(Xr)){const fn=this.decode([Xr]),Ur=d.WHISPER_LANGUAGE_MAPPING.get(fn.slice(2,-2));if(Ur!==void 0){if(ke!==null&&Ur!==ke&&!J){fr.push(Dn);const pi=this.findLongestCommonSequence(fr)[0],ns=this.decode(pi);ct.text=ns,et.push(ct),fr=[],Dn=[],ct=it()}ke=ct.language=Ur}}else if(Xr>=or&&Xr<=Br){const fn=(Xr-or)*he+At,Ur=(0,a.round)(fn,2);if(ti!==null&&Xr>=ti)xn=!0;else if(xn||fr.length>0&&Xr<Ko)xn=!1;else if(ct.timestamp[0]===null)ct.timestamp[0]=Ur;else if(Ur!==ct.timestamp[0]){ct.timestamp[1]=Ur,fr.push(Dn),Ke&&_n.push(wo);const[pi,ns]=this.findLongestCommonSequence(fr,_n),ac=this.decode(pi);ct.text=ac,Ke&&(ct.words=this.collateWordTimestamps(pi,ns,ke)),et.push(ct),fr=[],Dn=[],_n=[],wo=[],ct=it()}}else if(Dn.push(Xr),Ke){let fn=(0,a.round)(fi[tn]+At,2),Ur;if(tn+1<fi.length){Ur=(0,a.round)(fi[tn+1]+At,2);const pi=this.decode([Xr]);M.test(pi)&&(Ur=(0,a.round)(Math.min(fn+he,Ur),2))}else Ur=null;wo.push([fn,Ur])}}if("stride"in Ar){const[tn,Xr,fn]=Ar.stride;At+=tn-fn}Dn.length>0?(fr.push(Dn),Ke&&_n.push(wo)):fr.every(tn=>tn.length===0)&&(ct=it(),fr=[],Dn=[],_n=[],wo=[])}if(fr.length>0){if(_e&&J)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Ar,yn]=this.findLongestCommonSequence(fr,_n),fi=this.decode(Ar);ct.text=fi,Ke&&(ct.words=this.collateWordTimestamps(Ar,yn,ke)),et.push(ct)}let Kn=Object.create(null);const Ei=et.map(Ar=>Ar.text).join("");if(J||ue){for(let Ar=0;Ar<et.length;++Ar){const yn=et[Ar];J||delete yn.timestamp,ue||delete yn.language}if(Ke){const Ar=[];for(const yn of et)for(const fi of yn.words)Ar.push(fi);Kn={chunks:Ar}}else Kn={chunks:et}}return[Ei,Kn]}findLongestCommonSequence(R,J=null){let ue=R[0],he=ue.length,_e=[];const ke=Array.isArray(J)&&J.length>0;let Ke=ke?[]:null,it=ke?J[0]:null;for(let et=1;et<R.length;++et){const ct=R[et];let At=0,or=[he,he,0,0];const tr=ct.length;for(let Kn=1;Kn<he+tr;++Kn){const Ei=Math.max(0,he-Kn),Ar=Math.min(he,he+tr-Kn),yn=ue.slice(Ei,Ar),fi=Math.max(0,Kn-he),ti=Math.min(tr,Kn),Ko=ct.slice(fi,ti);if(yn.length!==Ko.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let Dn;ke?Dn=yn.filter((Xr,fn)=>Xr===Ko[fn]&&it[Ei+fn]<=J[et][fi+fn]).length:Dn=yn.filter((Xr,fn)=>Xr===Ko[fn]).length;const wo=Kn/1e4,tn=Dn/Kn+wo;Dn>1&&tn>At&&(At=tn,or=[Ei,Ar,fi,ti])}const[Br,fr,_n,xn]=or,qr=Math.floor((fr+Br)/2),vn=Math.floor((xn+_n)/2);_e.push(...ue.slice(0,qr)),ue=ct.slice(vn),he=ue.length,ke&&(Ke.push(...it.slice(0,qr)),it=J[et].slice(vn))}return _e.push(...ue),ke?(Ke.push(...it),[_e,Ke]):[_e,[]]}collateWordTimestamps(R,J,ue){const[he,_e,ke]=this.combineTokensIntoWords(R,ue),Ke=[];for(let it=0;it<he.length;++it){const et=ke[it];Ke.push({text:he[it],timestamp:[J[et.at(0)][0],J[et.at(-1)][1]]})}return Ke}combineTokensIntoWords(R,J,ue=`"'“¡¿([{-`,he=`"'.。,，!！?？:：”)]}、`){J=J??"english";let _e,ke,Ke;return["chinese","japanese","thai","lao","myanmar"].includes(J)?[_e,ke,Ke]=this.splitTokensOnUnicode(R):[_e,ke,Ke]=this.splitTokensOnSpaces(R),this.mergePunctuations(_e,ke,Ke,ue,he)}decode(R,J){let ue;return J!=null&&J.decode_with_timestamps?(R instanceof s.Tensor&&(R=m(R)),ue=this.decodeWithTimestamps(R,J)):ue=super.decode(R,J),ue}decodeWithTimestamps(R,J){const ue=(J==null?void 0:J.time_precision)??.02,he=Array.from(this.all_special_ids).at(-1)+1;let _e=[[]];for(let ke of R)if(ke=Number(ke),ke>=he){const Ke=((ke-he)*ue).toFixed(2);_e.push(`<|${Ke}|>`),_e.push([])}else _e[_e.length-1].push(ke);return _e=_e.map(ke=>typeof ke=="string"?ke:super.decode(ke,J)),_e.join("")}splitTokensOnUnicode(R){const J=this.decode(R,{decode_with_timestamps:!0}),ue="�",he=[],_e=[],ke=[];let Ke=[],it=[],et=0;for(let ct=0;ct<R.length;++ct){const At=R[ct];Ke.push(At),it.push(ct);const or=this.decode(Ke,{decode_with_timestamps:!0});(!or.includes(ue)||J[et+or.indexOf(ue)]===ue)&&(he.push(or),_e.push(Ke),ke.push(it),Ke=[],it=[],et+=or.length)}return[he,_e,ke]}splitTokensOnSpaces(R){const[J,ue,he]=this.splitTokensOnUnicode(R),_e=[],ke=[],Ke=[],it=new RegExp(`^[${x}]$`,"gu");for(let et=0;et<J.length;++et){const ct=J[et],At=ue[et],or=he[et],tr=At[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Br=ct.startsWith(" "),fr=ct.trim(),_n=it.test(fr);if(tr||Br||_n||_e.length===0)_e.push(ct),ke.push(At),Ke.push(or);else{const xn=_e.length-1;_e[xn]+=ct,ke[xn].push(...At),Ke[xn].push(...or)}}return[_e,ke,Ke]}mergePunctuations(R,J,ue,he,_e){const ke=structuredClone(R),Ke=structuredClone(J),it=structuredClone(ue);let et=ke.length-2,ct=ke.length-1;for(;et>=0;)ke[et].startsWith(" ")&&he.includes(ke[et].trim())?(ke[ct]=ke[et]+ke[ct],Ke[ct]=(0,i.mergeArrays)(Ke[et],Ke[ct]),it[ct]=(0,i.mergeArrays)(it[et],it[ct]),ke[et]="",Ke[et]=[],it[et]=[]):ct=et,--et;for(et=0,ct=1;ct<ke.length;)!ke[et].endsWith(" ")&&_e.includes(ke[ct])?(ke[et]+=ke[ct],Ke[et]=(0,i.mergeArrays)(Ke[et],Ke[ct]),it[et]=(0,i.mergeArrays)(it[et],it[ct]),ke[ct]="",Ke[ct]=[],it[ct]=[]):et=ct,++ct;return[ke.filter(At=>At),Ke.filter(At=>At.length>0),it.filter(At=>At.length>0)]}}class Pi extends bt{}class es extends bt{}class di extends bt{}class Ge extends bt{constructor(R,J){super(R,J),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(ue=>this.languageRegex.test(ue)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(R){if(R===null)return null;const[J,...ue]=R.trim().split(this.languageRegex);if(ue.length===0)return super._encode_text(J);if(ue.length===2){const[he,_e]=ue;return this.supported_language_codes.includes(he)||console.warn(`Unsupported language code "${he}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,i.mergeArrays)([he],super._encode_text(_e))}}}class He extends bt{}class ut extends bt{}class Mr extends bt{}class ts extends bt{}class Go extends bt{}class rs extends bt{constructor(R,J){super(R,J),this.decoder=new Pt({})}}class Ho extends bt{}class Ll extends bt{}class Nl extends bt{}class Rl{static async from_pretrained(R,{progress_callback:J=null,config:ue=null,cache_dir:he=null,local_files_only:_e=!1,revision:ke="main",legacy:Ke=null}={}){var or;const[it,et]=await c(R,{progress_callback:J,config:ue,cache_dir:he,local_files_only:_e,revision:ke,legacy:Ke}),ct=((or=et.tokenizer_class)==null?void 0:or.replace(/Fast$/,""))??"PreTrainedTokenizer";let At=this.TOKENIZER_CLASS_MAPPING[ct];return At||(console.warn(`Unknown tokenizer class "${ct}", attempting to construct from base class.`),At=bt),new At(it,et)}}le(Rl,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer:Mt,DistilBertTokenizer:Se,CamembertTokenizer:Re,DebertaTokenizer:D,DebertaV2Tokenizer:se,BertTokenizer:St,HerbertTokenizer:Q,ConvBertTokenizer:oe,RoFormerTokenizer:ce,XLMTokenizer:dt,ElectraTokenizer:Ct,MobileBertTokenizer:pt,SqueezeBertTokenizer:Xt,AlbertTokenizer:Zt,GPT2Tokenizer:jt,BartTokenizer:ft,MBartTokenizer:ir,MBart50Tokenizer:lr,RobertaTokenizer:si,WhisperTokenizer:gn,CodeGenTokenizer:Pi,CLIPTokenizer:es,SiglipTokenizer:di,MarianTokenizer:Ge,BloomTokenizer:Ti,NllbTokenizer:Vo,M2M100Tokenizer:dn,LlamaTokenizer:On,CodeLlamaTokenizer:kn,XLMRobertaTokenizer:li,MPNetTokenizer:bo,FalconTokenizer:In,GPTNeoXTokenizer:Ea,EsmTokenizer:Sa,Wav2Vec2CTCTokenizer:He,BlenderbotTokenizer:ut,BlenderbotSmallTokenizer:Mr,SpeechT5Tokenizer:ts,NougatTokenizer:Go,VitsTokenizer:rs,Qwen2Tokenizer:ui,GemmaTokenizer:ci,Grok1Tokenizer:Ri,CohereTokenizer:Ho,MgpstrTokenizer:Ll,Ernie4_5_Tokenizer:Nl,PreTrainedTokenizer:bt})},"./src/utils/audio.js":(e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>F,hamming:()=>f,hanning:()=>c,mel_filter_bank:()=>b,read_audio:()=>u,spectrogram:()=>T,window_function:()=>S});var n=r("./src/utils/hub.js"),i=r("./src/utils/maths.js"),o=r("./src/utils/core.js"),a=r("./src/env.js"),s=r("./src/utils/tensor.js"),l=r("?7992");async function u(j,U){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const z=await(await(0,n.getFile)(j)).arrayBuffer(),G=new AudioContext({sampleRate:U});typeof U>"u"&&console.warn(`No sampling rate provided, using default of ${G.sampleRate}Hz.`);const H=await G.decodeAudioData(z);let W;if(H.numberOfChannels===2){const Y=Math.sqrt(2),te=H.getChannelData(0),V=H.getChannelData(1);W=new Float32Array(te.length);for(let I=0;I<H.length;++I)W[I]=Y*(te[I]+V[I])/2}else W=H.getChannelData(0);return W}function d(j,U){if(j<1)return new Float64Array;if(j===1)return new Float64Array([1]);const z=1-U,G=2*Math.PI/(j-1),H=new Float64Array(j);for(let W=0;W<j;++W)H[W]=U-z*Math.cos(W*G);return H}function c(j){return d(j,.5)}function f(j){return d(j,.54)}const p={htk:j=>2595*Math.log10(1+j/700),kaldi:j=>1127*Math.log(1+j/700),slaney:(j,U=1e3,z=15,G=27/Math.log(6.4))=>j>=U?z+Math.log(j/U)*G:3*j/200};function h(j,U="htk"){const z=p[U];if(!z)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof j=="number"?z(j):j.map(G=>z(G))}const m={htk:j=>700*(10**(j/2595)-1),kaldi:j=>700*(Math.exp(j/1127)-1),slaney:(j,U=1e3,z=15,G=Math.log(6.4)/27)=>j>=z?U*Math.exp(G*(j-z)):200*j/3};function v(j,U="htk"){const z=m[U];if(!z)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof j=="number"?z(j):j.map(G=>z(G))}function g(j,U){const z=Float64Array.from({length:U.length-1},(Y,te)=>U[te+1]-U[te]),G=Array.from({length:j.length},()=>new Array(U.length));for(let Y=0;Y<j.length;++Y){const te=G[Y];for(let V=0;V<U.length;++V)te[V]=U[V]-j[Y]}const H=U.length-2,W=Array.from({length:H},()=>new Array(j.length));for(let Y=0;Y<j.length;++Y){const te=G[Y];for(let V=0;V<H;++V){const I=-te[V]/z[V],K=te[V+2]/z[V+1];W[V][Y]=Math.max(0,Math.min(I,K))}}return W}function _(j,U,z){const G=(U-j)/(z-1);return Float64Array.from({length:z},(H,W)=>j+G*W)}function b(j,U,z,G,H,W=null,Y="htk",te=!1){if(W!==null&&W!=="slaney")throw new Error('norm must be one of null or "slaney"');if(j<2)throw new Error(`Require num_frequency_bins: ${j} >= 2`);if(z>G)throw new Error(`Require min_frequency: ${z} <= max_frequency: ${G}`);const V=h(z,Y),I=h(G,Y),K=_(V,I,U+2);let ae=v(K,Y),pe;if(te){const be=H/((j-1)*2);pe=h(Float64Array.from({length:j},(Ne,Te)=>Te*be),Y),ae=K}else pe=_(0,Math.floor(H/2),j);const de=g(pe,ae);if(W!==null&&W==="slaney")for(let be=0;be<U;++be){const Ne=de[be],Te=2/(ae[be+2]-ae[be]);for(let ge=0;ge<j;++ge)Ne[ge]*=Te}return de}function w(j,U,z){const G=new j.constructor(j.length+U+z),H=j.length-1;for(let W=0;W<j.length;++W)G[U+W]=j[W];for(let W=1;W<=U;++W)G[U-W]=j[(0,o.calculateReflectOffset)(W,H)];for(let W=1;W<=z;++W)G[H+U+W]=j[(0,o.calculateReflectOffset)(H-W,H)];return G}function y(j,U,z,G,H){if(z<=0)throw new Error("reference must be greater than zero");if(G<=0)throw new Error("min_value must be greater than zero");z=Math.max(G,z);const W=Math.log10(z);for(let Y=0;Y<j.length;++Y)j[Y]=U*Math.log10(Math.max(G,j[Y])-W);if(H!==null){if(H<=0)throw new Error("db_range must be greater than zero");const Y=(0,i.max)(j)[0]-H;for(let te=0;te<j.length;++te)j[te]=Math.max(j[te],Y)}return j}function x(j,U=1,z=1e-5,G=null){return y(j,20,U,z,G)}function M(j,U=1,z=1e-10,G=null){return y(j,10,U,z,G)}async function T(j,U,z,G,{fft_length:H=null,power:W=1,center:Y=!0,pad_mode:te="reflect",onesided:V=!0,preemphasis:I=null,preemphasis_htk_flavor:K=!0,mel_filters:ae=null,mel_floor:pe=1e-10,log_mel:de=null,reference:be=1,min_value:Ne=1e-10,db_range:Te=null,remove_dc_offset:ge=null,min_num_frames:re=null,max_num_frames:ne=null,do_pad:Z=!0,transpose:ve=!1}={}){const Ae=U.length;if(H===null&&(H=z),z>H)throw Error(`frame_length (${z}) may not be larger than fft_length (${H})`);if(Ae!==z)throw new Error(`Length of the window (${Ae}) must equal frame_length (${z})`);if(G<=0)throw new Error("hop_length must be greater than zero");if(W===null&&ae!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!K)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(Y){if(te!=="reflect")throw new Error(`pad_mode="${te}" not implemented yet.`);const Je=Math.floor((H-1)/2)+1;j=w(j,Je,Je)}let Ee=Math.floor(1+Math.floor((j.length-z)/G));re!==null&&Ee<re&&(Ee=re);const we=V?Math.floor(H/2)+1:H;let $e=Ee,Me=Ee;ne!==null&&(ne>Ee?Z&&(Me=ne):Me=$e=ne);const je=new i.FFT(H),ze=new Float64Array(H),Xe=new Float64Array(je.outputBufferSize),Ce=new Float32Array(we*Me);for(let Je=0;Je<$e;++Je){const Ue=Je*G,ot=Math.min(j.length-Ue,z);ot!==z&&ze.fill(0,0,z);for(let lt=0;lt<ot;++lt)ze[lt]=j[Ue+lt];if(ge){let lt=0;for(let Nt=0;Nt<ot;++Nt)lt+=ze[Nt];const Ut=lt/ot;for(let Nt=0;Nt<ot;++Nt)ze[Nt]-=Ut}if(I!==null){for(let lt=ot-1;lt>=1;--lt)ze[lt]-=I*ze[lt-1];ze[0]*=1-I}for(let lt=0;lt<U.length;++lt)ze[lt]*=U[lt];je.realTransform(Xe,ze);for(let lt=0;lt<we;++lt){const Ut=lt<<1;Ce[lt*Me+Je]=Xe[Ut]**2+Xe[Ut+1]**2}}if(W!==null&&W!==2){const Je=W/2;for(let Ue=0;Ue<Ce.length;++Ue)Ce[Ue]**=Je}const st=ae.length;let Ye=await(0,s.matmul)(new s.Tensor("float32",ae.flat(),[st,we]),new s.Tensor("float32",Ce,[we,Me]));ve&&(Ye=Ye.transpose(1,0));const rt=Ye.data;for(let Je=0;Je<rt.length;++Je)rt[Je]=Math.max(pe,rt[Je]);if(W!==null&&de!==null){const Je=Math.min(rt.length,$e*st);switch(de){case"log":for(let Ue=0;Ue<Je;++Ue)rt[Ue]=Math.log(rt[Ue]);break;case"log10":for(let Ue=0;Ue<Je;++Ue)rt[Ue]=Math.log10(rt[Ue]);break;case"dB":if(W===1)x(rt,be,Ne,Te);else if(W===2)M(rt,be,Ne,Te);else throw new Error(`Cannot use log_mel option '${de}' with power ${W}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${de}'`)}}return Ye}function S(j,U,{periodic:z=!0,frame_length:G=null,center:H=!0}={}){const W=z?j+1:j;let Y;switch(U){case"boxcar":Y=new Float64Array(W).fill(1);break;case"hann":case"hann_window":Y=c(W);break;case"hamming":Y=f(W);break;case"povey":Y=c(W).map(te=>Math.pow(te,.85));break;default:throw new Error(`Unknown window type ${U}.`)}if(z&&(Y=Y.subarray(0,j)),G===null)return Y;if(j>G)throw new Error(`Length of the window (${j}) may not be larger than frame_length (${G})`);return Y}function $(j,U){let z=44;const G=new ArrayBuffer(z+j.length*4),H=new DataView(G);k(H,0,"RIFF"),H.setUint32(4,36+j.length*4,!0),k(H,8,"WAVE"),k(H,12,"fmt "),H.setUint32(16,16,!0),H.setUint16(20,3,!0),H.setUint16(22,1,!0),H.setUint32(24,U,!0),H.setUint32(28,U*4,!0),H.setUint16(32,4,!0),H.setUint16(34,32,!0),k(H,36,"data"),H.setUint32(40,j.length*4,!0);for(let W=0;W<j.length;++W,z+=4)H.setFloat32(z,j[W],!0);return G}function k(j,U,z){for(let G=0;G<z.length;++G)j.setUint8(U+G,z.charCodeAt(G))}class F{constructor(U,z){this.audio=U,this.sampling_rate=z}toWav(){return $(this.audio,this.sampling_rate)}toBlob(){const U=this.toWav();return new Blob([U],{type:"audio/wav"})}async save(U){let z;if(a.apis.IS_BROWSER_ENV){if(a.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");z=o.saveBlob}else if(a.apis.IS_FS_AVAILABLE)z=async(G,H)=>{let W=await H.arrayBuffer();l.writeFileSync(G,Buffer.from(W))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await z(U,this.toBlob())}}},"./src/utils/constants.js":(e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>i,FEATURE_EXTRACTOR_NAME:()=>o,GENERATION_CONFIG_NAME:()=>u,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>a,PROCESSOR_NAME:()=>s});const n="https://github.com/huggingface/transformers.js/issues/new/choose",i="config.json",o="preprocessor_config.json",a=o,s="processor_config.json",l="chat_template.jinja",u="generation_config.json"},"./src/utils/core.js":(e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>u,calculateReflectOffset:()=>p,count:()=>g,dispatchCallback:()=>n,escapeRegExp:()=>o,isIntegralNumber:()=>s,isNullishDimension:()=>l,isTypedArray:()=>a,len:()=>v,mergeArrays:()=>c,pick:()=>m,pop:()=>d,product:()=>f,reverseDictionary:()=>i,saveBlob:()=>h});function n(_,b){_&&_(b)}function i(_){return Object.fromEntries(Object.entries(_).map(([b,w])=>[w,b]))}function o(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(_){var b,w,y;return((y=(w=(b=_==null?void 0:_.prototype)==null?void 0:b.__proto__)==null?void 0:w.constructor)==null?void 0:y.name)==="TypedArray"}function s(_){return Number.isInteger(_)||typeof _=="bigint"}function l(_){return _==null||_===-1}function u(_){const b=[];let w=_;for(;Array.isArray(w);)b.push(w.length),w=w[0];return b}function d(_,b,w=void 0){const y=_[b];if(y!==void 0)return delete _[b],y;if(w===void 0)throw Error(`Key ${b} does not exist in object.`);return w}function c(..._){return Array.prototype.concat.apply([],_)}function f(..._){return _.reduce((b,w)=>b.flatMap(y=>w.map(x=>[y,x])))}function p(_,b){return Math.abs((_+b)%(2*b)-b)}function h(_,b){const w=URL.createObjectURL(b),y=document.createElement("a");y.href=w,y.download=_,y.click(),y.remove(),URL.revokeObjectURL(w)}function m(_,b){return Object.assign({},...b.map(w=>{if(_[w]!==void 0)return{[w]:_[w]}}))}function v(_){let b=0;for(const w of _)++b;return b}function g(_,b){let w=0;for(const y of _)y===b&&++w;return w}},"./src/utils/data-structures.js":(e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>i,DictionarySplitter:()=>l,LRUCache:()=>u,PriorityQueue:()=>n,TokenLattice:()=>a});class n{constructor(c=(p,h)=>p>h,f=1/0){this._heap=[],this._comparator=c,this._maxSize=f}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...c){return this.extend(c)}extend(c){for(const f of c)if(this.size<this._maxSize)this._heap.push(f),this._siftUp();else{const p=this._smallest();this._comparator(f,this._heap[p])&&(this._heap[p]=f,this._siftUpFrom(p))}return this.size}pop(){const c=this.peek(),f=this.size-1;return f>0&&this._swap(0,f),this._heap.pop(),this._siftDown(),c}replace(c){const f=this.peek();return this._heap[0]=c,this._siftDown(),f}_parent(c){return(c+1>>>1)-1}_left(c){return(c<<1)+1}_right(c){return c+1<<1}_greater(c,f){return this._comparator(this._heap[c],this._heap[f])}_swap(c,f){const p=this._heap[c];this._heap[c]=this._heap[f],this._heap[f]=p}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(c){for(;c>0&&this._greater(c,this._parent(c));)this._swap(c,this._parent(c)),c=this._parent(c)}_siftDown(){let c=0;for(;this._left(c)<this.size&&this._greater(this._left(c),c)||this._right(c)<this.size&&this._greater(this._right(c),c);){const f=this._right(c)<this.size&&this._greater(this._right(c),this._left(c))?this._right(c):this._left(c);this._swap(c,f),c=f}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class i{constructor(){this.root=o.default()}extend(c){for(const f of c)this.push(f)}push(c){let f=this.root;for(const p of c){let h=f.children.get(p);h===void 0&&(h=o.default(),f.children.set(p,h)),f=h}f.isLeaf=!0}*commonPrefixSearch(c){let f=this.root;if(f===void 0)return;let p="";for(const h of c){if(p+=h,f=f.children.get(h),f===void 0)return;f.isLeaf&&(yield p)}}}class o{constructor(c,f){this.isLeaf=c,this.children=f}static default(){return new o(!1,new Map)}}class a{constructor(c,f,p){this.chars=Array.from(c),this.len=this.chars.length,this.bosTokenId=f,this.eosTokenId=p,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const h=new s(this.bosTokenId,0,0,0,0),m=new s(this.eosTokenId,1,this.len,0,0);this.nodes.push(h.clone()),this.nodes.push(m.clone()),this.beginNodes[this.len].push(m),this.endNodes[0].push(h)}insert(c,f,p,h){const m=this.nodes.length,v=new s(h,m,c,f,p);this.beginNodes[c].push(v),this.endNodes[c+f].push(v),this.nodes.push(v)}viterbi(){const c=this.len;let f=0;for(;f<=c;){if(this.beginNodes[f].length==0)return[];for(let g of this.beginNodes[f]){g.prev=null;let _=0,b=null;for(let w of this.endNodes[f]){const y=w.backtraceScore+g.score;(b===null||y>_)&&(b=w.clone(),_=y)}if(b!==null)g.prev=b,g.backtraceScore=_;else return[]}++f}const p=[],m=this.beginNodes[c][0].prev;if(m===null)return[];let v=m.clone();for(;v.prev!==null;)p.push(v.clone()),v=v.clone().prev.clone();return p.reverse(),p}piece(c){return this.chars.slice(c.pos,c.pos+c.length).join("")}tokens(){return this.viterbi().map(f=>this.piece(f))}tokenIds(){return this.viterbi().map(f=>f.tokenId)}}class s{constructor(c,f,p,h,m){this.tokenId=c,this.nodeId=f,this.pos=p,this.length=h,this.score=m,this.prev=null,this.backtraceScore=0}clone(){const c=new s(this.tokenId,this.nodeId,this.pos,this.length,this.score);return c.prev=this.prev,c.backtraceScore=this.backtraceScore,c}}class l{constructor(c){this.trie=this._buildTrie(c)}_buildTrie(c){var p;const f=Object.create(null);for(const h of c){let m=f;for(let v=0;v<h.length;++v)m=m[p=h[v]]??(m[p]=Object.create(null));m.end=h}return f}split(c){const f=[],p=c.length;let h=0,m=0;for(;m<p;){let v=this.trie,g=null,_=m;for(;_<p&&(v=v[c[_]]);)v.end&&(g=v.end),++_;g?(m>h&&f.push(c.slice(h,m)),f.push(g),m+=g.length,h=m):++m}return h<p&&f.push(c.slice(h)),f}}class u{constructor(c){this.capacity=c,this.cache=new Map}get(c){if(!this.cache.has(c))return;const f=this.cache.get(c);return this.cache.delete(c),this.cache.set(c,f),f}put(c,f){this.cache.has(c)&&this.cache.delete(c),this.cache.set(c,f),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}},"./src/utils/devices.js":(e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})},"./src/utils/dtypes.js":(e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>a,DEFAULT_DEVICE_DTYPE_MAPPING:()=>s,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>o});var n=r("./src/env.js"),i=r("./src/utils/devices.js");const o=function(){let u;return async function(){if(u===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)u=!1;else try{u=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{u=!1}return u}}(),a=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),s=Object.freeze({[i.DEVICE_TYPES.wasm]:a.q8}),l=Object.freeze({[a.fp32]:"",[a.fp16]:"_fp16",[a.int8]:"_int8",[a.uint8]:"_uint8",[a.q8]:"_quantized",[a.q4]:"_q4",[a.q4f16]:"_q4f16",[a.bnb4]:"_bnb4"})},"./src/utils/generic.js":(e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let i=function(...o){return i._call(...o)};return Object.setPrototypeOf(i,new.target.prototype)}_call(...i){throw Error("Must implement _call method in subclass")}}},"./src/utils/hub.js":(e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>s,getFile:()=>p,getModelFile:()=>_,getModelJSON:()=>w,getModelText:()=>b});var n=r("?7992"),i=r("?5af5"),o=r("./src/env.js"),a=r("./src/utils/core.js");const s=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class u{constructor(T){if(this.filePath=T,this.headers=new Headers,this.exists=n.existsSync(T),this.exists){this.status=200,this.statusText="OK";let S=n.statSync(T);this.headers.set("content-length",S.size.toString()),this.updateContentType();const $=n.createReadStream(T);this.body=new ReadableStream({start(k){$.on("data",F=>k.enqueue(F)),$.on("end",()=>k.close()),$.on("error",F=>k.error(F))},cancel(){$.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const T=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[T]??"application/octet-stream")}clone(){let T=new u(this.filePath);return T.exists=this.exists,T.status=this.status,T.statusText=this.statusText,T.headers=new Headers(this.headers),T}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const T=await n.promises.readFile(this.filePath);return new Blob([T],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function d(M,T=null,S=null){let $;try{$=new URL(M)}catch{return!1}return!(T&&!T.includes($.protocol)||S&&!S.includes($.hostname))}const c=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function f(M){return!(!c.test(M)||M.includes("..")||M.includes("--")||M.endsWith(".git")||M.endsWith(".ipynb"))}async function p(M){var T;if(o.env.useFS&&!d(M,["http:","https:","blob:"]))return new u(M instanceof URL?M.protocol==="file:"?M.pathname:M.toString():M);if(typeof process<"u"&&((T=process==null?void 0:process.release)==null?void 0:T.name)==="node"){const S=!!(as!=null&&as.TESTING_REMOTELY),$=o.env.version,k=new Headers;if(k.set("User-Agent",`transformers.js/${$}; is_ci/${S};`),d(M,["http:","https:"],["huggingface.co","hf.co"])){const j=(as==null?void 0:as.HF_TOKEN)??(as==null?void 0:as.HF_ACCESS_TOKEN);j&&k.set("Authorization",`Bearer ${j}`)}return fetch(M,{headers:k})}else return fetch(M)}const h={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function m(M,T,S){if(!S)return null;const $=h[M]??`Error (${M}) occurred while trying to load file`;throw Error(`${$}: "${T}".`)}class v{constructor(T){this.path=T}async match(T){let S=i.join(this.path,T),$=new u(S);if($.exists)return $}async put(T,S,$=void 0){let k=i.join(this.path,T);try{const F=S.headers.get("Content-Length"),j=parseInt(F??"0");let U=0;await n.promises.mkdir(i.dirname(k),{recursive:!0});const z=n.createWriteStream(k),G=S.body.getReader();for(;;){const{done:H,value:W}=await G.read();if(H)break;await new Promise((te,V)=>{z.write(W,I=>{if(I){V(I);return}te()})}),U+=W.length;const Y=j?U/j*100:0;$==null||$({progress:Y,loaded:U,total:j})}z.close()}catch(F){try{await n.promises.unlink(k)}catch{}throw F}}}async function g(M,...T){for(let S of T)try{let $=await M.match(S);if($)return $}catch{continue}}async function _(M,T,S=!0,$={},k=!1){if(!o.env.allowLocalModels){if($.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!o.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,a.dispatchCallback)($.progress_callback,{status:"initiate",name:M,file:T});let F;if(!F&&o.env.useCustomCache){if(!o.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!o.env.customCache.match||!o.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");F=o.env.customCache}if(!F&&o.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{F=await caches.open("transformers-cache")}catch(pe){console.warn("An error occurred while opening the browser cache:",pe)}}if(!F&&o.env.useFSCache){if(!o.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");F=new v($.cache_dir??o.env.cacheDir)}const j=$.revision??"main",U=x(M,T),z=f(M),G=z?x(o.env.localModelPath,U):U,H=x(o.env.remoteHost,o.env.remotePathTemplate.replaceAll("{model}",M).replaceAll("{revision}",encodeURIComponent(j)),T);let W;const Y=F instanceof v?j==="main"?U:x(M,j,T):H;let te=!1,V;F&&(V=await g(F,G,Y));const I=V!==void 0;if(V===void 0){if(o.env.allowLocalModels)if(d(U,["http:","https:"])){if($.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${U}.`);if(!o.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${U}.`)}else try{V=await p(G),W=G}catch(de){console.warn(`Unable to load from local path "${G}": "${de}"`)}if(V===void 0||V.status===404){if($.local_files_only||!o.env.allowRemoteModels){if(S)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${G}".`);return null}if(!z)throw Error(`Local file missing at "${G}" and download aborted due to invalid model ID "${M}".`);if(V=await p(H),V.status!==200)return m(V.status,H,S);W=Y}te=F&&typeof Response<"u"&&V instanceof Response&&V.status===200}(0,a.dispatchCallback)($.progress_callback,{status:"download",name:M,file:T});let K;if(!(o.apis.IS_NODE_ENV&&k)){let pe;$.progress_callback?I&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(pe=new Uint8Array(await V.arrayBuffer()),(0,a.dispatchCallback)($.progress_callback,{status:"progress",name:M,file:T,progress:100,loaded:pe.length,total:pe.length})):pe=await y(V,de=>{(0,a.dispatchCallback)($.progress_callback,{status:"progress",name:M,file:T,...de})}):pe=new Uint8Array(await V.arrayBuffer()),K=pe}if(te&&W&&await F.match(W)===void 0&&(K?await F.put(W,new Response(K,{headers:V.headers})).catch(pe=>{console.warn(`Unable to add response to browser cache: ${pe}.`)}):await F.put(W,V,$.progress_callback)),(0,a.dispatchCallback)($.progress_callback,{status:"done",name:M,file:T}),K){if(!o.apis.IS_NODE_ENV&&k)throw new Error("Cannot return path in a browser environment.");return K}if(V instanceof u)return V.filePath;const ae=await(F==null?void 0:F.match(W));if(ae instanceof u)return ae.filePath;if(ae instanceof Response)return new Uint8Array(await ae.arrayBuffer());if(typeof ae=="string")return ae;throw new Error("Unable to get model file path or buffer.")}async function b(M,T,S=!0,$={}){const k=await _(M,T,S,$,!1);return k===null?null:new TextDecoder("utf-8").decode(k)}async function w(M,T,S=!0,$={}){const k=await b(M,T,S,$);return k===null?{}:JSON.parse(k)}async function y(M,T){const S=M.headers.get("Content-Length");S===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let $=parseInt(S??"0"),k=new Uint8Array($),F=0;const j=M.body.getReader();async function U(){const{done:z,value:G}=await j.read();if(z)return;const H=F+G.length;if(H>$){$=H;const Y=new Uint8Array($);Y.set(k),k=Y}k.set(G,F),F=H;const W=F/$*100;return T({progress:W,loaded:F,total:$}),U()}return await U(),k}function x(...M){return M=M.map((T,S)=>(S&&(T=T.replace(new RegExp("^/"),"")),S!==M.length-1&&(T=T.replace(new RegExp("/$"),"")),T)),M.join("/")}},"./src/utils/image.js":(e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>h,load_image:()=>m});var n=r("./src/utils/core.js"),i=r("./src/utils/hub.js"),o=r("./src/env.js"),a=r("./src/utils/tensor.js"),s=r("?2b25");let l,u,d;const c=o.apis.IS_BROWSER_ENV||o.apis.IS_WEBWORKER_ENV;if(c)l=(v,g)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(v,g)},d=self.createImageBitmap,u=self.ImageData;else if(s)d=async v=>{const _=(await v.metadata()).channels,{data:b,info:w}=await v.rotate().raw().toBuffer({resolveWithObject:!0}),y=new h(new Uint8ClampedArray(b),w.width,w.height,w.channels);return _!==void 0&&_!==w.channels&&y.convert(_),y};else throw new Error("Unable to load image processing library.");const f={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},p=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class h{constructor(g,_,b,w){this.data=g,this.width=_,this.height=b,this.channels=w}get size(){return[this.width,this.height]}static async read(g){if(g instanceof h)return g;if(typeof g=="string"||g instanceof URL)return await this.fromURL(g);if(g instanceof Blob)return await this.fromBlob(g);if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&g instanceof OffscreenCanvas)return this.fromCanvas(g);throw new Error(`Unsupported input type: ${typeof g}`)}static fromCanvas(g){if(!c)throw new Error("fromCanvas() is only supported in browser environments.");const b=g.getContext("2d").getImageData(0,0,g.width,g.height).data;return new h(b,g.width,g.height,4)}static async fromURL(g){const _=await(0,i.getFile)(g);if(_.status!==200)throw new Error(`Unable to read image from "${g}" (${_.status} ${_.statusText})`);const b=await _.blob();return this.fromBlob(b)}static async fromBlob(g){if(c){const _=await d(g),b=l(_.width,_.height).getContext("2d");return b.drawImage(_,0,0),new this(b.getImageData(0,0,_.width,_.height).data,_.width,_.height,4)}else{const _=s(await g.arrayBuffer());return await d(_)}}static fromTensor(g,_="CHW"){if(g.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${g.dims.length} dimensions.`);if(_==="CHW")g=g.transpose(1,2,0);else if(_!=="HWC")throw new Error(`Unsupported channel format: ${_}`);if(!(g.data instanceof Uint8ClampedArray||g.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${g.type}`);switch(g.dims[2]){case 1:case 2:case 3:case 4:return new h(g.data,g.dims[1],g.dims[0],g.dims[2]);default:throw new Error(`Unsupported number of channels: ${g.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const g=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let _=0,b=0;_<this.data.length;_+=this.channels){const w=this.data[_],y=this.data[_+1],x=this.data[_+2];g[b++]=Math.round(.2989*w+.587*y+.114*x)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const g=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let _=0,b=0;_<this.data.length;++_)g[b++]=this.data[_],g[b++]=this.data[_],g[b++]=this.data[_];break;case 4:for(let _=0,b=0;_<this.data.length;_+=4)g[b++]=this.data[_],g[b++]=this.data[_+1],g[b++]=this.data[_+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const g=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let _=0,b=0;_<this.data.length;++_)g[b++]=this.data[_],g[b++]=this.data[_],g[b++]=this.data[_],g[b++]=255;break;case 3:for(let _=0,b=0;_<this.data.length;_+=3)g[b++]=this.data[_],g[b++]=this.data[_+1],g[b++]=this.data[_+2],g[b++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,4)}putAlpha(g){if(g.width!==this.width||g.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${g.width}x${g.height}`);if(g.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${g.channels}`);const _=this.data,b=g.data,w=this.width*this.height;if(this.channels===3){const y=new Uint8ClampedArray(w*4);for(let x=0,M=0,T=0;x<w;++x)y[T++]=_[M++],y[T++]=_[M++],y[T++]=_[M++],y[T++]=b[x];return this._update(y,this.width,this.height,4)}else if(this.channels===4){for(let y=0;y<w;++y)_[4*y+3]=b[y];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(g,_,{resample:b=2}={}){if(this.width===g&&this.height===_)return this;let w=f[b]??b;const y=(0,n.isNullishDimension)(g),x=(0,n.isNullishDimension)(_);if(y&&x)return this;if(y?g=_/this.height*this.width:x&&(_=g/this.width*this.height),c){const M=this.channels,T=this.toCanvas(),S=l(g,_).getContext("2d");return S.drawImage(T,0,0,g,_),new h(S.getImageData(0,0,g,_).data,g,_,4).convert(M)}else{let M=this.toSharp();switch(w){case"box":case"hamming":(w==="box"||w==="hamming")&&(console.warn(`Resampling method ${w} is not yet supported. Using bilinear instead.`),w="bilinear");case"nearest":case"bilinear":case"bicubic":M=M.affine([g/this.width,0,0,_/this.height],{interpolator:w});break;case"lanczos":M=M.resize({width:g,height:_,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${w} is not supported.`)}return await d(M)}}async pad([g,_,b,w]){if(g=Math.max(g,0),_=Math.max(_,0),b=Math.max(b,0),w=Math.max(w,0),g===0&&_===0&&b===0&&w===0)return this;if(c){const y=this.channels,x=this.toCanvas(),M=this.width+g+_,T=this.height+b+w,S=l(M,T).getContext("2d");return S.drawImage(x,0,0,this.width,this.height,g,b,this.width,this.height),new h(S.getImageData(0,0,M,T).data,M,T,4).convert(y)}else{const y=this.toSharp().extend({left:g,right:_,top:b,bottom:w});return await d(y)}}async crop([g,_,b,w]){if(g=Math.max(g,0),_=Math.max(_,0),b=Math.min(b,this.width-1),w=Math.min(w,this.height-1),g===0&&_===0&&b===this.width-1&&w===this.height-1)return this;const y=b-g+1,x=w-_+1;if(c){const M=this.channels,T=this.toCanvas(),S=l(y,x).getContext("2d");return S.drawImage(T,g,_,y,x,0,0,y,x),new h(S.getImageData(0,0,y,x).data,y,x,4).convert(M)}else{const M=this.toSharp().extract({left:g,top:_,width:y,height:x});return await d(M)}}async center_crop(g,_){if(this.width===g&&this.height===_)return this;const b=(this.width-g)/2,w=(this.height-_)/2;if(c){const y=this.channels,x=this.toCanvas(),M=l(g,_).getContext("2d");let T=0,S=0,$=0,k=0;return b>=0?T=b:$=-b,w>=0?S=w:k=-w,M.drawImage(x,T,S,g,_,$,k,g,_),new h(M.getImageData(0,0,g,_).data,g,_,4).convert(y)}else{let y=this.toSharp();if(b>=0&&w>=0)y=y.extract({left:Math.floor(b),top:Math.floor(w),width:g,height:_});else if(b<=0&&w<=0){const x=Math.floor(-w),M=Math.floor(-b);y=y.extend({top:x,left:M,right:g-this.width-M,bottom:_-this.height-x})}else{let x=[0,0],M=0;w<0?(x[0]=Math.floor(-w),x[1]=_-this.height-x[0]):M=Math.floor(w);let T=[0,0],S=0;b<0?(T[0]=Math.floor(-b),T[1]=g-this.width-T[0]):S=Math.floor(b),y=y.extend({top:x[0],bottom:x[1],left:T[0],right:T[1]}).extract({left:S,top:M,width:g,height:_})}return await d(y)}}async toBlob(g="image/png",_=1){if(!c)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:g,quality:_})}toTensor(g="CHW"){let _=new a.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(g!=="HWC")if(g==="CHW")_=_.permute(2,0,1);else throw new Error(`Unsupported channel format: ${g}`);return _}toCanvas(){if(!c)throw new Error("toCanvas() is only supported in browser environments.");const g=this.clone().rgba(),_=l(g.width,g.height),b=new u(g.data,g.width,g.height);return _.getContext("2d").putImageData(b,0,0),_}split(){const{data:g,width:_,height:b,channels:w}=this,y=g.constructor,x=g.length/w,M=Array.from({length:w},()=>new y(x));for(let T=0;T<x;++T){const S=w*T;for(let $=0;$<w;++$)M[$][T]=g[S+$]}return M.map(T=>new h(T,_,b,1))}_update(g,_,b,w=null){return this.data=g,this.width=_,this.height=b,w!==null&&(this.channels=w),this}clone(){return new h(this.data.slice(),this.width,this.height,this.channels)}convert(g){if(this.channels===g)return this;switch(g){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(g){if(c){if(o.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const _=g.split(".").pop().toLowerCase(),b=p.get(_)??"image/png",w=await this.toBlob(b);(0,n.saveBlob)(g,w)}else{if(o.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(g);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(c)throw new Error("toSharp() is only supported in server-side environments.");return s(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const m=h.read.bind(h)},"./src/utils/maths.js":(e,t,r)=>{r.r(t),r.d(t,{FFT:()=>m,bankers_round:()=>_,cos_sim:()=>l,dot:()=>s,dynamic_time_warping:()=>b,interpolate_data:()=>n,log_softmax:()=>a,magnitude:()=>u,max:()=>c,medianFilter:()=>v,min:()=>d,permute_data:()=>i,round:()=>g,softmax:()=>o});function n(w,[y,x,M],[T,S],$="bilinear",k=!1){const F=S/M,j=T/x,U=new w.constructor(T*S*y),z=x*M,G=T*S;for(let H=0;H<T;++H)for(let W=0;W<S;++W){const Y=H*S+W,te=(W+.5)/F-.5,V=(H+.5)/j-.5;let I=Math.floor(te),K=Math.floor(V);const ae=Math.min(I+1,M-1),pe=Math.min(K+1,x-1);I=Math.max(I,0),K=Math.max(K,0);const de=te-I,be=V-K,Ne=(1-de)*(1-be),Te=de*(1-be),ge=(1-de)*be,re=de*be,ne=K*M,Z=pe*M,ve=ne+I,Ae=ne+ae,Ee=Z+I,we=Z+ae;for(let $e=0;$e<y;++$e){const Me=$e*z;U[$e*G+Y]=Ne*w[Me+ve]+Te*w[Me+Ae]+ge*w[Me+Ee]+re*w[Me+we]}}return U}function i(w,y,x){const M=new Array(x.length),T=new Array(x.length);for(let k=x.length-1,F=1;k>=0;--k)T[k]=F,M[k]=y[x[k]],F*=M[k];const S=x.map((k,F)=>T[x.indexOf(F)]),$=new w.constructor(w.length);for(let k=0;k<w.length;++k){let F=0;for(let j=y.length-1,U=k;j>=0;--j)F+=U%y[j]*S[j],U=Math.floor(U/y[j]);$[F]=w[k]}return[$,M]}function o(w){const y=c(w)[0],x=w.map(S=>Math.exp(S-y)),M=x.reduce((S,$)=>S+$,0);return x.map(S=>S/M)}function a(w){const y=c(w)[0];let x=0;for(let S=0;S<w.length;++S)x+=Math.exp(w[S]-y);const M=Math.log(x);return w.map(S=>S-y-M)}function s(w,y){let x=0;for(let M=0;M<w.length;++M)x+=w[M]*y[M];return x}function l(w,y){const x=s(w,y),M=u(w),T=u(y);return x/(M*T)}function u(w){return Math.sqrt(w.reduce((y,x)=>y+x*x,0))}function d(w){if(w.length===0)throw Error("Array must not be empty");let y=w[0],x=0;for(let M=1;M<w.length;++M)w[M]<y&&(y=w[M],x=M);return[y,x]}function c(w){if(w.length===0)throw Error("Array must not be empty");let y=w[0],x=0;for(let M=1;M<w.length;++M)w[M]>y&&(y=w[M],x=M);return[y,x]}function f(w){return w>0&&(w&w-1)===0}class p{constructor(y){if(this.size=y|0,this.size<=1||!f(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=y<<1,this.table=new Float64Array(this.size*2);for(let M=0;M<this.table.length;M+=2){const T=Math.PI*M/this.size;this.table[M]=Math.cos(T),this.table[M+1]=-Math.sin(T)}let x=0;for(let M=1;this.size>M;M<<=1)++x;this._width=x%2===0?x-1:x,this._bitrev=new Int32Array(1<<this._width);for(let M=0;M<this._bitrev.length;++M){this._bitrev[M]=0;for(let T=0;T<this._width;T+=2){const S=this._width-T-2;this._bitrev[M]|=(M>>>T&3)<<S}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(y,x){const M=x||new Array(y.length>>>1);for(let T=0;T<y.length;T+=2)M[T>>>1]=y[T];return M}toComplexArray(y,x){const M=x||this.createComplexArray();for(let T=0;T<M.length;T+=2)M[T]=y[T>>>1],M[T+1]=0;return M}transform(y,x){if(y===x)throw new Error("Input and output buffers must be different");this._transform4(y,x,1)}realTransform(y,x){if(y===x)throw new Error("Input and output buffers must be different");this._realTransform4(y,x,1)}inverseTransform(y,x){if(y===x)throw new Error("Input and output buffers must be different");this._transform4(y,x,-1);for(let M=0;M<y.length;++M)y[M]/=this.size}_transform4(y,x,M){const T=this._csize;let $=1<<this._width,k=T/$<<1,F,j;const U=this._bitrev;if(k===4)for(F=0,j=0;F<T;F+=k,++j){const G=U[j];this._singleTransform2(x,y,F,G,$)}else for(F=0,j=0;F<T;F+=k,++j){const G=U[j];this._singleTransform4(x,y,F,G,$,M)}const z=this.table;for($>>=2;$>=2;$>>=2){k=T/$<<1;const G=k>>>2;for(F=0;F<T;F+=k){const H=F+G-1;for(let W=F,Y=0;W<H;W+=2,Y+=$){const te=W,V=te+G,I=V+G,K=I+G,ae=y[te],pe=y[te+1],de=y[V],be=y[V+1],Ne=y[I],Te=y[I+1],ge=y[K],re=y[K+1],ne=z[Y],Z=M*z[Y+1],ve=de*ne-be*Z,Ae=de*Z+be*ne,Ee=z[2*Y],we=M*z[2*Y+1],$e=Ne*Ee-Te*we,Me=Ne*we+Te*Ee,je=z[3*Y],ze=M*z[3*Y+1],Xe=ge*je-re*ze,Ce=ge*ze+re*je,st=ae+$e,Ye=pe+Me,rt=ae-$e,Je=pe-Me,Ue=ve+Xe,ot=Ae+Ce,lt=M*(ve-Xe),Ut=M*(Ae-Ce);y[te]=st+Ue,y[te+1]=Ye+ot,y[V]=rt+Ut,y[V+1]=Je-lt,y[I]=st-Ue,y[I+1]=Ye-ot,y[K]=rt-Ut,y[K+1]=Je+lt}}}}_singleTransform2(y,x,M,T,S){const $=y[T],k=y[T+1],F=y[T+S],j=y[T+S+1];x[M]=$+F,x[M+1]=k+j,x[M+2]=$-F,x[M+3]=k-j}_singleTransform4(y,x,M,T,S,$){const k=S*2,F=S*3,j=y[T],U=y[T+1],z=y[T+S],G=y[T+S+1],H=y[T+k],W=y[T+k+1],Y=y[T+F],te=y[T+F+1],V=j+H,I=U+W,K=j-H,ae=U-W,pe=z+Y,de=G+te,be=$*(z-Y),Ne=$*(G-te);x[M]=V+pe,x[M+1]=I+de,x[M+2]=K+Ne,x[M+3]=ae-be,x[M+4]=V-pe,x[M+5]=I-de,x[M+6]=K-Ne,x[M+7]=ae+be}_realTransform4(y,x,M){const T=this._csize;let $=1<<this._width,k=T/$<<1,F,j;const U=this._bitrev;if(k===4)for(F=0,j=0;F<T;F+=k,++j){const H=U[j];this._singleRealTransform2(x,y,F,H>>>1,$>>>1)}else for(F=0,j=0;F<T;F+=k,++j){const H=U[j];this._singleRealTransform4(x,y,F,H>>>1,$>>>1,M)}const z=this.table;for($>>=2;$>=2;$>>=2){k=T/$<<1;const H=k>>>1,W=H>>>1,Y=W>>>1;for(F=0;F<T;F+=k)for(let te=0,V=0;te<=Y;te+=2,V+=$){const I=F+te,K=I+W,ae=K+W,pe=ae+W,de=y[I],be=y[I+1],Ne=y[K],Te=y[K+1],ge=y[ae],re=y[ae+1],ne=y[pe],Z=y[pe+1],ve=de,Ae=be,Ee=z[V],we=M*z[V+1],$e=Ne*Ee-Te*we,Me=Ne*we+Te*Ee,je=z[2*V],ze=M*z[2*V+1],Xe=ge*je-re*ze,Ce=ge*ze+re*je,st=z[3*V],Ye=M*z[3*V+1],rt=ne*st-Z*Ye,Je=ne*Ye+Z*st,Ue=ve+Xe,ot=Ae+Ce,lt=ve-Xe,Ut=Ae-Ce,Nt=$e+rt,Pt=Me+Je,$r=M*($e-rt),un=M*(Me-Je);if(y[I]=Ue+Nt,y[I+1]=ot+Pt,y[K]=lt+un,y[K+1]=Ut-$r,te===0){y[ae]=Ue-Nt,y[ae+1]=ot-Pt;continue}if(te===Y)continue;const en=F+W-te,Ni=F+H-te;y[en]=lt-M*un,y[en+1]=-Ut-M*$r,y[Ni]=Ue-M*Nt,y[Ni+1]=-ot+M*Pt}}const G=T>>>1;for(let H=2;H<G;H+=2)y[T-H]=y[H],y[T-H+1]=-y[H+1]}_singleRealTransform2(y,x,M,T,S){const $=y[T],k=y[T+S];x[M]=$+k,x[M+1]=0,x[M+2]=$-k,x[M+3]=0}_singleRealTransform4(y,x,M,T,S,$){const k=S*2,F=S*3,j=y[T],U=y[T+S],z=y[T+k],G=y[T+F],H=j+z,W=j-z,Y=U+G,te=$*(U-G);x[M]=H+Y,x[M+1]=0,x[M+2]=W,x[M+3]=-te,x[M+4]=H-Y,x[M+5]=0,x[M+6]=W,x[M+7]=te}}class h{constructor(y){const x=2*(y-1),M=2*(2*y-1),T=2**Math.ceil(Math.log2(M));this.bufferSize=T,this._a=x;const S=new Float64Array(M),$=new Float64Array(T);this._chirpBuffer=new Float64Array(T),this._buffer1=new Float64Array(T),this._buffer2=new Float64Array(T),this._outBuffer1=new Float64Array(T),this._outBuffer2=new Float64Array(T);const k=-2*Math.PI/y,F=Math.cos(k),j=Math.sin(k);for(let U=0;U<M>>1;++U){const z=(U+1-y)**2/2,G=Math.sqrt(F**2+j**2)**z,H=z*Math.atan2(j,F),W=2*U;S[W]=G*Math.cos(H),S[W+1]=G*Math.sin(H),$[W]=S[W],$[W+1]=-S[W+1]}this._slicedChirpBuffer=S.subarray(x,M),this._f=new p(T>>1),this._f.transform(this._chirpBuffer,$)}_transform(y,x,M){const T=this._buffer1,S=this._buffer2,$=this._outBuffer1,k=this._outBuffer2,F=this._chirpBuffer,j=this._slicedChirpBuffer,U=this._a;if(M)for(let z=0;z<j.length;z+=2){const G=z+1,H=z>>1,W=x[H];T[z]=W*j[z],T[G]=W*j[G]}else for(let z=0;z<j.length;z+=2){const G=z+1;T[z]=x[z]*j[z]-x[G]*j[G],T[G]=x[z]*j[G]+x[G]*j[z]}this._f.transform($,T);for(let z=0;z<F.length;z+=2){const G=z+1;S[z]=$[z]*F[z]-$[G]*F[G],S[G]=$[z]*F[G]+$[G]*F[z]}this._f.inverseTransform(k,S);for(let z=0;z<k.length;z+=2){const G=k[z+U],H=k[z+U+1],W=j[z],Y=j[z+1];y[z]=G*W-H*Y,y[z+1]=G*Y+H*W}}transform(y,x){this._transform(y,x,!1)}realTransform(y,x){this._transform(y,x,!0)}}class m{constructor(y){this.fft_length=y,this.isPowerOfTwo=f(y),this.isPowerOfTwo?(this.fft=new p(y),this.outputBufferSize=2*y):(this.fft=new h(y),this.outputBufferSize=this.fft.bufferSize)}realTransform(y,x){this.fft.realTransform(y,x)}transform(y,x){this.fft.transform(y,x)}}function v(w,y){if(y%2===0||y<=0)throw new Error("Window size must be a positive odd number");const x=new w.constructor(w.length),M=new w.constructor(y),T=Math.floor(y/2);for(let S=0;S<w.length;++S){let $=0;for(let k=-T;k<=T;++k){let F=S+k;F<0?F=Math.abs(F):F>=w.length&&(F=2*(w.length-1)-F),M[$++]=w[F]}M.sort(),x[S]=M[T]}return x}function g(w,y){const x=Math.pow(10,y);return Math.round(w*x)/x}function _(w){const y=Math.round(w);return Math.abs(w)%1===.5?y%2===0?y:y-1:y}function b(w){const y=w.length,x=w[0].length,M=[y+1,x+1],T=Array.from({length:M[0]},()=>Array(M[1]).fill(1/0));T[0][0]=0;const S=Array.from({length:M[0]},()=>Array(M[1]).fill(-1));for(let U=1;U<M[1];++U)for(let z=1;z<M[0];++z){const G=T[z-1][U-1],H=T[z-1][U],W=T[z][U-1];let Y,te;G<H&&G<W?(Y=G,te=0):H<G&&H<W?(Y=H,te=1):(Y=W,te=2),T[z][U]=w[z-1][U-1]+Y,S[z][U]=te}for(let U=0;U<M[1];++U)S[0][U]=2;for(let U=0;U<M[0];++U)S[U][0]=1;let $=y,k=x,F=[],j=[];for(;$>0||k>0;)switch(F.push($-1),j.push(k-1),S[$][k]){case 0:--$,--k;break;case 1:--$;break;case 2:--k;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${$}, ${k}]. Please file a bug report.`)}return F.reverse(),j.reverse(),[F,j]}},"./src/utils/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>a,Tensor:()=>s,cat:()=>x,full:()=>j,full_like:()=>U,interpolate:()=>d,interpolate_4d:()=>c,layer_norm:()=>_,matmul:()=>f,mean:()=>$,mean_pooling:()=>g,ones:()=>z,ones_like:()=>G,permute:()=>u,quantize_embeddings:()=>te,rand:()=>Y,rfft:()=>p,slice:()=>v,stack:()=>M,std_mean:()=>S,topk:()=>h,zeros:()=>H,zeros_like:()=>W});var n=r("./src/utils/maths.js"),i=r("./src/backends/onnx.js"),o=r("./src/ops/registry.js");const a=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class s{constructor(...I){le(this,"ort_tensor");return(0,i.isONNXTensor)(I[0])?this.ort_tensor=I[0]:this.ort_tensor=new i.Tensor(I[0],I[1],I[2]),new Proxy(this,{get:(K,ae)=>{if(typeof ae=="string"){let pe=Number(ae);if(Number.isInteger(pe))return K._getitem(pe)}return K[ae]},set:(K,ae,pe)=>K[ae]=pe})}get dims(){return this.ort_tensor.dims}set dims(I){this.ort_tensor.dims=I}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[I,...K]=this.dims;if(K.length>0){const ae=K.reduce((pe,de)=>pe*de);for(let pe=0;pe<I;++pe)yield this._subarray(pe,ae,K)}else yield*this.data}_getitem(I){const[K,...ae]=this.dims;if(I=y(I,K),ae.length>0){const pe=ae.reduce((de,be)=>de*be);return this._subarray(I,pe,ae)}else return new s(this.type,[this.data[I]],ae)}indexOf(I){const K=this.data;for(let ae=0;ae<K.length;++ae)if(K[ae]==I)return ae;return-1}_subarray(I,K,ae){const pe=I*K,de=(I+1)*K,be="subarray"in this.data?this.data.subarray(pe,de):this.data.slice(pe,de);return new s(this.type,be,ae)}item(){const I=this.data;if(I.length!==1)throw new Error(`a Tensor with ${I.length} elements cannot be converted to Scalar`);return I[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const I=this.data;for(let K=0;K<I.length;++K)I[K]=1/(1+Math.exp(-I[K]));return this}map(I){return this.clone().map_(I)}map_(I){const K=this.data;for(let ae=0;ae<K.length;++ae)K[ae]=I(K[ae],ae,K);return this}mul(I){return this.clone().mul_(I)}mul_(I){const K=this.data;for(let ae=0;ae<K.length;++ae)K[ae]*=I;return this}div(I){return this.clone().div_(I)}div_(I){const K=this.data;for(let ae=0;ae<K.length;++ae)K[ae]/=I;return this}add(I){return this.clone().add_(I)}add_(I){const K=this.data;for(let ae=0;ae<K.length;++ae)K[ae]+=I;return this}sub(I){return this.clone().sub_(I)}sub_(I){const K=this.data;for(let ae=0;ae<K.length;++ae)K[ae]-=I;return this}clone(){return new s(this.type,this.data.slice(),this.dims.slice())}slice(...I){const K=[],ae=[];for(let ge=0;ge<this.dims.length;++ge){let re=I[ge];if(re==null)ae.push([0,this.dims[ge]]),K.push(this.dims[ge]);else if(typeof re=="number")re=y(re,this.dims[ge],ge),ae.push([re,re+1]);else if(Array.isArray(re)&&re.length===2){let[ne,Z]=re;if(ne=ne===null?0:y(ne,this.dims[ge],ge,!1),Z=Z===null?this.dims[ge]:y(Z,this.dims[ge],ge,!1),ne>Z)throw new Error(`Invalid slice: ${re}`);const ve=[Math.max(ne,0),Math.min(Z,this.dims[ge])];ae.push(ve),K.push(ve[1]-ve[0])}else throw new Error(`Invalid slice: ${re}`)}const pe=ae.map(([ge,re])=>re-ge),de=pe.reduce((ge,re)=>ge*re),be=this.data,Ne=new be.constructor(de),Te=this.stride();for(let ge=0;ge<de;++ge){let re=0;for(let ne=pe.length-1,Z=ge;ne>=0;--ne){const ve=pe[ne];re+=(Z%ve+ae[ne][0])*Te[ne],Z=Math.floor(Z/ve)}Ne[ge]=be[re]}return new s(this.type,Ne,K)}permute(...I){return u(this,I)}transpose(...I){return this.permute(...I)}sum(I=null,K=!1){return this.norm(1,I,K)}norm(I="fro",K=null,ae=!1){if(I==="fro")I=2;else if(typeof I=="string")throw Error(`Unsupported norm: ${I}`);const pe=this.data,de=(ge,re)=>ge+re**I;if(K===null){const ge=pe.reduce(de,0)**(1/I);return new s(this.type,[ge],[])}const[be,Ne,Te]=T(de,this,K,ae);if(I!==1)for(let ge=0;ge<Ne.length;++ge)Ne[ge]=Ne[ge]**(1/I);return new s(be,Ne,Te)}normalize_(I=2,K=1){K=y(K,this.dims.length);const ae=this.norm(I,K,!0),pe=this.data,de=ae.data;for(let be=0;be<pe.length;++be){let Ne=0;for(let Te=this.dims.length-1,ge=be,re=1;Te>=0;--Te){const ne=this.dims[Te];if(Te!==K){const Z=ge%ne;Ne+=Z*re,re*=this.dims[Te]}ge=Math.floor(ge/ne)}pe[be]/=de[Ne]}return this}normalize(I=2,K=1){return this.clone().normalize_(I,K)}stride(){return k(this.dims)}squeeze(I=null){return new s(this.type,this.data,b(this.dims,I))}squeeze_(I=null){return this.dims=b(this.dims,I),this}unsqueeze(I=null){return new s(this.type,this.data,w(this.dims,I))}unsqueeze_(I=null){return this.dims=w(this.dims,I),this}flatten_(I=0,K=-1){K=(K+this.dims.length)%this.dims.length;let ae=this.dims.slice(0,I),pe=this.dims.slice(I,K+1),de=this.dims.slice(K+1);return this.dims=[...ae,pe.reduce((be,Ne)=>be*Ne,1),...de],this}flatten(I=0,K=-1){return this.clone().flatten_(I,K)}view(...I){let K=-1;for(let pe=0;pe<I.length;++pe)if(I[pe]===-1){if(K!==-1)throw new Error("Only one dimension can be inferred");K=pe}const ae=this.data;if(K!==-1){const pe=I.reduce((de,be,Ne)=>Ne!==K?de*be:de,1);I[K]=ae.length/pe}return new s(this.type,ae,I)}neg_(){const I=this.data;for(let K=0;K<I.length;++K)I[K]=-I[K];return this}neg(){return this.clone().neg_()}gt(I){const K=new Uint8Array(this.data.length),ae=this.data;for(let pe=0;pe<ae.length;++pe)K[pe]=ae[pe]>I?1:0;return new s("bool",K,this.dims)}lt(I){const K=new Uint8Array(this.data.length),ae=this.data;for(let pe=0;pe<ae.length;++pe)K[pe]=ae[pe]<I?1:0;return new s("bool",K,this.dims)}clamp_(I,K){const ae=this.data;for(let pe=0;pe<ae.length;++pe)ae[pe]=Math.min(Math.max(ae[pe],I),K);return this}clamp(I,K){return this.clone().clamp_(I,K)}round_(){const I=this.data;for(let K=0;K<I.length;++K)I[K]=Math.round(I[K]);return this}round(){return this.clone().round_()}mean(I=null,K=!1){return $(this,I,K)}min(I=null,K=!1){if(I===null){const be=(0,n.min)(this.data)[0];return new s(this.type,[be],[])}const[ae,pe,de]=T((be,Ne)=>Math.min(be,Ne),this,I,K,1/0);return new s(ae,pe,de)}max(I=null,K=!1){if(I===null){const be=(0,n.max)(this.data)[0];return new s(this.type,[be],[])}const[ae,pe,de]=T((be,Ne)=>Math.max(be,Ne),this,I,K,-1/0);return new s(ae,pe,de)}argmin(I=null,K=!1){if(I!==null)throw new Error("`dim !== null` not yet implemented.");const ae=(0,n.min)(this.data)[1];return new s("int64",[BigInt(ae)],[])}argmax(I=null,K=!1){if(I!==null)throw new Error("`dim !== null` not yet implemented.");const ae=(0,n.max)(this.data)[1];return new s("int64",[BigInt(ae)],[])}to(I){if(this.type===I)return this;if(!a.hasOwnProperty(I))throw new Error(`Unsupported type: ${I}`);let K;const ae=["int64","uint64"].includes(this.type),pe=["int64","uint64"].includes(I);return ae&&!pe?K=Number:!ae&&pe&&(K=BigInt),new s(I,a[I].from(this.data,K),this.dims)}}function l(V,I){const K=V.length,ae=I.reduce((de,be)=>de*be);if(K!==ae)throw Error(`cannot reshape array of size ${K} into shape (${I})`);let pe=V;for(let de=I.length-1;de>=0;de--)pe=pe.reduce((be,Ne)=>{let Te=be[be.length-1];return Te.length<I[de]?Te.push(Ne):be.push([Ne]),be},[[]]);return pe[0]}function u(V,I){const[K,ae]=(0,n.permute_data)(V.data,V.dims,I);return new s(V.type,K,ae)}function d(V,[I,K],ae="bilinear",pe=!1){const de=V.dims.at(-3)??1,be=V.dims.at(-2),Ne=V.dims.at(-1);let Te=(0,n.interpolate_data)(V.data,[de,be,Ne],[I,K],ae,pe);return new s(V.type,Te,[de,I,K])}async function c(V,{size:I=null,mode:K="bilinear"}={}){if(V.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!I)throw new Error("`interpolate_4d` requires a `size` argument.");let ae;if(I.length===2)ae=[...V.dims.slice(0,2),...I];else if(I.length===3)ae=[V.dims[0],...I];else if(I.length===4)ae=I;else throw new Error("`size` must be of length 2, 3, or 4.");let pe;if(K==="nearest")pe=await o.TensorOpRegistry.nearest_interpolate_4d;else if(K==="bilinear")pe=await o.TensorOpRegistry.bilinear_interpolate_4d;else if(K==="bicubic")pe=await o.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${K}`);const de=new s("int64",new BigInt64Array(ae.map(BigInt)),[ae.length]);return await pe({x:V,s:de})}async function f(V,I){return await(await o.TensorOpRegistry.matmul)({a:V,b:I})}async function p(V,I){return await(await o.TensorOpRegistry.rfft)({x:V,a:I})}async function h(V,I){const K=await o.TensorOpRegistry.top_k;return I==null?I=V.dims.at(-1):I=Math.min(I,V.dims.at(-1)),await K({x:V,k:new s("int64",[BigInt(I)],[1])})}const m=V=>new s("int64",V,[V.length]);async function v(V,I,K,ae,pe){return await(await o.TensorOpRegistry.slice)({x:V,s:m(I),e:m(K),a:m(ae),t:m(pe??new Array(ae.length).fill(1))})}function g(V,I){const K=V.data,ae=I.data,pe=[V.dims[0],V.dims[2]],de=new K.constructor(pe[0]*pe[1]),[be,Ne,Te]=V.dims;let ge=0;for(let re=0;re<be;++re){const ne=re*Te*Ne;for(let Z=0;Z<Te;++Z){let ve=0,Ae=0;const Ee=re*Ne,we=ne+Z;for(let Me=0;Me<Ne;++Me){const je=Number(ae[Ee+Me]);Ae+=je,ve+=K[we+Me*Te]*je}const $e=ve/Ae;de[ge++]=$e}}return new s(V.type,de,pe)}function _(V,I,{eps:K=1e-5}={}){if(V.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[ae,pe]=V.dims;if(I.length!==1&&I[0]!==pe)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[de,be]=S(V,1,0,!0),Ne=de.data,Te=be.data,ge=V.data,re=new ge.constructor(ge.length);for(let ne=0;ne<ae;++ne){const Z=ne*pe;for(let ve=0;ve<pe;++ve){const Ae=Z+ve;re[Ae]=(ge[Ae]-Te[ne])/(Ne[ne]+K)}}return new s(V.type,re,V.dims)}function b(V,I){return V=V.slice(),I===null?V=V.filter(K=>K!==1):typeof I=="number"?V[I]===1&&V.splice(I,1):Array.isArray(I)&&(V=V.filter((K,ae)=>K!==1||!I.includes(ae))),V}function w(V,I){return I=y(I,V.length+1),V=V.slice(),V.splice(I,0,1),V}function y(V,I,K=null,ae=!0){if(V<-I||V>=I){if(ae)throw new Error(`IndexError: index ${V} is out of bounds for dimension${K===null?"":" "+K} with size ${I}`);return V<-I?0:I}return V<0&&(V=(V%I+I)%I),V}function x(V,I=0){I=y(I,V[0].dims.length);const K=V[0].dims.slice();K[I]=V.reduce((be,Ne)=>be+Ne.dims[I],0);const ae=K.reduce((be,Ne)=>be*Ne,1),pe=new V[0].data.constructor(ae),de=V[0].type;if(I===0){let be=0;for(const Ne of V){const Te=Ne.data;pe.set(Te,be),be+=Te.length}}else{let be=0;for(let Ne=0;Ne<V.length;++Ne){const{data:Te,dims:ge}=V[Ne];for(let re=0;re<Te.length;++re){let ne=0;for(let Z=ge.length-1,ve=re,Ae=1;Z>=0;--Z){const Ee=ge[Z];let we=ve%Ee;Z===I&&(we+=be),ne+=we*Ae,Ae*=K[Z],ve=Math.floor(ve/Ee)}pe[ne]=Te[re]}be+=ge[I]}}return new s(de,pe,K)}function M(V,I=0){return x(V.map(K=>K.unsqueeze(I)),I)}function T(V,I,K=null,ae=!1,pe=null){const de=I.data,be=I.dims;K=y(K,be.length);const Ne=be.slice();Ne[K]=1;const Te=new de.constructor(de.length/be[K]);pe!==null&&Te.fill(pe);for(let ge=0;ge<de.length;++ge){let re=0;for(let ne=be.length-1,Z=ge,ve=1;ne>=0;--ne){const Ae=be[ne];if(ne!==K){const Ee=Z%Ae;re+=Ee*ve,ve*=Ne[ne]}Z=Math.floor(Z/Ae)}Te[re]=V(Te[re],de[ge],ge,re)}return ae||Ne.splice(K,1),[I.type,Te,Ne]}function S(V,I=null,K=1,ae=!1){const pe=V.data,de=V.dims;if(I===null){const ve=pe.reduce(($e,Me)=>$e+Me,0)/pe.length,Ae=Math.sqrt(pe.reduce(($e,Me)=>$e+(Me-ve)**2,0)/(pe.length-K)),Ee=new s(V.type,[ve],[]);return[new s(V.type,[Ae],[]),Ee]}I=y(I,de.length);const be=$(V,I,ae),Ne=be.data,[Te,ge,re]=T((Z,ve,Ae,Ee)=>Z+(ve-Ne[Ee])**2,V,I,ae);for(let Z=0;Z<ge.length;++Z)ge[Z]=Math.sqrt(ge[Z]/(de[I]-K));return[new s(Te,ge,re),be]}function $(V,I=null,K=!1){const ae=V.dims,pe=V.data;if(I===null){const Te=pe.reduce((ge,re)=>ge+re,0);return new s(V.type,[Te/pe.length],[])}I=y(I,ae.length);const[de,be,Ne]=T((Te,ge)=>Te+ge,V,I,K);if(ae[I]!==1)for(let Te=0;Te<be.length;++Te)be[Te]/=ae[I];return new s(de,be,Ne)}function k(V){const I=new Array(V.length);for(let K=V.length-1,ae=1;K>=0;--K)I[K]=ae,ae*=V[K];return I}function F(V,I,K,ae){const pe=V.reduce((de,be)=>de*be,1);return new s(K,new ae(pe).fill(I),V)}function j(V,I){let K,ae;if(typeof I=="number")K="float32",ae=Float32Array;else if(typeof I=="bigint")K="int64",ae=BigInt64Array;else if(typeof I=="boolean")K="bool",ae=Uint8Array;else throw new Error(`Unsupported data type: ${typeof I}`);return F(V,I,K,ae)}function U(V,I){return j(V.dims,I)}function z(V){return F(V,1n,"int64",BigInt64Array)}function G(V){return z(V.dims)}function H(V){return F(V,0n,"int64",BigInt64Array)}function W(V){return H(V.dims)}function Y(V){const I=V.reduce((K,ae)=>K*ae,1);return new s("float32",Float32Array.from({length:I},()=>Math.random()),V)}function te(V,I){if(V.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(V.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(I))throw new Error("The precision must be either 'binary' or 'ubinary'");const K=I==="binary",ae=K?"int8":"uint8",pe=K?Int8Array:Uint8Array,de=V.data,be=new pe(de.length/8);for(let Ne=0;Ne<de.length;++Ne){const Te=de[Ne]>0?1:0,ge=Math.floor(Ne/8),re=Ne%8;be[ge]|=Te<<7-re,K&&re===0&&(be[ge]-=128)}return new s(ae,be,[V.dims[0],V.dims[1]/8])}},"./src/utils/video.js":(e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>a,RawVideoFrame:()=>o,load_video:()=>s});var n=r("./src/utils/image.js"),i=r("./src/env.js");class o{constructor(u,d){this.image=u,this.timestamp=d}}class a{constructor(u,d){u.length>0&&u[0]instanceof n.RawImage&&(u=u.map((c,f)=>new o(c,(f+1)/(u.length+1)*d))),this.frames=u,this.duration=d}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function s(l,{num_frames:u=null,fps:d=null}={}){if(!i.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(u==null&&d==null)throw new Error("Either num_frames or fps must be provided.");const c=[],f=document.createElement("video");if(f.crossOrigin="anonymous",f.muted=!0,typeof l=="string")f.src=l;else if(l instanceof Blob)f.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)f.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(b=>f.onloadedmetadata=b),f.seekable.start(0)===f.seekable.end(0)){const w=await(await fetch(f.src)).blob();f.src=URL.createObjectURL(w),await new Promise(y=>f.onloadedmetadata=y)}const p=f.duration;let h,m;u!=null?(h=u,m=u===1?0:p/(u-1)):(m=1/d,h=Math.floor(p/m));let v=[];for(let b=0;b<h;++b)v.push(u===1?p/2:b*m);const g=document.createElement("canvas");g.width=f.videoWidth,g.height=f.videoHeight;const _=g.getContext("2d",{willReadFrequently:!0});for(const b of v){f.currentTime=b,await new Promise(M=>{f.onseeked=M}),_.drawImage(f,0,0,g.width,g.height);const w=_.getImageData(0,0,g.width,g.height),y=new n.RawImage(w.data,g.width,g.height,4),x=new o(y,b);c.push(x)}return f.remove(),new a(c,p)}}},CN={};function ur(e){var t=CN[e];if(t!==void 0)return t.exports;var r=CN[e]={exports:{}};return $ie[e](r,r.exports,ur),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;ur.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var i=Object.create(null);ur.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=n&2&&r;typeof a=="object"&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach(s=>o[s]=()=>r[s]);return o.default=()=>r,ur.d(i,o),i}})();ur.d=(e,t)=>{for(var r in t)ur.o(t,r)&&!ur.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};ur.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);ur.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var E={};(()=>{/*!*****************************!*\
  !*** ./src/transformers.js ***!
  \*****************************/ur.r(E),ur.d(E,{ASTFeatureExtractor:()=>c.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>i.AutoConfig,AutoFeatureExtractor:()=>f.AutoFeatureExtractor,AutoImageProcessor:()=>m.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>_.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>b.BaseStreamer,BeitFeatureExtractor:()=>h.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>h.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>h.CLIPFeatureExtractor,CLIPImageProcessor:()=>h.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>h.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>c.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>y.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>h.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>h.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DPTFeatureExtractor:()=>h.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>h.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>c.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>h.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>h.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>h.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>h.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>h.DonutFeatureExtractor,DonutImageProcessor:()=>h.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>h.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>c.EncodecFeatureExtractor,EosTokenCriteria:()=>w.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>n.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>u.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>d.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>g.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>y.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>y.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>h.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>c.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>g.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>h.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>g.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>h.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>g.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>c.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>p.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>w.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>h.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>g.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>h.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>g.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>y.LogitsProcessor,LogitsProcessorList:()=>y.LogitsProcessorList,LogitsWarper:()=>y.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>h.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>h.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>h.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>w.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>g.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>y.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>y.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>h.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>h.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>h.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>h.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>h.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>h.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>h.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>h.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>h.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>h.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>c.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>g.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>y.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>y.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>h.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>h.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>h.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>g.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>h.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>g.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>h.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>g.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>i.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>v.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>h.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>c.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>g.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>h.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>g.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>h.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>o.RawAudio,RawImage:()=>a.RawImage,RawVideo:()=>s.RawVideo,RawVideoFrame:()=>s.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>y.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,SamImageProcessor:()=>h.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>g.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>c.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>h.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>h.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>h.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>h.SmolVLMImageProcessor,SmolVLMProcessor:()=>g.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>c.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>c.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>g.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>w.StoppingCriteria,StoppingCriteriaList:()=>w.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>y.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>h.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>y.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>b.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>y.TopKLogitsWarper,TopPLogitsWarper:()=>y.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>g.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>g.VLChatProcessor,VLMImageProcessor:()=>h.VLMImageProcessor,ViTFeatureExtractor:()=>h.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>h.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>h.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>h.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>g.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>c.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>g.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>g.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>c.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>c.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>g.WhisperProcessor,WhisperTextStreamer:()=>b.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>y.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>h.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>h.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>u.bankers_round,cat:()=>l.cat,cos_sim:()=>u.cos_sim,dot:()=>u.dot,dynamic_time_warping:()=>u.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>i.getCacheShapes,hamming:()=>o.hamming,hanning:()=>o.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>u.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>a.load_image,load_video:()=>s.load_video,log_softmax:()=>u.log_softmax,magnitude:()=>u.magnitude,matmul:()=>l.matmul,max:()=>u.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>u.medianFilter,mel_filter_bank:()=>o.mel_filter_bank,min:()=>u.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>u.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>o.read_audio,rfft:()=>l.rfft,round:()=>u.round,slice:()=>l.slice,softmax:()=>u.softmax,spectrogram:()=>o.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>o.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=ur("./src/env.js"),t=ur("./src/pipelines.js"),r=ur("./src/models.js"),n=ur("./src/tokenizers.js"),i=ur("./src/configs.js"),o=ur("./src/utils/audio.js"),a=ur("./src/utils/image.js"),s=ur("./src/utils/video.js"),l=ur("./src/utils/tensor.js"),u=ur("./src/utils/maths.js"),d=ur("./src/base/feature_extraction_utils.js"),c=ur("./src/models/feature_extractors.js"),f=ur("./src/models/auto/feature_extraction_auto.js"),p=ur("./src/base/image_processors_utils.js"),h=ur("./src/models/image_processors.js"),m=ur("./src/models/auto/image_processing_auto.js"),v=ur("./src/base/processing_utils.js"),g=ur("./src/models/processors.js"),_=ur("./src/models/auto/processing_auto.js"),b=ur("./src/generation/streamers.js"),w=ur("./src/generation/stopping_criteria.js"),y=ur("./src/generation/logits_process.js")})();E.ASTFeatureExtractor;E.ASTForAudioClassification;E.ASTModel;E.ASTPreTrainedModel;E.AlbertForMaskedLM;E.AlbertForQuestionAnswering;E.AlbertForSequenceClassification;E.AlbertModel;E.AlbertPreTrainedModel;E.AlbertTokenizer;E.AudioClassificationPipeline;E.AutoConfig;E.AutoFeatureExtractor;E.AutoImageProcessor;E.AutoModel;E.AutoModelForAudioClassification;E.AutoModelForAudioFrameClassification;E.AutoModelForAudioTextToText;E.AutoModelForCTC;E.AutoModelForCausalLM;E.AutoModelForDepthEstimation;E.AutoModelForDocumentQuestionAnswering;E.AutoModelForImageClassification;E.AutoModelForImageFeatureExtraction;E.AutoModelForImageMatting;E.AutoModelForImageSegmentation;E.AutoModelForImageTextToText;E.AutoModelForImageToImage;E.AutoModelForMaskGeneration;E.AutoModelForMaskedLM;E.AutoModelForNormalEstimation;E.AutoModelForObjectDetection;E.AutoModelForPoseEstimation;E.AutoModelForQuestionAnswering;E.AutoModelForSemanticSegmentation;E.AutoModelForSeq2SeqLM;E.AutoModelForSequenceClassification;E.AutoModelForSpeechSeq2Seq;E.AutoModelForTextToSpectrogram;E.AutoModelForTextToWaveform;E.AutoModelForTokenClassification;E.AutoModelForUniversalSegmentation;E.AutoModelForVision2Seq;E.AutoModelForXVector;E.AutoModelForZeroShotObjectDetection;E.AutoProcessor;E.AutoTokenizer;E.AutomaticSpeechRecognitionPipeline;E.BackgroundRemovalPipeline;E.BartForConditionalGeneration;E.BartForSequenceClassification;E.BartModel;E.BartPretrainedModel;E.BartTokenizer;E.BaseModelOutput;E.BaseStreamer;E.BeitFeatureExtractor;E.BeitForImageClassification;E.BeitModel;E.BeitPreTrainedModel;E.BertForMaskedLM;E.BertForQuestionAnswering;E.BertForSequenceClassification;E.BertForTokenClassification;E.BertModel;E.BertPreTrainedModel;E.BertTokenizer;E.BitImageProcessor;E.BlenderbotForConditionalGeneration;E.BlenderbotModel;E.BlenderbotPreTrainedModel;E.BlenderbotSmallForConditionalGeneration;E.BlenderbotSmallModel;E.BlenderbotSmallPreTrainedModel;E.BlenderbotSmallTokenizer;E.BlenderbotTokenizer;E.BloomForCausalLM;E.BloomModel;E.BloomPreTrainedModel;E.BloomTokenizer;E.CLIPFeatureExtractor;E.CLIPImageProcessor;E.CLIPModel;E.CLIPPreTrainedModel;E.CLIPSegForImageSegmentation;E.CLIPSegModel;E.CLIPSegPreTrainedModel;E.CLIPTextModel;E.CLIPTextModelWithProjection;E.CLIPTokenizer;E.CLIPVisionModel;E.CLIPVisionModelWithProjection;E.CamembertForMaskedLM;E.CamembertForQuestionAnswering;E.CamembertForSequenceClassification;E.CamembertForTokenClassification;E.CamembertModel;E.CamembertPreTrainedModel;E.CamembertTokenizer;E.CausalLMOutput;E.CausalLMOutputWithPast;E.ChineseCLIPFeatureExtractor;E.ChineseCLIPModel;E.ChineseCLIPPreTrainedModel;E.ClapAudioModelWithProjection;E.ClapFeatureExtractor;E.ClapModel;E.ClapPreTrainedModel;E.ClapTextModelWithProjection;E.ClassifierFreeGuidanceLogitsProcessor;E.CodeGenForCausalLM;E.CodeGenModel;E.CodeGenPreTrainedModel;E.CodeGenTokenizer;E.CodeLlamaTokenizer;E.CohereForCausalLM;E.CohereModel;E.CoherePreTrainedModel;E.CohereTokenizer;E.ConvBertForMaskedLM;E.ConvBertForQuestionAnswering;E.ConvBertForSequenceClassification;E.ConvBertForTokenClassification;E.ConvBertModel;E.ConvBertPreTrainedModel;E.ConvBertTokenizer;E.ConvNextFeatureExtractor;E.ConvNextForImageClassification;E.ConvNextImageProcessor;E.ConvNextModel;E.ConvNextPreTrainedModel;E.ConvNextV2ForImageClassification;E.ConvNextV2Model;E.ConvNextV2PreTrainedModel;E.DFineForObjectDetection;E.DFineModel;E.DFinePreTrainedModel;E.DPTFeatureExtractor;E.DPTForDepthEstimation;E.DPTImageProcessor;E.DPTModel;E.DPTPreTrainedModel;E.DacDecoderModel;E.DacDecoderOutput;E.DacEncoderModel;E.DacEncoderOutput;E.DacFeatureExtractor;E.DacModel;E.DacPreTrainedModel;E.DataTypeMap;E.DebertaForMaskedLM;E.DebertaForQuestionAnswering;E.DebertaForSequenceClassification;E.DebertaForTokenClassification;E.DebertaModel;E.DebertaPreTrainedModel;E.DebertaTokenizer;E.DebertaV2ForMaskedLM;E.DebertaV2ForQuestionAnswering;E.DebertaV2ForSequenceClassification;E.DebertaV2ForTokenClassification;E.DebertaV2Model;E.DebertaV2PreTrainedModel;E.DebertaV2Tokenizer;E.DecisionTransformerModel;E.DecisionTransformerPreTrainedModel;E.DeiTFeatureExtractor;E.DeiTForImageClassification;E.DeiTImageProcessor;E.DeiTModel;E.DeiTPreTrainedModel;E.DepthAnythingForDepthEstimation;E.DepthAnythingPreTrainedModel;E.DepthEstimationPipeline;E.DepthProForDepthEstimation;E.DepthProPreTrainedModel;E.DetrFeatureExtractor;E.DetrForObjectDetection;E.DetrForSegmentation;E.DetrImageProcessor;E.DetrModel;E.DetrObjectDetectionOutput;E.DetrPreTrainedModel;E.DetrSegmentationOutput;E.Dinov2ForImageClassification;E.Dinov2Model;E.Dinov2PreTrainedModel;E.Dinov2WithRegistersForImageClassification;E.Dinov2WithRegistersModel;E.Dinov2WithRegistersPreTrainedModel;E.DistilBertForMaskedLM;E.DistilBertForQuestionAnswering;E.DistilBertForSequenceClassification;E.DistilBertForTokenClassification;E.DistilBertModel;E.DistilBertPreTrainedModel;E.DistilBertTokenizer;E.DocumentQuestionAnsweringPipeline;E.DonutFeatureExtractor;E.DonutImageProcessor;E.DonutSwinModel;E.DonutSwinPreTrainedModel;E.EfficientNetForImageClassification;E.EfficientNetImageProcessor;E.EfficientNetModel;E.EfficientNetPreTrainedModel;E.ElectraForMaskedLM;E.ElectraForQuestionAnswering;E.ElectraForSequenceClassification;E.ElectraForTokenClassification;E.ElectraModel;E.ElectraPreTrainedModel;E.ElectraTokenizer;E.EncodecFeatureExtractor;E.EosTokenCriteria;E.Ernie4_5_ForCausalLM;E.Ernie4_5_Model;E.Ernie4_5_PretrainedModel;E.Ernie4_5_Tokenizer;E.EsmForMaskedLM;E.EsmForSequenceClassification;E.EsmForTokenClassification;E.EsmModel;E.EsmPreTrainedModel;E.EsmTokenizer;E.ExaoneForCausalLM;E.ExaoneModel;E.ExaonePreTrainedModel;E.FFT;E.FalconForCausalLM;E.FalconModel;E.FalconPreTrainedModel;E.FalconTokenizer;E.FastViTForImageClassification;E.FastViTModel;E.FastViTPreTrainedModel;E.FeatureExtractionPipeline;E.FeatureExtractor;E.FillMaskPipeline;E.Florence2ForConditionalGeneration;E.Florence2PreTrainedModel;E.Florence2Processor;E.ForcedBOSTokenLogitsProcessor;E.ForcedEOSTokenLogitsProcessor;E.GLPNFeatureExtractor;E.GLPNForDepthEstimation;E.GLPNModel;E.GLPNPreTrainedModel;E.GPT2LMHeadModel;E.GPT2Model;E.GPT2PreTrainedModel;E.GPT2Tokenizer;E.GPTBigCodeForCausalLM;E.GPTBigCodeModel;E.GPTBigCodePreTrainedModel;E.GPTJForCausalLM;E.GPTJModel;E.GPTJPreTrainedModel;E.GPTNeoForCausalLM;E.GPTNeoModel;E.GPTNeoPreTrainedModel;E.GPTNeoXForCausalLM;E.GPTNeoXModel;E.GPTNeoXPreTrainedModel;E.GPTNeoXTokenizer;E.Gemma2ForCausalLM;E.Gemma2Model;E.Gemma2PreTrainedModel;E.Gemma3ForCausalLM;E.Gemma3Model;E.Gemma3PreTrainedModel;E.Gemma3nAudioFeatureExtractor;E.Gemma3nForConditionalGeneration;E.Gemma3nPreTrainedModel;E.Gemma3nProcessor;E.GemmaForCausalLM;E.GemmaModel;E.GemmaPreTrainedModel;E.GemmaTokenizer;E.GlmForCausalLM;E.GlmModel;E.GlmPreTrainedModel;E.GraniteForCausalLM;E.GraniteModel;E.GranitePreTrainedModel;E.Grok1Tokenizer;E.GroundingDinoForObjectDetection;E.GroundingDinoImageProcessor;E.GroundingDinoPreTrainedModel;E.GroundingDinoProcessor;E.GroupViTModel;E.GroupViTPreTrainedModel;E.HeliumForCausalLM;E.HeliumModel;E.HeliumPreTrainedModel;E.HerbertTokenizer;E.HieraForImageClassification;E.HieraModel;E.HieraPreTrainedModel;E.HubertForCTC;E.HubertForSequenceClassification;E.HubertModel;E.HubertPreTrainedModel;E.IJepaForImageClassification;E.IJepaModel;E.IJepaPreTrainedModel;E.Idefics3ForConditionalGeneration;E.Idefics3ImageProcessor;E.Idefics3PreTrainedModel;E.Idefics3Processor;E.ImageClassificationPipeline;E.ImageFeatureExtractionPipeline;E.ImageFeatureExtractor;E.ImageMattingOutput;E.ImageProcessor;E.ImageSegmentationPipeline;E.ImageToImagePipeline;E.ImageToTextPipeline;E.InterruptableStoppingCriteria;E.JAISLMHeadModel;E.JAISModel;E.JAISPreTrainedModel;E.JinaCLIPImageProcessor;E.JinaCLIPModel;E.JinaCLIPPreTrainedModel;E.JinaCLIPProcessor;E.JinaCLIPTextModel;E.JinaCLIPVisionModel;E.Lfm2ForCausalLM;E.Lfm2Model;E.Lfm2PreTrainedModel;E.LiteWhisperForConditionalGeneration;E.LlamaForCausalLM;E.LlamaModel;E.LlamaPreTrainedModel;E.LlamaTokenizer;E.LlavaForConditionalGeneration;E.LlavaOnevisionForConditionalGeneration;E.LlavaOnevisionImageProcessor;E.LlavaPreTrainedModel;E.LlavaProcessor;E.LlavaQwen2ForCausalLM;E.LogitsProcessor;E.LogitsProcessorList;E.LogitsWarper;E.LongT5ForConditionalGeneration;E.LongT5Model;E.LongT5PreTrainedModel;E.M2M100ForConditionalGeneration;E.M2M100Model;E.M2M100PreTrainedModel;E.M2M100Tokenizer;E.MBart50Tokenizer;E.MBartForCausalLM;E.MBartForConditionalGeneration;E.MBartForSequenceClassification;E.MBartModel;E.MBartPreTrainedModel;E.MBartTokenizer;E.MPNetForMaskedLM;E.MPNetForQuestionAnswering;E.MPNetForSequenceClassification;E.MPNetForTokenClassification;E.MPNetModel;E.MPNetPreTrainedModel;E.MPNetTokenizer;E.MT5ForConditionalGeneration;E.MT5Model;E.MT5PreTrainedModel;E.MarianMTModel;E.MarianModel;E.MarianPreTrainedModel;E.MarianTokenizer;E.Mask2FormerImageProcessor;E.MaskFormerFeatureExtractor;E.MaskFormerForInstanceSegmentation;E.MaskFormerImageProcessor;E.MaskFormerModel;E.MaskFormerPreTrainedModel;E.MaskedLMOutput;E.MaxLengthCriteria;E.Metric3DForDepthEstimation;E.Metric3DPreTrainedModel;E.Metric3Dv2ForDepthEstimation;E.Metric3Dv2PreTrainedModel;E.MgpstrForSceneTextRecognition;E.MgpstrModelOutput;E.MgpstrPreTrainedModel;E.MgpstrProcessor;E.MgpstrTokenizer;E.MimiDecoderModel;E.MimiDecoderOutput;E.MimiEncoderModel;E.MimiEncoderOutput;E.MimiModel;E.MimiPreTrainedModel;E.MinLengthLogitsProcessor;E.MinNewTokensLengthLogitsProcessor;E.MistralForCausalLM;E.MistralModel;E.MistralPreTrainedModel;E.MobileBertForMaskedLM;E.MobileBertForQuestionAnswering;E.MobileBertForSequenceClassification;E.MobileBertModel;E.MobileBertPreTrainedModel;E.MobileBertTokenizer;E.MobileLLMForCausalLM;E.MobileLLMModel;E.MobileLLMPreTrainedModel;E.MobileNetV1FeatureExtractor;E.MobileNetV1ForImageClassification;E.MobileNetV1ForSemanticSegmentation;E.MobileNetV1ImageProcessor;E.MobileNetV1Model;E.MobileNetV1PreTrainedModel;E.MobileNetV2FeatureExtractor;E.MobileNetV2ForImageClassification;E.MobileNetV2ForSemanticSegmentation;E.MobileNetV2ImageProcessor;E.MobileNetV2Model;E.MobileNetV2PreTrainedModel;E.MobileNetV3FeatureExtractor;E.MobileNetV3ForImageClassification;E.MobileNetV3ForSemanticSegmentation;E.MobileNetV3ImageProcessor;E.MobileNetV3Model;E.MobileNetV3PreTrainedModel;E.MobileNetV4FeatureExtractor;E.MobileNetV4ForImageClassification;E.MobileNetV4ForSemanticSegmentation;E.MobileNetV4ImageProcessor;E.MobileNetV4Model;E.MobileNetV4PreTrainedModel;E.MobileViTFeatureExtractor;E.MobileViTForImageClassification;E.MobileViTImageProcessor;E.MobileViTModel;E.MobileViTPreTrainedModel;E.MobileViTV2ForImageClassification;E.MobileViTV2Model;E.MobileViTV2PreTrainedModel;E.ModelOutput;E.ModernBertDecoderForCausalLM;E.ModernBertDecoderModel;E.ModernBertDecoderPreTrainedModel;E.ModernBertForMaskedLM;E.ModernBertForSequenceClassification;E.ModernBertForTokenClassification;E.ModernBertModel;E.ModernBertPreTrainedModel;E.Moondream1ForConditionalGeneration;E.MoonshineFeatureExtractor;E.MoonshineForConditionalGeneration;E.MoonshineModel;E.MoonshinePreTrainedModel;E.MoonshineProcessor;E.MptForCausalLM;E.MptModel;E.MptPreTrainedModel;E.MultiModalityCausalLM;E.MultiModalityPreTrainedModel;E.MusicgenForCausalLM;E.MusicgenForConditionalGeneration;E.MusicgenModel;E.MusicgenPreTrainedModel;E.NeoBertForMaskedLM;E.NeoBertForQuestionAnswering;E.NeoBertForSequenceClassification;E.NeoBertForTokenClassification;E.NeoBertModel;E.NeoBertPreTrainedModel;E.NllbTokenizer;E.NoBadWordsLogitsProcessor;E.NoRepeatNGramLogitsProcessor;E.NomicBertModel;E.NomicBertPreTrainedModel;E.NougatImageProcessor;E.NougatTokenizer;E.OPTForCausalLM;E.OPTModel;E.OPTPreTrainedModel;E.ObjectDetectionPipeline;E.Olmo2ForCausalLM;E.Olmo2Model;E.Olmo2PreTrainedModel;E.OlmoForCausalLM;E.OlmoModel;E.OlmoPreTrainedModel;E.OpenELMForCausalLM;E.OpenELMModel;E.OpenELMPreTrainedModel;E.OwlViTFeatureExtractor;E.OwlViTForObjectDetection;E.OwlViTImageProcessor;E.OwlViTModel;E.OwlViTPreTrainedModel;E.OwlViTProcessor;E.Owlv2ForObjectDetection;E.Owlv2ImageProcessor;E.Owlv2Model;E.Owlv2PreTrainedModel;E.PaliGemmaForConditionalGeneration;E.PaliGemmaPreTrainedModel;E.PaliGemmaProcessor;E.PatchTSMixerForPrediction;E.PatchTSMixerModel;E.PatchTSMixerPreTrainedModel;E.PatchTSTForPrediction;E.PatchTSTModel;E.PatchTSTPreTrainedModel;E.Phi3ForCausalLM;E.Phi3Model;E.Phi3PreTrainedModel;E.Phi3VForCausalLM;E.Phi3VImageProcessor;E.Phi3VPreTrainedModel;E.Phi3VProcessor;E.PhiForCausalLM;E.PhiModel;E.PhiPreTrainedModel;E.Pipeline;E.PreTrainedModel;E.PreTrainedTokenizer;E.PretrainedConfig;E.PretrainedMixin;E.Processor;E.PvtForImageClassification;E.PvtImageProcessor;E.PvtModel;E.PvtPreTrainedModel;E.PyAnnoteFeatureExtractor;E.PyAnnoteForAudioFrameClassification;E.PyAnnoteModel;E.PyAnnotePreTrainedModel;E.PyAnnoteProcessor;E.QuestionAnsweringModelOutput;E.QuestionAnsweringPipeline;E.Qwen2ForCausalLM;E.Qwen2Model;E.Qwen2PreTrainedModel;E.Qwen2Tokenizer;E.Qwen2VLForConditionalGeneration;E.Qwen2VLImageProcessor;E.Qwen2VLPreTrainedModel;E.Qwen2VLProcessor;E.Qwen3ForCausalLM;E.Qwen3Model;E.Qwen3PreTrainedModel;E.RFDetrForObjectDetection;E.RFDetrModel;E.RFDetrObjectDetectionOutput;E.RFDetrPreTrainedModel;E.RTDetrForObjectDetection;E.RTDetrImageProcessor;E.RTDetrModel;E.RTDetrObjectDetectionOutput;E.RTDetrPreTrainedModel;E.RTDetrV2ForObjectDetection;E.RTDetrV2Model;E.RTDetrV2ObjectDetectionOutput;E.RTDetrV2PreTrainedModel;E.RawAudio;E.RawImage;E.RawVideo;E.RawVideoFrame;E.RepetitionPenaltyLogitsProcessor;E.ResNetForImageClassification;E.ResNetModel;E.ResNetPreTrainedModel;E.RoFormerForMaskedLM;E.RoFormerForQuestionAnswering;E.RoFormerForSequenceClassification;E.RoFormerForTokenClassification;E.RoFormerModel;E.RoFormerPreTrainedModel;E.RoFormerTokenizer;E.RobertaForMaskedLM;E.RobertaForQuestionAnswering;E.RobertaForSequenceClassification;E.RobertaForTokenClassification;E.RobertaModel;E.RobertaPreTrainedModel;E.RobertaTokenizer;E.SamImageProcessor;E.SamImageSegmentationOutput;E.SamModel;E.SamPreTrainedModel;E.SamProcessor;E.SapiensForDepthEstimation;E.SapiensForNormalEstimation;E.SapiensForSemanticSegmentation;E.SapiensPreTrainedModel;E.SeamlessM4TFeatureExtractor;E.SegformerFeatureExtractor;E.SegformerForImageClassification;E.SegformerForSemanticSegmentation;E.SegformerImageProcessor;E.SegformerModel;E.SegformerPreTrainedModel;E.Seq2SeqLMOutput;E.SequenceClassifierOutput;E.SiglipImageProcessor;E.SiglipModel;E.SiglipPreTrainedModel;E.SiglipTextModel;E.SiglipTokenizer;E.SiglipVisionModel;E.SmolLM3ForCausalLM;E.SmolLM3Model;E.SmolLM3PreTrainedModel;E.SmolVLMForConditionalGeneration;E.SmolVLMImageProcessor;E.SmolVLMProcessor;E.SnacDecoderModel;E.SnacEncoderModel;E.SnacFeatureExtractor;E.SnacModel;E.SnacPreTrainedModel;E.SpeechT5FeatureExtractor;E.SpeechT5ForSpeechToText;E.SpeechT5ForTextToSpeech;E.SpeechT5HifiGan;E.SpeechT5Model;E.SpeechT5PreTrainedModel;E.SpeechT5Processor;E.SpeechT5Tokenizer;E.SqueezeBertForMaskedLM;E.SqueezeBertForQuestionAnswering;E.SqueezeBertForSequenceClassification;E.SqueezeBertModel;E.SqueezeBertPreTrainedModel;E.SqueezeBertTokenizer;E.StableLmForCausalLM;E.StableLmModel;E.StableLmPreTrainedModel;E.Starcoder2ForCausalLM;E.Starcoder2Model;E.Starcoder2PreTrainedModel;E.StoppingCriteria;E.StoppingCriteriaList;E.StyleTextToSpeech2Model;E.StyleTextToSpeech2PreTrainedModel;E.SummarizationPipeline;E.SuppressTokensAtBeginLogitsProcessor;E.Swin2SRForImageSuperResolution;E.Swin2SRImageProcessor;E.Swin2SRModel;E.Swin2SRPreTrainedModel;E.SwinForImageClassification;E.SwinForSemanticSegmentation;E.SwinModel;E.SwinPreTrainedModel;E.T5ForConditionalGeneration;E.T5Model;E.T5PreTrainedModel;E.T5Tokenizer;E.TableTransformerForObjectDetection;E.TableTransformerModel;E.TableTransformerObjectDetectionOutput;E.TableTransformerPreTrainedModel;E.TemperatureLogitsWarper;E.Tensor;E.Text2TextGenerationPipeline;E.TextClassificationPipeline;E.TextGenerationPipeline;E.TextStreamer;E.TextToAudioPipeline;E.TokenClassificationPipeline;E.TokenClassifierOutput;E.TokenizerModel;E.TopKLogitsWarper;E.TopPLogitsWarper;E.TrOCRForCausalLM;E.TrOCRPreTrainedModel;E.TranslationPipeline;E.UltravoxModel;E.UltravoxPreTrainedModel;E.UltravoxProcessor;E.UniSpeechForCTC;E.UniSpeechForSequenceClassification;E.UniSpeechModel;E.UniSpeechPreTrainedModel;E.UniSpeechSatForAudioFrameClassification;E.UniSpeechSatForCTC;E.UniSpeechSatForSequenceClassification;E.UniSpeechSatModel;E.UniSpeechSatPreTrainedModel;E.VLChatProcessor;E.VLMImageProcessor;E.ViTFeatureExtractor;E.ViTForImageClassification;E.ViTImageProcessor;E.ViTMAEModel;E.ViTMAEPreTrainedModel;E.ViTMSNForImageClassification;E.ViTMSNModel;E.ViTMSNPreTrainedModel;E.ViTModel;E.ViTPreTrainedModel;E.VisionEncoderDecoderModel;E.VitMatteForImageMatting;E.VitMatteImageProcessor;E.VitMattePreTrainedModel;E.VitPoseForPoseEstimation;E.VitPoseImageProcessor;E.VitPosePreTrainedModel;E.VitsModel;E.VitsModelOutput;E.VitsPreTrainedModel;E.VitsTokenizer;E.VoxtralForConditionalGeneration;E.VoxtralProcessor;E.Wav2Vec2BertForCTC;E.Wav2Vec2BertForSequenceClassification;E.Wav2Vec2BertModel;E.Wav2Vec2BertPreTrainedModel;E.Wav2Vec2CTCTokenizer;E.Wav2Vec2FeatureExtractor;E.Wav2Vec2ForAudioFrameClassification;E.Wav2Vec2ForCTC;E.Wav2Vec2ForSequenceClassification;E.Wav2Vec2Model;E.Wav2Vec2PreTrainedModel;E.Wav2Vec2Processor;E.Wav2Vec2ProcessorWithLM;E.WavLMForAudioFrameClassification;E.WavLMForCTC;E.WavLMForSequenceClassification;E.WavLMForXVector;E.WavLMModel;E.WavLMPreTrainedModel;E.WeSpeakerFeatureExtractor;E.WeSpeakerResNetModel;E.WeSpeakerResNetPreTrainedModel;E.WhisperFeatureExtractor;E.WhisperForConditionalGeneration;E.WhisperModel;E.WhisperPreTrainedModel;E.WhisperProcessor;E.WhisperTextStreamer;E.WhisperTimeStampLogitsProcessor;E.WhisperTokenizer;E.XLMForQuestionAnswering;E.XLMForSequenceClassification;E.XLMForTokenClassification;E.XLMModel;E.XLMPreTrainedModel;E.XLMRobertaForMaskedLM;E.XLMRobertaForQuestionAnswering;E.XLMRobertaForSequenceClassification;E.XLMRobertaForTokenClassification;E.XLMRobertaModel;E.XLMRobertaPreTrainedModel;E.XLMRobertaTokenizer;E.XLMTokenizer;E.XLMWithLMHeadModel;E.XVectorOutput;E.YolosFeatureExtractor;E.YolosForObjectDetection;E.YolosImageProcessor;E.YolosModel;E.YolosObjectDetectionOutput;E.YolosPreTrainedModel;E.ZeroShotAudioClassificationPipeline;E.ZeroShotClassificationPipeline;E.ZeroShotImageClassificationPipeline;E.ZeroShotObjectDetectionPipeline;E.bankers_round;E.cat;E.cos_sim;E.dot;E.dynamic_time_warping;E.env;E.full;E.full_like;E.getCacheShapes;E.hamming;E.hanning;E.interpolate;E.interpolate_4d;E.interpolate_data;E.is_chinese_char;E.layer_norm;E.load_image;E.load_video;E.log_softmax;E.magnitude;E.matmul;E.max;E.mean;E.mean_pooling;E.medianFilter;E.mel_filter_bank;E.min;E.ones;E.ones_like;E.permute;E.permute_data;var $N=E.pipeline;E.quantize_embeddings;E.rand;E.read_audio;E.rfft;E.round;E.slice;E.softmax;E.spectrogram;E.stack;E.std_mean;E.topk;E.window_function;E.zeros;E.zeros_like;const Aie=({videoRef:e,canvasRef:t,isActive:r,onDetection:n})=>{const[i,o]=N.useState(null),[a,s]=N.useState(!1),l=N.useRef();N.useEffect(()=>{r&&!i&&!a&&u()},[r,i,a]);const u=async()=>{try{s(!0);const c=await $N("object-detection","hustvl/yolos-tiny",{device:"webgpu"});o(c)}catch{console.warn("WebGPU not available, falling back to CPU");try{const f=await $N("object-detection","hustvl/yolos-tiny");o(f)}catch(f){console.error("Failed to initialize AI detector:",f)}}finally{s(!1)}},d=async()=>{if(!i||!e.current||!t.current)return;const c=e.current,f=t.current,p=f.getContext("2d");if(!(!p||c.videoWidth===0||c.videoHeight===0)){f.width=c.videoWidth,f.height=c.videoHeight,p.drawImage(c,0,0,f.width,f.height);try{const h=f.toDataURL("image/jpeg",.8),m=await i(h),v=["bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe"],g=m.filter(_=>v.some(b=>_.label.toLowerCase().includes(b)));g.length>0&&g.forEach(_=>{const b={id:Math.random().toString(36).substr(2,9),timestamp:new Date,confidence:_.score,animalType:_.label,boundingBox:{x:_.box.xmin,y:_.box.ymin,width:_.box.xmax-_.box.xmin,height:_.box.ymax-_.box.ymin}};n(b),p.strokeStyle="#ef4444",p.lineWidth=3,p.strokeRect(_.box.xmin,_.box.ymin,_.box.xmax-_.box.xmin,_.box.ymax-_.box.ymin),p.fillStyle="#ef4444",p.font="16px Arial",p.fillText(`${_.label} (${(_.score*100).toFixed(1)}%)`,_.box.xmin,_.box.ymin-5)})}catch(h){console.error("Detection error:",h)}}};return N.useEffect(()=>{if(r&&i)return l.current=setInterval(d,2e3),()=>{l.current&&clearInterval(l.current)}},[r,i]),null},Oie=({onDetection:e,isMonitoring:t,onToggleMonitoring:r})=>{const n=N.useRef(null),i=N.useRef(null),[o,a]=N.useState(!1),[s,l]=N.useState(null),[u,d]=N.useState([]),[c,f]=N.useState(""),{toast:p}=tW();N.useEffect(()=>{let v=null;return t?(async()=>{try{const b=(await navigator.mediaDevices.enumerateDevices()).filter(y=>y.kind==="videoinput");d(b);const w={video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}};if(c)w.video.deviceId={exact:c};else{const y=b.find(x=>{const M=x.label.toLowerCase();return M.includes("webcam")||M.includes("usb")||M.includes("integrated")||M.includes("built-in")||!M.includes("front")&&!M.includes("back")&&!M.includes("selfie")&&!M.includes("facetime")});y&&(w.video.deviceId={exact:y.deviceId},f(y.deviceId))}v=await navigator.mediaDevices.getUserMedia(w),n.current&&(n.current.srcObject=v,a(!0))}catch(_){console.error("Error accessing camera:",_);try{v=await navigator.mediaDevices.getUserMedia({video:!0}),n.current&&(n.current.srcObject=v,a(!0))}catch{p({variant:"destructive",title:"خطأ في الكاميرا",description:"غير قادر على الوصول للكاميرا. يرجى التحقق من الأذونات."})}}})():a(!1),()=>{v&&v.getTracks().forEach(_=>_.stop())}},[t,c,p]);const h=()=>{const v=new(window.AudioContext||window.webkitAudioContext),g=v.createOscillator(),_=v.createGain();g.connect(_),_.connect(v.destination),g.frequency.setValueAtTime(800,v.currentTime),g.frequency.setValueAtTime(400,v.currentTime+.5),_.gain.setValueAtTime(.5,v.currentTime),_.gain.exponentialRampToValueAtTime(.01,v.currentTime+1),g.start(),g.stop(v.currentTime+1)},m=N.useCallback(v=>{l(v),e(v),h(),setTimeout(()=>l(null),3e3),p({title:"تم اكتشاف حيوان!",description:`تم اكتشاف ${v.animalType} بنسبة ثقة ${(v.confidence*100).toFixed(1)}%`,variant:"destructive"})},[e,p]);return N.useEffect(()=>{if(!t||!o)return;const v=setInterval(()=>{if(Math.random()>.98){const g={id:`demo-${Date.now()}`,timestamp:new Date,confidence:.85+Math.random()*.15,animalType:["deer","rabbit","bird","fox"][Math.floor(Math.random()*4)]};m(g)}},2e3);return()=>clearInterval(v)},[t,o,m]),L.jsx(Cn,{className:"shadow-farm",children:L.jsxs(Rn,{className:"p-4 space-y-4",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("h3",{className:"text-lg font-semibold text-primary",children:"تغذية الكاميرا المباشرة"}),L.jsxs("div",{className:"flex gap-2",children:[u.length>1&&L.jsxs("select",{value:c,onChange:v=>f(v.target.value),className:"px-3 py-1 text-sm border rounded-md bg-background",style:{minWidth:"150px"},children:[L.jsx("option",{value:"",children:"اختيار تلقائي (ويب كام)"}),u.map((v,g)=>L.jsx("option",{value:v.deviceId,children:v.label||`كاميرا ${g+1}`},v.deviceId))]}),L.jsx(Ba,{variant:"outline",size:"sm",onClick:h,className:"text-accent",children:L.jsx(LE,{className:"h-4 w-4"})}),L.jsxs(Ba,{variant:t?"destructive":"default",onClick:r,className:"flex items-center gap-2",children:[t?L.jsx(dZ,{className:"h-4 w-4"}):L.jsx(_h,{className:"h-4 w-4"}),t?"إيقاف":"بدء"," المراقبة"]})]})]}),L.jsxs("div",{className:"relative bg-muted rounded-lg overflow-hidden",children:[L.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-64 object-cover"}),L.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full pointer-events-none"}),L.jsx(Aie,{videoRef:n,canvasRef:i,isActive:t&&o,onDetection:m}),s&&L.jsxs("div",{className:"absolute top-2 right-2 bg-alert-red text-white px-3 py-1 rounded-lg text-sm font-medium animate-alert-flash",children:[s.animalType.toUpperCase()," تم الاكتشاف!"]}),!o&&L.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:L.jsxs("div",{className:"text-center",children:[L.jsx(_h,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),L.jsx("p",{className:"text-sm text-muted-foreground",children:t?"بدء تشغيل الكاميرا...":"الكاميرا مطفأة"})]})})]}),o&&L.jsxs("div",{className:"flex items-center justify-between text-sm",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"w-2 h-2 bg-farm-green rounded-full animate-detection-pulse"}),L.jsx("span",{className:"text-muted-foreground",children:"المراقبة نشطة"})]}),L.jsx("span",{className:"text-muted-foreground",children:"الدقة: 1280x720"})]})]})})},kie=({onDetection:e})=>{var u,d;const[t,r]=N.useState([{id:"cam-001",name:"كاميرا الحقل الشمالي",location:"الحقل أ - المدخل الشمالي",isOnline:!0,batteryLevel:85,isMonitoring:!1,lastDetection:new Date(Date.now()-72e5)},{id:"cam-002",name:"كاميرا البوابة الجنوبية",location:"الحقل ب - البوابة الجنوبية",isOnline:!0,batteryLevel:62,isMonitoring:!1},{id:"cam-003",name:"كاميرا مصدر المياه",location:"بالقرب من خزان المياه",isOnline:!1,batteryLevel:15,isMonitoring:!1,lastDetection:new Date(Date.now()-216e5)}]),[n,i]=N.useState("cam-001"),o=c=>{r(p=>p.map(h=>h.id===c?{...h,isMonitoring:!h.isMonitoring}:h));const f=t.find(p=>p.id===c);ed({title:f!=null&&f.isMonitoring?"تم إيقاف المراقبة":"تم بدء المراقبة",description:`${f==null?void 0:f.name} ${f!=null&&f.isMonitoring?"غير نشطة الآن":"تراقب بنشاط الآن"}`})},a=()=>{const c={id:`cam-${String(t.length+1).padStart(3,"0")}`,name:`Camera ${t.length+1}`,location:"New Location",isOnline:!0,batteryLevel:100,isMonitoring:!1};r(f=>[...f,c]),ed({title:"تم إضافة الكاميرا",description:`تم إضافة ${c.name} إلى الشبكة`})},s=c=>c>50?"text-farm-green":c>20?"text-yellow-500":"text-red-500",l=c=>c.isOnline?c.isMonitoring?"default":"secondary":"destructive";return L.jsxs("div",{className:"space-y-6",children:[L.jsxs(Cn,{children:[L.jsxs(ao,{className:"flex flex-row items-center justify-between",children:[L.jsxs(so,{className:"flex items-center gap-2",children:[L.jsx(_h,{className:"h-5 w-5"}),"شبكة الكاميرات (",t.length," جهاز)"]}),L.jsxs(Ba,{onClick:a,variant:"outline",size:"sm",children:[L.jsx(vZ,{className:"h-4 w-4 mr-2"}),"إضافة كاميرا"]})]}),L.jsx(Rn,{children:L.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.map(c=>L.jsx(Cn,{className:`cursor-pointer transition-all hover:shadow-md ${n===c.id?"ring-2 ring-primary":""}`,onClick:()=>i(c.id),children:L.jsxs(Rn,{className:"p-4",children:[L.jsxs("div",{className:"flex items-start justify-between mb-3",children:[L.jsxs("div",{children:[L.jsx("h4",{className:"font-semibold text-sm",children:c.name}),L.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[L.jsx(OW,{className:"h-3 w-3"}),c.location]})]}),L.jsx(_m,{variant:l(c),className:"text-xs",children:c.isOnline?c.isMonitoring?"نشط":"متصل":"غير متصل"})]}),L.jsx("div",{className:"flex items-center justify-between text-xs",children:L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsxs("div",{className:"flex items-center gap-1",children:[L.jsx(uZ,{className:`h-3 w-3 ${s(c.batteryLevel)}`}),L.jsxs("span",{className:s(c.batteryLevel),children:[c.batteryLevel,"%"]})]}),L.jsxs("div",{className:"flex items-center gap-1",children:[L.jsx(PZ,{className:`h-3 w-3 ${c.isOnline?"text-farm-green":"text-red-500"}`}),L.jsx("span",{className:c.isOnline?"text-farm-green":"text-red-500",children:c.isOnline?"Online":"Offline"})]})]})}),c.lastDetection&&L.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["آخر اكتشاف: ",c.lastDetection.toLocaleTimeString("ar-SA")]}),L.jsxs(Ba,{size:"sm",variant:c.isMonitoring?"destructive":"default",className:"w-full mt-3",onClick:f=>{f.stopPropagation(),o(c.id)},disabled:!c.isOnline,children:[c.isMonitoring?"إيقاف":"بدء"," المراقبة"]})]})},c.id))})})]}),n&&L.jsxs("div",{children:[L.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["الكاميرا النشطة: ",(u=t.find(c=>c.id===n))==null?void 0:u.name]}),L.jsx(Oie,{onDetection:e,isMonitoring:((d=t.find(c=>c.id===n))==null?void 0:d.isMonitoring)||!1,onToggleMonitoring:()=>o(n)})]})]})};var Iie=N.createContext(void 0);function i0(e){const t=N.useContext(Iie);return e||t||"ltr"}function CS(e,[t,r]){return Math.min(r,Math.max(t,e))}function Die(e,t){return N.useReducer((r,n)=>t[r][n]??r,e)}var $S="ScrollArea",[TG,POe]=Is($S),[jie,zo]=TG($S),PG=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:o=600,...a}=e,[s,l]=N.useState(null),[u,d]=N.useState(null),[c,f]=N.useState(null),[p,h]=N.useState(null),[m,v]=N.useState(null),[g,_]=N.useState(0),[b,w]=N.useState(0),[y,x]=N.useState(!1),[M,T]=N.useState(!1),S=Rr(t,k=>l(k)),$=i0(i);return L.jsx(jie,{scope:r,type:n,dir:$,scrollHideDelay:o,scrollArea:s,viewport:u,onViewportChange:d,content:c,onContentChange:f,scrollbarX:p,onScrollbarXChange:h,scrollbarXEnabled:y,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:v,scrollbarYEnabled:M,onScrollbarYEnabledChange:T,onCornerWidthChange:_,onCornerHeightChange:w,children:L.jsx(_r.div,{dir:$,...a,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});PG.displayName=$S;var EG="ScrollAreaViewport",SG=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...o}=e,a=zo(EG,r),s=N.useRef(null),l=Rr(t,s,a.onViewportChange);return L.jsxs(L.Fragment,{children:[L.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),L.jsx(_r.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:L.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});SG.displayName=EG;var Qa="ScrollAreaScrollbar",AS=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=zo(Qa,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=i,s=e.orientation==="horizontal";return N.useEffect(()=>(s?o(!0):a(!0),()=>{s?o(!1):a(!1)}),[s,o,a]),i.type==="hover"?L.jsx(Fie,{...n,ref:t,forceMount:r}):i.type==="scroll"?L.jsx(Lie,{...n,ref:t,forceMount:r}):i.type==="auto"?L.jsx(CG,{...n,ref:t,forceMount:r}):i.type==="always"?L.jsx(OS,{...n,ref:t}):null});AS.displayName=Qa;var Fie=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=zo(Qa,e.__scopeScrollArea),[o,a]=N.useState(!1);return N.useEffect(()=>{const s=i.scrollArea;let l=0;if(s){const u=()=>{window.clearTimeout(l),a(!0)},d=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",d)}}},[i.scrollArea,i.scrollHideDelay]),L.jsx(Ol,{present:r||o,children:L.jsx(CG,{"data-state":o?"visible":"hidden",...n,ref:t})})}),Lie=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=zo(Qa,e.__scopeScrollArea),o=e.orientation==="horizontal",a=a0(()=>l("SCROLL_END"),100),[s,l]=Die("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,i.scrollHideDelay,l]),N.useEffect(()=>{const u=i.viewport,d=o?"scrollLeft":"scrollTop";if(u){let c=u[d];const f=()=>{const p=u[d];c!==p&&(l("SCROLL"),a()),c=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,o,l,a]),L.jsx(Ol,{present:r||s!=="hidden",children:L.jsx(OS,{"data-state":s==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),CG=N.forwardRef((e,t)=>{const r=zo(Qa,e.__scopeScrollArea),{forceMount:n,...i}=e,[o,a]=N.useState(!1),s=e.orientation==="horizontal",l=a0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;a(s?u:d)}},10);return Sd(r.viewport,l),Sd(r.content,l),L.jsx(Ol,{present:n||o,children:L.jsx(OS,{"data-state":o?"visible":"hidden",...i,ref:t})})}),OS=N.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=zo(Qa,e.__scopeScrollArea),o=N.useRef(null),a=N.useRef(0),[s,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=IG(s.viewport,s.content),d={...n,sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:f=>o.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function c(f,p){return Wie(f,a.current,s,p)}return r==="horizontal"?L.jsx(Nie,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const f=i.viewport.scrollLeft,p=AN(f,s,i.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=c(f,i.dir))}}):r==="vertical"?L.jsx(Rie,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const f=i.viewport.scrollTop,p=AN(f,s);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=c(f))}}):null}),Nie=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,o=zo(Qa,e.__scopeScrollArea),[a,s]=N.useState(),l=N.useRef(null),u=Rr(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),L.jsx(AG,{"data-orientation":"horizontal",...i,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":o0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,c)=>{if(o.viewport){const f=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),jG(f,c)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Cv(a.paddingLeft),paddingEnd:Cv(a.paddingRight)}})}})}),Rie=N.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,o=zo(Qa,e.__scopeScrollArea),[a,s]=N.useState(),l=N.useRef(null),u=Rr(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),L.jsx(AG,{"data-orientation":"vertical",...i,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":o0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,c)=>{if(o.viewport){const f=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),jG(f,c)&&d.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Cv(a.paddingTop),paddingEnd:Cv(a.paddingBottom)}})}})}),[zie,$G]=TG(Qa),AG=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:c,...f}=e,p=zo(Qa,r),[h,m]=N.useState(null),v=Rr(t,S=>m(S)),g=N.useRef(null),_=N.useRef(""),b=p.viewport,w=n.content-n.viewport,y=xi(d),x=xi(l),M=a0(c,10);function T(S){if(g.current){const $=S.clientX-g.current.left,k=S.clientY-g.current.top;u({x:$,y:k})}}return N.useEffect(()=>{const S=$=>{const k=$.target;(h==null?void 0:h.contains(k))&&y($,w)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[b,h,w,y]),N.useEffect(x,[n,x]),Sd(h,M),Sd(p.content,M),L.jsx(zie,{scope:r,scrollbar:h,hasThumb:i,onThumbChange:xi(o),onThumbPointerUp:xi(a),onThumbPositionChange:x,onThumbPointerDown:xi(s),children:L.jsx(_r.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:qt(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),g.current=h.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),T(S))}),onPointerMove:qt(e.onPointerMove,T),onPointerUp:qt(e.onPointerUp,S=>{const $=S.target;$.hasPointerCapture(S.pointerId)&&$.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=_.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),Sv="ScrollAreaThumb",OG=N.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=$G(Sv,e.__scopeScrollArea);return L.jsx(Ol,{present:r||i.hasThumb,children:L.jsx(Bie,{ref:t,...n})})}),Bie=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,o=zo(Sv,r),a=$G(Sv,r),{onThumbPositionChange:s}=a,l=Rr(t,c=>a.onThumbChange(c)),u=N.useRef(void 0),d=a0(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const c=o.viewport;if(c){const f=()=>{if(d(),!u.current){const p=Vie(c,s);u.current=p,s()}};return s(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[o.viewport,d,s]),L.jsx(_r.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:qt(e.onPointerDownCapture,c=>{const p=c.target.getBoundingClientRect(),h=c.clientX-p.left,m=c.clientY-p.top;a.onThumbPointerDown({x:h,y:m})}),onPointerUp:qt(e.onPointerUp,a.onThumbPointerUp)})});OG.displayName=Sv;var kS="ScrollAreaCorner",kG=N.forwardRef((e,t)=>{const r=zo(kS,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?L.jsx(Uie,{...e,ref:t}):null});kG.displayName=kS;var Uie=N.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=zo(kS,r),[o,a]=N.useState(0),[s,l]=N.useState(0),u=!!(o&&s);return Sd(i.scrollbarX,()=>{var c;const d=((c=i.scrollbarX)==null?void 0:c.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),Sd(i.scrollbarY,()=>{var c;const d=((c=i.scrollbarY)==null?void 0:c.offsetWidth)||0;i.onCornerWidthChange(d),a(d)}),u?L.jsx(_r.div,{...n,ref:t,style:{width:o,height:s,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Cv(e){return e?parseInt(e,10):0}function IG(e,t){const r=e/t;return isNaN(r)?0:r}function o0(e){const t=IG(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Wie(e,t,r,n="ltr"){const i=o0(r),o=i/2,a=t||o,s=i-a,l=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-s,d=r.content-r.viewport,c=n==="ltr"?[0,d]:[d*-1,0];return DG([l,u],c)(e)}function AN(e,t,r="ltr"){const n=o0(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,a=t.content-t.viewport,s=o-n,l=r==="ltr"?[0,a]:[a*-1,0],u=CS(e,l);return DG([0,a],[0,s])(u)}function DG(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function jG(e,t){return e>0&&e<t}var Vie=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},a=r.left!==o.left,s=r.top!==o.top;(a||s)&&t(),r=o,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function a0(e,t){const r=xi(e),n=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),N.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Sd(e,t){const r=xi(t);Ga(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}var FG=PG,Gie=SG,Hie=kG;const LG=N.forwardRef(({className:e,children:t,...r},n)=>L.jsxs(FG,{ref:n,className:sn("relative overflow-hidden",e),...r,children:[L.jsx(Gie,{className:"h-full w-full rounded-[inherit]",children:t}),L.jsx(NG,{}),L.jsx(Hie,{})]}));LG.displayName=FG.displayName;const NG=N.forwardRef(({className:e,orientation:t="vertical",...r},n)=>L.jsx(AS,{ref:n,orientation:t,className:sn("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:L.jsx(OG,{className:"relative flex-1 rounded-full bg-border"})}));NG.displayName=AS.displayName;const Kie=({detections:e})=>{const t=i=>i.toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),r=i=>{const o={deer:"🦌",rabbit:"🐰",bird:"🐦",fox:"🦊",default:"🐾"};return o[i]||o.default},n=i=>i>=.9?"bg-farm-green text-primary-foreground":i>=.7?"bg-accent text-accent-foreground":"bg-secondary text-secondary-foreground";return L.jsxs(Cn,{className:"shadow-farm",children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2 text-primary",children:[L.jsx(kW,{className:"h-5 w-5"}),"الاكتشافات الأخيرة"]})}),L.jsx(Rn,{children:e.length===0?L.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[L.jsx("div",{className:"text-4xl mb-2",children:"🏞️"}),L.jsx("p",{children:"لم يتم اكتشاف أي حيوانات بعد"}),L.jsx("p",{className:"text-sm",children:"مزرعتك آمنة"})]}):L.jsx(LG,{className:"h-80",children:L.jsx("div",{className:"space-y-3",children:e.map(i=>L.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-earth rounded-lg border border-border",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("span",{className:"text-2xl",children:r(i.animalType)}),L.jsxs("div",{children:[L.jsx("p",{className:"font-medium capitalize text-foreground",children:i.animalType}),L.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[L.jsx(AW,{className:"h-3 w-3"}),t(i.timestamp)]})]})]}),L.jsxs(_m,{className:n(i.confidence),children:[Math.round(i.confidence*100),"%"]})]},i.id))})})})]})},ON=({latestDetection:e,totalDetections:t})=>{const[r,n]=N.useState(!0),[i,o]=N.useState(!0),a=()=>{"Notification"in window&&Notification.permission==="granted"&&new Notification("تنبيه المزرعة!",{body:`تم اكتشاف ${e==null?void 0:e.animalType} في ممتلكاتك`,icon:"/favicon.ico"})},s=async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()};return L.jsxs(Cn,{className:"shadow-farm",children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2 text-primary",children:[L.jsx(_D,{className:"h-5 w-5"}),"نظام التنبيهات"]})}),L.jsxs(Rn,{className:"space-y-4",children:[e&&L.jsxs("div",{className:"p-4 bg-gradient-alert rounded-lg border-2 border-alert-red",children:[L.jsxs("div",{className:"flex items-center justify-end mb-2",style:{flexDirection:"row-reverse"},children:[L.jsx("h4",{className:"font-semibold text-white",style:{textAlign:"right"},children:"تنبيه نشط"}),L.jsx(_m,{variant:"destructive",className:"animate-detection-pulse",style:{marginLeft:"0.5rem"},children:"مباشر"})]}),L.jsxs("p",{className:"text-white text-sm",children:["تم اكتشاف ",L.jsx("span",{className:"font-medium capitalize",children:e.animalType})," في"," ",e.timestamp.toLocaleTimeString()]}),L.jsxs("p",{className:"text-white/80 text-xs mt-1",children:["مستوى الثقة: ",Math.round(e.confidence*100),"%"]})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[L.jsx("div",{className:"text-2xl font-bold text-farm-green",children:t}),L.jsx("div",{className:"text-xs text-muted-foreground",children:"إجمالي الاكتشافات"})]}),L.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[L.jsx("div",{className:"text-2xl font-bold text-farm-green",children:e?"1":"0"}),L.jsx("div",{className:"text-xs text-muted-foreground",children:"التنبيهات النشطة"})]})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{className:"flex items-center justify-end",style:{flexDirection:"row-reverse"},children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(bZ,{className:"h-4 w-4 text-muted-foreground"}),L.jsx("span",{className:"text-sm",children:"الإشعارات الفورية"})]}),L.jsx(Ba,{variant:"outline",size:"sm",onClick:()=>{n(!r),r||s()},className:r?"bg-farm-green text-primary-foreground":"",children:r?L.jsx(_D,{className:"h-3 w-3"}):L.jsx(cZ,{className:"h-3 w-3"})})]}),L.jsxs("div",{className:"flex items-center justify-end",style:{flexDirection:"row-reverse"},children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(LE,{className:"h-4 w-4 text-muted-foreground"}),L.jsx("span",{className:"text-sm",children:"أصوات التنبيه"})]}),L.jsx(Ba,{variant:"outline",size:"sm",onClick:()=>o(!i),className:i?"bg-farm-green text-primary-foreground":"",children:i?"مفعل":"مطفأ"})]})]}),e&&L.jsx(Ba,{onClick:a,className:"w-full bg-gradient-success text-primary-foreground",children:"إرسال تنبيه يدوي"})]})]})};var qie=Array.isArray,Qi=qie,Xie=typeof Tg=="object"&&Tg&&Tg.Object===Object&&Tg,RG=Xie,Qie=RG,Yie=typeof self=="object"&&self&&self.Object===Object&&self,Zie=Qie||Yie||Function("return this")(),Ya=Zie,Jie=Ya,eoe=Jie.Symbol,vm=eoe,kN=vm,zG=Object.prototype,toe=zG.hasOwnProperty,roe=zG.toString,hp=kN?kN.toStringTag:void 0;function noe(e){var t=toe.call(e,hp),r=e[hp];try{e[hp]=void 0;var n=!0}catch{}var i=roe.call(e);return n&&(t?e[hp]=r:delete e[hp]),i}var ioe=noe,ooe=Object.prototype,aoe=ooe.toString;function soe(e){return aoe.call(e)}var loe=soe,IN=vm,uoe=ioe,coe=loe,doe="[object Null]",foe="[object Undefined]",DN=IN?IN.toStringTag:void 0;function poe(e){return e==null?e===void 0?foe:doe:DN&&DN in Object(e)?uoe(e):coe(e)}var js=poe;function hoe(e){return e!=null&&typeof e=="object"}var Fs=hoe,moe=js,goe=Fs,_oe="[object Symbol]";function voe(e){return typeof e=="symbol"||goe(e)&&moe(e)==_oe}var sf=voe,yoe=Qi,boe=sf,woe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xoe=/^\w*$/;function Moe(e,t){if(yoe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||boe(e)?!0:xoe.test(e)||!woe.test(e)||t!=null&&e in Object(t)}var IS=Moe;function Toe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Il=Toe;const lf=xr(Il);var Poe=js,Eoe=Il,Soe="[object AsyncFunction]",Coe="[object Function]",$oe="[object GeneratorFunction]",Aoe="[object Proxy]";function Ooe(e){if(!Eoe(e))return!1;var t=Poe(e);return t==Coe||t==$oe||t==Soe||t==Aoe}var DS=Ooe;const Rt=xr(DS);var koe=Ya,Ioe=koe["__core-js_shared__"],Doe=Ioe,r1=Doe,jN=function(){var e=/[^.]+$/.exec(r1&&r1.keys&&r1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function joe(e){return!!jN&&jN in e}var Foe=joe,Loe=Function.prototype,Noe=Loe.toString;function Roe(e){if(e!=null){try{return Noe.call(e)}catch{}try{return e+""}catch{}}return""}var BG=Roe,zoe=DS,Boe=Foe,Uoe=Il,Woe=BG,Voe=/[\\^$.*+?()[\]{}|]/g,Goe=/^\[object .+?Constructor\]$/,Hoe=Function.prototype,Koe=Object.prototype,qoe=Hoe.toString,Xoe=Koe.hasOwnProperty,Qoe=RegExp("^"+qoe.call(Xoe).replace(Voe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yoe(e){if(!Uoe(e)||Boe(e))return!1;var t=zoe(e)?Qoe:Goe;return t.test(Woe(e))}var Zoe=Yoe;function Joe(e,t){return e==null?void 0:e[t]}var eae=Joe,tae=Zoe,rae=eae;function nae(e,t){var r=rae(e,t);return tae(r)?r:void 0}var tc=nae,iae=tc,oae=iae(Object,"create"),s0=oae,FN=s0;function aae(){this.__data__=FN?FN(null):{},this.size=0}var sae=aae;function lae(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var uae=lae,cae=s0,dae="__lodash_hash_undefined__",fae=Object.prototype,pae=fae.hasOwnProperty;function hae(e){var t=this.__data__;if(cae){var r=t[e];return r===dae?void 0:r}return pae.call(t,e)?t[e]:void 0}var mae=hae,gae=s0,_ae=Object.prototype,vae=_ae.hasOwnProperty;function yae(e){var t=this.__data__;return gae?t[e]!==void 0:vae.call(t,e)}var bae=yae,wae=s0,xae="__lodash_hash_undefined__";function Mae(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wae&&t===void 0?xae:t,this}var Tae=Mae,Pae=sae,Eae=uae,Sae=mae,Cae=bae,$ae=Tae;function uf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}uf.prototype.clear=Pae;uf.prototype.delete=Eae;uf.prototype.get=Sae;uf.prototype.has=Cae;uf.prototype.set=$ae;var Aae=uf;function Oae(){this.__data__=[],this.size=0}var kae=Oae;function Iae(e,t){return e===t||e!==e&&t!==t}var jS=Iae,Dae=jS;function jae(e,t){for(var r=e.length;r--;)if(Dae(e[r][0],t))return r;return-1}var l0=jae,Fae=l0,Lae=Array.prototype,Nae=Lae.splice;function Rae(e){var t=this.__data__,r=Fae(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Nae.call(t,r,1),--this.size,!0}var zae=Rae,Bae=l0;function Uae(e){var t=this.__data__,r=Bae(t,e);return r<0?void 0:t[r][1]}var Wae=Uae,Vae=l0;function Gae(e){return Vae(this.__data__,e)>-1}var Hae=Gae,Kae=l0;function qae(e,t){var r=this.__data__,n=Kae(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Xae=qae,Qae=kae,Yae=zae,Zae=Wae,Jae=Hae,ese=Xae;function cf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}cf.prototype.clear=Qae;cf.prototype.delete=Yae;cf.prototype.get=Zae;cf.prototype.has=Jae;cf.prototype.set=ese;var u0=cf,tse=tc,rse=Ya,nse=tse(rse,"Map"),FS=nse,LN=Aae,ise=u0,ose=FS;function ase(){this.size=0,this.__data__={hash:new LN,map:new(ose||ise),string:new LN}}var sse=ase;function lse(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var use=lse,cse=use;function dse(e,t){var r=e.__data__;return cse(t)?r[typeof t=="string"?"string":"hash"]:r.map}var c0=dse,fse=c0;function pse(e){var t=fse(this,e).delete(e);return this.size-=t?1:0,t}var hse=pse,mse=c0;function gse(e){return mse(this,e).get(e)}var _se=gse,vse=c0;function yse(e){return vse(this,e).has(e)}var bse=yse,wse=c0;function xse(e,t){var r=wse(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Mse=xse,Tse=sse,Pse=hse,Ese=_se,Sse=bse,Cse=Mse;function df(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}df.prototype.clear=Tse;df.prototype.delete=Pse;df.prototype.get=Ese;df.prototype.has=Sse;df.prototype.set=Cse;var LS=df,UG=LS,$se="Expected a function";function NS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($se);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(NS.Cache||UG),r}NS.Cache=UG;var WG=NS;const Ase=xr(WG);var Ose=WG,kse=500;function Ise(e){var t=Ose(e,function(n){return r.size===kse&&r.clear(),n}),r=t.cache;return t}var Dse=Ise,jse=Dse,Fse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lse=/\\(\\)?/g,Nse=jse(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Fse,function(r,n,i,o){t.push(i?o.replace(Lse,"$1"):n||r)}),t}),Rse=Nse;function zse(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var RS=zse,NN=vm,Bse=RS,Use=Qi,Wse=sf,RN=NN?NN.prototype:void 0,zN=RN?RN.toString:void 0;function VG(e){if(typeof e=="string")return e;if(Use(e))return Bse(e,VG)+"";if(Wse(e))return zN?zN.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Vse=VG,Gse=Vse;function Hse(e){return e==null?"":Gse(e)}var GG=Hse,Kse=Qi,qse=IS,Xse=Rse,Qse=GG;function Yse(e,t){return Kse(e)?e:qse(e,t)?[e]:Xse(Qse(e))}var HG=Yse,Zse=sf;function Jse(e){if(typeof e=="string"||Zse(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var d0=Jse,ele=HG,tle=d0;function rle(e,t){t=ele(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[tle(t[r++])];return r&&r==n?e:void 0}var zS=rle,nle=zS;function ile(e,t,r){var n=e==null?void 0:nle(e,t);return n===void 0?r:n}var KG=ile;const ho=xr(KG);function ole(e){return e==null}var ale=ole;const Vt=xr(ale);var sle=js,lle=Qi,ule=Fs,cle="[object String]";function dle(e){return typeof e=="string"||!lle(e)&&ule(e)&&sle(e)==cle}var fle=dle;const Wu=xr(fle);var qG={exports:{}},Pr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=Symbol.for("react.element"),US=Symbol.for("react.portal"),f0=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),h0=Symbol.for("react.profiler"),m0=Symbol.for("react.provider"),g0=Symbol.for("react.context"),ple=Symbol.for("react.server_context"),_0=Symbol.for("react.forward_ref"),v0=Symbol.for("react.suspense"),y0=Symbol.for("react.suspense_list"),b0=Symbol.for("react.memo"),w0=Symbol.for("react.lazy"),hle=Symbol.for("react.offscreen"),XG;XG=Symbol.for("react.module.reference");function Bo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BS:switch(e=e.type,e){case f0:case h0:case p0:case v0:case y0:return e;default:switch(e=e&&e.$$typeof,e){case ple:case g0:case _0:case w0:case b0:case m0:return e;default:return t}}case US:return t}}}Pr.ContextConsumer=g0;Pr.ContextProvider=m0;Pr.Element=BS;Pr.ForwardRef=_0;Pr.Fragment=f0;Pr.Lazy=w0;Pr.Memo=b0;Pr.Portal=US;Pr.Profiler=h0;Pr.StrictMode=p0;Pr.Suspense=v0;Pr.SuspenseList=y0;Pr.isAsyncMode=function(){return!1};Pr.isConcurrentMode=function(){return!1};Pr.isContextConsumer=function(e){return Bo(e)===g0};Pr.isContextProvider=function(e){return Bo(e)===m0};Pr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BS};Pr.isForwardRef=function(e){return Bo(e)===_0};Pr.isFragment=function(e){return Bo(e)===f0};Pr.isLazy=function(e){return Bo(e)===w0};Pr.isMemo=function(e){return Bo(e)===b0};Pr.isPortal=function(e){return Bo(e)===US};Pr.isProfiler=function(e){return Bo(e)===h0};Pr.isStrictMode=function(e){return Bo(e)===p0};Pr.isSuspense=function(e){return Bo(e)===v0};Pr.isSuspenseList=function(e){return Bo(e)===y0};Pr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===f0||e===h0||e===p0||e===v0||e===y0||e===hle||typeof e=="object"&&e!==null&&(e.$$typeof===w0||e.$$typeof===b0||e.$$typeof===m0||e.$$typeof===g0||e.$$typeof===_0||e.$$typeof===XG||e.getModuleId!==void 0)};Pr.typeOf=Bo;qG.exports=Pr;var mle=qG.exports,gle=js,_le=Fs,vle="[object Number]";function yle(e){return typeof e=="number"||_le(e)&&gle(e)==vle}var QG=yle;const ble=xr(QG);var wle=QG;function xle(e){return wle(e)&&e!=+e}var Mle=xle;const ym=xr(Mle);var ki=function(t){return t===0?0:t>0?1:-1},bu=function(t){return Wu(t)&&t.indexOf("%")===t.length-1},tt=function(t){return ble(t)&&!ym(t)},Tle=function(t){return Vt(t)},Wn=function(t){return tt(t)||Wu(t)},Ple=0,ff=function(t){var r=++Ple;return"".concat(t||"").concat(r)},Ii=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!tt(t)&&!Wu(t))return n;var o;if(bu(t)){var a=t.indexOf("%");o=r*parseFloat(t.slice(0,a))/100}else o=+t;return ym(o)&&(o=n),i&&o>r&&(o=r),o},il=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Ele=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},oo=function(t,r){return tt(t)&&tt(r)?function(n){return t+n*(r-t)}:function(){return r}};function $v(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ho(n,t))===r})}var Sle=function(t,r){return tt(t)&&tt(r)?t-r:Wu(t)&&Wu(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function id(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function nT(e){"@babel/helpers - typeof";return nT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nT(e)}var Cle=["viewBox","children"],$le=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],BN=["points","pathLength"],n1={svg:Cle,polygon:BN,polyline:BN},WS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Av=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!lf(n))return null;var i={};return Object.keys(n).forEach(function(o){WS.includes(o)&&(i[o]=r||function(a){return n[o](n,a)})}),i},Ale=function(t,r,n){return function(i){return t(r,n,i),null}},Vu=function(t,r,n){if(!lf(t)||nT(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(o){var a=t[o];WS.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=Ale(a,r,n))}),i},Ole=["children"],kle=["children"];function UN(e,t){if(e==null)return{};var r=Ile(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ile(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iT(e){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iT(e)}var WN={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},bs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},VN=null,i1=null,VS=function e(t){if(t===VN&&Array.isArray(i1))return i1;var r=[];return N.Children.forEach(t,function(n){Vt(n)||(mle.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),i1=r,VN=t,r};function mo(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return bs(i)}):n=[bs(t)],VS(e).forEach(function(i){var o=ho(i,"type.displayName")||ho(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function ro(e,t){var r=mo(e,t);return r&&r[0]}var GN=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!tt(n)||n<=0||!tt(i)||i<=0)},Dle=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jle=function(t){return t&&t.type&&Wu(t.type)&&Dle.indexOf(t.type)>=0},Fle=function(t){return t&&iT(t)==="object"&&"clipDot"in t},Lle=function(t,r,n,i){var o,a=(o=n1==null?void 0:n1[i])!==null&&o!==void 0?o:[];return r.startsWith("data-")||!Rt(t)&&(i&&a.includes(r)||$le.includes(r))||n&&WS.includes(r)},Ot=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(N.isValidElement(t)&&(i=t.props),!lf(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;Lle((s=i)===null||s===void 0?void 0:s[a],a,r,n)&&(o[a]=i[a])}),o},oT=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return HN(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=t[i],a=r[i];if(Array.isArray(o)||Array.isArray(a)){if(!e(o,a))return!1}else if(!HN(o,a))return!1}return!0},HN=function(t,r){if(Vt(t)&&Vt(r))return!0;if(!Vt(t)&&!Vt(r)){var n=t.props||{},i=n.children,o=UN(n,Ole),a=r.props||{},s=a.children,l=UN(a,kle);return i&&s?id(o,l)&&oT(i,s):!i&&!s?id(o,l):!1}return!1},KN=function(t,r){var n=[],i={};return VS(t).forEach(function(o,a){if(jle(o))n.push(o);else if(o){var s=bs(o.type),l=r[s]||{},u=l.handler,d=l.once;if(u&&(!d||!i[s])){var c=u(o,s,a);n.push(c),i[s]=!0}}}),n},Nle=function(t){var r=t&&t.type;return r&&WN[r]?WN[r]:null},Rle=function(t,r){return VS(r).indexOf(t)},zle=["children","width","height","viewBox","className","style","title","desc"];function aT(){return aT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aT.apply(this,arguments)}function Ble(e,t){if(e==null)return{};var r=Ule(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ule(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sT(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,o=e.className,a=e.style,s=e.title,l=e.desc,u=Ble(e,zle),d=i||{width:r,height:n,x:0,y:0},c=Kt("recharts-surface",o);return ie.createElement("svg",aT({},Ot(u,!0,"svg"),{className:c,width:r,height:n,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ie.createElement("title",null,s),ie.createElement("desc",null,l),t)}var Wle=["children","className"];function lT(){return lT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lT.apply(this,arguments)}function Vle(e,t){if(e==null)return{};var r=Gle(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mr=ie.forwardRef(function(e,t){var r=e.children,n=e.className,i=Vle(e,Wle),o=Kt("recharts-layer",n);return ie.createElement("g",lT({className:o},Ot(i,!0),{ref:t}),r)}),va=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function Hle(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var Kle=Hle,qle=Kle;function Xle(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:qle(e,t,r)}var Qle=Xle,Yle="\\ud800-\\udfff",Zle="\\u0300-\\u036f",Jle="\\ufe20-\\ufe2f",eue="\\u20d0-\\u20ff",tue=Zle+Jle+eue,rue="\\ufe0e\\ufe0f",nue="\\u200d",iue=RegExp("["+nue+Yle+tue+rue+"]");function oue(e){return iue.test(e)}var YG=oue;function aue(e){return e.split("")}var sue=aue,ZG="\\ud800-\\udfff",lue="\\u0300-\\u036f",uue="\\ufe20-\\ufe2f",cue="\\u20d0-\\u20ff",due=lue+uue+cue,fue="\\ufe0e\\ufe0f",pue="["+ZG+"]",uT="["+due+"]",cT="\\ud83c[\\udffb-\\udfff]",hue="(?:"+uT+"|"+cT+")",JG="[^"+ZG+"]",eH="(?:\\ud83c[\\udde6-\\uddff]){2}",tH="[\\ud800-\\udbff][\\udc00-\\udfff]",mue="\\u200d",rH=hue+"?",nH="["+fue+"]?",gue="(?:"+mue+"(?:"+[JG,eH,tH].join("|")+")"+nH+rH+")*",_ue=nH+rH+gue,vue="(?:"+[JG+uT+"?",uT,eH,tH,pue].join("|")+")",yue=RegExp(cT+"(?="+cT+")|"+vue+_ue,"g");function bue(e){return e.match(yue)||[]}var wue=bue,xue=sue,Mue=YG,Tue=wue;function Pue(e){return Mue(e)?Tue(e):xue(e)}var Eue=Pue,Sue=Qle,Cue=YG,$ue=Eue,Aue=GG;function Oue(e){return function(t){t=Aue(t);var r=Cue(t)?$ue(t):void 0,n=r?r[0]:t.charAt(0),i=r?Sue(r,1).join(""):t.slice(1);return n[e]()+i}}var kue=Oue,Iue=kue,Due=Iue("toUpperCase"),jue=Due;const x0=xr(jue);function Fr(e){return function(){return e}}const iH=Math.cos,Ov=Math.sin,Ta=Math.sqrt,kv=Math.PI,M0=2*kv,dT=Math.PI,fT=2*dT,cu=1e-6,Fue=fT-cu;function oH(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Lue(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return oH;const r=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Nue{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?oH:Lue(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,o,a){this._append`C${+t},${+r},${+n},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,r,n,i,o){if(t=+t,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=n-t,u=i-r,d=a-t,c=s-r,f=d*d+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>cu)if(!(Math.abs(c*l-u*d)>cu)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-a,h=i-s,m=l*l+u*u,v=p*p+h*h,g=Math.sqrt(m),_=Math.sqrt(f),b=o*Math.tan((dT-Math.acos((m+f-v)/(2*g*_)))/2),w=b/_,y=b/g;Math.abs(w-1)>cu&&this._append`L${t+w*d},${r+w*c}`,this._append`A${o},${o},0,0,${+(c*p>d*h)},${this._x1=t+y*l},${this._y1=r+y*u}`}}arc(t,r,n,i,o,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),l=n*Math.sin(i),u=t+s,d=r+l,c=1^a,f=a?i-o:o-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>cu||Math.abs(this._y1-d)>cu)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%fT+fT),f>Fue?this._append`A${n},${n},0,1,${c},${t-s},${r-l}A${n},${n},0,1,${c},${this._x1=u},${this._y1=d}`:f>cu&&this._append`A${n},${n},0,${+(f>=dT)},${c},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function GS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Nue(t)}function HS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aH(e){this._context=e}aH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T0(e){return new aH(e)}function sH(e){return e[0]}function lH(e){return e[1]}function uH(e,t){var r=Fr(!0),n=null,i=T0,o=null,a=GS(s);e=typeof e=="function"?e:e===void 0?sH:Fr(e),t=typeof t=="function"?t:t===void 0?lH:Fr(t);function s(l){var u,d=(l=HS(l)).length,c,f=!1,p;for(n==null&&(o=i(p=a())),u=0;u<=d;++u)!(u<d&&r(c=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(c,u,l),+t(c,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Fr(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Fr(+l),s):t},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Fr(!!l),s):r},s.curve=function(l){return arguments.length?(i=l,n!=null&&(o=i(n)),s):i},s.context=function(l){return arguments.length?(l==null?n=o=null:o=i(n=l),s):n},s}function s_(e,t,r){var n=null,i=Fr(!0),o=null,a=T0,s=null,l=GS(u);e=typeof e=="function"?e:e===void 0?sH:Fr(+e),t=typeof t=="function"?t:Fr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?lH:Fr(+r);function u(c){var f,p,h,m=(c=HS(c)).length,v,g=!1,_,b=new Array(m),w=new Array(m);for(o==null&&(s=a(_=l())),f=0;f<=m;++f){if(!(f<m&&i(v=c[f],f,c))===g)if(g=!g)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=f-1;h>=p;--h)s.point(b[h],w[h]);s.lineEnd(),s.areaEnd()}g&&(b[f]=+e(v,f,c),w[f]=+t(v,f,c),s.point(n?+n(v,f,c):b[f],r?+r(v,f,c):w[f]))}if(_)return s=null,_+""||null}function d(){return uH().defined(i).curve(a).context(o)}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:Fr(+c),n=null,u):e},u.x0=function(c){return arguments.length?(e=typeof c=="function"?c:Fr(+c),u):e},u.x1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Fr(+c),u):n},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:Fr(+c),r=null,u):t},u.y0=function(c){return arguments.length?(t=typeof c=="function"?c:Fr(+c),u):t},u.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Fr(+c),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:Fr(!!c),u):i},u.curve=function(c){return arguments.length?(a=c,o!=null&&(s=a(o)),u):a},u.context=function(c){return arguments.length?(c==null?o=s=null:s=a(o=c),u):o},u}class cH{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Rue(e){return new cH(e,!0)}function zue(e){return new cH(e,!1)}const KS={draw(e,t){const r=Ta(t/kv);e.moveTo(r,0),e.arc(0,0,r,0,M0)}},Bue={draw(e,t){const r=Ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},dH=Ta(1/3),Uue=dH*2,Wue={draw(e,t){const r=Ta(t/Uue),n=r*dH;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Vue={draw(e,t){const r=Ta(t),n=-r/2;e.rect(n,n,r,r)}},Gue=.8908130915292852,fH=Ov(kv/10)/Ov(7*kv/10),Hue=Ov(M0/10)*fH,Kue=-iH(M0/10)*fH,que={draw(e,t){const r=Ta(t*Gue),n=Hue*r,i=Kue*r;e.moveTo(0,-r),e.lineTo(n,i);for(let o=1;o<5;++o){const a=M0*o/5,s=iH(a),l=Ov(a);e.lineTo(l*r,-s*r),e.lineTo(s*n-l*i,l*n+s*i)}e.closePath()}},o1=Ta(3),Xue={draw(e,t){const r=-Ta(t/(o1*3));e.moveTo(0,r*2),e.lineTo(-o1*r,-r),e.lineTo(o1*r,-r),e.closePath()}},Mo=-.5,To=Ta(3)/2,pT=1/Ta(12),Que=(pT/2+1)*3,Yue={draw(e,t){const r=Ta(t/Que),n=r/2,i=r*pT,o=n,a=r*pT+r,s=-o,l=a;e.moveTo(n,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(Mo*n-To*i,To*n+Mo*i),e.lineTo(Mo*o-To*a,To*o+Mo*a),e.lineTo(Mo*s-To*l,To*s+Mo*l),e.lineTo(Mo*n+To*i,Mo*i-To*n),e.lineTo(Mo*o+To*a,Mo*a-To*o),e.lineTo(Mo*s+To*l,Mo*l-To*s),e.closePath()}};function Zue(e,t){let r=null,n=GS(i);e=typeof e=="function"?e:Fr(e||KS),t=typeof t=="function"?t:Fr(t===void 0?64:+t);function i(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:Fr(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:Fr(+o),i):t},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function Iv(){}function Dv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function pH(e){this._context=e}pH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jue(e){return new pH(e)}function hH(e){this._context=e}hH.prototype={areaStart:Iv,areaEnd:Iv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Dv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ece(e){return new hH(e)}function mH(e){this._context=e}mH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Dv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tce(e){return new mH(e)}function gH(e){this._context=e}gH.prototype={areaStart:Iv,areaEnd:Iv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rce(e){return new gH(e)}function qN(e){return e<0?-1:1}function XN(e,t,r){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),s=(o*i+a*n)/(n+i);return(qN(o)+qN(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function QN(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function a1(e,t,r){var n=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,i+s*t,o-s,a-s*r,o,a)}function jv(e){this._context=e}jv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a1(this,this._t0,QN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a1(this,QN(this,r=XN(this,e,t)),r);break;default:a1(this,this._t0,r=XN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function _H(e){this._context=new vH(e)}(_H.prototype=Object.create(jv.prototype)).point=function(e,t){jv.prototype.point.call(this,t,e)};function vH(e){this._context=e}vH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,o){this._context.bezierCurveTo(t,e,n,r,o,i)}};function nce(e){return new jv(e)}function ice(e){return new _H(e)}function yH(e){this._context=e}yH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=YN(e),i=YN(t),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YN(e){var t,r=e.length-1,n,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function oce(e){return new yH(e)}function P0(e,t){this._context=e,this._t=t}P0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ace(e){return new P0(e,.5)}function sce(e){return new P0(e,0)}function lce(e){return new P0(e,1)}function Cd(e,t){if((a=e.length)>1)for(var r=1,n,i,o=e[t[0]],a,s=o.length;r<a;++r)for(i=o,o=e[t[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function hT(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function uce(e,t){return e[t]}function cce(e){const t=[];return t.key=e,t}function dce(){var e=Fr([]),t=hT,r=Cd,n=uce;function i(o){var a=Array.from(e.apply(this,arguments),cce),s,l=a.length,u=-1,d;for(const c of o)for(s=0,++u;s<l;++s)(a[s][u]=[0,+n(c,a[s].key,u,o)]).data=c;for(s=0,d=HS(t(a));s<l;++s)a[d[s]].index=s;return r(a,d),a}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:Fr(Array.from(o)),i):e},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:Fr(+o),i):n},i.order=function(o){return arguments.length?(t=o==null?hT:typeof o=="function"?o:Fr(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(r=o??Cd,i):r},i}function fce(e,t){if((n=e.length)>0){for(var r,n,i=0,o=e[0].length,a;i<o;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}Cd(e,t)}}function pce(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,o=n.length;r<o;++r){for(var a=0,s=0;a<i;++a)s+=e[a][r][1]||0;n[r][1]+=n[r][0]=-s/2}Cd(e,t)}}function hce(e,t){if(!(!((a=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,o,a;n<o;++n){for(var s=0,l=0,u=0;s<a;++s){for(var d=e[t[s]],c=d[n][1]||0,f=d[n-1][1]||0,p=(c-f)/2,h=0;h<s;++h){var m=e[t[h]],v=m[n][1]||0,g=m[n-1][1]||0;p+=v-g}l+=c,u+=p*c}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,Cd(e,t)}}function Ph(e){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(e)}var mce=["type","size","sizeType"];function mT(){return mT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mT.apply(this,arguments)}function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(n){gce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gce(e,t,r){return t=_ce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ce(e){var t=vce(e,"string");return Ph(t)=="symbol"?t:t+""}function vce(e,t){if(Ph(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yce(e,t){if(e==null)return{};var r=bce(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var bH={symbolCircle:KS,symbolCross:Bue,symbolDiamond:Wue,symbolSquare:Vue,symbolStar:que,symbolTriangle:Xue,symbolWye:Yue},wce=Math.PI/180,xce=function(t){var r="symbol".concat(x0(t));return bH[r]||KS},Mce=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*wce;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Tce=function(t,r){bH["symbol".concat(x0(t))]=r},qS=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,o=i===void 0?64:i,a=t.sizeType,s=a===void 0?"area":a,l=yce(t,mce),u=JN(JN({},l),{},{type:n,size:o,sizeType:s}),d=function(){var v=xce(n),g=Zue().type(v).size(Mce(o,s,n));return g()},c=u.className,f=u.cx,p=u.cy,h=Ot(u,!0);return f===+f&&p===+p&&o===+o?ie.createElement("path",mT({},h,{className:Kt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(p,")"),d:d()})):null};qS.registerSymbol=Tce;function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gT.apply(this,arguments)}function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(n){Eh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ece(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xH(n.key),n)}}function Cce(e,t,r){return t&&Sce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ce(e,t,r){return t=Fv(t),Ace(e,wH()?Reflect.construct(t,r||[],Fv(e).constructor):t.apply(e,r))}function Ace(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oce(e)}function Oce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wH=function(){return!!e})()}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fv(e)}function kce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_T(e,t)}function _T(e,t){return _T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_T(e,t)}function Eh(e,t,r){return t=xH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=Ice(e,"string");return $d(t)=="symbol"?t:t+""}function Ice(e,t){if($d(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Po=32,XS=function(e){function t(){return Ece(this,t),$ce(this,t,arguments)}return kce(t,e),Cce(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,o=Po/2,a=Po/6,s=Po/3,l=n.inactive?i:n.color;if(n.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Po,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Po,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return ie.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Po/8,"h").concat(Po,"v").concat(Po*3/4,"h").concat(-Po,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(n.legendIcon)){var u=Pce({},n);return delete u.legendIcon,ie.cloneElement(n.legendIcon,u)}return ie.createElement(qS,{fill:l,cx:o,cy:o,size:Po,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Po,height:Po},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,h){var m=p.formatter||l,v=Kt(Eh(Eh({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",p.inactive));if(p.type==="none")return null;var g=Rt(p.value)?null:p.value;va(!Rt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=p.inactive?u:p.color;return ie.createElement("li",gT({className:v,style:c,key:"legend-item-".concat(h)},Vu(n.props,p,h)),ie.createElement(sT,{width:a,height:a,viewBox:d,style:f},n.renderIcon(p)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},m?m(g,p,h):g))})}},{key:"render",value:function(){var n=this.props,i=n.payload,o=n.layout,a=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(N.PureComponent);Eh(XS,"displayName","Legend");Eh(XS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dce=u0;function jce(){this.__data__=new Dce,this.size=0}var Fce=jce;function Lce(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Nce=Lce;function Rce(e){return this.__data__.get(e)}var zce=Rce;function Bce(e){return this.__data__.has(e)}var Uce=Bce,Wce=u0,Vce=FS,Gce=LS,Hce=200;function Kce(e,t){var r=this.__data__;if(r instanceof Wce){var n=r.__data__;if(!Vce||n.length<Hce-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gce(n)}return r.set(e,t),this.size=r.size,this}var qce=Kce,Xce=u0,Qce=Fce,Yce=Nce,Zce=zce,Jce=Uce,ede=qce;function pf(e){var t=this.__data__=new Xce(e);this.size=t.size}pf.prototype.clear=Qce;pf.prototype.delete=Yce;pf.prototype.get=Zce;pf.prototype.has=Jce;pf.prototype.set=ede;var MH=pf,tde="__lodash_hash_undefined__";function rde(e){return this.__data__.set(e,tde),this}var nde=rde;function ide(e){return this.__data__.has(e)}var ode=ide,ade=LS,sde=nde,lde=ode;function Lv(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ade;++t<r;)this.add(e[t])}Lv.prototype.add=Lv.prototype.push=sde;Lv.prototype.has=lde;var TH=Lv;function ude(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var PH=ude;function cde(e,t){return e.has(t)}var EH=cde,dde=TH,fde=PH,pde=EH,hde=1,mde=2;function gde(e,t,r,n,i,o){var a=r&hde,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var c=-1,f=!0,p=r&mde?new dde:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var h=e[c],m=t[c];if(n)var v=a?n(m,h,c,t,e,o):n(h,m,c,e,t,o);if(v!==void 0){if(v)continue;f=!1;break}if(p){if(!fde(t,function(g,_){if(!pde(p,_)&&(h===g||i(h,g,r,n,o)))return p.push(_)})){f=!1;break}}else if(!(h===m||i(h,m,r,n,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var SH=gde,_de=Ya,vde=_de.Uint8Array,yde=vde;function bde(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var wde=bde;function xde(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var QS=xde,t3=vm,r3=yde,Mde=jS,Tde=SH,Pde=wde,Ede=QS,Sde=1,Cde=2,$de="[object Boolean]",Ade="[object Date]",Ode="[object Error]",kde="[object Map]",Ide="[object Number]",Dde="[object RegExp]",jde="[object Set]",Fde="[object String]",Lde="[object Symbol]",Nde="[object ArrayBuffer]",Rde="[object DataView]",n3=t3?t3.prototype:void 0,s1=n3?n3.valueOf:void 0;function zde(e,t,r,n,i,o,a){switch(r){case Rde:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nde:return!(e.byteLength!=t.byteLength||!o(new r3(e),new r3(t)));case $de:case Ade:case Ide:return Mde(+e,+t);case Ode:return e.name==t.name&&e.message==t.message;case Dde:case Fde:return e==t+"";case kde:var s=Pde;case jde:var l=n&Sde;if(s||(s=Ede),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;n|=Cde,a.set(e,t);var d=Tde(s(e),s(t),n,i,o,a);return a.delete(e),d;case Lde:if(s1)return s1.call(e)==s1.call(t)}return!1}var Bde=zde;function Ude(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var CH=Ude,Wde=CH,Vde=Qi;function Gde(e,t,r){var n=t(e);return Vde(e)?n:Wde(n,r(e))}var Hde=Gde;function Kde(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var qde=Kde;function Xde(){return[]}var Qde=Xde,Yde=qde,Zde=Qde,Jde=Object.prototype,efe=Jde.propertyIsEnumerable,i3=Object.getOwnPropertySymbols,tfe=i3?function(e){return e==null?[]:(e=Object(e),Yde(i3(e),function(t){return efe.call(e,t)}))}:Zde,rfe=tfe;function nfe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var ife=nfe,ofe=js,afe=Fs,sfe="[object Arguments]";function lfe(e){return afe(e)&&ofe(e)==sfe}var ufe=lfe,o3=ufe,cfe=Fs,$H=Object.prototype,dfe=$H.hasOwnProperty,ffe=$H.propertyIsEnumerable,pfe=o3(function(){return arguments}())?o3:function(e){return cfe(e)&&dfe.call(e,"callee")&&!ffe.call(e,"callee")},YS=pfe,Nv={exports:{}};function hfe(){return!1}var mfe=hfe;Nv.exports;(function(e,t){var r=Ya,n=mfe,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;e.exports=u})(Nv,Nv.exports);var AH=Nv.exports,gfe=9007199254740991,_fe=/^(?:0|[1-9]\d*)$/;function vfe(e,t){var r=typeof e;return t=t??gfe,!!t&&(r=="number"||r!="symbol"&&_fe.test(e))&&e>-1&&e%1==0&&e<t}var ZS=vfe,yfe=9007199254740991;function bfe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yfe}var JS=bfe,wfe=js,xfe=JS,Mfe=Fs,Tfe="[object Arguments]",Pfe="[object Array]",Efe="[object Boolean]",Sfe="[object Date]",Cfe="[object Error]",$fe="[object Function]",Afe="[object Map]",Ofe="[object Number]",kfe="[object Object]",Ife="[object RegExp]",Dfe="[object Set]",jfe="[object String]",Ffe="[object WeakMap]",Lfe="[object ArrayBuffer]",Nfe="[object DataView]",Rfe="[object Float32Array]",zfe="[object Float64Array]",Bfe="[object Int8Array]",Ufe="[object Int16Array]",Wfe="[object Int32Array]",Vfe="[object Uint8Array]",Gfe="[object Uint8ClampedArray]",Hfe="[object Uint16Array]",Kfe="[object Uint32Array]",Gr={};Gr[Rfe]=Gr[zfe]=Gr[Bfe]=Gr[Ufe]=Gr[Wfe]=Gr[Vfe]=Gr[Gfe]=Gr[Hfe]=Gr[Kfe]=!0;Gr[Tfe]=Gr[Pfe]=Gr[Lfe]=Gr[Efe]=Gr[Nfe]=Gr[Sfe]=Gr[Cfe]=Gr[$fe]=Gr[Afe]=Gr[Ofe]=Gr[kfe]=Gr[Ife]=Gr[Dfe]=Gr[jfe]=Gr[Ffe]=!1;function qfe(e){return Mfe(e)&&xfe(e.length)&&!!Gr[wfe(e)]}var Xfe=qfe;function Qfe(e){return function(t){return e(t)}}var OH=Qfe,Rv={exports:{}};Rv.exports;(function(e,t){var r=RG,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s})(Rv,Rv.exports);var Yfe=Rv.exports,Zfe=Xfe,Jfe=OH,a3=Yfe,s3=a3&&a3.isTypedArray,epe=s3?Jfe(s3):Zfe,kH=epe,tpe=ife,rpe=YS,npe=Qi,ipe=AH,ope=ZS,ape=kH,spe=Object.prototype,lpe=spe.hasOwnProperty;function upe(e,t){var r=npe(e),n=!r&&rpe(e),i=!r&&!n&&ipe(e),o=!r&&!n&&!i&&ape(e),a=r||n||i||o,s=a?tpe(e.length,String):[],l=s.length;for(var u in e)(t||lpe.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ope(u,l)))&&s.push(u);return s}var cpe=upe,dpe=Object.prototype;function fpe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dpe;return e===r}var ppe=fpe;function hpe(e,t){return function(r){return e(t(r))}}var IH=hpe,mpe=IH,gpe=mpe(Object.keys,Object),_pe=gpe,vpe=ppe,ype=_pe,bpe=Object.prototype,wpe=bpe.hasOwnProperty;function xpe(e){if(!vpe(e))return ype(e);var t=[];for(var r in Object(e))wpe.call(e,r)&&r!="constructor"&&t.push(r);return t}var Mpe=xpe,Tpe=DS,Ppe=JS;function Epe(e){return e!=null&&Ppe(e.length)&&!Tpe(e)}var bm=Epe,Spe=cpe,Cpe=Mpe,$pe=bm;function Ape(e){return $pe(e)?Spe(e):Cpe(e)}var E0=Ape,Ope=Hde,kpe=rfe,Ipe=E0;function Dpe(e){return Ope(e,Ipe,kpe)}var jpe=Dpe,l3=jpe,Fpe=1,Lpe=Object.prototype,Npe=Lpe.hasOwnProperty;function Rpe(e,t,r,n,i,o){var a=r&Fpe,s=l3(e),l=s.length,u=l3(t),d=u.length;if(l!=d&&!a)return!1;for(var c=l;c--;){var f=s[c];if(!(a?f in t:Npe.call(t,f)))return!1}var p=o.get(e),h=o.get(t);if(p&&h)return p==t&&h==e;var m=!0;o.set(e,t),o.set(t,e);for(var v=a;++c<l;){f=s[c];var g=e[f],_=t[f];if(n)var b=a?n(_,g,f,t,e,o):n(g,_,f,e,t,o);if(!(b===void 0?g===_||i(g,_,r,n,o):b)){m=!1;break}v||(v=f=="constructor")}if(m&&!v){var w=e.constructor,y=t.constructor;w!=y&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof y=="function"&&y instanceof y)&&(m=!1)}return o.delete(e),o.delete(t),m}var zpe=Rpe,Bpe=tc,Upe=Ya,Wpe=Bpe(Upe,"DataView"),Vpe=Wpe,Gpe=tc,Hpe=Ya,Kpe=Gpe(Hpe,"Promise"),qpe=Kpe,Xpe=tc,Qpe=Ya,Ype=Xpe(Qpe,"Set"),DH=Ype,Zpe=tc,Jpe=Ya,ehe=Zpe(Jpe,"WeakMap"),the=ehe,vT=Vpe,yT=FS,bT=qpe,wT=DH,xT=the,jH=js,hf=BG,u3="[object Map]",rhe="[object Object]",c3="[object Promise]",d3="[object Set]",f3="[object WeakMap]",p3="[object DataView]",nhe=hf(vT),ihe=hf(yT),ohe=hf(bT),ahe=hf(wT),she=hf(xT),du=jH;(vT&&du(new vT(new ArrayBuffer(1)))!=p3||yT&&du(new yT)!=u3||bT&&du(bT.resolve())!=c3||wT&&du(new wT)!=d3||xT&&du(new xT)!=f3)&&(du=function(e){var t=jH(e),r=t==rhe?e.constructor:void 0,n=r?hf(r):"";if(n)switch(n){case nhe:return p3;case ihe:return u3;case ohe:return c3;case ahe:return d3;case she:return f3}return t});var lhe=du,l1=MH,uhe=SH,che=Bde,dhe=zpe,h3=lhe,m3=Qi,g3=AH,fhe=kH,phe=1,_3="[object Arguments]",v3="[object Array]",l_="[object Object]",hhe=Object.prototype,y3=hhe.hasOwnProperty;function mhe(e,t,r,n,i,o){var a=m3(e),s=m3(t),l=a?v3:h3(e),u=s?v3:h3(t);l=l==_3?l_:l,u=u==_3?l_:u;var d=l==l_,c=u==l_,f=l==u;if(f&&g3(e)){if(!g3(t))return!1;a=!0,d=!1}if(f&&!d)return o||(o=new l1),a||fhe(e)?uhe(e,t,r,n,i,o):che(e,t,l,r,n,i,o);if(!(r&phe)){var p=d&&y3.call(e,"__wrapped__"),h=c&&y3.call(t,"__wrapped__");if(p||h){var m=p?e.value():e,v=h?t.value():t;return o||(o=new l1),i(m,v,r,n,o)}}return f?(o||(o=new l1),dhe(e,t,r,n,i,o)):!1}var ghe=mhe,_he=ghe,b3=Fs;function FH(e,t,r,n,i){return e===t?!0:e==null||t==null||!b3(e)&&!b3(t)?e!==e&&t!==t:_he(e,t,r,n,FH,i)}var eC=FH,vhe=MH,yhe=eC,bhe=1,whe=2;function xhe(e,t,r,n){var i=r.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var l=s[0],u=e[l],d=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var c=new vhe;if(n)var f=n(u,d,l,e,t,c);if(!(f===void 0?yhe(d,u,bhe|whe,n,c):f))return!1}}return!0}var Mhe=xhe,The=Il;function Phe(e){return e===e&&!The(e)}var LH=Phe,Ehe=LH,She=E0;function Che(e){for(var t=She(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ehe(i)]}return t}var $he=Che;function Ahe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var NH=Ahe,Ohe=Mhe,khe=$he,Ihe=NH;function Dhe(e){var t=khe(e);return t.length==1&&t[0][2]?Ihe(t[0][0],t[0][1]):function(r){return r===e||Ohe(r,e,t)}}var jhe=Dhe;function Fhe(e,t){return e!=null&&t in Object(e)}var Lhe=Fhe,Nhe=HG,Rhe=YS,zhe=Qi,Bhe=ZS,Uhe=JS,Whe=d0;function Vhe(e,t,r){t=Nhe(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=Whe(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&Uhe(i)&&Bhe(a,i)&&(zhe(e)||Rhe(e)))}var Ghe=Vhe,Hhe=Lhe,Khe=Ghe;function qhe(e,t){return e!=null&&Khe(e,t,Hhe)}var Xhe=qhe,Qhe=eC,Yhe=KG,Zhe=Xhe,Jhe=IS,eme=LH,tme=NH,rme=d0,nme=1,ime=2;function ome(e,t){return Jhe(e)&&eme(t)?tme(rme(e),t):function(r){var n=Yhe(r,e);return n===void 0&&n===t?Zhe(r,e):Qhe(t,n,nme|ime)}}var ame=ome;function sme(e){return e}var mf=sme;function lme(e){return function(t){return t==null?void 0:t[e]}}var ume=lme,cme=zS;function dme(e){return function(t){return cme(t,e)}}var fme=dme,pme=ume,hme=fme,mme=IS,gme=d0;function _me(e){return mme(e)?pme(gme(e)):hme(e)}var vme=_me,yme=jhe,bme=ame,wme=mf,xme=Qi,Mme=vme;function Tme(e){return typeof e=="function"?e:e==null?wme:typeof e=="object"?xme(e)?bme(e[0],e[1]):yme(e):Mme(e)}var Za=Tme;function Pme(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var RH=Pme;function Eme(e){return e!==e}var Sme=Eme;function Cme(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var $me=Cme,Ame=RH,Ome=Sme,kme=$me;function Ime(e,t,r){return t===t?kme(e,t,r):Ame(e,Ome,r)}var Dme=Ime,jme=Dme;function Fme(e,t){var r=e==null?0:e.length;return!!r&&jme(e,t,0)>-1}var Lme=Fme;function Nme(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Rme=Nme;function zme(){}var Bme=zme,u1=DH,Ume=Bme,Wme=QS,Vme=1/0,Gme=u1&&1/Wme(new u1([,-0]))[1]==Vme?function(e){return new u1(e)}:Ume,Hme=Gme,Kme=TH,qme=Lme,Xme=Rme,Qme=EH,Yme=Hme,Zme=QS,Jme=200;function ege(e,t,r){var n=-1,i=qme,o=e.length,a=!0,s=[],l=s;if(r)a=!1,i=Xme;else if(o>=Jme){var u=t?null:Yme(e);if(u)return Zme(u);a=!1,i=Qme,l=new Kme}else l=t?[]:s;e:for(;++n<o;){var d=e[n],c=t?t(d):d;if(d=r||d!==0?d:0,a&&c===c){for(var f=l.length;f--;)if(l[f]===c)continue e;t&&l.push(c),s.push(d)}else i(l,c,r)||(l!==s&&l.push(c),s.push(d))}return s}var tge=ege,rge=Za,nge=tge;function ige(e,t){return e&&e.length?nge(e,rge(t)):[]}var oge=ige;const w3=xr(oge);function zH(e,t,r){return t===!0?w3(e,r):Rt(t)?w3(e,t):e}function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}var age=["ref"];function x3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x3(Object(r),!0).forEach(function(n){S0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UH(n.key),n)}}function lge(e,t,r){return t&&M3(e.prototype,t),r&&M3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e,t,r){return t=zv(t),cge(e,BH()?Reflect.construct(t,r||[],zv(e).constructor):t.apply(e,r))}function cge(e,t){if(t&&(Ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dge(e)}function dge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BH=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zv(e)}function fge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MT(e,t)}function MT(e,t){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MT(e,t)}function S0(e,t,r){return t=UH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=pge(e,"string");return Ad(t)=="symbol"?t:t+""}function pge(e,t){if(Ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hge(e,t){if(e==null)return{};var r=mge(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gge(e){return e.value}function _ge(e,t){if(ie.isValidElement(e))return ie.cloneElement(e,t);if(typeof e=="function")return ie.createElement(e,t);t.ref;var r=hge(t,age);return ie.createElement(XS,r)}var T3=1,od=function(e){function t(){var r;sge(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=uge(this,t,[].concat(i)),S0(r,"lastBoundingBox",{width:-1,height:-1}),r}return fge(t,e),lge(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>T3||Math.abs(i.height-this.lastBoundingBox.height)>T3)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ss({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,c,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();c={left:((u||0)-p.width)/2}}else c=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var h=this.getBBoxSnapshot();f={top:((d||0)-h.height)/2}}else f=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ss(ss({},c),f)}},{key:"render",value:function(){var n=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,c=ss(ss({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return ie.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(p){n.wrapperNode=p}},_ge(o,ss(ss({},this.props),{},{payload:zH(d,u,gge)})))}}],[{key:"getWithHeight",value:function(n,i){var o=ss(ss({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&tt(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(N.PureComponent);S0(od,"displayName","Legend");S0(od,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P3=vm,vge=YS,yge=Qi,E3=P3?P3.isConcatSpreadable:void 0;function bge(e){return yge(e)||vge(e)||!!(E3&&e&&e[E3])}var wge=bge,xge=CH,Mge=wge;function WH(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=Mge),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?WH(s,t-1,r,n,i):xge(i,s):n||(i[i.length]=s)}return i}var VH=WH;function Tge(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(r(o[l],l,o)===!1)break}return t}}var Pge=Tge,Ege=Pge,Sge=Ege(),Cge=Sge,$ge=Cge,Age=E0;function Oge(e,t){return e&&$ge(e,t,Age)}var GH=Oge,kge=bm;function Ige(e,t){return function(r,n){if(r==null)return r;if(!kge(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var Dge=Ige,jge=GH,Fge=Dge,Lge=Fge(jge),tC=Lge,Nge=tC,Rge=bm;function zge(e,t){var r=-1,n=Rge(e)?Array(e.length):[];return Nge(e,function(i,o,a){n[++r]=t(i,o,a)}),n}var HH=zge;function Bge(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Uge=Bge,S3=sf;function Wge(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,o=S3(e),a=t!==void 0,s=t===null,l=t===t,u=S3(t);if(!s&&!u&&!o&&e>t||o&&a&&l&&!s&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&e<t||u&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!l)return-1}return 0}var Vge=Wge,Gge=Vge;function Hge(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var l=Gge(i[n],o[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}var Kge=Hge,c1=RS,qge=zS,Xge=Za,Qge=HH,Yge=Uge,Zge=OH,Jge=Kge,e_e=mf,t_e=Qi;function r_e(e,t,r){t.length?t=c1(t,function(o){return t_e(o)?function(a){return qge(a,o.length===1?o[0]:o)}:o}):t=[e_e];var n=-1;t=c1(t,Zge(Xge));var i=Qge(e,function(o,a,s){var l=c1(t,function(u){return u(o)});return{criteria:l,index:++n,value:o}});return Yge(i,function(o,a){return Jge(o,a,r)})}var n_e=r_e;function i_e(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var o_e=i_e,a_e=o_e,C3=Math.max;function s_e(e,t,r){return t=C3(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=C3(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),a_e(e,this,s)}}var l_e=s_e;function u_e(e){return function(){return e}}var c_e=u_e,d_e=tc,f_e=function(){try{var e=d_e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),KH=f_e,p_e=c_e,$3=KH,h_e=mf,m_e=$3?function(e,t){return $3(e,"toString",{configurable:!0,enumerable:!1,value:p_e(t),writable:!0})}:h_e,g_e=m_e,__e=800,v_e=16,y_e=Date.now;function b_e(e){var t=0,r=0;return function(){var n=y_e(),i=v_e-(n-r);if(r=n,i>0){if(++t>=__e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var w_e=b_e,x_e=g_e,M_e=w_e,T_e=M_e(x_e),P_e=T_e,E_e=mf,S_e=l_e,C_e=P_e;function $_e(e,t){return C_e(S_e(e,t,E_e),e+"")}var A_e=$_e,O_e=jS,k_e=bm,I_e=ZS,D_e=Il;function j_e(e,t,r){if(!D_e(r))return!1;var n=typeof t;return(n=="number"?k_e(r)&&I_e(t,r.length):n=="string"&&t in r)?O_e(r[t],e):!1}var C0=j_e,F_e=VH,L_e=n_e,N_e=A_e,A3=C0,R_e=N_e(function(e,t){if(e==null)return[];var r=t.length;return r>1&&A3(e,t[0],t[1])?t=[]:r>2&&A3(t[0],t[1],t[2])&&(t=[t[0]]),L_e(e,F_e(t,1),[])}),z_e=R_e;const rC=xr(z_e);function Sh(e){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sh(e)}function TT(){return TT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TT.apply(this,arguments)}function B_e(e,t){return G_e(e)||V_e(e,t)||W_e(e,t)||U_e()}function U_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W_e(e,t){if(e){if(typeof e=="string")return O3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O3(e,t)}}function O3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function G_e(e){if(Array.isArray(e))return e}function k3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k3(Object(r),!0).forEach(function(n){H_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H_e(e,t,r){return t=K_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_e(e){var t=q_e(e,"string");return Sh(t)=="symbol"?t:t+""}function q_e(e,t){if(Sh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X_e(e){return Array.isArray(e)&&Wn(e[0])&&Wn(e[1])?e.join(" ~ "):e}var Q_e=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,o=i===void 0?{}:i,a=t.itemStyle,s=a===void 0?{}:a,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,c=t.formatter,f=t.itemSorter,p=t.wrapperClassName,h=t.labelClassName,m=t.label,v=t.labelFormatter,g=t.accessibilityLayer,_=g===void 0?!1:g,b=function(){if(d&&d.length){var F={padding:0,margin:0},j=(f?rC(d,f):d).map(function(U,z){if(U.type==="none")return null;var G=d1({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},s),H=U.formatter||c||X_e,W=U.value,Y=U.name,te=W,V=Y;if(H&&te!=null&&V!=null){var I=H(W,Y,U,z,d);if(Array.isArray(I)){var K=B_e(I,2);te=K[0],V=K[1]}else te=I}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:G},Wn(V)?ie.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Wn(V)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},te),ie.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:F},j)}return null},w=d1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),y=d1({margin:0},u),x=!Vt(m),M=x?m:"",T=Kt("recharts-default-tooltip",p),S=Kt("recharts-tooltip-label",h);x&&v&&d!==void 0&&d!==null&&(M=v(m,d));var $=_?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",TT({className:T,style:w},$),ie.createElement("p",{className:S,style:y},ie.isValidElement(M)?M:"".concat(M)),b())};function Ch(e){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}function u_(e,t,r){return t=Y_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y_e(e){var t=Z_e(e,"string");return Ch(t)=="symbol"?t:t+""}function Z_e(e,t){if(Ch(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mp="recharts-tooltip-wrapper",J_e={visibility:"hidden"};function eve(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Kt(mp,u_(u_(u_(u_({},"".concat(mp,"-right"),tt(r)&&t&&tt(t.x)&&r>=t.x),"".concat(mp,"-left"),tt(r)&&t&&tt(t.x)&&r<t.x),"".concat(mp,"-bottom"),tt(n)&&t&&tt(t.y)&&n>=t.y),"".concat(mp,"-top"),tt(n)&&t&&tt(t.y)&&n<t.y))}function I3(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,o=e.position,a=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(o&&tt(o[n]))return o[n];var d=r[n]-s-i,c=r[n]+i;if(t[n])return a[n]?d:c;if(a[n]){var f=d,p=l[n];return f<p?Math.max(c,l[n]):Math.max(d,l[n])}var h=c+s,m=l[n]+u;return h>m?Math.max(d,l[n]):Math.max(c,l[n])}function tve(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function rve(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,o=e.reverseDirection,a=e.tooltipBox,s=e.useTranslate3d,l=e.viewBox,u,d,c;return a.height>0&&a.width>0&&r?(d=I3({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),c=I3({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=tve({translateX:d,translateY:c,useTranslate3d:s})):u=J_e,{cssProperties:u,cssClasses:eve({translateX:d,translateY:c,coordinate:r})}}function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function D3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function j3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D3(Object(r),!0).forEach(function(n){ET(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ive(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XH(n.key),n)}}function ove(e,t,r){return t&&ive(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ave(e,t,r){return t=Bv(t),sve(e,qH()?Reflect.construct(t,r||[],Bv(e).constructor):t.apply(e,r))}function sve(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lve(e)}function lve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qH=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bv(e)}function uve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PT(e,t)}function PT(e,t){return PT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PT(e,t)}function ET(e,t,r){return t=XH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(e){var t=cve(e,"string");return Od(t)=="symbol"?t:t+""}function cve(e,t){if(Od(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var F3=1,dve=function(e){function t(){var r;nve(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=ave(this,t,[].concat(i)),ET(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ET(r,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return uve(t,e),ove(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>F3||Math.abs(n.height-this.state.lastBoundingBox.height)>F3)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,c=i.hasPayload,f=i.isAnimationActive,p=i.offset,h=i.position,m=i.reverseDirection,v=i.useTranslate3d,g=i.viewBox,_=i.wrapperStyle,b=rve({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:p,position:h,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:g}),w=b.cssClasses,y=b.cssProperties,x=j3(j3({transition:f&&o?"transform ".concat(s,"ms ").concat(l):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&c?"visible":"hidden",position:"absolute",top:0,left:0},_);return ie.createElement("div",{tabIndex:-1,className:w,style:x,ref:function(T){n.wrapperNode=T}},u)}}])}(N.PureComponent),fve=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},rc={isSsr:fve()};function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function L3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function N3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(r),!0).forEach(function(n){nC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YH(n.key),n)}}function mve(e,t,r){return t&&hve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gve(e,t,r){return t=Uv(t),_ve(e,QH()?Reflect.construct(t,r||[],Uv(e).constructor):t.apply(e,r))}function _ve(e,t){if(t&&(kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vve(e)}function vve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QH=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uv(e)}function yve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ST(e,t)}function ST(e,t){return ST=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ST(e,t)}function nC(e,t,r){return t=YH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YH(e){var t=bve(e,"string");return kd(t)=="symbol"?t:t+""}function bve(e,t){if(kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function wve(e){return e.dataKey}function xve(e,t){return ie.isValidElement(e)?ie.cloneElement(e,t):typeof e=="function"?ie.createElement(e,t):ie.createElement(Q_e,t)}var Co=function(e){function t(){return pve(this,t),gve(this,t,arguments)}return yve(t,e),mve(t,[{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,c=i.filterNull,f=i.isAnimationActive,p=i.offset,h=i.payload,m=i.payloadUniqBy,v=i.position,g=i.reverseDirection,_=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,y=h??[];c&&y.length&&(y=zH(h.filter(function(M){return M.value!=null&&(M.hide!==!0||n.props.includeHidden)}),m,wve));var x=y.length>0;return ie.createElement(dve,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:f,active:o,coordinate:d,hasPayload:x,offset:p,position:v,reverseDirection:g,useTranslate3d:_,viewBox:b,wrapperStyle:w},xve(u,N3(N3({},this.props),{},{payload:y})))}}])}(N.PureComponent);nC(Co,"displayName","Tooltip");nC(Co,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Mve=Ya,Tve=function(){return Mve.Date.now()},Pve=Tve,Eve=/\s/;function Sve(e){for(var t=e.length;t--&&Eve.test(e.charAt(t)););return t}var Cve=Sve,$ve=Cve,Ave=/^\s+/;function Ove(e){return e&&e.slice(0,$ve(e)+1).replace(Ave,"")}var kve=Ove,Ive=kve,R3=Il,Dve=sf,z3=NaN,jve=/^[-+]0x[0-9a-f]+$/i,Fve=/^0b[01]+$/i,Lve=/^0o[0-7]+$/i,Nve=parseInt;function Rve(e){if(typeof e=="number")return e;if(Dve(e))return z3;if(R3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=R3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ive(e);var r=Fve.test(e);return r||Lve.test(e)?Nve(e.slice(2),r?2:8):jve.test(e)?z3:+e}var ZH=Rve,zve=Il,f1=Pve,B3=ZH,Bve="Expected a function",Uve=Math.max,Wve=Math.min;function Vve(e,t,r){var n,i,o,a,s,l,u=0,d=!1,c=!1,f=!0;if(typeof e!="function")throw new TypeError(Bve);t=B3(t)||0,zve(r)&&(d=!!r.leading,c="maxWait"in r,o=c?Uve(B3(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f);function p(x){var M=n,T=i;return n=i=void 0,u=x,a=e.apply(T,M),a}function h(x){return u=x,s=setTimeout(g,t),d?p(x):a}function m(x){var M=x-l,T=x-u,S=t-M;return c?Wve(S,o-T):S}function v(x){var M=x-l,T=x-u;return l===void 0||M>=t||M<0||c&&T>=o}function g(){var x=f1();if(v(x))return _(x);s=setTimeout(g,m(x))}function _(x){return s=void 0,f&&n?p(x):(n=i=void 0,a)}function b(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function w(){return s===void 0?a:_(f1())}function y(){var x=f1(),M=v(x);if(n=arguments,i=this,l=x,M){if(s===void 0)return h(l);if(c)return clearTimeout(s),s=setTimeout(g,t),p(l)}return s===void 0&&(s=setTimeout(g,t)),a}return y.cancel=b,y.flush=w,y}var Gve=Vve,Hve=Gve,Kve=Il,qve="Expected a function";function Xve(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(qve);return Kve(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Hve(e,t,{leading:n,maxWait:t,trailing:i})}var Qve=Xve;const JH=xr(Qve);function $h(e){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}function U3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function c_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U3(Object(r),!0).forEach(function(n){Yve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yve(e,t,r){return t=Zve(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zve(e){var t=Jve(e,"string");return $h(t)=="symbol"?t:t+""}function Jve(e,t){if($h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eye(e,t){return iye(e)||nye(e,t)||rye(e,t)||tye()}function tye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rye(e,t){if(e){if(typeof e=="string")return W3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W3(e,t)}}function W3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function iye(e){if(Array.isArray(e))return e}var Hp=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=e.width,a=o===void 0?"100%":o,s=e.height,l=s===void 0?"100%":s,u=e.minWidth,d=u===void 0?0:u,c=e.minHeight,f=e.maxHeight,p=e.children,h=e.debounce,m=h===void 0?0:h,v=e.id,g=e.className,_=e.onResize,b=e.style,w=b===void 0?{}:b,y=N.useRef(null),x=N.useRef();x.current=_,N.useImperativeHandle(t,function(){return Object.defineProperty(y.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),y.current},configurable:!0})});var M=N.useState({containerWidth:i.width,containerHeight:i.height}),T=eye(M,2),S=T[0],$=T[1],k=N.useCallback(function(j,U){$(function(z){var G=Math.round(j),H=Math.round(U);return z.containerWidth===G&&z.containerHeight===H?z:{containerWidth:G,containerHeight:H}})},[]);N.useEffect(function(){var j=function(Y){var te,V=Y[0].contentRect,I=V.width,K=V.height;k(I,K),(te=x.current)===null||te===void 0||te.call(x,I,K)};m>0&&(j=JH(j,m,{trailing:!0,leading:!1}));var U=new ResizeObserver(j),z=y.current.getBoundingClientRect(),G=z.width,H=z.height;return k(G,H),U.observe(y.current),function(){U.disconnect()}},[k,m]);var F=N.useMemo(function(){var j=S.containerWidth,U=S.containerHeight;if(j<0||U<0)return null;va(bu(a)||bu(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),va(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=bu(a)?j:a,G=bu(l)?U:l;r&&r>0&&(z?G=z/r:G&&(z=G*r),f&&G>f&&(G=f)),va(z>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,G,a,l,d,c,r);var H=!Array.isArray(p)&&bs(p.type).endsWith("Chart");return ie.Children.map(p,function(W){return ie.isValidElement(W)?N.cloneElement(W,c_({width:z,height:G},H?{style:c_({height:"100%",width:"100%",maxHeight:G,maxWidth:z},W.props.style)}:{})):W})},[r,p,l,f,c,d,S,a]);return ie.createElement("div",{id:v?"".concat(v):void 0,className:Kt("recharts-responsive-container",g),style:c_(c_({},w),{},{width:a,height:l,minWidth:d,minHeight:c,maxHeight:f}),ref:y},F)}),wm=function(t){return null};wm.displayName="Cell";function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){oye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oye(e,t,r){return t=aye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aye(e){var t=sye(e,"string");return Ah(t)=="symbol"?t:t+""}function sye(e,t){if(Ah(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ah(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mc={widthCache:{},cacheCount:0},lye=2e3,uye={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},G3="recharts_measurement_span";function cye(e){var t=CT({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Kp=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||rc.isSsr)return{width:0,height:0};var n=cye(r),i=JSON.stringify({text:t,copyStyle:n});if(Mc.widthCache[i])return Mc.widthCache[i];try{var o=document.getElementById(G3);o||(o=document.createElement("span"),o.setAttribute("id",G3),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=CT(CT({},uye),n);Object.assign(o.style,a),o.textContent="".concat(t);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Mc.widthCache[i]=l,++Mc.cacheCount>lye&&(Mc.cacheCount=0,Mc.widthCache={}),l}catch{return{width:0,height:0}}},dye=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Oh(e){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}function Wv(e,t){return mye(e)||hye(e,t)||pye(e,t)||fye()}function fye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pye(e,t){if(e){if(typeof e=="string")return H3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H3(e,t)}}function H3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function mye(e){if(Array.isArray(e))return e}function gye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vye(n.key),n)}}function _ye(e,t,r){return t&&K3(e.prototype,t),r&&K3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vye(e){var t=yye(e,"string");return Oh(t)=="symbol"?t:t+""}function yye(e,t){if(Oh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var q3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,X3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bye=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wye=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,eK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xye=Object.keys(eK),Wc="NaN";function Mye(e,t){return e*eK[t]}var d_=function(){function e(t,r){gye(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!bye.test(r)&&(this.num=NaN,this.unit=""),xye.includes(r)&&(this.num=Mye(t,r),this.unit="px")}return _ye(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=wye.exec(r))!==null&&n!==void 0?n:[],o=Wv(i,3),a=o[1],s=o[2];return new e(parseFloat(a),s??"")}}])}();function tK(e){if(e.includes(Wc))return Wc;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=q3.exec(t))!==null&&r!==void 0?r:[],i=Wv(n,4),o=i[1],a=i[2],s=i[3],l=d_.parse(o??""),u=d_.parse(s??""),d=a==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Wc;t=t.replace(q3,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,f=(c=X3.exec(t))!==null&&c!==void 0?c:[],p=Wv(f,4),h=p[1],m=p[2],v=p[3],g=d_.parse(h??""),_=d_.parse(v??""),b=m==="+"?g.add(_):g.subtract(_);if(b.isNaN())return Wc;t=t.replace(X3,b.toString())}return t}var Q3=/\(([^()]*)\)/;function Tye(e){for(var t=e;t.includes("(");){var r=Q3.exec(t),n=Wv(r,2),i=n[1];t=t.replace(Q3,tK(i))}return t}function Pye(e){var t=e.replace(/\s+/g,"");return t=Tye(t),t=tK(t),t}function Eye(e){try{return Pye(e)}catch{return Wc}}function p1(e){var t=Eye(e.slice(5,-1));return t===Wc?"":t}var Sye=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cye=["dx","dy","angle","className","breakAll"];function $T(){return $T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$T.apply(this,arguments)}function Y3(e,t){if(e==null)return{};var r=$ye(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $ye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Z3(e,t){return Iye(e)||kye(e,t)||Oye(e,t)||Aye()}function Aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(e,t){if(e){if(typeof e=="string")return J3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J3(e,t)}}function J3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Iye(e){if(Array.isArray(e))return e}var rK=/[ \f\n\r\t\v\u2028\u2029]+/,nK=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var o=[];Vt(r)||(n?o=r.toString().split(""):o=r.toString().split(rK));var a=o.map(function(l){return{word:l,width:Kp(l,i).width}}),s=n?0:Kp(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},Dye=function(t,r,n,i,o){var a=t.maxLines,s=t.children,l=t.style,u=t.breakAll,d=tt(a),c=s,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(G,H){var W=H.word,Y=H.width,te=G[G.length-1];if(te&&(i==null||o||te.width+Y+n<Number(i)))te.words.push(W),te.width+=Y+n;else{var V={words:[W],width:Y};G.push(V)}return G},[])},p=f(r),h=function(z){return z.reduce(function(G,H){return G.width>H.width?G:H})};if(!d)return p;for(var m="…",v=function(z){var G=c.slice(0,z),H=nK({breakAll:u,style:l,children:G+m}).wordsWithComputedWidth,W=f(H),Y=W.length>a||h(W).width>Number(i);return[Y,W]},g=0,_=c.length-1,b=0,w;g<=_&&b<=c.length-1;){var y=Math.floor((g+_)/2),x=y-1,M=v(x),T=Z3(M,2),S=T[0],$=T[1],k=v(y),F=Z3(k,1),j=F[0];if(!S&&!j&&(g=y+1),S&&j&&(_=y-1),!S&&j){w=$;break}b++}return w||p},eR=function(t){var r=Vt(t)?[]:t.toString().split(rK);return[{words:r}]},jye=function(t){var r=t.width,n=t.scaleToFit,i=t.children,o=t.style,a=t.breakAll,s=t.maxLines;if((r||n)&&!rc.isSsr){var l,u,d=nK({breakAll:a,children:i,style:o});if(d){var c=d.wordsWithComputedWidth,f=d.spaceWidth;l=c,u=f}else return eR(i);return Dye({breakAll:a,children:i,maxLines:s,style:o},l,u,r,n)}return eR(i)},tR="#808080",Gu=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,a=t.lineHeight,s=a===void 0?"1em":a,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,c=d===void 0?!1:d,f=t.textAnchor,p=f===void 0?"start":f,h=t.verticalAnchor,m=h===void 0?"end":h,v=t.fill,g=v===void 0?tR:v,_=Y3(t,Sye),b=N.useMemo(function(){return jye({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:c,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,c,_.style,_.width]),w=_.dx,y=_.dy,x=_.angle,M=_.className,T=_.breakAll,S=Y3(_,Cye);if(!Wn(n)||!Wn(o))return null;var $=n+(tt(w)?w:0),k=o+(tt(y)?y:0),F;switch(m){case"start":F=p1("calc(".concat(u,")"));break;case"middle":F=p1("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:F=p1("calc(".concat(b.length-1," * -").concat(s,")"));break}var j=[];if(c){var U=b[0].width,z=_.width;j.push("scale(".concat((tt(z)?z/U:1)/U,")"))}return x&&j.push("rotate(".concat(x,", ").concat($,", ").concat(k,")")),j.length&&(S.transform=j.join(" ")),ie.createElement("text",$T({},Ot(S,!0),{x:$,y:k,className:Kt("recharts-text",M),textAnchor:p,fill:g.includes("url")?tR:g}),b.map(function(G,H){var W=G.words.join(T?"":" ");return ie.createElement("tspan",{x:$,dy:H===0?F:s,key:"".concat(W,"-").concat(H)},W)}))};function xl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fye(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iC(e){let t,r,n;e.length!==2?(t=xl,r=(s,l)=>xl(e(s),l),n=(s,l)=>e(s)-l):(t=e===xl||e===Fye?e:Lye,r=e,n=e);function i(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;r(s[c],l)<0?u=c+1:d=c}while(u<d)}return u}function o(s,l,u=0,d=s.length){if(u<d){if(t(l,l)!==0)return d;do{const c=u+d>>>1;r(s[c],l)<=0?u=c+1:d=c}while(u<d)}return u}function a(s,l,u=0,d=s.length){const c=i(s,l,u,d-1);return c>u&&n(s[c-1],l)>-n(s[c],l)?c-1:c}return{left:i,center:a,right:o}}function Lye(){return 0}function iK(e){return e===null?NaN:+e}function*Nye(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Rye=iC(xl),xm=Rye.right;iC(iK).center;class rR extends Map{constructor(t,r=Uye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(nR(this,t))}has(t){return super.has(nR(this,t))}set(t,r){return super.set(zye(this,t),r)}delete(t){return super.delete(Bye(this,t))}}function nR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function zye({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Bye({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Uye(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wye(e=xl){if(e===xl)return oK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Vye=Math.sqrt(50),Gye=Math.sqrt(10),Hye=Math.sqrt(2);function Vv(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=Vye?10:o>=Gye?5:o>=Hye?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=r&&r<2?Vv(e,t,r*2):[s,l,u]}function AT(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,o,a]=n?Vv(t,e,r):Vv(e,t,r);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(n)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function OT(e,t,r){return t=+t,e=+e,r=+r,Vv(e,t,r)[2]}function kT(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?OT(t,e,r):OT(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function iR(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function oR(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aK(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?oK:Wye(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),c=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*c*(l-c)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*c/l+f)),h=Math.min(n,Math.floor(t+(l-u)*c/l+f));aK(e,t,p,h,i)}const o=e[t];let a=r,s=n;for(gp(e,r,t),i(e[n],o)>0&&gp(e,r,n);a<s;){for(gp(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[r],o)===0?gp(e,r,s):(++s,gp(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function gp(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Kye(e,t,r){if(e=Float64Array.from(Nye(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return oR(e);if(t>=1)return iR(e);var n,i=(n-1)*t,o=Math.floor(i),a=iR(aK(e,o).subarray(0,o+1)),s=oR(e.subarray(o+1));return a+(s-a)*(i-o)}}function qye(e,t,r=iK){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),a=+r(e[o],o,e),s=+r(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function Xye(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function Uo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ls(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IT=Symbol("implicit");function oC(){var e=new rR,t=[],r=[],n=IT;function i(o){let a=e.get(o);if(a===void 0){if(n!==IT)return n;e.set(o,a=t.push(o)-1)}return r[a%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new rR;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return oC(t,r).unknown(n)},Uo.apply(i,arguments),i}function kh(){var e=oC().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,a,s=!1,l=0,u=0,d=.5;delete e.unknown;function c(){var f=t().length,p=i<n,h=p?i:n,m=p?n:i;o=(m-h)/Math.max(1,f-l+u*2),s&&(o=Math.floor(o)),h+=(m-h-o*(f-l))*d,a=o*(1-l),s&&(h=Math.round(h),a=Math.round(a));var v=Xye(f).map(function(g){return h+o*g});return r(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,c()):[n,i]},e.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,s=!0,c()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),c()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),c()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,c()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),c()):d},e.copy=function(){return kh(t(),[n,i]).round(s).paddingInner(l).paddingOuter(u).align(d)},Uo.apply(c(),arguments)}function sK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sK(t())},e}function qp(){return sK(kh.apply(null,arguments).paddingInner(1))}function aC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function lK(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Mm(){}var Ih=.7,Gv=1/Ih,ad="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qye=/^#([0-9a-f]{3,8})$/,Yye=new RegExp(`^rgb\\(${ad},${ad},${ad}\\)$`),Zye=new RegExp(`^rgb\\(${Ua},${Ua},${Ua}\\)$`),Jye=new RegExp(`^rgba\\(${ad},${ad},${ad},${Dh}\\)$`),e0e=new RegExp(`^rgba\\(${Ua},${Ua},${Ua},${Dh}\\)$`),t0e=new RegExp(`^hsl\\(${Dh},${Ua},${Ua}\\)$`),r0e=new RegExp(`^hsla\\(${Dh},${Ua},${Ua},${Dh}\\)$`),aR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aC(Mm,jh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sR,formatHex:sR,formatHex8:n0e,formatHsl:i0e,formatRgb:lR,toString:lR});function sR(){return this.rgb().formatHex()}function n0e(){return this.rgb().formatHex8()}function i0e(){return uK(this).formatHsl()}function lR(){return this.rgb().formatRgb()}function jh(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Qye.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?uR(t):r===3?new Gi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?f_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?f_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yye.exec(e))?new Gi(t[1],t[2],t[3],1):(t=Zye.exec(e))?new Gi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jye.exec(e))?f_(t[1],t[2],t[3],t[4]):(t=e0e.exec(e))?f_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t0e.exec(e))?fR(t[1],t[2]/100,t[3]/100,1):(t=r0e.exec(e))?fR(t[1],t[2]/100,t[3]/100,t[4]):aR.hasOwnProperty(e)?uR(aR[e]):e==="transparent"?new Gi(NaN,NaN,NaN,0):null}function uR(e){return new Gi(e>>16&255,e>>8&255,e&255,1)}function f_(e,t,r,n){return n<=0&&(e=t=r=NaN),new Gi(e,t,r,n)}function o0e(e){return e instanceof Mm||(e=jh(e)),e?(e=e.rgb(),new Gi(e.r,e.g,e.b,e.opacity)):new Gi}function DT(e,t,r,n){return arguments.length===1?o0e(e):new Gi(e,t,r,n??1)}function Gi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}aC(Gi,DT,lK(Mm,{brighter(e){return e=e==null?Gv:Math.pow(Gv,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ih:Math.pow(Ih,e),new Gi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gi(ku(this.r),ku(this.g),ku(this.b),Hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cR,formatHex:cR,formatHex8:a0e,formatRgb:dR,toString:dR}));function cR(){return`#${wu(this.r)}${wu(this.g)}${wu(this.b)}`}function a0e(){return`#${wu(this.r)}${wu(this.g)}${wu(this.b)}${wu((isNaN(this.opacity)?1:this.opacity)*255)}`}function dR(){const e=Hv(this.opacity);return`${e===1?"rgb(":"rgba("}${ku(this.r)}, ${ku(this.g)}, ${ku(this.b)}${e===1?")":`, ${e})`}`}function Hv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ku(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wu(e){return e=ku(e),(e<16?"0":"")+e.toString(16)}function fR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ha(e,t,r,n)}function uK(e){if(e instanceof ha)return new ha(e.h,e.s,e.l,e.opacity);if(e instanceof Mm||(e=jh(e)),!e)return new ha;if(e instanceof ha)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-t)/s+2:a=(t-r)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ha(a,s,l,e.opacity)}function s0e(e,t,r,n){return arguments.length===1?uK(e):new ha(e,t,r,n??1)}function ha(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}aC(ha,s0e,lK(Mm,{brighter(e){return e=e==null?Gv:Math.pow(Gv,e),new ha(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ih:Math.pow(Ih,e),new ha(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Gi(h1(e>=240?e-240:e+120,i,n),h1(e,i,n),h1(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ha(pR(this.h),p_(this.s),p_(this.l),Hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hv(this.opacity);return`${e===1?"hsl(":"hsla("}${pR(this.h)}, ${p_(this.s)*100}%, ${p_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pR(e){return e=(e||0)%360,e<0?e+360:e}function p_(e){return Math.max(0,Math.min(1,e||0))}function h1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sC=e=>()=>e;function l0e(e,t){return function(r){return e+r*t}}function u0e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function c0e(e){return(e=+e)==1?cK:function(t,r){return r-t?u0e(t,r,e):sC(isNaN(t)?r:t)}}function cK(e,t){var r=t-e;return r?l0e(e,r):sC(isNaN(e)?t:e)}const hR=function e(t){var r=c0e(t);function n(i,o){var a=r((i=DT(i)).r,(o=DT(o)).r),s=r(i.g,o.g),l=r(i.b,o.b),u=cK(i.opacity,o.opacity);return function(d){return i.r=a(d),i.g=s(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function d0e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function f0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function p0e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=gf(e[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function h0e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function m0e(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=gf(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var jT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,m1=new RegExp(jT.source,"g");function g0e(e){return function(){return e}}function _0e(e){return function(t){return e(t)+""}}function v0e(e,t){var r=jT.lastIndex=m1.lastIndex=0,n,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(n=jT.exec(e))&&(i=m1.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Kv(n,i)})),r=m1.lastIndex;return r<t.length&&(o=t.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?_0e(l[0].x):g0e(t):(t=l.length,function(u){for(var d=0,c;d<t;++d)s[(c=l[d]).i]=c.x(u);return s.join("")})}function gf(e,t){var r=typeof t,n;return t==null||r==="boolean"?sC(t):(r==="number"?Kv:r==="string"?(n=jh(t))?(t=n,hR):v0e:t instanceof jh?hR:t instanceof Date?h0e:f0e(t)?d0e:Array.isArray(t)?p0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?m0e:Kv)(e,t)}function lC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function y0e(e,t){t===void 0&&(t=e,e=gf);for(var r=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(i,i=t[++r]);return function(a){var s=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return o[s](a-s)}}function b0e(e){return function(){return e}}function qv(e){return+e}var mR=[0,1];function Di(e){return e}function FT(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:b0e(isNaN(t)?NaN:.5)}function w0e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function x0e(e,t,r){var n=e[0],i=e[1],o=t[0],a=t[1];return i<n?(n=FT(i,n),o=r(a,o)):(n=FT(n,i),o=r(o,a)),function(s){return o(n(s))}}function M0e(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=FT(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(s){var l=xm(e,s,1,n)-1;return o[l](i[l](s))}}function Tm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $0(){var e=mR,t=mR,r=gf,n,i,o,a=Di,s,l,u;function d(){var f=Math.min(e.length,t.length);return a!==Di&&(a=w0e(e[0],e[f-1])),s=f>2?M0e:x0e,l=u=null,c}function c(f){return f==null||isNaN(f=+f)?o:(l||(l=s(e.map(n),t,r)))(n(a(f)))}return c.invert=function(f){return a(i((u||(u=s(t,e.map(n),Kv)))(f)))},c.domain=function(f){return arguments.length?(e=Array.from(f,qv),d()):e.slice()},c.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},c.rangeRound=function(f){return t=Array.from(f),r=lC,d()},c.clamp=function(f){return arguments.length?(a=f?!0:Di,d()):a!==Di},c.interpolate=function(f){return arguments.length?(r=f,d()):r},c.unknown=function(f){return arguments.length?(o=f,c):o},function(f,p){return n=f,i=p,d()}}function uC(){return $0()(Di,Di)}function T0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Id(e){return e=Xv(Math.abs(e)),e?e[1]:NaN}function P0e(e,t){return function(r,n){for(var i=r.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function E0e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var S0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fh(e){if(!(t=S0e.exec(e)))throw new Error("invalid format: "+e);var t;return new cC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fh.prototype=cC.prototype;function cC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C0e(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var dK;function $0e(e,t){var r=Xv(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(dK=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Xv(e,Math.max(0,t+o-1))[0]}function gR(e,t){var r=Xv(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const _R={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gR(e*100,t),r:gR,s:$0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vR(e){return e}var yR=Array.prototype.map,bR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function A0e(e){var t=e.grouping===void 0||e.thousands===void 0?vR:P0e(yR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?vR:E0e(yR.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(c){c=Fh(c);var f=c.fill,p=c.align,h=c.sign,m=c.symbol,v=c.zero,g=c.width,_=c.comma,b=c.precision,w=c.trim,y=c.type;y==="n"?(_=!0,y="g"):_R[y]||(b===void 0&&(b=12),w=!0,y="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var x=m==="$"?r:m==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",M=m==="$"?n:/[%p]/.test(y)?a:"",T=_R[y],S=/[defgprs%]/.test(y);b=b===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(k){var F=x,j=M,U,z,G;if(y==="c")j=T(k)+j,k="";else{k=+k;var H=k<0||1/k<0;if(k=isNaN(k)?l:T(Math.abs(k),b),w&&(k=C0e(k)),H&&+k==0&&h!=="+"&&(H=!1),F=(H?h==="("?h:s:h==="-"||h==="("?"":h)+F,j=(y==="s"?bR[8+dK/3]:"")+j+(H&&h==="("?")":""),S){for(U=-1,z=k.length;++U<z;)if(G=k.charCodeAt(U),48>G||G>57){j=(G===46?i+k.slice(U+1):k.slice(U))+j,k=k.slice(0,U);break}}}_&&!v&&(k=t(k,1/0));var W=F.length+k.length+j.length,Y=W<g?new Array(g-W+1).join(f):"";switch(_&&v&&(k=t(Y+k,Y.length?g-j.length:1/0),Y=""),p){case"<":k=F+k+j+Y;break;case"=":k=F+Y+k+j;break;case"^":k=Y.slice(0,W=Y.length>>1)+F+k+j+Y.slice(W);break;default:k=Y+F+k+j;break}return o(k)}return $.toString=function(){return c+""},$}function d(c,f){var p=u((c=Fh(c),c.type="f",c)),h=Math.max(-8,Math.min(8,Math.floor(Id(f)/3)))*3,m=Math.pow(10,-h),v=bR[8+h/3];return function(g){return p(m*g)+v}}return{format:u,formatPrefix:d}}var h_,dC,fK;O0e({thousands:",",grouping:[3],currency:["$",""]});function O0e(e){return h_=A0e(e),dC=h_.format,fK=h_.formatPrefix,h_}function k0e(e){return Math.max(0,-Id(Math.abs(e)))}function I0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Id(t)/3)))*3-Id(Math.abs(e)))}function D0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Id(t)-Id(e))+1}function pK(e,t,r,n){var i=kT(e,t,r),o;switch(n=Fh(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=I0e(i,a))&&(n.precision=o),fK(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=D0e(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=k0e(i))&&(n.precision=o-(n.type==="%")*2);break}}return dC(n)}function Dl(e){var t=e.domain;return e.ticks=function(r){var n=t();return AT(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return pK(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,a=n[i],s=n[o],l,u,d=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);d-- >0;){if(u=OT(a,s,r),u===l)return n[i]=a,n[o]=s,t(n);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function Qv(){var e=uC();return e.copy=function(){return Tm(e,Qv())},Uo.apply(e,arguments),Dl(e)}function hK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,qv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return hK(e).unknown(t)},e=arguments.length?Array.from(e,qv):[0,1],Dl(r)}function mK(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],o=e[n],a;return o<i&&(a=r,r=n,n=a,a=i,i=o,o=a),e[r]=t.floor(i),e[n]=t.ceil(o),e}function wR(e){return Math.log(e)}function xR(e){return Math.exp(e)}function j0e(e){return-Math.log(-e)}function F0e(e){return-Math.exp(-e)}function L0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function N0e(e){return e===10?L0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function R0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MR(e){return(t,r)=>-e(-t,r)}function fC(e){const t=e(wR,xR),r=t.domain;let n=10,i,o;function a(){return i=R0e(n),o=N0e(n),r()[0]<0?(i=MR(i),o=MR(o),e(j0e,F0e)):e(wR,xR),t}return t.base=function(s){return arguments.length?(n=+s,a()):n},t.domain=function(s){return arguments.length?(r(s),a()):r()},t.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const c=d<u;c&&([u,d]=[d,u]);let f=i(u),p=i(d),h,m;const v=s==null?10:+s;let g=[];if(!(n%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(h=1;h<n;++h)if(m=f<0?h/o(-f):h*o(f),!(m<u)){if(m>d)break;g.push(m)}}else for(;f<=p;++f)for(h=n-1;h>=1;--h)if(m=f>0?h/o(-f):h*o(f),!(m<u)){if(m>d)break;g.push(m)}g.length*2<v&&(g=AT(u,d,v))}else g=AT(f,p,Math.min(p-f,v)).map(o);return c?g.reverse():g},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Fh(l)).precision==null&&(l.trim=!0),l=dC(l)),s===1/0)return l;const u=Math.max(1,n*s/t.ticks().length);return d=>{let c=d/o(Math.round(i(d)));return c*n<n-.5&&(c*=n),c<=u?l(d):""}},t.nice=()=>r(mK(r(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function gK(){const e=fC($0()).domain([1,10]);return e.copy=()=>Tm(e,gK()).base(e.base()),Uo.apply(e,arguments),e}function TR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pC(e){var t=1,r=e(TR(t),PR(t));return r.constant=function(n){return arguments.length?e(TR(t=+n),PR(t)):t},Dl(r)}function _K(){var e=pC($0());return e.copy=function(){return Tm(e,_K()).constant(e.constant())},Uo.apply(e,arguments)}function ER(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function z0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function B0e(e){return e<0?-e*e:e*e}function hC(e){var t=e(Di,Di),r=1;function n(){return r===1?e(Di,Di):r===.5?e(z0e,B0e):e(ER(r),ER(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Dl(t)}function mC(){var e=hC($0());return e.copy=function(){return Tm(e,mC()).exponent(e.exponent())},Uo.apply(e,arguments),e}function U0e(){return mC.apply(null,arguments).exponent(.5)}function SR(e){return Math.sign(e)*e*e}function W0e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vK(){var e=uC(),t=[0,1],r=!1,n;function i(o){var a=W0e(e(o));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(o){return e.invert(SR(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,qv)).map(SR)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return vK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Uo.apply(i,arguments),Dl(i)}function yK(){var e=[],t=[],r=[],n;function i(){var a=0,s=Math.max(1,t.length);for(r=new Array(s-1);++a<s;)r[a-1]=qye(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?n:t[xm(r,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xl),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return yK().domain(e).range(t).unknown(n)},Uo.apply(o,arguments)}function bK(){var e=0,t=1,r=1,n=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[xm(n,l,0,r)]:o}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return bK().domain([e,t]).range(i).unknown(o)},Uo.apply(Dl(a),arguments)}function wK(){var e=[.5],t=[0,1],r,n=1;function i(o){return o!=null&&o<=o?t[xm(e,o,0,n)]:r}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return wK().domain(e).range(t).unknown(r)},Uo.apply(i,arguments)}const g1=new Date,_1=new Date;function Gn(e,t,r,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},i.filter=o=>Gn(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),r&&(i.count=(o,a)=>(g1.setTime(+o),_1.setTime(+a),e(g1),e(_1),Math.floor(r(g1,_1))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?a=>n(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Yv=Gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Yv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Yv);Yv.range;const gs=1e3,Do=gs*60,_s=Do*60,$s=_s*24,gC=$s*7,CR=$s*30,v1=$s*365,xu=Gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getUTCSeconds());xu.range;const _C=Gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs)},(e,t)=>{e.setTime(+e+t*Do)},(e,t)=>(t-e)/Do,e=>e.getMinutes());_C.range;const vC=Gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Do)},(e,t)=>(t-e)/Do,e=>e.getUTCMinutes());vC.range;const yC=Gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gs-e.getMinutes()*Do)},(e,t)=>{e.setTime(+e+t*_s)},(e,t)=>(t-e)/_s,e=>e.getHours());yC.range;const bC=Gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_s)},(e,t)=>(t-e)/_s,e=>e.getUTCHours());bC.range;const Pm=Gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Do)/$s,e=>e.getDate()-1);Pm.range;const A0=Gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$s,e=>e.getUTCDate()-1);A0.range;const xK=Gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$s,e=>Math.floor(e/$s));xK.range;function nc(e){return Gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Do)/gC)}const O0=nc(0),Zv=nc(1),V0e=nc(2),G0e=nc(3),Dd=nc(4),H0e=nc(5),K0e=nc(6);O0.range;Zv.range;V0e.range;G0e.range;Dd.range;H0e.range;K0e.range;function ic(e){return Gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/gC)}const k0=ic(0),Jv=ic(1),q0e=ic(2),X0e=ic(3),jd=ic(4),Q0e=ic(5),Y0e=ic(6);k0.range;Jv.range;q0e.range;X0e.range;jd.range;Q0e.range;Y0e.range;const wC=Gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wC.range;const xC=Gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xC.range;const As=Gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());As.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});As.range;const Os=Gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Os.range;function MK(e,t,r,n,i,o){const a=[[xu,1,gs],[xu,5,5*gs],[xu,15,15*gs],[xu,30,30*gs],[o,1,Do],[o,5,5*Do],[o,15,15*Do],[o,30,30*Do],[i,1,_s],[i,3,3*_s],[i,6,6*_s],[i,12,12*_s],[n,1,$s],[n,2,2*$s],[r,1,gC],[t,1,CR],[t,3,3*CR],[e,1,v1]];function s(u,d,c){const f=d<u;f&&([u,d]=[d,u]);const p=c&&typeof c.range=="function"?c:l(u,d,c),h=p?p.range(u,+d+1):[];return f?h.reverse():h}function l(u,d,c){const f=Math.abs(d-u)/c,p=iC(([,,v])=>v).right(a,f);if(p===a.length)return e.every(kT(u/v1,d/v1,c));if(p===0)return Yv.every(Math.max(kT(u,d,c),1));const[h,m]=a[f/a[p-1][2]<a[p][2]/f?p-1:p];return h.every(m)}return[s,l]}const[Z0e,J0e]=MK(Os,xC,k0,xK,bC,vC),[ebe,tbe]=MK(As,wC,O0,Pm,yC,_C);function y1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function b1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _p(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rbe(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=vp(i),d=yp(i),c=vp(o),f=yp(o),p=vp(a),h=yp(a),m=vp(s),v=yp(s),g=vp(l),_=yp(l),b={a:H,A:W,b:Y,B:te,c:null,d:DR,e:DR,f:Pbe,g:jbe,G:Lbe,H:xbe,I:Mbe,j:Tbe,L:TK,m:Ebe,M:Sbe,p:V,q:I,Q:LR,s:NR,S:Cbe,u:$be,U:Abe,V:Obe,w:kbe,W:Ibe,x:null,X:null,y:Dbe,Y:Fbe,Z:Nbe,"%":FR},w={a:K,A:ae,b:pe,B:de,c:null,d:jR,e:jR,f:Ube,g:Zbe,G:ewe,H:Rbe,I:zbe,j:Bbe,L:EK,m:Wbe,M:Vbe,p:be,q:Ne,Q:LR,s:NR,S:Gbe,u:Hbe,U:Kbe,V:qbe,w:Xbe,W:Qbe,x:null,X:null,y:Ybe,Y:Jbe,Z:twe,"%":FR},y={a:$,A:k,b:F,B:j,c:U,d:kR,e:kR,f:vbe,g:OR,G:AR,H:IR,I:IR,j:hbe,L:_be,m:pbe,M:mbe,p:S,q:fbe,Q:bbe,s:wbe,S:gbe,u:sbe,U:lbe,V:ube,w:abe,W:cbe,x:z,X:G,y:OR,Y:AR,Z:dbe,"%":ybe};b.x=x(r,b),b.X=x(n,b),b.c=x(t,b),w.x=x(r,w),w.X=x(n,w),w.c=x(t,w);function x(Te,ge){return function(re){var ne=[],Z=-1,ve=0,Ae=Te.length,Ee,we,$e;for(re instanceof Date||(re=new Date(+re));++Z<Ae;)Te.charCodeAt(Z)===37&&(ne.push(Te.slice(ve,Z)),(we=$R[Ee=Te.charAt(++Z)])!=null?Ee=Te.charAt(++Z):we=Ee==="e"?" ":"0",($e=ge[Ee])&&(Ee=$e(re,we)),ne.push(Ee),ve=Z+1);return ne.push(Te.slice(ve,Z)),ne.join("")}}function M(Te,ge){return function(re){var ne=_p(1900,void 0,1),Z=T(ne,Te,re+="",0),ve,Ae;if(Z!=re.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(ge&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(ve=b1(_p(ne.y,0,1)),Ae=ve.getUTCDay(),ve=Ae>4||Ae===0?Jv.ceil(ve):Jv(ve),ve=A0.offset(ve,(ne.V-1)*7),ne.y=ve.getUTCFullYear(),ne.m=ve.getUTCMonth(),ne.d=ve.getUTCDate()+(ne.w+6)%7):(ve=y1(_p(ne.y,0,1)),Ae=ve.getDay(),ve=Ae>4||Ae===0?Zv.ceil(ve):Zv(ve),ve=Pm.offset(ve,(ne.V-1)*7),ne.y=ve.getFullYear(),ne.m=ve.getMonth(),ne.d=ve.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Ae="Z"in ne?b1(_p(ne.y,0,1)).getUTCDay():y1(_p(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Ae+5)%7:ne.w+ne.U*7-(Ae+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,b1(ne)):y1(ne)}}function T(Te,ge,re,ne){for(var Z=0,ve=ge.length,Ae=re.length,Ee,we;Z<ve;){if(ne>=Ae)return-1;if(Ee=ge.charCodeAt(Z++),Ee===37){if(Ee=ge.charAt(Z++),we=y[Ee in $R?ge.charAt(Z++):Ee],!we||(ne=we(Te,re,ne))<0)return-1}else if(Ee!=re.charCodeAt(ne++))return-1}return ne}function S(Te,ge,re){var ne=u.exec(ge.slice(re));return ne?(Te.p=d.get(ne[0].toLowerCase()),re+ne[0].length):-1}function $(Te,ge,re){var ne=p.exec(ge.slice(re));return ne?(Te.w=h.get(ne[0].toLowerCase()),re+ne[0].length):-1}function k(Te,ge,re){var ne=c.exec(ge.slice(re));return ne?(Te.w=f.get(ne[0].toLowerCase()),re+ne[0].length):-1}function F(Te,ge,re){var ne=g.exec(ge.slice(re));return ne?(Te.m=_.get(ne[0].toLowerCase()),re+ne[0].length):-1}function j(Te,ge,re){var ne=m.exec(ge.slice(re));return ne?(Te.m=v.get(ne[0].toLowerCase()),re+ne[0].length):-1}function U(Te,ge,re){return T(Te,t,ge,re)}function z(Te,ge,re){return T(Te,r,ge,re)}function G(Te,ge,re){return T(Te,n,ge,re)}function H(Te){return a[Te.getDay()]}function W(Te){return o[Te.getDay()]}function Y(Te){return l[Te.getMonth()]}function te(Te){return s[Te.getMonth()]}function V(Te){return i[+(Te.getHours()>=12)]}function I(Te){return 1+~~(Te.getMonth()/3)}function K(Te){return a[Te.getUTCDay()]}function ae(Te){return o[Te.getUTCDay()]}function pe(Te){return l[Te.getUTCMonth()]}function de(Te){return s[Te.getUTCMonth()]}function be(Te){return i[+(Te.getUTCHours()>=12)]}function Ne(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var ge=x(Te+="",b);return ge.toString=function(){return Te},ge},parse:function(Te){var ge=M(Te+="",!1);return ge.toString=function(){return Te},ge},utcFormat:function(Te){var ge=x(Te+="",w);return ge.toString=function(){return Te},ge},utcParse:function(Te){var ge=M(Te+="",!0);return ge.toString=function(){return Te},ge}}}var $R={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,nbe=/^%/,ibe=/[\\^$*+?|[\]().{}]/g;function gr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(t)+i:i)}function obe(e){return e.replace(ibe,"\\$&")}function vp(e){return new RegExp("^(?:"+e.map(obe).join("|")+")","i")}function yp(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function abe(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sbe(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function lbe(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ube(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cbe(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function AR(e,t,r){var n=Jn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function OR(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dbe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function fbe(e,t,r){var n=Jn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function pbe(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function kR(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hbe(e,t,r){var n=Jn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function IR(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mbe(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gbe(e,t,r){var n=Jn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _be(e,t,r){var n=Jn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function vbe(e,t,r){var n=Jn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ybe(e,t,r){var n=nbe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bbe(e,t,r){var n=Jn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wbe(e,t,r){var n=Jn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function DR(e,t){return gr(e.getDate(),t,2)}function xbe(e,t){return gr(e.getHours(),t,2)}function Mbe(e,t){return gr(e.getHours()%12||12,t,2)}function Tbe(e,t){return gr(1+Pm.count(As(e),e),t,3)}function TK(e,t){return gr(e.getMilliseconds(),t,3)}function Pbe(e,t){return TK(e,t)+"000"}function Ebe(e,t){return gr(e.getMonth()+1,t,2)}function Sbe(e,t){return gr(e.getMinutes(),t,2)}function Cbe(e,t){return gr(e.getSeconds(),t,2)}function $be(e){var t=e.getDay();return t===0?7:t}function Abe(e,t){return gr(O0.count(As(e)-1,e),t,2)}function PK(e){var t=e.getDay();return t>=4||t===0?Dd(e):Dd.ceil(e)}function Obe(e,t){return e=PK(e),gr(Dd.count(As(e),e)+(As(e).getDay()===4),t,2)}function kbe(e){return e.getDay()}function Ibe(e,t){return gr(Zv.count(As(e)-1,e),t,2)}function Dbe(e,t){return gr(e.getFullYear()%100,t,2)}function jbe(e,t){return e=PK(e),gr(e.getFullYear()%100,t,2)}function Fbe(e,t){return gr(e.getFullYear()%1e4,t,4)}function Lbe(e,t){var r=e.getDay();return e=r>=4||r===0?Dd(e):Dd.ceil(e),gr(e.getFullYear()%1e4,t,4)}function Nbe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function jR(e,t){return gr(e.getUTCDate(),t,2)}function Rbe(e,t){return gr(e.getUTCHours(),t,2)}function zbe(e,t){return gr(e.getUTCHours()%12||12,t,2)}function Bbe(e,t){return gr(1+A0.count(Os(e),e),t,3)}function EK(e,t){return gr(e.getUTCMilliseconds(),t,3)}function Ube(e,t){return EK(e,t)+"000"}function Wbe(e,t){return gr(e.getUTCMonth()+1,t,2)}function Vbe(e,t){return gr(e.getUTCMinutes(),t,2)}function Gbe(e,t){return gr(e.getUTCSeconds(),t,2)}function Hbe(e){var t=e.getUTCDay();return t===0?7:t}function Kbe(e,t){return gr(k0.count(Os(e)-1,e),t,2)}function SK(e){var t=e.getUTCDay();return t>=4||t===0?jd(e):jd.ceil(e)}function qbe(e,t){return e=SK(e),gr(jd.count(Os(e),e)+(Os(e).getUTCDay()===4),t,2)}function Xbe(e){return e.getUTCDay()}function Qbe(e,t){return gr(Jv.count(Os(e)-1,e),t,2)}function Ybe(e,t){return gr(e.getUTCFullYear()%100,t,2)}function Zbe(e,t){return e=SK(e),gr(e.getUTCFullYear()%100,t,2)}function Jbe(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function ewe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?jd(e):jd.ceil(e),gr(e.getUTCFullYear()%1e4,t,4)}function twe(){return"+0000"}function FR(){return"%"}function LR(e){return+e}function NR(e){return Math.floor(+e/1e3)}var Tc,CK,$K;rwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rwe(e){return Tc=rbe(e),CK=Tc.format,Tc.parse,$K=Tc.utcFormat,Tc.utcParse,Tc}function nwe(e){return new Date(e)}function iwe(e){return e instanceof Date?+e:+new Date(+e)}function MC(e,t,r,n,i,o,a,s,l,u){var d=uC(),c=d.invert,f=d.domain,p=u(".%L"),h=u(":%S"),m=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),_=u("%b %d"),b=u("%B"),w=u("%Y");function y(x){return(l(x)<x?p:s(x)<x?h:a(x)<x?m:o(x)<x?v:n(x)<x?i(x)<x?g:_:r(x)<x?b:w)(x)}return d.invert=function(x){return new Date(c(x))},d.domain=function(x){return arguments.length?f(Array.from(x,iwe)):f().map(nwe)},d.ticks=function(x){var M=f();return e(M[0],M[M.length-1],x??10)},d.tickFormat=function(x,M){return M==null?y:u(M)},d.nice=function(x){var M=f();return(!x||typeof x.range!="function")&&(x=t(M[0],M[M.length-1],x??10)),x?f(mK(M,x)):d},d.copy=function(){return Tm(d,MC(e,t,r,n,i,o,a,s,l,u))},d}function owe(){return Uo.apply(MC(ebe,tbe,As,wC,O0,Pm,yC,_C,xu,CK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function awe(){return Uo.apply(MC(Z0e,J0e,Os,xC,k0,A0,bC,vC,xu,$K).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function I0(){var e=0,t=1,r,n,i,o,a=Di,s=!1,l;function u(c){return c==null||isNaN(c=+c)?l:a(i===0?.5:(c=(o(c)-r)*i,s?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([e,t]=c,r=o(e=+e),n=o(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(a=c,u):a};function d(c){return function(f){var p,h;return arguments.length?([p,h]=f,a=c(p,h),u):[a(0),a(1)]}}return u.range=d(gf),u.rangeRound=d(lC),u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return o=c,r=c(e),n=c(t),i=r===n?0:1/(n-r),u}}function jl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AK(){var e=Dl(I0()(Di));return e.copy=function(){return jl(e,AK())},Ls.apply(e,arguments)}function OK(){var e=fC(I0()).domain([1,10]);return e.copy=function(){return jl(e,OK()).base(e.base())},Ls.apply(e,arguments)}function kK(){var e=pC(I0());return e.copy=function(){return jl(e,kK()).constant(e.constant())},Ls.apply(e,arguments)}function TC(){var e=hC(I0());return e.copy=function(){return jl(e,TC()).exponent(e.exponent())},Ls.apply(e,arguments)}function swe(){return TC.apply(null,arguments).exponent(.5)}function IK(){var e=[],t=Di;function r(n){if(n!=null&&!isNaN(n=+n))return t((xm(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(xl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>Kye(e,o/n))},r.copy=function(){return IK(t).domain(e)},Ls.apply(r,arguments)}function D0(){var e=0,t=.5,r=1,n=1,i,o,a,s,l,u=Di,d,c=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+d(m))-o)*(n*m<n*o?s:l),u(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,i=d(e=+e),o=d(t=+t),a=d(r=+r),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),n=o<i?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(u=m,p):u};function h(m){return function(v){var g,_,b;return arguments.length?([g,_,b]=v,u=y0e(m,[g,_,b]),p):[u(0),u(.5),u(1)]}}return p.range=h(gf),p.rangeRound=h(lC),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return d=m,i=m(e),o=m(t),a=m(r),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),n=o<i?-1:1,p}}function DK(){var e=Dl(D0()(Di));return e.copy=function(){return jl(e,DK())},Ls.apply(e,arguments)}function jK(){var e=fC(D0()).domain([.1,1,10]);return e.copy=function(){return jl(e,jK()).base(e.base())},Ls.apply(e,arguments)}function FK(){var e=pC(D0());return e.copy=function(){return jl(e,FK()).constant(e.constant())},Ls.apply(e,arguments)}function PC(){var e=hC(D0());return e.copy=function(){return jl(e,PC()).exponent(e.exponent())},Ls.apply(e,arguments)}function lwe(){return PC.apply(null,arguments).exponent(.5)}const RR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kh,scaleDiverging:DK,scaleDivergingLog:jK,scaleDivergingPow:PC,scaleDivergingSqrt:lwe,scaleDivergingSymlog:FK,scaleIdentity:hK,scaleImplicit:IT,scaleLinear:Qv,scaleLog:gK,scaleOrdinal:oC,scalePoint:qp,scalePow:mC,scaleQuantile:yK,scaleQuantize:bK,scaleRadial:vK,scaleSequential:AK,scaleSequentialLog:OK,scaleSequentialPow:TC,scaleSequentialQuantile:IK,scaleSequentialSqrt:swe,scaleSequentialSymlog:kK,scaleSqrt:U0e,scaleSymlog:_K,scaleThreshold:wK,scaleTime:owe,scaleUtc:awe,tickFormat:pK},Symbol.toStringTag,{value:"Module"}));var uwe=sf;function cwe(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(a!=null&&(s===void 0?a===a&&!uwe(a):r(a,s)))var s=a,l=o}return l}var j0=cwe;function dwe(e,t){return e>t}var LK=dwe,fwe=j0,pwe=LK,hwe=mf;function mwe(e){return e&&e.length?fwe(e,hwe,pwe):void 0}var gwe=mwe;const F0=xr(gwe);function _we(e,t){return e<t}var NK=_we,vwe=j0,ywe=NK,bwe=mf;function wwe(e){return e&&e.length?vwe(e,bwe,ywe):void 0}var xwe=wwe;const L0=xr(xwe);var Mwe=RS,Twe=Za,Pwe=HH,Ewe=Qi;function Swe(e,t){var r=Ewe(e)?Mwe:Pwe;return r(e,Twe(t))}var Cwe=Swe,$we=VH,Awe=Cwe;function Owe(e,t){return $we(Awe(e,t),1)}var kwe=Owe;const Iwe=xr(kwe);var Dwe=eC;function jwe(e,t){return Dwe(e,t)}var Fwe=jwe;const Em=xr(Fwe);var _f=1e9,Lwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SC,Jr=!0,Ro="[DecimalError] ",Iu=Ro+"Invalid argument: ",EC=Ro+"Exponent out of range: ",vf=Math.floor,fu=Math.pow,Nwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lo,Xn=1e7,Hr=7,RK=9007199254740991,ey=vf(RK/Hr),_t={};_t.absoluteValue=_t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_t.comparedTo=_t.cmp=function(e){var t,r,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Hr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};_t.dividedBy=_t.div=function(e){return ws(this,new this.constructor(e))};_t.dividedToIntegerBy=_t.idiv=function(e){var t=this,r=t.constructor;return kr(ws(t,new r(e),0,1),r.precision)};_t.equals=_t.eq=function(e){return!this.cmp(e)};_t.exponent=function(){return An(this)};_t.greaterThan=_t.gt=function(e){return this.cmp(e)>0};_t.greaterThanOrEqualTo=_t.gte=function(e){return this.cmp(e)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(e){return this.cmp(e)<0};_t.lessThanOrEqualTo=_t.lte=function(e){return this.cmp(e)<1};_t.logarithm=_t.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(lo))throw Error(Ro+"NaN");if(r.s<1)throw Error(Ro+(r.s?"NaN":"-Infinity"));return r.eq(lo)?new n(0):(Jr=!1,t=ws(Lh(r,o),Lh(e,o),o),Jr=!0,kr(t,i))};_t.minus=_t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UK(t,e):zK(t,(e.s=-e.s,e))};_t.modulo=_t.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Ro+"NaN");return r.s?(Jr=!1,t=ws(r,e,0,1).times(e),Jr=!0,r.minus(t)):kr(new n(r),i)};_t.naturalExponential=_t.exp=function(){return BK(this)};_t.naturalLogarithm=_t.ln=function(){return Lh(this)};_t.negated=_t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_t.plus=_t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zK(t,e):UK(t,(e.s=-e.s,e))};_t.precision=_t.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Iu+e);if(t=An(i)+1,n=i.d.length-1,r=n*Hr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};_t.squareRoot=_t.sqrt=function(){var e,t,r,n,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Ro+"NaN")}for(e=An(s),Jr=!1,i=Math.sqrt(+s),i==0||i==1/0?(t=La(s.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=vf((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=a=r+3;;)if(o=n,n=o.plus(ws(s,o,a+2)).times(.5),La(o.d).slice(0,a)===(t=La(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(kr(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if(t!="9999")break;a+=4}return Jr=!0,kr(n,r)};_t.times=_t.mul=function(e){var t,r,n,i,o,a,s,l,u,d=this,c=d.constructor,f=d.d,p=(e=new c(e)).d;if(!d.s||!e.s)return new c(0);for(e.s*=d.s,r=d.e+e.e,l=f.length,u=p.length,l<u&&(o=f,f=p,p=o,a=l,l=u,u=a),o=[],a=l+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)s=o[i]+p[n]*f[i-n-1]+t,o[i--]=s%Xn|0,t=s/Xn|0;o[i]=(o[i]+t)%Xn|0}for(;!o[--a];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Jr?kr(e,c.precision):e};_t.toDecimalPlaces=_t.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ka(e,0,_f),t===void 0?t=n.rounding:Ka(t,0,8),kr(r,e+An(r)+1,t))};_t.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Hu(n,!0):(Ka(e,0,_f),t===void 0?t=i.rounding:Ka(t,0,8),n=kr(new i(n),e+1,t),r=Hu(n,!0,e+1)),r};_t.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?Hu(i):(Ka(e,0,_f),t===void 0?t=o.rounding:Ka(t,0,8),n=kr(new o(i),e+An(i)+1,t),r=Hu(n.abs(),!1,e+An(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};_t.toInteger=_t.toint=function(){var e=this,t=e.constructor;return kr(new t(e),An(e)+1,t.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(e){var t,r,n,i,o,a,s=this,l=s.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(lo);if(s=new l(s),!s.s){if(e.s<1)throw Error(Ro+"Infinity");return s}if(s.eq(lo))return s;if(n=l.precision,e.eq(lo))return kr(s,n);if(t=e.e,r=e.d.length-1,a=t>=r,o=s.s,a){if((r=d<0?-d:d)<=RK){for(i=new l(lo),t=Math.ceil(n/Hr+4),Jr=!1;r%2&&(i=i.times(s),BR(i.d,t)),r=vf(r/2),r!==0;)s=s.times(s),BR(s.d,t);return Jr=!0,e.s<0?new l(lo).div(i):kr(i,n)}}else if(o<0)throw Error(Ro+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,Jr=!1,i=e.times(Lh(s,n+u)),Jr=!0,i=BK(i),i.s=o,i};_t.toPrecision=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?(r=An(i),n=Hu(i,r<=o.toExpNeg||r>=o.toExpPos)):(Ka(e,1,_f),t===void 0?t=o.rounding:Ka(t,0,8),i=kr(new o(i),e,t),r=An(i),n=Hu(i,e<=r||r<=o.toExpNeg,e)),n};_t.toSignificantDigits=_t.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ka(e,1,_f),t===void 0?t=n.rounding:Ka(t,0,8)),kr(new n(r),e,t)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),r=e.constructor;return Hu(e,t<=r.toExpNeg||t>=r.toExpPos)};function zK(e,t){var r,n,i,o,a,s,l,u,d=e.constructor,c=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Jr?kr(t,c):t;if(l=e.d,u=t.d,a=e.e,i=t.e,l=l.slice(),o=a-i,o){for(o<0?(n=l,o=-o,s=u.length):(n=u,i=a,s=l.length),a=Math.ceil(c/Hr),s=a>s?a+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,n=u,u=l,l=n),r=0;o;)r=(l[--o]=l[o]+u[o]+r)/Xn|0,l[o]%=Xn;for(r&&(l.unshift(r),++i),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=i,Jr?kr(t,c):t}function Ka(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Iu+e)}function La(e){var t,r,n,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)n=e[t]+"",r=Hr-n.length,r&&(o+=tl(r)),o+=n;a=e[t],n=a+"",r=Hr-n.length,r&&(o+=tl(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var ws=function(){function e(n,i){var o,a=0,s=n.length;for(n=n.slice();s--;)o=n[s]*i+a,n[s]=o%Xn|0,a=o/Xn|0;return a&&n.unshift(a),n}function t(n,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,o){for(var a=0;o--;)n[o]-=a,a=n[o]<i[o]?1:0,n[o]=a*Xn+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a){var s,l,u,d,c,f,p,h,m,v,g,_,b,w,y,x,M,T,S=n.constructor,$=n.s==i.s?1:-1,k=n.d,F=i.d;if(!n.s)return new S(n);if(!i.s)throw Error(Ro+"Division by zero");for(l=n.e-i.e,M=F.length,y=k.length,p=new S($),h=p.d=[],u=0;F[u]==(k[u]||0);)++u;if(F[u]>(k[u]||0)&&--l,o==null?_=o=S.precision:a?_=o+(An(n)-An(i))+1:_=o,_<0)return new S(0);if(_=_/Hr+2|0,u=0,M==1)for(d=0,F=F[0],_++;(u<y||d)&&_--;u++)b=d*Xn+(k[u]||0),h[u]=b/F|0,d=b%F|0;else{for(d=Xn/(F[0]+1)|0,d>1&&(F=e(F,d),k=e(k,d),M=F.length,y=k.length),w=M,m=k.slice(0,M),v=m.length;v<M;)m[v++]=0;T=F.slice(),T.unshift(0),x=F[0],F[1]>=Xn/2&&++x;do d=0,s=t(F,m,M,v),s<0?(g=m[0],M!=v&&(g=g*Xn+(m[1]||0)),d=g/x|0,d>1?(d>=Xn&&(d=Xn-1),c=e(F,d),f=c.length,v=m.length,s=t(c,m,f,v),s==1&&(d--,r(c,M<f?T:F,f))):(d==0&&(s=d=1),c=F.slice()),f=c.length,f<v&&c.unshift(0),r(m,c,v),s==-1&&(v=m.length,s=t(F,m,M,v),s<1&&(d++,r(m,M<v?T:F,v))),v=m.length):s===0&&(d++,m=[0]),h[u++]=d,s&&m[0]?m[v++]=k[w]||0:(m=[k[w]],v=1);while((w++<y||m[0]!==void 0)&&_--)}return h[0]||h.shift(),p.e=l,kr(p,a?o+An(p)+1:o)}}();function BK(e,t){var r,n,i,o,a,s,l=0,u=0,d=e.constructor,c=d.precision;if(An(e)>16)throw Error(EC+An(e));if(!e.s)return new d(lo);for(Jr=!1,s=c,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(n=Math.log(fu(2,u))/Math.LN10*2+5|0,s+=n,r=i=o=new d(lo),d.precision=s;;){if(i=kr(i.times(e),s),r=r.times(++l),a=o.plus(ws(i,r,s)),La(a.d).slice(0,s)===La(o.d).slice(0,s)){for(;u--;)o=kr(o.times(o),s);return d.precision=c,t==null?(Jr=!0,kr(o,c)):o}o=a}}function An(e){for(var t=e.e*Hr,r=e.d[0];r>=10;r/=10)t++;return t}function w1(e,t,r){if(t>e.LN10.sd())throw Jr=!0,r&&(e.precision=r),Error(Ro+"LN10 precision limit exceeded");return kr(new e(e.LN10),t)}function tl(e){for(var t="";e--;)t+="0";return t}function Lh(e,t){var r,n,i,o,a,s,l,u,d,c=1,f=10,p=e,h=p.d,m=p.constructor,v=m.precision;if(p.s<1)throw Error(Ro+(p.s?"NaN":"-Infinity"));if(p.eq(lo))return new m(0);if(t==null?(Jr=!1,u=v):u=t,p.eq(10))return t==null&&(Jr=!0),w1(m,u);if(u+=f,m.precision=u,r=La(h),n=r.charAt(0),o=An(p),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=La(p.d),n=r.charAt(0),c++;o=An(p),n>1?(p=new m("0."+r),o++):p=new m(n+"."+r.slice(1))}else return l=w1(m,u+2,v).times(o+""),p=Lh(new m(n+"."+r.slice(1)),u-f).plus(l),m.precision=v,t==null?(Jr=!0,kr(p,v)):p;for(s=a=p=ws(p.minus(lo),p.plus(lo),u),d=kr(p.times(p),u),i=3;;){if(a=kr(a.times(d),u),l=s.plus(ws(a,new m(i),u)),La(l.d).slice(0,u)===La(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(w1(m,u+2,v).times(o+""))),s=ws(s,new m(c),u),m.precision=v,t==null?(Jr=!0,kr(s,v)):s;s=l,i+=2}}function zR(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=vf(r/Hr),e.d=[],n=(r+1)%Hr,r<0&&(n+=Hr),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Hr;n<i;)e.d.push(+t.slice(n,n+=Hr));t=t.slice(n),n=Hr-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Jr&&(e.e>ey||e.e<-ey))throw Error(EC+r)}else e.s=0,e.e=0,e.d=[0];return e}function kr(e,t,r){var n,i,o,a,s,l,u,d,c=e.d;for(a=1,o=c[0];o>=10;o/=10)a++;if(n=t-a,n<0)n+=Hr,i=t,u=c[d=0];else{if(d=Math.ceil((n+1)/Hr),o=c.length,d>=o)return e;for(u=o=c[d],a=1;o>=10;o/=10)a++;n%=Hr,i=n-Hr+a}if(r!==void 0&&(o=fu(10,a-i-1),s=u/o%10|0,l=t<0||c[d+1]!==void 0||u%o,l=r<4?(s||l)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?i>0?u/fu(10,a-i):0:c[d-1])%10&1||r==(e.s<0?8:7))),t<1||!c[0])return l?(o=An(e),c.length=1,t=t-o-1,c[0]=fu(10,(Hr-t%Hr)%Hr),e.e=vf(-t/Hr)||0):(c.length=1,c[0]=e.e=e.s=0),e;if(n==0?(c.length=d,o=1,d--):(c.length=d+1,o=fu(10,Hr-n),c[d]=i>0?(u/fu(10,a-i)%fu(10,i)|0)*o:0),l)for(;;)if(d==0){(c[0]+=o)==Xn&&(c[0]=1,++e.e);break}else{if(c[d]+=o,c[d]!=Xn)break;c[d--]=0,o=1}for(n=c.length;c[--n]===0;)c.pop();if(Jr&&(e.e>ey||e.e<-ey))throw Error(EC+An(e));return e}function UK(e,t){var r,n,i,o,a,s,l,u,d,c,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Jr?kr(t,p):t;if(l=e.d,c=t.d,n=t.e,u=e.e,l=l.slice(),a=u-n,a){for(d=a<0,d?(r=l,a=-a,s=c.length):(r=c,n=u,s=l.length),i=Math.max(Math.ceil(p/Hr),s)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=l.length,s=c.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(l[i]!=c[i]){d=l[i]<c[i];break}a=0}for(d&&(r=l,l=c,c=r,t.s=-t.s),s=l.length,i=c.length-s;i>0;--i)l[s++]=0;for(i=c.length;i>a;){if(l[--i]<c[i]){for(o=i;o&&l[--o]===0;)l[o]=Xn-1;--l[o],l[i]+=Xn}l[i]-=c[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Jr?kr(t,p):t):new f(0)}function Hu(e,t,r){var n,i=An(e),o=La(e.d),a=o.length;return t?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+tl(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+tl(-i-1)+o,r&&(n=r-a)>0&&(o+=tl(n))):i>=a?(o+=tl(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+tl(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=tl(n))),e.s<0?"-"+o:o}function BR(e,t){if(e.length>t)return e.length=t,!0}function WK(e){var t,r,n;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Iu+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return zR(a,o.toString())}else if(typeof o!="string")throw Error(Iu+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Nwe.test(o))zR(a,o);else throw Error(Iu+o)}if(i.prototype=_t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=WK,i.config=i.set=Rwe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Rwe(e){if(!e||typeof e!="object")throw Error(Ro+"Object expected");var t,r,n,i=["precision",1,_f,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(vf(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Iu+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Iu+r+": "+n);return this}var SC=WK(Lwe);lo=new SC(1);const Sr=SC;function zwe(e){return Vwe(e)||Wwe(e)||Uwe(e)||Bwe()}function Bwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uwe(e,t){if(e){if(typeof e=="string")return LT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LT(e,t)}}function Wwe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Vwe(e){if(Array.isArray(e))return LT(e)}function LT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gwe=function(t){return t},VK={},GK=function(t){return t===VK},UR=function(t){return function r(){return arguments.length===0||arguments.length===1&&GK(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Hwe=function e(t,r){return t===1?r:UR(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==VK}).length;return a>=t?r.apply(void 0,i):e(t-a,UR(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var d=i.map(function(c){return GK(c)?l.shift():c});return r.apply(void 0,zwe(d).concat(l))}))})},N0=function(t){return Hwe(t.length,t)},NT=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},Kwe=N0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),qwe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Gwe;var i=r.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},RT=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},HK=function(t){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r&&o.every(function(s,l){return s===r[l]})||(r=o,n=t.apply(void 0,o)),n}};function Xwe(e){var t;return e===0?t=1:t=Math.floor(new Sr(e).abs().log(10).toNumber())+1,t}function Qwe(e,t,r){for(var n=new Sr(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var Ywe=N0(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),Zwe=N0(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Jwe=N0(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const R0={rangeStep:Qwe,getDigitCount:Xwe,interpolateNumber:Ywe,uninterpolateNumber:Zwe,uninterpolateTruncation:Jwe};function zT(e){return rxe(e)||txe(e)||KK(e)||exe()}function exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function txe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rxe(e){if(Array.isArray(e))return BT(e)}function Nh(e,t){return oxe(e)||ixe(e,t)||KK(e,t)||nxe()}function nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(e,t){if(e){if(typeof e=="string")return BT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BT(e,t)}}function BT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ixe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(n=(s=a.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}}function oxe(e){if(Array.isArray(e))return e}function qK(e){var t=Nh(e,2),r=t[0],n=t[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function XK(e,t,r){if(e.lte(0))return new Sr(0);var n=R0.getDigitCount(e.toNumber()),i=new Sr(10).pow(n),o=e.div(i),a=n!==1?.05:.1,s=new Sr(Math.ceil(o.div(a).toNumber())).add(r).mul(a),l=s.mul(i);return t?l:new Sr(Math.ceil(l))}function axe(e,t,r){var n=1,i=new Sr(e);if(!i.isint()&&r){var o=Math.abs(e);o<1?(n=new Sr(10).pow(R0.getDigitCount(e)-1),i=new Sr(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new Sr(Math.floor(e)))}else e===0?i=new Sr(Math.floor((t-1)/2)):r||(i=new Sr(Math.floor(e)));var a=Math.floor((t-1)/2),s=qwe(Kwe(function(l){return i.add(new Sr(l-a).mul(n)).toNumber()}),NT);return s(0,t)}function QK(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Sr(0),tickMin:new Sr(0),tickMax:new Sr(0)};var o=XK(new Sr(t).sub(e).div(r-1),n,i),a;e<=0&&t>=0?a=new Sr(0):(a=new Sr(e).add(t).div(2),a=a.sub(new Sr(a).mod(o)));var s=Math.ceil(a.sub(e).div(o).toNumber()),l=Math.ceil(new Sr(t).sub(a).div(o).toNumber()),u=s+l+1;return u>r?QK(e,t,r,n,i+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:o,tickMin:a.sub(new Sr(s).mul(o)),tickMax:a.add(new Sr(l).mul(o))})}function sxe(e){var t=Nh(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=qK([r,n]),l=Nh(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var c=d===1/0?[u].concat(zT(NT(0,i-1).map(function(){return 1/0}))):[].concat(zT(NT(0,i-1).map(function(){return-1/0})),[d]);return r>n?RT(c):c}if(u===d)return axe(u,i,o);var f=QK(u,d,a,o),p=f.step,h=f.tickMin,m=f.tickMax,v=R0.rangeStep(h,m.add(new Sr(.1).mul(p)),p);return r>n?RT(v):v}function lxe(e,t){var r=Nh(e,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=qK([n,i]),s=Nh(a,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var d=Math.max(t,2),c=XK(new Sr(u).sub(l).div(d-1),o,0),f=[].concat(zT(R0.rangeStep(new Sr(l),new Sr(u).sub(new Sr(.99).mul(c)),c)),[u]);return n>i?RT(f):f}var uxe=HK(sxe),cxe=HK(lxe),dxe="Invariant failed";function Ku(e,t){throw new Error(dxe)}var fxe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}function pxe(e,t){return _xe(e)||gxe(e,t)||mxe(e,t)||hxe()}function hxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mxe(e,t){if(e){if(typeof e=="string")return WR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WR(e,t)}}function WR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function _xe(e){if(Array.isArray(e))return e}function vxe(e,t){if(e==null)return{};var r=yxe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JK(n.key),n)}}function xxe(e,t,r){return t&&wxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mxe(e,t,r){return t=ry(t),Txe(e,YK()?Reflect.construct(t,r||[],ry(e).constructor):t.apply(e,r))}function Txe(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pxe(e)}function Pxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ry(e)}function Exe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UT(e,t)}function UT(e,t){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},UT(e,t)}function ZK(e,t,r){return t=JK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JK(e){var t=Sxe(e,"string");return Fd(t)=="symbol"?t:t+""}function Sxe(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sm=function(e){function t(){return bxe(this,t),Mxe(this,t,arguments)}return Exe(t,e),xxe(t,[{key:"render",value:function(){var n=this.props,i=n.offset,o=n.layout,a=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,c=n.yAxis,f=vxe(n,fxe),p=Ot(f,!1);this.props.direction==="x"&&d.type!=="number"&&Ku();var h=l.map(function(m){var v=u(m,s),g=v.x,_=v.y,b=v.value,w=v.errorVal;if(!w)return null;var y=[],x,M;if(Array.isArray(w)){var T=pxe(w,2);x=T[0],M=T[1]}else x=M=w;if(o==="vertical"){var S=d.scale,$=_+i,k=$+a,F=$-a,j=S(b-x),U=S(b+M);y.push({x1:U,y1:k,x2:U,y2:F}),y.push({x1:j,y1:$,x2:U,y2:$}),y.push({x1:j,y1:k,x2:j,y2:F})}else if(o==="horizontal"){var z=c.scale,G=g+i,H=G-a,W=G+a,Y=z(b-x),te=z(b+M);y.push({x1:H,y1:te,x2:W,y2:te}),y.push({x1:G,y1:Y,x2:G,y2:te}),y.push({x1:H,y1:Y,x2:W,y2:Y})}return ie.createElement(mr,ty({className:"recharts-errorBar",key:"bar-".concat(y.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},p),y.map(function(V){return ie.createElement("line",ty({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return ie.createElement(mr,{className:"recharts-errorBars"},h)}}])}(ie.Component);ZK(Sm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZK(Sm,"displayName","ErrorBar");function Rh(e){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rh(e)}function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){Cxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cxe(e,t,r){return t=$xe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $xe(e){var t=Axe(e,"string");return Rh(t)=="symbol"?t:t+""}function Axe(e,t){if(Rh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e9=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,o=t.legendContent,a=ro(r,od);if(!a)return null;var s=od.defaultProps,l=s!==void 0?iu(iu({},s),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:o==="children"?u=(n||[]).reduce(function(d,c){var f=c.item,p=c.props,h=p.sectors||p.data||[];return d.concat(h.map(function(m){return{type:a.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var c=d.item,f=c.type.defaultProps,p=f!==void 0?iu(iu({},f),c.props):{},h=p.dataKey,m=p.name,v=p.legendType,g=p.hide;return{inactive:g,dataKey:h,type:l.iconType||v||"square",color:CC(c),value:m||h,payload:p}}),iu(iu(iu({},l),od.getWithHeight(a,i)),{},{payload:u,item:a})};function zh(e){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}function GR(e){return Dxe(e)||Ixe(e)||kxe(e)||Oxe()}function Oxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kxe(e,t){if(e){if(typeof e=="string")return WT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WT(e,t)}}function Ixe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dxe(e){if(Array.isArray(e))return WT(e)}function WT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(n){sd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sd(e,t,r){return t=jxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jxe(e){var t=Fxe(e,"string");return zh(t)=="symbol"?t:t+""}function Fxe(e,t){if(zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bn(e,t,r){return Vt(e)||Vt(t)?r:Wn(t)?ho(e,t,r):Rt(t)?t(e):r}function Xp(e,t,r,n){var i=Iwe(e,function(s){return Bn(s,t)});if(r==="number"){var o=i.filter(function(s){return tt(s)||parseFloat(s)});return o.length?[L0(o),F0(o)]:[1/0,-1/0]}var a=n?i.filter(function(s){return!Vt(s)}):i;return a.map(function(s){return Wn(s)||s instanceof Date?s:""})}var Lxe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var d=u>0?i[u-1].coordinate:i[s-1].coordinate,c=i[u].coordinate,f=u>=s-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(ki(c-d)!==ki(f-c)){var h=[];if(ki(f-c)===ki(l[1]-l[0])){p=f;var m=c+l[1]-l[0];h[0]=Math.min(m,(m+d)/2),h[1]=Math.max(m,(m+d)/2)}else{p=d;var v=f+l[1]-l[0];h[0]=Math.min(c,(v+c)/2),h[1]=Math.max(c,(v+c)/2)}var g=[Math.min(c,(p+c)/2),Math.max(c,(p+c)/2)];if(t>g[0]&&t<=g[1]||t>=h[0]&&t<=h[1]){a=i[u].index;break}}else{var _=Math.min(d,f),b=Math.max(d,f);if(t>(_+c)/2&&t<=(b+c)/2){a=i[u].index;break}}}else for(var w=0;w<s;w++)if(w===0&&t<=(n[w].coordinate+n[w+1].coordinate)/2||w>0&&w<s-1&&t>(n[w].coordinate+n[w-1].coordinate)/2&&t<=(n[w].coordinate+n[w+1].coordinate)/2||w===s-1&&t>(n[w].coordinate+n[w-1].coordinate)/2){a=n[w].index;break}return a},CC=function(t){var r,n=t,i=n.type.displayName,o=(r=t.type)!==null&&r!==void 0&&r.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},Nxe=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,u=s.length;l<u;l++)for(var d=o[s[l]].stackGroups,c=Object.keys(d),f=0,p=c.length;f<p;f++){var h=d[c[f]],m=h.items,v=h.cateAxisId,g=m.filter(function(M){return bs(M.type).indexOf("Bar")>=0});if(g&&g.length){var _=g[0].type.defaultProps,b=_!==void 0?mn(mn({},_),g[0].props):g[0].props,w=b.barSize,y=b[v];a[y]||(a[y]=[]);var x=Vt(w)?r:w;a[y].push({item:g[0],stackList:g.slice(1),barSize:Vt(x)?void 0:Ii(x,n,0)})}}return a},Rxe=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,o=t.sizeList,a=o===void 0?[]:o,s=t.maxBarSize,l=a.length;if(l<1)return null;var u=Ii(r,i,0,!0),d,c=[];if(a[0].barSize===+a[0].barSize){var f=!1,p=i/l,h=a.reduce(function(w,y){return w+y.barSize||0},0);h+=(l-1)*u,h>=i&&(h-=(l-1)*u,u=0),h>=i&&p>0&&(f=!0,p*=.9,h=l*p);var m=(i-h)/2>>0,v={offset:m-u,size:0};d=a.reduce(function(w,y){var x={item:y.item,position:{offset:v.offset+v.size+u,size:f?p:y.barSize}},M=[].concat(GR(w),[x]);return v=M[M.length-1].position,y.stackList&&y.stackList.length&&y.stackList.forEach(function(T){M.push({item:T,position:v})}),M},c)}else{var g=Ii(n,i,0,!0);i-2*g-(l-1)*u<=0&&(u=0);var _=(i-2*g-(l-1)*u)/l;_>1&&(_>>=0);var b=s===+s?Math.min(_,s):_;d=a.reduce(function(w,y,x){var M=[].concat(GR(w),[{item:y.item,position:{offset:g+(_+u)*x+(_-b)/2,size:b}}]);return y.stackList&&y.stackList.length&&y.stackList.forEach(function(T){M.push({item:T,position:M[M.length-1].position})}),M},c)}return d},zxe=function(t,r,n,i){var o=n.children,a=n.width,s=n.margin,l=a-(s.left||0)-(s.right||0),u=e9({children:o,legendWidth:l});if(u){var d=i||{},c=d.width,f=d.height,p=u.align,h=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&h==="middle")&&p!=="center"&&tt(t[p]))return mn(mn({},t),{},sd({},p,t[p]+(c||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&h!=="middle"&&tt(t[h]))return mn(mn({},t),{},sd({},h,t[h]+(f||0)))}return t},Bxe=function(t,r,n){return Vt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},t9=function(t,r,n,i,o){var a=r.props.children,s=mo(a,Sm).filter(function(u){return Bxe(i,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var c=Bn(d,n);if(Vt(c))return u;var f=Array.isArray(c)?[L0(c),F0(c)]:[c,c],p=l.reduce(function(h,m){var v=Bn(d,m,0),g=f[0]-Math.abs(Array.isArray(v)?v[0]:v),_=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(g,h[0]),Math.max(_,h[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Uxe=function(t,r,n,i,o){var a=r.map(function(s){return t9(t,s,n,o,i)}).filter(function(s){return!Vt(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},r9=function(t,r,n,i,o){var a=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&t9(t,l,u,i)||Xp(t,u,n,o)});if(n==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,u){for(var d=0,c=u.length;d<c;d++)s[u[d]]||(s[u[d]]=!0,l.push(u[d]));return l},[])},n9=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},i9=function(t,r,n,i){if(i)return t.map(function(l){return l.coordinate});var o,a,s=t.map(function(l){return l.coordinate===r&&(o=!0),l.coordinate===n&&(a=!0),l.coordinate});return o||s.push(r),a||s.push(n),s},vs=function(t,r,n){if(!t)return null;var i=t.scale,o=t.duplicateDomain,a=t.type,s=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ki(s[0]-s[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(c){var f=o?o.indexOf(c):c;return{coordinate:i(f)+u,value:c,offset:u}});return d.filter(function(c){return!ym(c.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(c,f){return{coordinate:i(c)+u,value:c,index:f,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(c){return{coordinate:i(c)+u,value:c,offset:u}}):i.domain().map(function(c,f){return{coordinate:i(c)+u,value:o?o[c]:c,index:f,offset:u}})},x1=new WeakMap,m_=function(t,r){if(typeof r!="function")return t;x1.has(t)||x1.set(t,new WeakMap);var n=x1.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},o9=function(t,r,n){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:kh(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Qv(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:qp(),realScaleType:"point"}:o==="category"?{scale:kh(),realScaleType:"band"}:{scale:Qv(),realScaleType:"linear"};if(Wu(i)){var l="scale".concat(x0(i));return{scale:(RR[l]||qp)(),realScaleType:RR[l]?l:"point"}}return Rt(i)?{scale:i}:{scale:qp(),realScaleType:"point"}},KR=1e-4,a9=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),o=Math.min(i[0],i[1])-KR,a=Math.max(i[0],i[1])+KR,s=t(r[0]),l=t(r[n-1]);(s<o||s>a||l<o||l>a)&&t.domain([r[0],r[n-1]])}},Wxe=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},Vxe=function(t,r){if(!r||r.length!==2||!tt(r[0])||!tt(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[t[0],t[1]];return(!tt(t[0])||t[0]<n)&&(o[0]=n),(!tt(t[1])||t[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},Gxe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,a=0,s=0;s<r;++s){var l=ym(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1]):(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1])}},Hxe=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var o=0,a=0;a<r;++a){var s=ym(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=o,t[a][n][1]=o+s,o=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},Kxe={sign:Gxe,expand:fce,none:Cd,silhouette:pce,wiggle:hce,positive:Hxe},qxe=function(t,r,n){var i=r.map(function(s){return s.props.dataKey}),o=Kxe[n],a=dce().keys(i).value(function(s,l){return+Bn(s,l,0)}).order(hT).offset(o);return a(t)},Xxe=function(t,r,n,i,o,a){if(!t)return null;var s=a?r.reverse():r,l={},u=s.reduce(function(c,f){var p,h=(p=f.type)!==null&&p!==void 0&&p.defaultProps?mn(mn({},f.type.defaultProps),f.props):f.props,m=h.stackId,v=h.hide;if(v)return c;var g=h[n],_=c[g]||{hasStack:!1,stackGroups:{}};if(Wn(m)){var b=_.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};b.items.push(f),_.hasStack=!0,_.stackGroups[m]=b}else _.stackGroups[ff("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[f]};return mn(mn({},c),{},sd({},g,_))},l),d={};return Object.keys(u).reduce(function(c,f){var p=u[f];if(p.hasStack){var h={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,v){var g=p.stackGroups[v];return mn(mn({},m),{},sd({},v,{numericAxisId:n,cateAxisId:i,items:g.items,stackedData:qxe(t,g.items,o)}))},h)}return mn(mn({},c),{},sd({},f,p))},d)},s9=function(t,r){var n=r.realScaleType,i=r.type,o=r.tickCount,a=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=uxe(u,o,s);return t.domain([L0(d),F0(d)]),{niceTicks:d}}if(o&&i==="number"){var c=t.domain(),f=cxe(c,o,s);return{niceTicks:f}}return null};function qR(e){var t=e.axis,r=e.ticks,n=e.bandSize,i=e.entry,o=e.index,a=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Vt(i[t.dataKey])){var s=$v(r,"value",i[t.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var l=Bn(i,Vt(a)?t.dataKey:a);return Vt(l)?null:t.scale(l)}var XR=function(t){var r=t.axis,n=t.ticks,i=t.offset,o=t.bandSize,a=t.entry,s=t.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var l=Bn(a,r.dataKey,r.domain[s]);return Vt(l)?null:r.scale(l)-o/2+i},Qxe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},Yxe=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,o=i.stackId;if(Wn(o)){var a=r[o];if(a){var s=a.items.indexOf(t);return s>=0?a.stackedData[s]:null}}return null},Zxe=function(t){return t.reduce(function(r,n){return[L0(n.concat([r[0]]).filter(tt)),F0(n.concat([r[1]]).filter(tt))]},[1/0,-1/0])},l9=function(t,r,n){return Object.keys(t).reduce(function(i,o){var a=t[o],s=a.stackedData,l=s.reduce(function(u,d){var c=Zxe(d.slice(r,n+1));return[Math.min(u[0],c[0]),Math.max(u[1],c[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},QR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VT=function(t,r,n){if(Rt(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(tt(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(QR.test(t[0])){var o=+QR.exec(t[0])[1];i[0]=r[0]-o}else Rt(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(tt(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(YR.test(t[1])){var a=+YR.exec(t[1])[1];i[1]=r[1]+a}else Rt(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},ny=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var o=rC(r,function(c){return c.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var u=o[s],d=o[s-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},ZR=function(t,r,n){return!t||!t.length||Em(t,ho(n,"type.defaultProps.domain"))?r:t},u9=function(t,r){var n=t.type.defaultProps?mn(mn({},t.type.defaultProps),t.props):t.props,i=n.dataKey,o=n.name,a=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return mn(mn({},Ot(t,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:CC(t),value:Bn(r,i),type:l,payload:r,chartType:u,hide:d})};function Bh(e){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){c9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c9(e,t,r){return t=Jxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jxe(e){var t=e1e(e,"string");return Bh(t)=="symbol"?t:t+""}function e1e(e,t){if(Bh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t1e(e,t){return o1e(e)||i1e(e,t)||n1e(e,t)||r1e()}function r1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n1e(e,t){if(e){if(typeof e=="string")return ez(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ez(e,t)}}function ez(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i1e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function o1e(e){if(Array.isArray(e))return e}var iy=Math.PI/180,a1e=function(t){return t*180/Math.PI},Nr=function(t,r,n,i){return{x:t+Math.cos(-iy*i)*n,y:r+Math.sin(-iy*i)*n}},d9=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},s1e=function(t,r,n,i,o){var a=t.width,s=t.height,l=t.startAngle,u=t.endAngle,d=Ii(t.cx,a,a/2),c=Ii(t.cy,s,s/2),f=d9(a,s,n),p=Ii(t.innerRadius,f,0),h=Ii(t.outerRadius,f,f*.8),m=Object.keys(r);return m.reduce(function(v,g){var _=r[g],b=_.domain,w=_.reversed,y;if(Vt(_.range))i==="angleAxis"?y=[l,u]:i==="radiusAxis"&&(y=[p,h]),w&&(y=[y[1],y[0]]);else{y=_.range;var x=y,M=t1e(x,2);l=M[0],u=M[1]}var T=o9(_,o),S=T.realScaleType,$=T.scale;$.domain(b).range(y),a9($);var k=s9($,cs(cs({},_),{},{realScaleType:S})),F=cs(cs(cs({},_),k),{},{range:y,radius:h,realScaleType:S,scale:$,cx:d,cy:c,innerRadius:p,outerRadius:h,startAngle:l,endAngle:u});return cs(cs({},v),{},c9({},g,F))},{})},l1e=function(t,r){var n=t.x,i=t.y,o=r.x,a=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-a,2))},u1e=function(t,r){var n=t.x,i=t.y,o=r.cx,a=r.cy,s=l1e({x:n,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(n-o)/s,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:s,angle:a1e(u),angleInRadian:u}},c1e=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),a=Math.min(i,o);return{startAngle:r-a*360,endAngle:n-a*360}},d1e=function(t,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),a=Math.floor(i/360),s=Math.min(o,a);return t+s*360},tz=function(t,r){var n=t.x,i=t.y,o=u1e({x:n,y:i},r),a=o.radius,s=o.angle,l=r.innerRadius,u=r.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var d=c1e(r),c=d.startAngle,f=d.endAngle,p=s,h;if(c<=f){for(;p>f;)p-=360;for(;p<c;)p+=360;h=p>=c&&p<=f}else{for(;p>c;)p-=360;for(;p<f;)p+=360;h=p>=f&&p<=c}return h?cs(cs({},r),{},{radius:a,angle:d1e(p,r)}):null},f9=function(t){return!N.isValidElement(t)&&!Rt(t)&&typeof t!="boolean"?t.className:""};function Uh(e){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uh(e)}var f1e=["offset"];function p1e(e){return _1e(e)||g1e(e)||m1e(e)||h1e()}function h1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m1e(e,t){if(e){if(typeof e=="string")return GT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GT(e,t)}}function g1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _1e(e){if(Array.isArray(e))return GT(e)}function GT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v1e(e,t){if(e==null)return{};var r=y1e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function y1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rz(Object(r),!0).forEach(function(n){b1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b1e(e,t,r){return t=w1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w1e(e){var t=x1e(e,"string");return Uh(t)=="symbol"?t:t+""}function x1e(e,t){if(Uh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wh.apply(this,arguments)}var M1e=function(t){var r=t.value,n=t.formatter,i=Vt(t.children)?r:t.children;return Rt(n)?n(i):i},T1e=function(t,r){var n=ki(r-t),i=Math.min(Math.abs(r-t),360);return n*i},P1e=function(t,r,n){var i=t.position,o=t.viewBox,a=t.offset,s=t.className,l=o,u=l.cx,d=l.cy,c=l.innerRadius,f=l.outerRadius,p=l.startAngle,h=l.endAngle,m=l.clockWise,v=(c+f)/2,g=T1e(p,h),_=g>=0?1:-1,b,w;i==="insideStart"?(b=p+_*a,w=m):i==="insideEnd"?(b=h-_*a,w=!m):i==="end"&&(b=h+_*a,w=m),w=g<=0?w:!w;var y=Nr(u,d,v,b),x=Nr(u,d,v,b+(w?1:-1)*359),M="M".concat(y.x,",").concat(y.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(x.x,",").concat(x.y),T=Vt(t.id)?ff("recharts-radial-line-"):t.id;return ie.createElement("text",Wh({},n,{dominantBaseline:"central",className:Kt("recharts-radial-bar-label",s)}),ie.createElement("defs",null,ie.createElement("path",{id:T,d:M})),ie.createElement("textPath",{xlinkHref:"#".concat(T)},r))},E1e=function(t){var r=t.viewBox,n=t.offset,i=t.position,o=r,a=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,d=o.startAngle,c=o.endAngle,f=(d+c)/2;if(i==="outside"){var p=Nr(a,s,u+n,f),h=p.x,m=p.y;return{x:h,y:m,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,g=Nr(a,s,v,f),_=g.x,b=g.y;return{x:_,y:b,textAnchor:"middle",verticalAnchor:"middle"}},S1e=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,o=t.position,a=r,s=a.x,l=a.y,u=a.width,d=a.height,c=d>=0?1:-1,f=c*i,p=c>0?"end":"start",h=c>0?"start":"end",m=u>=0?1:-1,v=m*i,g=m>0?"end":"start",_=m>0?"start":"end";if(o==="top"){var b={x:s+u/2,y:l-c*i,textAnchor:"middle",verticalAnchor:p};return Nn(Nn({},b),n?{height:Math.max(l-n.y,0),width:u}:{})}if(o==="bottom"){var w={x:s+u/2,y:l+d+f,textAnchor:"middle",verticalAnchor:h};return Nn(Nn({},w),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(o==="left"){var y={x:s-v,y:l+d/2,textAnchor:g,verticalAnchor:"middle"};return Nn(Nn({},y),n?{width:Math.max(y.x-n.x,0),height:d}:{})}if(o==="right"){var x={x:s+u+v,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Nn(Nn({},x),n?{width:Math.max(n.x+n.width-x.x,0),height:d}:{})}var M=n?{width:u,height:d}:{};return o==="insideLeft"?Nn({x:s+v,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},M):o==="insideRight"?Nn({x:s+u-v,y:l+d/2,textAnchor:g,verticalAnchor:"middle"},M):o==="insideTop"?Nn({x:s+u/2,y:l+f,textAnchor:"middle",verticalAnchor:h},M):o==="insideBottom"?Nn({x:s+u/2,y:l+d-f,textAnchor:"middle",verticalAnchor:p},M):o==="insideTopLeft"?Nn({x:s+v,y:l+f,textAnchor:_,verticalAnchor:h},M):o==="insideTopRight"?Nn({x:s+u-v,y:l+f,textAnchor:g,verticalAnchor:h},M):o==="insideBottomLeft"?Nn({x:s+v,y:l+d-f,textAnchor:_,verticalAnchor:p},M):o==="insideBottomRight"?Nn({x:s+u-v,y:l+d-f,textAnchor:g,verticalAnchor:p},M):lf(o)&&(tt(o.x)||bu(o.x))&&(tt(o.y)||bu(o.y))?Nn({x:s+Ii(o.x,u),y:l+Ii(o.y,d),textAnchor:"end",verticalAnchor:"end"},M):Nn({x:s+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},M)},C1e=function(t){return"cx"in t&&tt(t.cx)};function Yn(e){var t=e.offset,r=t===void 0?5:t,n=v1e(e,f1e),i=Nn({offset:r},n),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,d=i.className,c=d===void 0?"":d,f=i.textBreakAll;if(!o||Vt(s)&&Vt(l)&&!N.isValidElement(u)&&!Rt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,i);var p;if(Rt(u)){if(p=N.createElement(u,i),N.isValidElement(p))return p}else p=M1e(i);var h=C1e(o),m=Ot(i,!0);if(h&&(a==="insideStart"||a==="insideEnd"||a==="end"))return P1e(i,p,m);var v=h?E1e(i):S1e(i);return ie.createElement(Gu,Wh({className:Kt("recharts-label",c)},m,v,{breakAll:f}),p)}Yn.displayName="Label";var p9=function(t){var r=t.cx,n=t.cy,i=t.angle,o=t.startAngle,a=t.endAngle,s=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,c=t.x,f=t.y,p=t.top,h=t.left,m=t.width,v=t.height,g=t.clockWise,_=t.labelViewBox;if(_)return _;if(tt(m)&&tt(v)){if(tt(c)&&tt(f))return{x:c,y:f,width:m,height:v};if(tt(p)&&tt(h))return{x:p,y:h,width:m,height:v}}return tt(c)&&tt(f)?{x:c,y:f,width:0,height:0}:tt(r)&&tt(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||l||s||0,clockWise:g}:t.viewBox?t.viewBox:{}},$1e=function(t,r){return t?t===!0?ie.createElement(Yn,{key:"label-implicit",viewBox:r}):Wn(t)?ie.createElement(Yn,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===Yn?N.cloneElement(t,{key:"label-implicit",viewBox:r}):ie.createElement(Yn,{key:"label-implicit",content:t,viewBox:r}):Rt(t)?ie.createElement(Yn,{key:"label-implicit",content:t,viewBox:r}):lf(t)?ie.createElement(Yn,Wh({viewBox:r},t,{key:"label-implicit"})):null:null},A1e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,o=p9(t),a=mo(i,Yn).map(function(l,u){return N.cloneElement(l,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return a;var s=$1e(t.label,r||o);return[s].concat(p1e(a))};Yn.parseViewBox=p9;Yn.renderCallByParent=A1e;function O1e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var k1e=O1e;const I1e=xr(k1e);function Vh(e){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(e)}var D1e=["valueAccessor"],j1e=["data","dataKey","clockWise","id","textBreakAll"];function F1e(e){return z1e(e)||R1e(e)||N1e(e)||L1e()}function L1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N1e(e,t){if(e){if(typeof e=="string")return HT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HT(e,t)}}function R1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function z1e(e){if(Array.isArray(e))return HT(e)}function HT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}function nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nz(Object(r),!0).forEach(function(n){B1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B1e(e,t,r){return t=U1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U1e(e){var t=W1e(e,"string");return Vh(t)=="symbol"?t:t+""}function W1e(e,t){if(Vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e,t){if(e==null)return{};var r=V1e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V1e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var G1e=function(t){return Array.isArray(t.value)?I1e(t.value):t.value};function xs(e){var t=e.valueAccessor,r=t===void 0?G1e:t,n=oz(e,D1e),i=n.data,o=n.dataKey,a=n.clockWise,s=n.id,l=n.textBreakAll,u=oz(n,j1e);return!i||!i.length?null:ie.createElement(mr,{className:"recharts-label-list"},i.map(function(d,c){var f=Vt(o)?r(d,c):Bn(d&&d.payload,o),p=Vt(s)?{}:{id:"".concat(s,"-").concat(c)};return ie.createElement(Yn,oy({},Ot(d,!0),u,p,{parentViewBox:d.parentViewBox,value:f,textBreakAll:l,viewBox:Yn.parseViewBox(Vt(a)?d:iz(iz({},d),{},{clockWise:a})),key:"label-".concat(c),index:c}))}))}xs.displayName="LabelList";function H1e(e,t){return e?e===!0?ie.createElement(xs,{key:"labelList-implicit",data:t}):ie.isValidElement(e)||Rt(e)?ie.createElement(xs,{key:"labelList-implicit",data:t,content:e}):lf(e)?ie.createElement(xs,oy({data:t},e,{key:"labelList-implicit"})):null:null}function K1e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=mo(n,xs).map(function(a,s){return N.cloneElement(a,{data:t,key:"labelList-".concat(s)})});if(!r)return i;var o=H1e(e.label,t);return[o].concat(F1e(i))}xs.renderCallByParent=K1e;function Gh(e){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gh(e)}function KT(){return KT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KT.apply(this,arguments)}function az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?az(Object(r),!0).forEach(function(n){q1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q1e(e,t,r){return t=X1e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X1e(e){var t=Q1e(e,"string");return Gh(t)=="symbol"?t:t+""}function Q1e(e,t){if(Gh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y1e=function(t,r){var n=ki(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},g_=function(t){var r=t.cx,n=t.cy,i=t.radius,o=t.angle,a=t.sign,s=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(s?1:-1)+i,c=Math.asin(l/d)/iy,f=u?o:o+a*c,p=Nr(r,n,d,f),h=Nr(r,n,i,f),m=u?o-a*c:o,v=Nr(r,n,d*Math.cos(c*iy),m);return{center:p,circleTangency:h,lineTangency:v,theta:c}},h9=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.startAngle,s=t.endAngle,l=Y1e(a,s),u=a+l,d=Nr(r,n,o,a),c=Nr(r,n,o,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(i>0){var p=Nr(r,n,i,a),h=Nr(r,n,i,u);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},Z1e=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,c=ki(d-u),f=g_({cx:r,cy:n,radius:o,angle:u,sign:c,cornerRadius:a,cornerIsExternal:l}),p=f.circleTangency,h=f.lineTangency,m=f.theta,v=g_({cx:r,cy:n,radius:o,angle:d,sign:-c,cornerRadius:a,cornerIsExternal:l}),g=v.circleTangency,_=v.lineTangency,b=v.theta,w=l?Math.abs(u-d):Math.abs(u-d)-m-b;if(w<0)return s?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):h9({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d});var y="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(w>180),",").concat(+(c<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var x=g_({cx:r,cy:n,radius:i,angle:u,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),M=x.circleTangency,T=x.lineTangency,S=x.theta,$=g_({cx:r,cy:n,radius:i,angle:d,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),k=$.circleTangency,F=$.lineTangency,j=$.theta,U=l?Math.abs(u-d):Math.abs(u-d)-S-j;if(U<0&&a===0)return"".concat(y,"L").concat(r,",").concat(n,"Z");y+="L".concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(U>180),",").concat(+(c>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(c<0),",").concat(T.x,",").concat(T.y,"Z")}else y+="L".concat(r,",").concat(n,"Z");return y},J1e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},m9=function(t){var r=sz(sz({},J1e),t),n=r.cx,i=r.cy,o=r.innerRadius,a=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,c=r.endAngle,f=r.className;if(a<o||d===c)return null;var p=Kt("recharts-sector",f),h=a-o,m=Ii(s,h,0,!0),v;return m>0&&Math.abs(d-c)<360?v=Z1e({cx:n,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:c}):v=h9({cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:d,endAngle:c}),ie.createElement("path",KT({},Ot(r,!0),{className:p,d:v,role:"img"}))};function Hh(e){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hh(e)}function qT(){return qT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qT.apply(this,arguments)}function lz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lz(Object(r),!0).forEach(function(n){eMe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eMe(e,t,r){return t=tMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tMe(e){var t=rMe(e,"string");return Hh(t)=="symbol"?t:t+""}function rMe(e,t){if(Hh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cz={curveBasisClosed:ece,curveBasisOpen:tce,curveBasis:Jue,curveBumpX:Rue,curveBumpY:zue,curveLinearClosed:rce,curveLinear:T0,curveMonotoneX:nce,curveMonotoneY:ice,curveNatural:oce,curveStep:ace,curveStepAfter:lce,curveStepBefore:sce},__=function(t){return t.x===+t.x&&t.y===+t.y},bp=function(t){return t.x},wp=function(t){return t.y},nMe=function(t,r){if(Rt(t))return t;var n="curve".concat(x0(t));return(n==="curveMonotone"||n==="curveBump")&&r?cz["".concat(n).concat(r==="vertical"?"Y":"X")]:cz[n]||T0},iMe=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,o=i===void 0?[]:i,a=t.baseLine,s=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=nMe(n,s),c=u?o.filter(function(m){return __(m)}):o,f;if(Array.isArray(a)){var p=u?a.filter(function(m){return __(m)}):a,h=c.map(function(m,v){return uz(uz({},m),{},{base:p[v]})});return s==="vertical"?f=s_().y(wp).x1(bp).x0(function(m){return m.base.x}):f=s_().x(bp).y1(wp).y0(function(m){return m.base.y}),f.defined(__).curve(d),f(h)}return s==="vertical"&&tt(a)?f=s_().y(wp).x1(bp).x0(a):tt(a)?f=s_().x(bp).y1(wp).y0(a):f=uH().x(bp).y(wp),f.defined(__).curve(d),f(c)},ay=function(t){var r=t.className,n=t.points,i=t.path,o=t.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?iMe(t):i;return N.createElement("path",qT({},Ot(t,!1),Av(t),{className:Kt("recharts-curve",r),d:a,ref:o}))},g9={exports:{}},oMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aMe=oMe,sMe=aMe;function _9(){}function v9(){}v9.resetWarningCache=_9;var lMe=function(){function e(n,i,o,a,s,l){if(l!==sMe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:v9,resetWarningCache:_9};return r.PropTypes=r,r};g9.exports=lMe();var uMe=g9.exports;const wr=xr(uMe);var cMe=Object.getOwnPropertyNames,dMe=Object.getOwnPropertySymbols,fMe=Object.prototype.hasOwnProperty;function dz(e,t){return function(n,i,o){return e(n,i,o)&&t(n,i,o)}}function v_(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var o=i.cache,a=o.get(r),s=o.get(n);if(a&&s)return a===n&&s===r;o.set(r,n),o.set(n,r);var l=e(r,n,i);return o.delete(r),o.delete(n),l}}function fz(e){return cMe(e).concat(dMe(e))}var pMe=Object.hasOwn||function(e,t){return fMe.call(e,t)};function oc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var hMe="__v",mMe="__o",gMe="_owner",pz=Object.getOwnPropertyDescriptor,hz=Object.keys;function _Me(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function vMe(e,t){return oc(e.getTime(),t.getTime())}function yMe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function bMe(e,t){return e===t}function mz(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),o=e.entries(),a,s,l=0;(a=o.next())&&!a.done;){for(var u=t.entries(),d=!1,c=0;(s=u.next())&&!s.done;){if(i[c]){c++;continue}var f=a.value,p=s.value;if(r.equals(f[0],p[0],l,c,e,t,r)&&r.equals(f[1],p[1],f[0],p[0],e,t,r)){d=i[c]=!0;break}c++}if(!d)return!1;l++}return!0}var wMe=oc;function xMe(e,t,r){var n=hz(e),i=n.length;if(hz(t).length!==i)return!1;for(;i-- >0;)if(!y9(e,t,r,n[i]))return!1;return!0}function xp(e,t,r){var n=fz(e),i=n.length;if(fz(t).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=n[i],!y9(e,t,r,o)||(a=pz(e,o),s=pz(t,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function MMe(e,t){return oc(e.valueOf(),t.valueOf())}function TMe(e,t){return e.source===t.source&&e.flags===t.flags}function gz(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),o=e.values(),a,s;(a=o.next())&&!a.done;){for(var l=t.values(),u=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(a.value,s.value,a.value,s.value,e,t,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function PMe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function EMe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function y9(e,t,r,n){return(n===gMe||n===mMe||n===hMe)&&(e.$$typeof||t.$$typeof)?!0:pMe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var SMe="[object Arguments]",CMe="[object Boolean]",$Me="[object Date]",AMe="[object Error]",OMe="[object Map]",kMe="[object Number]",IMe="[object Object]",DMe="[object RegExp]",jMe="[object Set]",FMe="[object String]",LMe="[object URL]",NMe=Array.isArray,_z=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,vz=Object.assign,RMe=Object.prototype.toString.call.bind(Object.prototype.toString);function zMe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,o=e.areMapsEqual,a=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,c=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(h,m,v){if(h===m)return!0;if(h==null||m==null)return!1;var g=typeof h;if(g!==typeof m)return!1;if(g!=="object")return g==="number"?a(h,m,v):g==="function"?i(h,m,v):!1;var _=h.constructor;if(_!==m.constructor)return!1;if(_===Object)return s(h,m,v);if(NMe(h))return t(h,m,v);if(_z!=null&&_z(h))return c(h,m,v);if(_===Date)return r(h,m,v);if(_===RegExp)return u(h,m,v);if(_===Map)return o(h,m,v);if(_===Set)return d(h,m,v);var b=RMe(h);return b===$Me?r(h,m,v):b===DMe?u(h,m,v):b===OMe?o(h,m,v):b===jMe?d(h,m,v):b===IMe?typeof h.then!="function"&&typeof m.then!="function"&&s(h,m,v):b===LMe?f(h,m,v):b===AMe?n(h,m,v):b===SMe?s(h,m,v):b===CMe||b===kMe||b===FMe?l(h,m,v):!1}}function BMe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?xp:_Me,areDatesEqual:vMe,areErrorsEqual:yMe,areFunctionsEqual:bMe,areMapsEqual:n?dz(mz,xp):mz,areNumbersEqual:wMe,areObjectsEqual:n?xp:xMe,arePrimitiveWrappersEqual:MMe,areRegExpsEqual:TMe,areSetsEqual:n?dz(gz,xp):gz,areTypedArraysEqual:n?xp:PMe,areUrlsEqual:EMe};if(r&&(i=vz({},i,r(i))),t){var o=v_(i.areArraysEqual),a=v_(i.areMapsEqual),s=v_(i.areObjectsEqual),l=v_(i.areSetsEqual);i=vz({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function UMe(e){return function(t,r,n,i,o,a,s){return e(t,r,s)}}function WMe(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,o=e.strict;if(n)return function(l,u){var d=n(),c=d.cache,f=c===void 0?t?new WeakMap:void 0:c,p=d.meta;return r(l,u,{cache:f,equals:i,meta:p,strict:o})};if(t)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,u){return r(l,u,a)}}var VMe=Fl();Fl({strict:!0});Fl({circular:!0});Fl({circular:!0,strict:!0});Fl({createInternalComparator:function(){return oc}});Fl({strict:!0,createInternalComparator:function(){return oc}});Fl({circular:!0,createInternalComparator:function(){return oc}});Fl({circular:!0,createInternalComparator:function(){return oc},strict:!0});function Fl(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,o=e.strict,a=o===void 0?!1:o,s=BMe(e),l=zMe(s),u=n?n(l):UMe(l);return WMe({circular:r,comparator:l,createState:i,equals:u,strict:a})}function GMe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function yz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>t?(e(o),r=-1):GMe(i)};requestAnimationFrame(n)}function XT(e){"@babel/helpers - typeof";return XT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XT(e)}function HMe(e){return QMe(e)||XMe(e)||qMe(e)||KMe()}function KMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qMe(e,t){if(e){if(typeof e=="string")return bz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bz(e,t)}}function bz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function XMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QMe(e){if(Array.isArray(e))return e}function YMe(){var e={},t=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,s=HMe(a),l=s[0],u=s.slice(1);if(typeof l=="number"){yz(i.bind(null,u),l);return}i(l),yz(i.bind(null,u));return}XT(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Kh(e){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}function wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wz(Object(r),!0).forEach(function(n){b9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b9(e,t,r){return t=ZMe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZMe(e){var t=JMe(e,"string");return Kh(t)==="symbol"?t:String(t)}function JMe(e,t){if(Kh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eTe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},tTe=function(t){return t},rTe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Qp=function(t,r){return Object.keys(r).reduce(function(n,i){return xz(xz({},n),{},b9({},i,t(i,r[i])))},{})},Mz=function(t,r,n){return t.map(function(i){return"".concat(rTe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function nTe(e,t){return aTe(e)||oTe(e,t)||w9(e,t)||iTe()}function iTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function aTe(e){if(Array.isArray(e))return e}function sTe(e){return cTe(e)||uTe(e)||w9(e)||lTe()}function lTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w9(e,t){if(e){if(typeof e=="string")return QT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QT(e,t)}}function uTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cTe(e){if(Array.isArray(e))return QT(e)}function QT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sy=1e-4,x9=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},M9=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Tz=function(t,r){return function(n){var i=x9(t,r);return M9(i,n)}},dTe=function(t,r){return function(n){var i=x9(t,r),o=[].concat(sTe(i.map(function(a,s){return a*s}).slice(1)),[0]);return M9(o,n)}},Pz=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],o=r[1],a=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=nTe(u,4);i=d[0],o=d[1],a=d[2],s=d[3]}}}var c=Tz(i,a),f=Tz(o,s),p=dTe(i,a),h=function(g){return g>1?1:g<0?0:g},m=function(g){for(var _=g>1?1:g,b=_,w=0;w<8;++w){var y=c(b)-_,x=p(b);if(Math.abs(y-_)<sy||x<sy)return f(b);b=h(b-y/x)}return f(b)};return m.isStepper=!1,m},fTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,o=i===void 0?8:i,a=t.dt,s=a===void 0?17:a,l=function(d,c,f){var p=-(d-c)*n,h=f*o,m=f+(p-h)*s/1e3,v=f*s/1e3+d;return Math.abs(v-c)<sy&&Math.abs(m)<sy?[c,0]:[v,m]};return l.isStepper=!0,l.dt=s,l},pTe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Pz(i);case"spring":return fTe();default:if(i.split("(")[0]==="cubic-bezier")return Pz(i)}return typeof i=="function"?i:null};function qh(e){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(e)}function Ez(e){return gTe(e)||mTe(e)||T9(e)||hTe()}function hTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gTe(e){if(Array.isArray(e))return ZT(e)}function Sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sz(Object(r),!0).forEach(function(n){YT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YT(e,t,r){return t=_Te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Te(e){var t=vTe(e,"string");return qh(t)==="symbol"?t:String(t)}function vTe(e,t){if(qh(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yTe(e,t){return xTe(e)||wTe(e,t)||T9(e,t)||bTe()}function bTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T9(e,t){if(e){if(typeof e=="string")return ZT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZT(e,t)}}function ZT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function xTe(e){if(Array.isArray(e))return e}var ly=function(t,r,n){return t+(r-t)*n},JT=function(t){var r=t.from,n=t.to;return r!==n},MTe=function e(t,r,n){var i=Qp(function(o,a){if(JT(a)){var s=t(a.from,a.to,a.velocity),l=yTe(s,2),u=l[0],d=l[1];return ni(ni({},a),{},{from:u,velocity:d})}return a},r);return n<1?Qp(function(o,a){return JT(a)?ni(ni({},a),{},{velocity:ly(a.velocity,i[o].velocity,n),from:ly(a.from,i[o].from,n)}):a},r):e(t,i,n-1)};const TTe=function(e,t,r,n,i){var o=eTe(e,t),a=o.reduce(function(v,g){return ni(ni({},v),{},YT({},g,[e[g],t[g]]))},{}),s=o.reduce(function(v,g){return ni(ni({},v),{},YT({},g,{from:e[g],velocity:0,to:t[g]}))},{}),l=-1,u,d,c=function(){return null},f=function(){return Qp(function(g,_){return _.from},s)},p=function(){return!Object.values(s).filter(JT).length},h=function(g){u||(u=g);var _=g-u,b=_/r.dt;s=MTe(r,s,b),i(ni(ni(ni({},e),t),f())),u=g,p()||(l=requestAnimationFrame(c))},m=function(g){d||(d=g);var _=(g-d)/n,b=Qp(function(y,x){return ly.apply(void 0,Ez(x).concat([r(_)]))},a);if(i(ni(ni(ni({},e),t),b)),_<1)l=requestAnimationFrame(c);else{var w=Qp(function(y,x){return ly.apply(void 0,Ez(x).concat([r(1)]))},a);i(ni(ni(ni({},e),t),w))}};return c=r.isStepper?h:m,function(){return requestAnimationFrame(c),function(){cancelAnimationFrame(l)}}};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}var PTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ETe(e,t){if(e==null)return{};var r=STe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function STe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function M1(e){return OTe(e)||ATe(e)||$Te(e)||CTe()}function CTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Te(e,t){if(e){if(typeof e=="string")return eP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eP(e,t)}}function ATe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OTe(e){if(Array.isArray(e))return eP(e)}function eP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(r),!0).forEach(function(n){kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kp(e,t,r){return t=P9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ITe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P9(n.key),n)}}function DTe(e,t,r){return t&&ITe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P9(e){var t=jTe(e,"string");return Ld(t)==="symbol"?t:String(t)}function jTe(e,t){if(Ld(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ld(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tP(e,t)}function tP(e,t){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tP(e,t)}function LTe(e){var t=NTe();return function(){var n=uy(e),i;if(t){var o=uy(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return rP(this,i)}}function rP(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nP(e)}function nP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uy(e)}var qa=function(e){FTe(r,e);var t=LTe(r);function r(n,i){var o;kTe(this,r),o=t.call(this,n,i);var a=o.props,s=a.isActive,l=a.attributeName,u=a.from,d=a.to,c=a.steps,f=a.children,p=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(nP(o)),o.changeStyle=o.changeStyle.bind(nP(o)),!s||p<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:d}),rP(o);if(c&&c.length)o.state={style:c[0].style};else if(u){if(typeof f=="function")return o.state={style:u},rP(o);o.state={style:l?kp({},l,u):u}}else o.state={style:{}};return o}return DTe(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,d=o.to,c=o.from,f=this.state.style;if(s){if(!a){var p={style:l?kp({},l,d):d};this.state&&f&&(l&&f[l]!==d||!l&&f!==d)&&this.setState(p);return}if(!(VMe(i.to,d)&&i.canBegin&&i.isActive)){var h=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=h||u?c:i.to;if(this.state&&f){var v={style:l?kp({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(v)}this.runAnimation(na(na({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,u=i.easing,d=i.begin,c=i.onAnimationEnd,f=i.onAnimationStart,p=TTe(a,s,pTe(u),l,this.changeStyle),h=function(){o.stopJSAnimation=p()};this.manager.start([f,d,h,l,c])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,u=a[0],d=u.style,c=u.duration,f=c===void 0?0:c,p=function(m,v,g){if(g===0)return m;var _=v.duration,b=v.easing,w=b===void 0?"ease":b,y=v.style,x=v.properties,M=v.onAnimationEnd,T=g>0?a[g-1]:v,S=x||Object.keys(y);if(typeof w=="function"||w==="spring")return[].concat(M1(m),[o.runJSAnimation.bind(o,{from:T.style,to:y,duration:_,easing:w}),_]);var $=Mz(S,_,w),k=na(na(na({},T.style),y),{},{transition:$});return[].concat(M1(m),[k,_,M]).filter(tTe)};return this.manager.start([l].concat(M1(a.reduce(p,[d,Math.max(f,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=YMe());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,c=i.onAnimationEnd,f=i.steps,p=i.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var m=s?kp({},s,l):l,v=Mz(Object.keys(m),a,u);h.start([d,o,na(na({},m),{},{transition:v}),a,c])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=ETe(i,PTe),u=N.Children.count(o),d=this.state.style;if(typeof o=="function")return o(d);if(!s||u===0||a<=0)return o;var c=function(p){var h=p.props,m=h.style,v=m===void 0?{}:m,g=h.className,_=N.cloneElement(p,na(na({},l),{},{style:na(na({},v),d),className:g}));return _};return u===1?c(N.Children.only(o)):ie.createElement("div",null,N.Children.map(o,function(f){return c(f)}))}}]),r}(N.PureComponent);qa.displayName="Animate";qa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};qa.propTypes={from:wr.oneOfType([wr.object,wr.string]),to:wr.oneOfType([wr.object,wr.string]),attributeName:wr.string,duration:wr.number,begin:wr.number,easing:wr.oneOfType([wr.string,wr.func]),steps:wr.arrayOf(wr.shape({duration:wr.number.isRequired,style:wr.object.isRequired,easing:wr.oneOfType([wr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),wr.func]),properties:wr.arrayOf("string"),onAnimationEnd:wr.func})),children:wr.oneOfType([wr.node,wr.func]),isActive:wr.bool,canBegin:wr.bool,onAnimationEnd:wr.func,shouldReAnimate:wr.bool,onAnimationStart:wr.func,onAnimationReStart:wr.func};function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function RTe(e,t){return WTe(e)||UTe(e,t)||BTe(e,t)||zTe()}function zTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BTe(e,t){if(e){if(typeof e=="string")return $z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $z(e,t)}}function $z(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function WTe(e){if(Array.isArray(e))return e}function Az(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Az(Object(r),!0).forEach(function(n){VTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VTe(e,t,r){return t=GTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GTe(e){var t=HTe(e,"string");return Xh(t)=="symbol"?t:t+""}function HTe(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kz=function(t,r,n,i,o){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(a>0&&o instanceof Array){for(var c=[0,0,0,0],f=0,p=4;f<p;f++)c[f]=o[f]>a?a:o[f];d="M".concat(t,",").concat(r+s*c[0]),c[0]>0&&(d+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(t+l*c[0],",").concat(r)),d+="L ".concat(t+n-l*c[1],",").concat(r),c[1]>0&&(d+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+s*c[1])),d+="L ".concat(t+n,",").concat(r+i-s*c[2]),c[2]>0&&(d+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,`,
        `).concat(t+n-l*c[2],",").concat(r+i)),d+="L ".concat(t+l*c[3],",").concat(r+i),c[3]>0&&(d+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-s*c[3])),d+="Z"}else if(a>0&&o===+o&&o>0){var h=Math.min(a,o);d="M ".concat(t,",").concat(r+s*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+l*h,",").concat(r,`
            L `).concat(t+n-l*h,",").concat(r,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+n,",").concat(r+s*h,`
            L `).concat(t+n,",").concat(r+i-s*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t+n-l*h,",").concat(r+i,`
            L `).concat(t+l*h,",").concat(r+i,`
            A `).concat(h,",").concat(h,",0,0,").concat(u,",").concat(t,",").concat(r+i-s*h," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},KTe=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,o=r.x,a=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),d=Math.max(o,o+s),c=Math.min(a,a+l),f=Math.max(a,a+l);return n>=u&&n<=d&&i>=c&&i<=f}return!1},qTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$C=function(t){var r=Oz(Oz({},qTe),t),n=N.useRef(),i=N.useState(-1),o=RTe(i,2),a=o[0],s=o[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var l=r.x,u=r.y,d=r.width,c=r.height,f=r.radius,p=r.className,h=r.animationEasing,m=r.animationDuration,v=r.animationBegin,g=r.isAnimationActive,_=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||c!==+c||d===0||c===0)return null;var b=Kt("recharts-rectangle",p);return _?ie.createElement(qa,{canBegin:a>0,from:{width:d,height:c,x:l,y:u},to:{width:d,height:c,x:l,y:u},duration:m,animationEasing:h,isActive:_},function(w){var y=w.width,x=w.height,M=w.x,T=w.y;return ie.createElement(qa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,isActive:g,easing:h},ie.createElement("path",cy({},Ot(r,!0),{className:b,d:kz(M,T,y,x,f),ref:n})))}):ie.createElement("path",cy({},Ot(r,!0),{className:b,d:kz(l,u,d,c,f)}))},XTe=["points","className","baseLinePoints","connectNulls"];function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vc.apply(this,arguments)}function QTe(e,t){if(e==null)return{};var r=YTe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Iz(e){return tPe(e)||ePe(e)||JTe(e)||ZTe()}function ZTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JTe(e,t){if(e){if(typeof e=="string")return iP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iP(e,t)}}function ePe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tPe(e){if(Array.isArray(e))return iP(e)}function iP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dz=function(t){return t&&t.x===+t.x&&t.y===+t.y},rPe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Dz(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Dz(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Yp=function(t,r){var n=rPe(t);r&&(n=[n.reduce(function(o,a){return[].concat(Iz(o),Iz(a))},[])]);var i=n.map(function(o){return o.reduce(function(a,s,l){return"".concat(a).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},nPe=function(t,r,n){var i=Yp(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Yp(r.reverse(),n).slice(1))},iPe=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,o=t.connectNulls,a=QTe(t,XTe);if(!r||!r.length)return null;var s=Kt("recharts-polygon",n);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",u=nPe(r,i,o);return ie.createElement("g",{className:s},ie.createElement("path",Vc({},Ot(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),l?ie.createElement("path",Vc({},Ot(a,!0),{fill:"none",d:Yp(r,o)})):null,l?ie.createElement("path",Vc({},Ot(a,!0),{fill:"none",d:Yp(i,o)})):null)}var d=Yp(r,o);return ie.createElement("path",Vc({},Ot(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:s,d}))};function oP(){return oP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oP.apply(this,arguments)}var z0=function(t){var r=t.cx,n=t.cy,i=t.r,o=t.className,a=Kt("recharts-dot",o);return r===+r&&n===+n&&i===+i?N.createElement("circle",oP({},Ot(t,!1),Av(t),{className:a,cx:r,cy:n,r:i})):null};function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var oPe=["x","y","top","left","width","height","className"];function aP(){return aP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aP.apply(this,arguments)}function jz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function aPe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jz(Object(r),!0).forEach(function(n){sPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sPe(e,t,r){return t=lPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lPe(e){var t=uPe(e,"string");return Qh(t)=="symbol"?t:t+""}function uPe(e,t){if(Qh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cPe(e,t){if(e==null)return{};var r=dPe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fPe=function(t,r,n,i,o,a){return"M".concat(t,",").concat(o,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},pPe=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,o=i===void 0?0:i,a=t.top,s=a===void 0?0:a,l=t.left,u=l===void 0?0:l,d=t.width,c=d===void 0?0:d,f=t.height,p=f===void 0?0:f,h=t.className,m=cPe(t,oPe),v=aPe({x:n,y:o,top:s,left:u,width:c,height:p},m);return!tt(n)||!tt(o)||!tt(c)||!tt(p)||!tt(s)||!tt(u)?null:ie.createElement("path",aP({},Ot(v,!0),{className:Kt("recharts-cross",h),d:fPe(n,o,c,p,s,u)}))},hPe=j0,mPe=LK,gPe=Za;function _Pe(e,t){return e&&e.length?hPe(e,gPe(t),mPe):void 0}var vPe=_Pe;const yPe=xr(vPe);var bPe=j0,wPe=Za,xPe=NK;function MPe(e,t){return e&&e.length?bPe(e,wPe(t),xPe):void 0}var TPe=MPe;const PPe=xr(TPe);var EPe=["cx","cy","angle","ticks","axisLine"],SPe=["ticks","tick","angle","tickFormatter","stroke"];function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function Zp(){return Zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zp.apply(this,arguments)}function Fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(r),!0).forEach(function(n){B0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lz(e,t){if(e==null)return{};var r=CPe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S9(n.key),n)}}function APe(e,t,r){return t&&Nz(e.prototype,t),r&&Nz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OPe(e,t,r){return t=dy(t),kPe(e,E9()?Reflect.construct(t,r||[],dy(e).constructor):t.apply(e,r))}function kPe(e,t){if(t&&(Nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IPe(e)}function IPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!e})()}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dy(e)}function DPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sP(e,t)}function sP(e,t){return sP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},sP(e,t)}function B0(e,t,r){return t=S9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S9(e){var t=jPe(e,"string");return Nd(t)=="symbol"?t:t+""}function jPe(e,t){if(Nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var U0=function(e){function t(){return $Pe(this,t),OPe(this,t,arguments)}return DPe(t,e),APe(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,o=this.props,a=o.angle,s=o.cx,l=o.cy;return Nr(s,l,i,a)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.angle,s=n.ticks,l=yPe(s,function(d){return d.coordinate||0}),u=PPe(s,function(d){return d.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.angle,s=n.ticks,l=n.axisLine,u=Lz(n,EPe),d=s.reduce(function(h,m){return[Math.min(h[0],m.coordinate),Math.max(h[1],m.coordinate)]},[1/0,-1/0]),c=Nr(i,o,d[0],a),f=Nr(i,o,d[1],a),p=ou(ou(ou({},Ot(u,!1)),{},{fill:"none"},Ot(l,!1)),{},{x1:c.x,y1:c.y,x2:f.x,y2:f.y});return ie.createElement("line",Zp({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,l=i.tickFormatter,u=i.stroke,d=Lz(i,SPe),c=this.getTickTextAnchor(),f=Ot(d,!1),p=Ot(a,!1),h=o.map(function(m,v){var g=n.getTickValueCoord(m),_=ou(ou(ou(ou({textAnchor:c,transform:"rotate(".concat(90-s,", ").concat(g.x,", ").concat(g.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:v},g),{},{payload:m});return ie.createElement(mr,Zp({className:Kt("recharts-polar-radius-axis-tick",f9(a)),key:"tick-".concat(m.coordinate)},Vu(n.props,m,v)),t.renderTickItem(a,_,l?l(m.value,v):m.value))});return ie.createElement(mr,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.axisLine,a=n.tick;return!i||!i.length?null:ie.createElement(mr,{className:Kt("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Yn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,o){var a;return ie.isValidElement(n)?a=ie.cloneElement(n,i):Rt(n)?a=n(i):a=ie.createElement(Gu,Zp({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(N.PureComponent);B0(U0,"displayName","PolarRadiusAxis");B0(U0,"axisType","radiusAxis");B0(U0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mu.apply(this,arguments)}function Rz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function au(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rz(Object(r),!0).forEach(function(n){W0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$9(n.key),n)}}function LPe(e,t,r){return t&&zz(e.prototype,t),r&&zz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,r){return t=fy(t),RPe(e,C9()?Reflect.construct(t,r||[],fy(e).constructor):t.apply(e,r))}function RPe(e,t){if(t&&(Rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zPe(e)}function zPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C9=function(){return!!e})()}function fy(e){return fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fy(e)}function BPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}function lP(e,t){return lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lP(e,t)}function W0(e,t,r){return t=$9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $9(e){var t=UPe(e,"string");return Rd(t)=="symbol"?t:t+""}function UPe(e,t){if(Rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var WPe=Math.PI/180,Bz=1e-5,V0=function(e){function t(){return FPe(this,t),NPe(this,t,arguments)}return BPe(t,e),LPe(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.cx,a=i.cy,s=i.radius,l=i.orientation,u=i.tickSize,d=u||8,c=Nr(o,a,s,n.coordinate),f=Nr(o,a,s+(l==="inner"?-1:1)*d,n.coordinate);return{x1:c.x,y1:c.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,o=Math.cos(-n.coordinate*WPe),a;return o>Bz?a=i==="outer"?"start":"end":o<-Bz?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,o=n.cy,a=n.radius,s=n.axisLine,l=n.axisLineType,u=au(au({},Ot(this.props,!1)),{},{fill:"none"},Ot(s,!1));if(l==="circle")return ie.createElement(z0,mu({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:o,r:a}));var d=this.props.ticks,c=d.map(function(f){return Nr(i,o,a,f.coordinate)});return ie.createElement(iPe,mu({className:"recharts-polar-angle-axis-line"},u,{points:c}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,l=i.tickFormatter,u=i.stroke,d=Ot(this.props,!1),c=Ot(a,!1),f=au(au({},d),{},{fill:"none"},Ot(s,!1)),p=o.map(function(h,m){var v=n.getTickLineCoord(h),g=n.getTickTextAnchor(h),_=au(au(au({textAnchor:g},d),{},{stroke:"none",fill:u},c),{},{index:m,payload:h,x:v.x2,y:v.y2});return ie.createElement(mr,mu({className:Kt("recharts-polar-angle-axis-tick",f9(a)),key:"tick-".concat(h.coordinate)},Vu(n.props,h,m)),s&&ie.createElement("line",mu({className:"recharts-polar-angle-axis-tick-line"},f,v)),a&&t.renderTickItem(a,_,l?l(h.value,m):h.value))});return ie.createElement(mr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,o=n.radius,a=n.axisLine;return o<=0||!i||!i.length?null:ie.createElement(mr,{className:Kt("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,o){var a;return ie.isValidElement(n)?a=ie.cloneElement(n,i):Rt(n)?a=n(i):a=ie.createElement(Gu,mu({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(N.PureComponent);W0(V0,"displayName","PolarAngleAxis");W0(V0,"axisType","angleAxis");W0(V0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var VPe=IH,GPe=VPe(Object.getPrototypeOf,Object),HPe=GPe,KPe=js,qPe=HPe,XPe=Fs,QPe="[object Object]",YPe=Function.prototype,ZPe=Object.prototype,A9=YPe.toString,JPe=ZPe.hasOwnProperty,eEe=A9.call(Object);function tEe(e){if(!XPe(e)||KPe(e)!=QPe)return!1;var t=qPe(e);if(t===null)return!0;var r=JPe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&A9.call(r)==eEe}var rEe=tEe;const nEe=xr(rEe);var iEe=js,oEe=Fs,aEe="[object Boolean]";function sEe(e){return e===!0||e===!1||oEe(e)&&iEe(e)==aEe}var lEe=sEe;const uEe=xr(lEe);function Yh(e){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},py.apply(this,arguments)}function cEe(e,t){return hEe(e)||pEe(e,t)||fEe(e,t)||dEe()}function dEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fEe(e,t){if(e){if(typeof e=="string")return Uz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uz(e,t)}}function Uz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pEe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function hEe(e){if(Array.isArray(e))return e}function Wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wz(Object(r),!0).forEach(function(n){mEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mEe(e,t,r){return t=gEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gEe(e){var t=_Ee(e,"string");return Yh(t)=="symbol"?t:t+""}function _Ee(e,t){if(Yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gz=function(t,r,n,i,o){var a=n-i,s;return s="M ".concat(t,",").concat(r),s+="L ".concat(t+n,",").concat(r),s+="L ".concat(t+n-a/2,",").concat(r+o),s+="L ".concat(t+n-a/2-i,",").concat(r+o),s+="L ".concat(t,",").concat(r," Z"),s},vEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yEe=function(t){var r=Vz(Vz({},vEe),t),n=N.useRef(),i=N.useState(-1),o=cEe(i,2),a=o[0],s=o[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&s(b)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,c=r.lowerWidth,f=r.height,p=r.className,h=r.animationEasing,m=r.animationDuration,v=r.animationBegin,g=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||c!==+c||f!==+f||d===0&&c===0||f===0)return null;var _=Kt("recharts-trapezoid",p);return g?ie.createElement(qa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:d,lowerWidth:c,height:f,x:l,y:u},duration:m,animationEasing:h,isActive:g},function(b){var w=b.upperWidth,y=b.lowerWidth,x=b.height,M=b.x,T=b.y;return ie.createElement(qa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,easing:h},ie.createElement("path",py({},Ot(r,!0),{className:_,d:Gz(M,T,w,y,x),ref:n})))}):ie.createElement("g",null,ie.createElement("path",py({},Ot(r,!0),{className:_,d:Gz(l,u,d,c,f)})))},bEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Zh(e){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(e)}function wEe(e,t){if(e==null)return{};var r=xEe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Hz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hz(Object(r),!0).forEach(function(n){MEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MEe(e,t,r){return t=TEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TEe(e){var t=PEe(e,"string");return Zh(t)=="symbol"?t:t+""}function PEe(e,t){if(Zh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EEe(e,t){return hy(hy({},t),e)}function SEe(e,t){return e==="symbols"}function Kz(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ie.createElement($C,r);case"trapezoid":return ie.createElement(yEe,r);case"sector":return ie.createElement(m9,r);case"symbols":if(SEe(t))return ie.createElement(qS,r);break;default:return null}}function CEe(e){return N.isValidElement(e)?e.props:e}function O9(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?EEe:n,o=e.activeClassName,a=o===void 0?"recharts-active-shape":o,s=e.isActive,l=wEe(e,bEe),u;if(N.isValidElement(t))u=N.cloneElement(t,hy(hy({},l),CEe(t)));else if(Rt(t))u=t(l);else if(nEe(t)&&!uEe(t)){var d=i(t,l);u=ie.createElement(Kz,{shapeType:r,elementProps:d})}else{var c=l;u=ie.createElement(Kz,{shapeType:r,elementProps:c})}return s?ie.createElement(mr,{className:a},u):u}function G0(e,t){return t!=null&&"trapezoids"in e.props}function H0(e,t){return t!=null&&"sectors"in e.props}function Jh(e,t){return t!=null&&"points"in e.props}function $Ee(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&o}function AEe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function OEe(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function kEe(e,t){var r;return G0(e,t)?r=$Ee:H0(e,t)?r=AEe:Jh(e,t)&&(r=OEe),r}function IEe(e,t){var r;return G0(e,t)?r="trapezoids":H0(e,t)?r="sectors":Jh(e,t)&&(r="points"),r}function DEe(e,t){if(G0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(H0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Jh(e,t)?t.payload:{}}function jEe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=IEe(r,t),o=DEe(r,t),a=n.filter(function(l,u){var d=Em(o,l),c=r.props[i].filter(function(h){var m=kEe(r,t);return m(h,t)}),f=r.props[i].indexOf(c[c.length-1]),p=u===f;return d&&p}),s=n.indexOf(a[a.length-1]);return s}var z_;function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gc.apply(this,arguments)}function qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(r),!0).forEach(function(n){ko(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I9(n.key),n)}}function LEe(e,t,r){return t&&Xz(e.prototype,t),r&&Xz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NEe(e,t,r){return t=my(t),REe(e,k9()?Reflect.construct(t,r||[],my(e).constructor):t.apply(e,r))}function REe(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zEe(e)}function zEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k9=function(){return!!e})()}function my(e){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},my(e)}function BEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uP(e,t)}function uP(e,t){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},uP(e,t)}function ko(e,t,r){return t=I9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I9(e){var t=UEe(e,"string");return zd(t)=="symbol"?t:t+""}function UEe(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ja=function(e){function t(r){var n;return FEe(this,t),n=NEe(this,t,[r]),ko(n,"pieRef",null),ko(n,"sectorRefs",[]),ko(n,"id",ff("recharts-pie-")),ko(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Rt(i)&&i()}),ko(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Rt(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return BEe(t,e),LEe(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,l=o.dataKey,u=o.valueKey,d=Ot(this.props,!1),c=Ot(a,!1),f=Ot(s,!1),p=a&&a.offsetRadius||20,h=n.map(function(m,v){var g=(m.startAngle+m.endAngle)/2,_=Nr(m.cx,m.cy,m.outerRadius+p,g),b=jr(jr(jr(jr({},d),m),{},{stroke:"none"},c),{},{index:v,textAnchor:t.getTextAnchor(_.x,m.cx)},_),w=jr(jr(jr(jr({},d),m),{},{fill:"none",stroke:m.fill},f),{},{index:v,points:[Nr(m.cx,m.cy,m.outerRadius,g),_]}),y=l;return Vt(l)&&Vt(u)?y="value":Vt(l)&&(y=u),ie.createElement(mr,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},s&&t.renderLabelLineItem(s,w,"line"),t.renderLabelItem(a,b,Bn(m,y)))});return ie.createElement(mr,{className:"recharts-pie-labels"},h)}},{key:"renderSectorsStatically",value:function(n){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,l=o.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var c=i.isActiveIndex(d),f=l&&i.hasActiveIndex()?l:null,p=c?a:f,h=jr(jr({},u),{},{stroke:s?u.fill:u.stroke,tabIndex:-1});return ie.createElement(mr,Gc({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Vu(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),ie.createElement(O9,Gc({option:p,isActive:c,shapeType:"sector"},h)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,c=this.state,f=c.prevSectors,p=c.prevIsAnimationActive;return ie.createElement(qa,{begin:s,duration:l,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(h){var m=h.t,v=[],g=o&&o[0],_=g.startAngle;return o.forEach(function(b,w){var y=f&&f[w],x=w>0?ho(b,"paddingAngle",0):0;if(y){var M=oo(y.endAngle-y.startAngle,b.endAngle-b.startAngle),T=jr(jr({},b),{},{startAngle:_+x,endAngle:_+M(m)+x});v.push(T),_=T.endAngle}else{var S=b.endAngle,$=b.startAngle,k=oo(0,S-$),F=k(m),j=jr(jr({},b),{},{startAngle:_+x,endAngle:_+F+x});v.push(j),_=j.endAngle}}),ie.createElement(mr,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,o=n.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!Em(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,l=i.label,u=i.cx,d=i.cy,c=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,h=this.state.isAnimationFinished;if(o||!a||!a.length||!tt(u)||!tt(d)||!tt(c)||!tt(f))return null;var m=Kt("recharts-pie",s);return ie.createElement(mr,{tabIndex:this.props.rootTabIndex,className:m,ref:function(g){n.pieRef=g}},this.renderSectors(),l&&this.renderLabels(a),Yn.renderCallByParent(this.props,null,!1),(!p||h)&&xs.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,o){if(ie.isValidElement(n))return ie.cloneElement(n,i);if(Rt(n))return n(i);var a=Kt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ie.createElement(ay,Gc({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(n,i,o){if(ie.isValidElement(n))return ie.cloneElement(n,i);var a=o;if(Rt(n)&&(a=n(i),ie.isValidElement(a)))return a;var s=Kt("recharts-pie-label-text",typeof n!="boolean"&&!Rt(n)?n.className:"");return ie.createElement(Gu,Gc({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(N.PureComponent);z_=Ja;ko(Ja,"displayName","Pie");ko(Ja,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!rc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ko(Ja,"parseDeltaAngle",function(e,t){var r=ki(t-e),n=Math.min(Math.abs(t-e),360);return r*n});ko(Ja,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ot(e,!1),i=mo(r,wm);return t&&t.length?t.map(function(o,a){return jr(jr(jr({payload:o},n),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return jr(jr({},n),o.props)}):[]});ko(Ja,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,o=t.height,a=d9(i,o),s=n+Ii(e.cx,i,i/2),l=r+Ii(e.cy,o,o/2),u=Ii(e.innerRadius,a,0),d=Ii(e.outerRadius,a,a*.8),c=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:l,innerRadius:u,outerRadius:d,maxRadius:c}});ko(Ja,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?jr(jr({},t.type.defaultProps),t.props):t.props,i=z_.getRealPieData(n);if(!i||!i.length)return null;var o=n.cornerRadius,a=n.startAngle,s=n.endAngle,l=n.paddingAngle,u=n.dataKey,d=n.nameKey,c=n.valueKey,f=n.tooltipType,p=Math.abs(n.minAngle),h=z_.parseCoordinateOfPie(n,r),m=z_.parseDeltaAngle(a,s),v=Math.abs(m),g=u;Vt(u)&&Vt(c)?(va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):Vt(u)&&(va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=c);var _=i.filter(function(T){return Bn(T,g,0)!==0}).length,b=(v>=360?_:_-1)*l,w=v-_*p-b,y=i.reduce(function(T,S){var $=Bn(S,g,0);return T+(tt($)?$:0)},0),x;if(y>0){var M;x=i.map(function(T,S){var $=Bn(T,g,0),k=Bn(T,d,S),F=(tt($)?$:0)/y,j;S?j=M.endAngle+ki(m)*l*($!==0?1:0):j=a;var U=j+ki(m)*(($!==0?p:0)+F*w),z=(j+U)/2,G=(h.innerRadius+h.outerRadius)/2,H=[{name:k,value:$,payload:T,dataKey:g,type:f}],W=Nr(h.cx,h.cy,G,z);return M=jr(jr(jr({percent:F,cornerRadius:o,name:k,tooltipPayload:H,midAngle:z,middleRadius:G,tooltipPosition:W},T),h),{},{value:Bn(T,g),startAngle:j,endAngle:U,payload:T,paddingAngle:ki(m)*l}),M})}return jr(jr({},h),{},{sectors:x,data:i})});var WEe=Math.ceil,VEe=Math.max;function GEe(e,t,r,n){for(var i=-1,o=VEe(WEe((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}var HEe=GEe,KEe=ZH,Qz=1/0,qEe=17976931348623157e292;function XEe(e){if(!e)return e===0?e:0;if(e=KEe(e),e===Qz||e===-Qz){var t=e<0?-1:1;return t*qEe}return e===e?e:0}var D9=XEe,QEe=HEe,YEe=C0,T1=D9;function ZEe(e){return function(t,r,n){return n&&typeof n!="number"&&YEe(t,r,n)&&(r=n=void 0),t=T1(t),r===void 0?(r=t,t=0):r=T1(r),n=n===void 0?t<r?1:-1:T1(n),QEe(t,r,n,e)}}var JEe=ZEe,eSe=JEe,tSe=eSe(),rSe=tSe;const gy=xr(rSe);function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(n){j9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j9(e,t,r){return t=nSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nSe(e){var t=iSe(e,"string");return em(t)=="symbol"?t:t+""}function iSe(e,t){if(em(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(em(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oSe=["Webkit","Moz","O","ms"],aSe=function(t,r){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),i=oSe.reduce(function(o,a){return Zz(Zz({},o),{},j9({},a+n,r))},{});return i[t]=r,i};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(this,arguments)}function Jz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function P1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(r),!0).forEach(function(n){eo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L9(n.key),n)}}function lSe(e,t,r){return t&&eB(e.prototype,t),r&&eB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uSe(e,t,r){return t=vy(t),cSe(e,F9()?Reflect.construct(t,r||[],vy(e).constructor):t.apply(e,r))}function cSe(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dSe(e)}function dSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!e})()}function vy(e){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vy(e)}function fSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}function cP(e,t){return cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cP(e,t)}function eo(e,t,r){return t=L9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9(e){var t=pSe(e,"string");return Bd(t)=="symbol"?t:t+""}function pSe(e,t){if(Bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hSe=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,o=t.x,a=t.width,s=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=qp().domain(gy(0,l)).range([o,o+a-s]),d=u.domain().map(function(c){return u(c)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},tB=function(t){return t.changedTouches&&!!t.changedTouches.length},Ud=function(e){function t(r){var n;return sSe(this,t),n=uSe(this,t,[r]),eo(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),eo(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),eo(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),n.detachDragEndListener()}),eo(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),eo(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),eo(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),eo(n,"handleSlideDragStart",function(i){var o=tB(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return fSe(t,e),lSe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,o=n.endX,a=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,d=u.length-1,c=Math.min(i,o),f=Math.max(i,o),p=t.getIndexInRange(a,c),h=t.getIndexInRange(a,f);return{startIndex:p-p%l,endIndex:h===d?d:h-h%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=Bn(o[n],s,n);return Rt(a)?a(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,u=l.x,d=l.width,c=l.travellerWidth,f=l.startIndex,p=l.endIndex,h=l.onChange,m=n.pageX-o;m>0?m=Math.min(m,u+d-c-s,u+d-c-a):m<0&&(m=Math.max(m,u-a,u-s));var v=this.getIndex({startX:a+m,endX:s+m});(v.startIndex!==f||v.endIndex!==p)&&h&&h(v),this.setState({startX:a+m,endX:s+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var o=tB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[a],d=this.props,c=d.x,f=d.width,p=d.travellerWidth,h=d.onChange,m=d.gap,v=d.data,g={startX:this.state.startX,endX:this.state.endX},_=n.pageX-o;_>0?_=Math.min(_,c+f-p-u):_<0&&(_=Math.max(_,c-u)),g[a]=u+_;var b=this.getIndex(g),w=b.startIndex,y=b.endIndex,x=function(){var T=v.length-1;return a==="startX"&&(s>l?w%m===0:y%m===0)||s<l&&y===T||a==="endX"&&(s>l?y%m===0:w%m===0)||s>l&&y===T};this.setState(eo(eo({},a,u+_),"brushMoveStartX",n.pageX),function(){h&&x()&&h(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,u=a.endX,d=this.state[i],c=s.indexOf(d);if(c!==-1){var f=c+n;if(!(f===-1||f>=s.length)){var p=s[f];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(eo({},i,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,l=n.fill,u=n.stroke;return ie.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,l=n.data,u=n.children,d=n.padding,c=N.Children.only(u);return c?ie.cloneElement(c,{x:i,y:o,width:a,height:s,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var o,a,s=this,l=this.props,u=l.y,d=l.travellerWidth,c=l.height,f=l.traveller,p=l.ariaLabel,h=l.data,m=l.startIndex,v=l.endIndex,g=Math.max(n,this.props.x),_=P1(P1({},Ot(this.props,!1)),{},{x:g,y:u,width:d,height:c}),b=p||"Min value: ".concat((o=h[m])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=h[v])===null||a===void 0?void 0:a.name);return ie.createElement(mr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(y){["ArrowLeft","ArrowRight"].includes(y.key)&&(y.preventDefault(),y.stopPropagation(),s.handleTravellerMoveKeyboard(y.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,_))}},{key:"renderSlide",value:function(n,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,u=o.travellerWidth,d=Math.min(n,i)+u,c=Math.max(Math.abs(i-n)-u,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:a,width:c,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,o=n.endIndex,a=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,c=d.startX,f=d.endX,p=5,h={pointerEvents:"none",fill:u};return ie.createElement(mr,{className:"recharts-brush-texts"},ie.createElement(Gu,_y({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,f)-p,y:a+s/2},h),this.getTextOfTick(i)),ie.createElement(Gu,_y({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,f)+l+p,y:a+s/2},h),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,i=n.data,o=n.className,a=n.children,s=n.x,l=n.y,u=n.width,d=n.height,c=n.alwaysShowText,f=this.state,p=f.startX,h=f.endX,m=f.isTextActive,v=f.isSlideMoving,g=f.isTravellerMoving,_=f.isTravellerFocused;if(!i||!i.length||!tt(s)||!tt(l)||!tt(u)||!tt(d)||u<=0||d<=0)return null;var b=Kt("recharts-brush",o),w=ie.Children.count(a)===1,y=aSe("userSelect","none");return ie.createElement(mr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(p,h),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(h,"endX"),(m||v||g||_||c)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,o=n.y,a=n.width,s=n.height,l=n.stroke,u=Math.floor(o+s/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),ie.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,i):Rt(n)?o=n(i):o=t.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(n,i){var o=n.data,a=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,c=n.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return P1({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a},o&&o.length?hSe({data:o,width:a,x:s,travellerWidth:l,startIndex:d,endIndex:c}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,i){for(var o=n.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);n[l]>i?s=l:a=l}return i>=n[s]?s:a}}])}(N.PureComponent);eo(Ud,"displayName","Brush");eo(Ud,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mSe=tC;function gSe(e,t){var r;return mSe(e,function(n,i,o){return r=t(n,i,o),!r}),!!r}var _Se=gSe,vSe=PH,ySe=Za,bSe=_Se,wSe=Qi,xSe=C0;function MSe(e,t,r){var n=wSe(e)?vSe:bSe;return r&&xSe(e,t,r)&&(t=void 0),n(e,ySe(t))}var TSe=MSe;const PSe=xr(TSe);var Wa=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},rB=KH;function ESe(e,t,r){t=="__proto__"&&rB?rB(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var SSe=ESe,CSe=SSe,$Se=GH,ASe=Za;function OSe(e,t){var r={};return t=ASe(t),$Se(e,function(n,i,o){CSe(r,i,t(n,i,o))}),r}var kSe=OSe;const ISe=xr(kSe);function DSe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var jSe=DSe,FSe=tC;function LSe(e,t){var r=!0;return FSe(e,function(n,i,o){return r=!!t(n,i,o),r}),r}var NSe=LSe,RSe=jSe,zSe=NSe,BSe=Za,USe=Qi,WSe=C0;function VSe(e,t,r){var n=USe(e)?RSe:zSe;return r&&WSe(e,t,r)&&(t=void 0),n(e,BSe(t))}var GSe=VSe;const N9=xr(GSe);var HSe=["x","y"];function tm(e){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tm(e)}function dP(){return dP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dP.apply(this,arguments)}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){KSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KSe(e,t,r){return t=qSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qSe(e){var t=XSe(e,"string");return tm(t)=="symbol"?t:t+""}function XSe(e,t){if(tm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QSe(e,t){if(e==null)return{};var r=YSe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ZSe(e,t){var r=e.x,n=e.y,i=QSe(e,HSe),o="".concat(r),a=parseInt(o,10),s="".concat(n),l=parseInt(s,10),u="".concat(t.height||i.height),d=parseInt(u,10),c="".concat(t.width||i.width),f=parseInt(c,10);return Mp(Mp(Mp(Mp(Mp({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function iB(e){return ie.createElement(O9,dP({shapeType:"rectangle",propTransformer:ZSe,activeClassName:"recharts-active-bar"},e))}var JSe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var o=tt(n)||Tle(n);return o?t(n,i):(o||Ku(),r)}},eCe=["value","background"],R9;function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function tCe(e,t){if(e==null)return{};var r=rCe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yy.apply(this,arguments)}function oB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oB(Object(r),!0).forEach(function(n){pl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B9(n.key),n)}}function iCe(e,t,r){return t&&aB(e.prototype,t),r&&aB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oCe(e,t,r){return t=by(t),aCe(e,z9()?Reflect.construct(t,r||[],by(e).constructor):t.apply(e,r))}function aCe(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sCe(e)}function sCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z9=function(){return!!e})()}function by(e){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},by(e)}function lCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}function fP(e,t){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},fP(e,t)}function pl(e,t,r){return t=B9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B9(e){var t=uCe(e,"string");return Wd(t)=="symbol"?t:t+""}function uCe(e,t){if(Wd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Va=function(e){function t(){var r;nCe(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=oCe(this,t,[].concat(i)),pl(r,"state",{isAnimationFinished:!1}),pl(r,"id",ff("recharts-bar-")),pl(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),pl(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return lCe(t,e),iCe(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,u=o.activeBar,d=Ot(this.props,!1);return n&&n.map(function(c,f){var p=f===l,h=p?u:a,m=Sn(Sn(Sn({},d),c),{},{isActive:p,option:h,index:f,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ie.createElement(mr,yy({className:"recharts-bar-rectangle"},Vu(i.props,c,f),{key:"rectangle-".concat(c==null?void 0:c.x,"-").concat(c==null?void 0:c.y,"-").concat(c==null?void 0:c.value,"-").concat(f)}),ie.createElement(iB,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,c=i.animationId,f=this.state.prevData;return ie.createElement(qa,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,m=o.map(function(v,g){var _=f&&f[g];if(_){var b=oo(_.x,v.x),w=oo(_.y,v.y),y=oo(_.width,v.width),x=oo(_.height,v.height);return Sn(Sn({},v),{},{x:b(h),y:w(h),width:y(h),height:x(h)})}if(a==="horizontal"){var M=oo(0,v.height),T=M(h);return Sn(Sn({},v),{},{y:v.y+v.height-T,height:T})}var S=oo(0,v.width),$=S(h);return Sn(Sn({},v),{},{width:$})});return ie.createElement(mr,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Em(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=Ot(this.props.background,!1);return o.map(function(u,d){u.value;var c=u.background,f=tCe(u,eCe);if(!c)return null;var p=Sn(Sn(Sn(Sn(Sn({},f),{},{fill:"#eee"},c),l),Vu(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return ie.createElement(iB,yy({key:"background-bar-".concat(d),option:n.props.background,isActive:d===s},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,u=o.layout,d=o.children,c=mo(d,Sm);if(!c)return null;var f=u==="vertical"?a[0].height/2:a[0].width/2,p=function(v,g){var _=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:_,errorVal:Bn(v,g)}},h={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ie.createElement(mr,h,c.map(function(m){return ie.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,o=n.data,a=n.className,s=n.xAxis,l=n.yAxis,u=n.left,d=n.top,c=n.width,f=n.height,p=n.isAnimationActive,h=n.background,m=n.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,g=Kt("recharts-bar",a),_=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,w=_||b,y=Vt(m)?this.id:m;return ie.createElement(mr,{className:g},_||b?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(y)},ie.createElement("rect",{x:_?u:u-c/2,y:b?d:d-f/2,width:_?c:c*2,height:b?f:f*2}))):null,ie.createElement(mr,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(y,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,y),(!p||v)&&xs.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(N.PureComponent);R9=Va;pl(Va,"displayName","Bar");pl(Va,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});pl(Va,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,o=e.xAxis,a=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,c=e.displayedData,f=e.offset,p=Wxe(n,r);if(!p)return null;var h=t.layout,m=r.type.defaultProps,v=m!==void 0?Sn(Sn({},m),r.props):r.props,g=v.dataKey,_=v.children,b=v.minPointSize,w=h==="horizontal"?a:o,y=u?w.scale.domain():null,x=Qxe({numericAxis:w}),M=mo(_,wm),T=c.map(function(S,$){var k,F,j,U,z,G;u?k=Vxe(u[d+$],y):(k=Bn(S,g),Array.isArray(k)||(k=[x,k]));var H=JSe(b,R9.defaultProps.minPointSize)(k[1],$);if(h==="horizontal"){var W,Y=[a.scale(k[0]),a.scale(k[1])],te=Y[0],V=Y[1];F=XR({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:S,index:$}),j=(W=V??te)!==null&&W!==void 0?W:void 0,U=p.size;var I=te-V;if(z=Number.isNaN(I)?0:I,G={x:F,y:a.y,width:U,height:a.height},Math.abs(H)>0&&Math.abs(z)<Math.abs(H)){var K=ki(z||H)*(Math.abs(H)-Math.abs(z));j-=K,z+=K}}else{var ae=[o.scale(k[0]),o.scale(k[1])],pe=ae[0],de=ae[1];if(F=pe,j=XR({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:S,index:$}),U=de-pe,z=p.size,G={x:o.x,y:j,width:o.width,height:z},Math.abs(H)>0&&Math.abs(U)<Math.abs(H)){var be=ki(U||H)*(Math.abs(H)-Math.abs(U));U+=be}}return Sn(Sn(Sn({},S),{},{x:F,y:j,width:U,height:z,value:u?k:k[1],payload:S,background:G},M&&M[$]&&M[$].props),{},{tooltipPayload:[u9(r,S)],tooltipPosition:{x:F+U/2,y:j+z/2}})});return Sn({data:T,layout:h},f)});function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function cCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U9(n.key),n)}}function dCe(e,t,r){return t&&sB(e.prototype,t),r&&sB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lB(Object(r),!0).forEach(function(n){K0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K0(e,t,r){return t=U9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U9(e){var t=fCe(e,"string");return rm(t)=="symbol"?t:t+""}function fCe(e,t){if(rm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W9=function(t,r,n,i,o){var a=t.width,s=t.height,l=t.layout,u=t.children,d=Object.keys(r),c={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},f=!!ro(u,Va);return d.reduce(function(p,h){var m=r[h],v=m.orientation,g=m.domain,_=m.padding,b=_===void 0?{}:_,w=m.mirror,y=m.reversed,x="".concat(v).concat(w?"Mirror":""),M,T,S,$,k;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var F=g[1]-g[0],j=1/0,U=m.categoricalDomain.sort(Sle);if(U.forEach(function(ae,pe){pe>0&&(j=Math.min((ae||0)-(U[pe-1]||0),j))}),Number.isFinite(j)){var z=j/F,G=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(M=z*G/2),m.padding==="no-gap"){var H=Ii(t.barCategoryGap,z*G),W=z*G/2;M=W-H-(W-H)/G*H}}}i==="xAxis"?T=[n.left+(b.left||0)+(M||0),n.left+n.width-(b.right||0)-(M||0)]:i==="yAxis"?T=l==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(M||0),n.top+n.height-(b.bottom||0)-(M||0)]:T=m.range,y&&(T=[T[1],T[0]]);var Y=o9(m,o,f),te=Y.scale,V=Y.realScaleType;te.domain(g).range(T),a9(te);var I=s9(te,ua(ua({},m),{},{realScaleType:V}));i==="xAxis"?(k=v==="top"&&!w||v==="bottom"&&w,S=n.left,$=c[x]-k*m.height):i==="yAxis"&&(k=v==="left"&&!w||v==="right"&&w,S=c[x]-k*m.width,$=n.top);var K=ua(ua(ua({},m),I),{},{realScaleType:V,x:S,y:$,scale:te,width:i==="xAxis"?n.width:m.width,height:i==="yAxis"?n.height:m.height});return K.bandSize=ny(K,I),!m.hide&&i==="xAxis"?c[x]+=(k?-1:1)*K.height:m.hide||(c[x]+=(k?-1:1)*K.width),ua(ua({},p),{},K0({},h,K))},{})},V9=function(t,r){var n=t.x,i=t.y,o=r.x,a=r.y;return{x:Math.min(n,o),y:Math.min(i,a),width:Math.abs(o-n),height:Math.abs(a-i)}},pCe=function(t){var r=t.x1,n=t.y1,i=t.x2,o=t.y2;return V9({x:r,y:n},{x:i,y:o})},G9=function(){function e(t){cCe(this,e),this.scale=t}return dCe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();K0(G9,"EPS",1e-4);var AC=function(t){var r=Object.keys(t).reduce(function(n,i){return ua(ua({},n),{},K0({},i,G9.create(t[i])))},{});return ua(ua({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return ISe(i,function(l,u){return r[u].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return N9(i,function(o,a){return r[a].isInRange(o)})}})};function hCe(e){return(e%180+180)%180}var mCe=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=hCe(i),a=o*Math.PI/180,s=Math.atan(n/r),l=a>s&&a<Math.PI-s?n/Math.sin(a):r/Math.cos(a);return Math.abs(l)},gCe=Za,_Ce=bm,vCe=E0;function yCe(e){return function(t,r,n){var i=Object(t);if(!_Ce(t)){var o=gCe(r);t=vCe(t),r=function(s){return o(i[s],s,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var bCe=yCe,wCe=D9;function xCe(e){var t=wCe(e),r=t%1;return t===t?r?t-r:t:0}var MCe=xCe,TCe=RH,PCe=Za,ECe=MCe,SCe=Math.max;function CCe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:ECe(r);return i<0&&(i=SCe(n+i,0)),TCe(e,PCe(t),i)}var $Ce=CCe,ACe=bCe,OCe=$Ce,kCe=ACe(OCe),ICe=kCe;const DCe=xr(ICe);var jCe=Ase(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),OC=N.createContext(void 0),kC=N.createContext(void 0),H9=N.createContext(void 0),K9=N.createContext({}),q9=N.createContext(void 0),X9=N.createContext(0),Q9=N.createContext(0),uB=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,o=r.offset,a=t.clipPathId,s=t.children,l=t.width,u=t.height,d=jCe(o);return ie.createElement(OC.Provider,{value:n},ie.createElement(kC.Provider,{value:i},ie.createElement(K9.Provider,{value:o},ie.createElement(H9.Provider,{value:d},ie.createElement(q9.Provider,{value:a},ie.createElement(X9.Provider,{value:u},ie.createElement(Q9.Provider,{value:l},s)))))))},FCe=function(){return N.useContext(q9)},Y9=function(t){var r=N.useContext(OC);r==null&&Ku();var n=r[t];return n==null&&Ku(),n},LCe=function(){var t=N.useContext(OC);return il(t)},NCe=function(){var t=N.useContext(kC),r=DCe(t,function(n){return N9(n.domain,Number.isFinite)});return r||il(t)},Z9=function(t){var r=N.useContext(kC);r==null&&Ku();var n=r[t];return n==null&&Ku(),n},RCe=function(){var t=N.useContext(H9);return t},zCe=function(){return N.useContext(K9)},IC=function(){return N.useContext(Q9)},DC=function(){return N.useContext(X9)};function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function BCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eq(n.key),n)}}function WCe(e,t,r){return t&&UCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VCe(e,t,r){return t=wy(t),GCe(e,J9()?Reflect.construct(t,r||[],wy(e).constructor):t.apply(e,r))}function GCe(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HCe(e)}function HCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J9=function(){return!!e})()}function wy(e){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wy(e)}function KCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pP(e,t)}function pP(e,t){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},pP(e,t)}function cB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(r),!0).forEach(function(n){jC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jC(e,t,r){return t=eq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eq(e){var t=qCe(e,"string");return Vd(t)=="symbol"?t:t+""}function qCe(e,t){if(Vd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XCe(e,t){return JCe(e)||ZCe(e,t)||YCe(e,t)||QCe()}function QCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YCe(e,t){if(e){if(typeof e=="string")return fB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fB(e,t)}}function fB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function JCe(e){if(Array.isArray(e))return e}function hP(){return hP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hP.apply(this,arguments)}var e$e=function(t,r){var n;return ie.isValidElement(t)?n=ie.cloneElement(t,r):Rt(t)?n=t(r):n=ie.createElement("line",hP({},r,{className:"recharts-reference-line-line"})),n},t$e=function(t,r,n,i,o,a,s,l,u){var d=o.x,c=o.y,f=o.width,p=o.height;if(n){var h=u.y,m=t.y.apply(h,{position:a});if(Wa(u,"discard")&&!t.y.isInRange(m))return null;var v=[{x:d+f,y:m},{x:d,y:m}];return l==="left"?v.reverse():v}if(r){var g=u.x,_=t.x.apply(g,{position:a});if(Wa(u,"discard")&&!t.x.isInRange(_))return null;var b=[{x:_,y:c+p},{x:_,y:c}];return s==="top"?b.reverse():b}if(i){var w=u.segment,y=w.map(function(x){return t.apply(x,{position:a})});return Wa(u,"discard")&&PSe(y,function(x){return!t.isInRange(x)})?null:y}return null};function r$e(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,o=e.yAxisId,a=e.shape,s=e.className,l=e.alwaysShow,u=FCe(),d=Y9(i),c=Z9(o),f=RCe();if(!u||!f)return null;va(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=AC({x:d.scale,y:c.scale}),h=Wn(t),m=Wn(r),v=n&&n.length===2,g=t$e(p,h,m,v,f,e.position,d.orientation,c.orientation,e);if(!g)return null;var _=XCe(g,2),b=_[0],w=b.x,y=b.y,x=_[1],M=x.x,T=x.y,S=Wa(e,"hidden")?"url(#".concat(u,")"):void 0,$=dB(dB({clipPath:S},Ot(e,!0)),{},{x1:w,y1:y,x2:M,y2:T});return ie.createElement(mr,{className:Kt("recharts-reference-line",s)},e$e(a,$),Yn.renderCallByParent(e,pCe({x1:w,y1:y,x2:M,y2:T})))}var FC=function(e){function t(){return BCe(this,t),VCe(this,t,arguments)}return KCe(t,e),WCe(t,[{key:"render",value:function(){return ie.createElement(r$e,this.props)}}])}(ie.Component);jC(FC,"displayName","ReferenceLine");jC(FC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function mP(){return mP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mP.apply(this,arguments)}function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function pB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pB(Object(r),!0).forEach(function(n){q0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rq(n.key),n)}}function o$e(e,t,r){return t&&i$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a$e(e,t,r){return t=xy(t),s$e(e,tq()?Reflect.construct(t,r||[],xy(e).constructor):t.apply(e,r))}function s$e(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l$e(e)}function l$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tq=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xy(e)}function u$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}function gP(e,t){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gP(e,t)}function q0(e,t,r){return t=rq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rq(e){var t=c$e(e,"string");return Gd(t)=="symbol"?t:t+""}function c$e(e,t){if(Gd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var d$e=function(t){var r=t.x,n=t.y,i=t.xAxis,o=t.yAxis,a=AC({x:i.scale,y:o.scale}),s=a.apply({x:r,y:n},{bandAware:!0});return Wa(t,"discard")&&!a.isInRange(s)?null:s},X0=function(e){function t(){return n$e(this,t),a$e(this,t,arguments)}return u$e(t,e),o$e(t,[{key:"render",value:function(){var n=this.props,i=n.x,o=n.y,a=n.r,s=n.alwaysShow,l=n.clipPathId,u=Wn(i),d=Wn(o);if(va(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var c=d$e(this.props);if(!c)return null;var f=c.x,p=c.y,h=this.props,m=h.shape,v=h.className,g=Wa(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=hB(hB({clipPath:g},Ot(this.props,!0)),{},{cx:f,cy:p});return ie.createElement(mr,{className:Kt("recharts-reference-dot",v)},t.renderDot(m,_),Yn.renderCallByParent(this.props,{x:f-a,y:p-a,width:2*a,height:2*a}))}}])}(ie.Component);q0(X0,"displayName","ReferenceDot");q0(X0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});q0(X0,"renderDot",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):Rt(e)?r=e(t):r=ie.createElement(z0,mP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_P.apply(this,arguments)}function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function mB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mB(Object(r),!0).forEach(function(n){Q0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p$e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iq(n.key),n)}}function h$e(e,t,r){return t&&p$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function m$e(e,t,r){return t=My(t),g$e(e,nq()?Reflect.construct(t,r||[],My(e).constructor):t.apply(e,r))}function g$e(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _$e(e)}function _$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nq=function(){return!!e})()}function My(e){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},My(e)}function v$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t)}function vP(e,t){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vP(e,t)}function Q0(e,t,r){return t=iq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iq(e){var t=y$e(e,"string");return Hd(t)=="symbol"?t:t+""}function y$e(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var b$e=function(t,r,n,i,o){var a=o.x1,s=o.x2,l=o.y1,u=o.y2,d=o.xAxis,c=o.yAxis;if(!d||!c)return null;var f=AC({x:d.scale,y:c.scale}),p={x:t?f.x.apply(a,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(l,{position:"start"}):f.y.rangeMin},h={x:r?f.x.apply(s,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Wa(o,"discard")&&(!f.isInRange(p)||!f.isInRange(h))?null:V9(p,h)},Y0=function(e){function t(){return f$e(this,t),m$e(this,t,arguments)}return v$e(t,e),h$e(t,[{key:"render",value:function(){var n=this.props,i=n.x1,o=n.x2,a=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;va(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=Wn(i),f=Wn(o),p=Wn(a),h=Wn(s),m=this.props.shape;if(!c&&!f&&!p&&!h&&!m)return null;var v=b$e(c,f,p,h,this.props);if(!v&&!m)return null;var g=Wa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ie.createElement(mr,{className:Kt("recharts-reference-area",l)},t.renderRect(m,gB(gB({clipPath:g},Ot(this.props,!0)),v)),Yn.renderCallByParent(this.props,v))}}])}(ie.Component);Q0(Y0,"displayName","ReferenceArea");Q0(Y0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Q0(Y0,"renderRect",function(e,t){var r;return ie.isValidElement(e)?r=ie.cloneElement(e,t):Rt(e)?r=e(t):r=ie.createElement($C,_P({},t,{className:"recharts-reference-area-rect"})),r});function oq(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function w$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return mCe(n,r)}function x$e(e,t,r){var n=r==="width",i=e.x,o=e.y,a=e.width,s=e.height;return t===1?{start:n?i:o,end:n?i+a:o+s}:{start:n?i+a:o+s,end:n?i:o}}function Ty(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-i)<=0}function M$e(e,t){return oq(e,t+1)}function T$e(e,t,r,n,i){for(var o=(n||[]).slice(),a=t.start,s=t.end,l=0,u=1,d=a,c=function(){var h=n==null?void 0:n[l];if(h===void 0)return{v:oq(n,u)};var m=l,v,g=function(){return v===void 0&&(v=r(h,m)),v},_=h.coordinate,b=l===0||Ty(e,_,g,d,s);b||(l=0,d=a,u+=1),b&&(d=_+e*(g()/2+i),l+=u)},f;u<=o.length;)if(f=c(),f)return f.v;return[]}function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}function _B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_B(Object(r),!0).forEach(function(n){P$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P$e(e,t,r){return t=E$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E$e(e){var t=S$e(e,"string");return nm(t)=="symbol"?t:t+""}function S$e(e,t){if(nm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C$e(e,t,r,n,i){for(var o=(n||[]).slice(),a=o.length,s=t.start,l=t.end,u=function(f){var p=o[f],h,m=function(){return h===void 0&&(h=r(p,f)),h};if(f===a-1){var v=e*(p.coordinate+e*m()/2-l);o[f]=p=yi(yi({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else o[f]=p=yi(yi({},p),{},{tickCoord:p.coordinate});var g=Ty(e,p.tickCoord,m,s,l);g&&(l=p.tickCoord-e*(m()/2+i),o[f]=yi(yi({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return o}function $$e(e,t,r,n,i,o){var a=(n||[]).slice(),s=a.length,l=t.start,u=t.end;if(o){var d=n[s-1],c=r(d,s-1),f=e*(d.coordinate+e*c/2-u);a[s-1]=d=yi(yi({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var p=Ty(e,d.tickCoord,function(){return c},l,u);p&&(u=d.tickCoord-e*(c/2+i),a[s-1]=yi(yi({},d),{},{isShow:!0}))}for(var h=o?s-1:s,m=function(_){var b=a[_],w,y=function(){return w===void 0&&(w=r(b,_)),w};if(_===0){var x=e*(b.coordinate-e*y()/2-l);a[_]=b=yi(yi({},b),{},{tickCoord:x<0?b.coordinate-x*e:b.coordinate})}else a[_]=b=yi(yi({},b),{},{tickCoord:b.coordinate});var M=Ty(e,b.tickCoord,y,l,u);M&&(l=b.tickCoord+e*(y()/2+i),a[_]=yi(yi({},b),{},{isShow:!0}))},v=0;v<h;v++)m(v);return a}function LC(e,t,r){var n=e.tick,i=e.ticks,o=e.viewBox,a=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,c=e.angle;if(!i||!i.length||!n)return[];if(tt(l)||rc.isSsr)return M$e(i,typeof l=="number"&&tt(l)?l:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",h=d&&p==="width"?Kp(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,w){var y=Rt(u)?u(b.value,w):b.value;return p==="width"?w$e(Kp(y,{fontSize:t,letterSpacing:r}),h,c):Kp(y,{fontSize:t,letterSpacing:r})[p]},v=i.length>=2?ki(i[1].coordinate-i[0].coordinate):1,g=x$e(o,v,p);return l==="equidistantPreserveStart"?T$e(v,g,m,i,a):(l==="preserveStart"||l==="preserveStartEnd"?f=$$e(v,g,m,i,a,l==="preserveStartEnd"):f=C$e(v,g,m,i,a),f.filter(function(_){return _.isShow}))}var A$e=["viewBox"],O$e=["viewBox"],k$e=["ticks"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hc.apply(this,arguments)}function vB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vB(Object(r),!0).forEach(function(n){NC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E1(e,t){if(e==null)return{};var r=I$e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function I$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function D$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sq(n.key),n)}}function j$e(e,t,r){return t&&yB(e.prototype,t),r&&yB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function F$e(e,t,r){return t=Py(t),L$e(e,aq()?Reflect.construct(t,r||[],Py(e).constructor):t.apply(e,r))}function L$e(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N$e(e)}function N$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aq=function(){return!!e})()}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Py(e)}function R$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yP(e,t)}function yP(e,t){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},yP(e,t)}function NC(e,t,r){return t=sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sq(e){var t=z$e(e,"string");return Kd(t)=="symbol"?t:t+""}function z$e(e,t){if(Kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yf=function(e){function t(r){var n;return D$e(this,t),n=F$e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return R$e(t,e),j$e(t,[{key:"shouldComponentUpdate",value:function(n,i){var o=n.viewBox,a=E1(n,A$e),s=this.props,l=s.viewBox,u=E1(s,O$e);return!id(o,l)||!id(a,u)||!id(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.orientation,d=i.tickSize,c=i.mirror,f=i.tickMargin,p,h,m,v,g,_,b=c?-1:1,w=n.tickSize||d,y=tt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=h=n.coordinate,v=a+ +!c*l,m=v-b*w,_=m-b*f,g=y;break;case"left":m=v=n.coordinate,h=o+ +!c*s,p=h-b*w,g=p-b*f,_=y;break;case"right":m=v=n.coordinate,h=o+ +c*s,p=h+b*w,g=p+b*f,_=y;break;default:p=h=n.coordinate,v=a+ +c*l,m=v+b*w,_=m+b*f,g=y;break}return{line:{x1:p,y1:m,x2:h,y2:v},tick:{x:g,y:_}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,c=Ln(Ln(Ln({},Ot(this.props,!1)),Ot(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);c=Ln(Ln({},c),{},{x1:i,y1:o+f*s,x2:i+a,y2:o+f*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);c=Ln(Ln({},c),{},{x1:i+p*a,y1:o,x2:i+p*a,y2:o+s})}return ie.createElement("line",Hc({},c,{className:Kt("recharts-cartesian-axis-line",ho(d,"className"))}))}},{key:"renderTicks",value:function(n,i,o){var a=this,s=this.props,l=s.tickLine,u=s.stroke,d=s.tick,c=s.tickFormatter,f=s.unit,p=LC(Ln(Ln({},this.props),{},{ticks:n}),i,o),h=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),v=Ot(this.props,!1),g=Ot(d,!1),_=Ln(Ln({},v),{},{fill:"none"},Ot(l,!1)),b=p.map(function(w,y){var x=a.getTickLineCoord(w),M=x.line,T=x.tick,S=Ln(Ln(Ln(Ln({textAnchor:h,verticalAnchor:m},v),{},{stroke:"none",fill:u},g),T),{},{index:y,payload:w,visibleTicksCount:p.length,tickFormatter:c});return ie.createElement(mr,Hc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Vu(a.props,w,y)),l&&ie.createElement("line",Hc({},_,M,{className:Kt("recharts-cartesian-axis-tick-line",ho(l,"className"))})),d&&t.renderTickItem(d,S,"".concat(Rt(c)?c(w.value,y):w.value).concat(f||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var c=this.props,f=c.ticks,p=E1(c,k$e),h=f;return Rt(l)&&(h=f&&f.length>0?l(this.props):l(p)),a<=0||s<=0||!h||!h.length?null:ie.createElement(mr,{className:Kt("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),Yn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,o){var a,s=Kt(i.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(n)?a=ie.cloneElement(n,Ln(Ln({},i),{},{className:s})):Rt(n)?a=n(Ln(Ln({},i),{},{className:s})):a=ie.createElement(Gu,Hc({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(N.Component);NC(yf,"displayName","CartesianAxis");NC(yf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var B$e=["x1","y1","x2","y2","key"],U$e=["offset"];function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function bB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bB(Object(r),!0).forEach(function(n){W$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W$e(e,t,r){return t=V$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$e(e){var t=G$e(e,"string");return qu(t)=="symbol"?t:t+""}function G$e(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mu.apply(this,arguments)}function wB(e,t){if(e==null)return{};var r=H$e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var K$e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,i=t.x,o=t.y,a=t.width,s=t.height,l=t.ry;return ie.createElement("rect",{x:i,y:o,ry:l,width:a,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function lq(e,t){var r;if(ie.isValidElement(e))r=ie.cloneElement(e,t);else if(Rt(e))r=e(t);else{var n=t.x1,i=t.y1,o=t.x2,a=t.y2,s=t.key,l=wB(t,B$e),u=Ot(l,!1);u.offset;var d=wB(u,U$e);r=ie.createElement("line",Mu({},d,{x1:n,y1:i,x2:o,y2:a,fill:"none",key:s}))}return r}function q$e(e){var t=e.x,r=e.width,n=e.horizontal,i=n===void 0?!0:n,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var u=wi(wi({},e),{},{x1:t,y1:s,x2:t+r,y2:s,key:"line-".concat(l),index:l});return lq(i,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function X$e(e){var t=e.y,r=e.height,n=e.vertical,i=n===void 0?!0:n,o=e.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,l){var u=wi(wi({},e),{},{x1:s,y1:t,x2:s,y2:t+r,key:"line-".concat(l),index:l});return lq(i,u)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Q$e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,o=e.width,a=e.height,s=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=s.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==d[0]&&d.unshift(0);var c=d.map(function(f,p){var h=!d[p+1],m=h?i+a-f:d[p+1]-f;if(m<=0)return null;var v=p%t.length;return ie.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:m,width:o,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Y$e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,i=e.fillOpacity,o=e.x,a=e.y,s=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==d[0]&&d.unshift(0);var c=d.map(function(f,p){var h=!d[p+1],m=h?o+s-f:d[p+1]-f;if(m<=0)return null;var v=p%n.length;return ie.createElement("rect",{key:"react-".concat(p),x:f,y:a,width:m,height:l,stroke:"none",fill:n[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var Z$e=function(t,r){var n=t.xAxis,i=t.width,o=t.height,a=t.offset;return i9(LC(wi(wi(wi({},yf.defaultProps),n),{},{ticks:vs(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,r)},J$e=function(t,r){var n=t.yAxis,i=t.width,o=t.height,a=t.offset;return i9(LC(wi(wi(wi({},yf.defaultProps),n),{},{ticks:vs(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,r)},Pc={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function bP(e){var t,r,n,i,o,a,s=IC(),l=DC(),u=zCe(),d=wi(wi({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Pc.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Pc.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Pc.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Pc.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:Pc.vertical,verticalFill:(a=e.verticalFill)!==null&&a!==void 0?a:Pc.verticalFill,x:tt(e.x)?e.x:u.left,y:tt(e.y)?e.y:u.top,width:tt(e.width)?e.width:u.width,height:tt(e.height)?e.height:u.height}),c=d.x,f=d.y,p=d.width,h=d.height,m=d.syncWithTicks,v=d.horizontalValues,g=d.verticalValues,_=LCe(),b=NCe();if(!tt(p)||p<=0||!tt(h)||h<=0||!tt(c)||c!==+c||!tt(f)||f!==+f)return null;var w=d.verticalCoordinatesGenerator||Z$e,y=d.horizontalCoordinatesGenerator||J$e,x=d.horizontalPoints,M=d.verticalPoints;if((!x||!x.length)&&Rt(y)){var T=v&&v.length,S=y({yAxis:b?wi(wi({},b),{},{ticks:T?v:b.ticks}):void 0,width:s,height:l,offset:u},T?!0:m);va(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(qu(S),"]")),Array.isArray(S)&&(x=S)}if((!M||!M.length)&&Rt(w)){var $=g&&g.length,k=w({xAxis:_?wi(wi({},_),{},{ticks:$?g:_.ticks}):void 0,width:s,height:l,offset:u},$?!0:m);va(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(qu(k),"]")),Array.isArray(k)&&(M=k)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(K$e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ie.createElement(q$e,Mu({},d,{offset:u,horizontalPoints:x,xAxis:_,yAxis:b})),ie.createElement(X$e,Mu({},d,{offset:u,verticalPoints:M,xAxis:_,yAxis:b})),ie.createElement(Q$e,Mu({},d,{horizontalPoints:x})),ie.createElement(Y$e,Mu({},d,{verticalPoints:M})))}bP.displayName="CartesianGrid";var e2e=["type","layout","connectNulls","ref"],t2e=["key"];function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function xB(e,t){if(e==null)return{};var r=r2e(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function r2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jp.apply(this,arguments)}function MB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MB(Object(r),!0).forEach(function(n){ca(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ec(e){return a2e(e)||o2e(e)||i2e(e)||n2e()}function n2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2e(e,t){if(e){if(typeof e=="string")return wP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wP(e,t)}}function o2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a2e(e){if(Array.isArray(e))return wP(e)}function wP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cq(n.key),n)}}function l2e(e,t,r){return t&&TB(e.prototype,t),r&&TB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u2e(e,t,r){return t=Ey(t),c2e(e,uq()?Reflect.construct(t,r||[],Ey(e).constructor):t.apply(e,r))}function c2e(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2e(e)}function d2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uq=function(){return!!e})()}function Ey(e){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ey(e)}function f2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xP(e,t)}function xP(e,t){return xP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xP(e,t)}function ca(e,t,r){return t=cq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=p2e(e,"string");return qd(t)=="symbol"?t:t+""}function p2e(e,t){if(qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cm=function(e){function t(){var r;s2e(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=u2e(this,t,[].concat(i)),ca(r,"state",{isAnimationFinished:!0,totalLength:0}),ca(r,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),ca(r,"getStrokeDasharray",function(a,s,l){var u=l.reduce(function(g,_){return g+_});if(!u)return r.generateSimpleStrokeDasharray(s,a);for(var d=Math.floor(a/u),c=a%u,f=s-a,p=[],h=0,m=0;h<l.length;m+=l[h],++h)if(m+l[h]>c){p=[].concat(Ec(l.slice(0,h)),[c-m]);break}var v=p.length%2===0?[0,f]:[f];return[].concat(Ec(t.repeat(l,d)),Ec(p),v).map(function(g){return"".concat(g,"px")}).join(", ")}),ca(r,"id",ff("recharts-line-")),ca(r,"pathRef",function(a){r.mainCurve=a}),ca(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),ca(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return f2e(t,e),l2e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,u=o.layout,d=o.children,c=mo(d,Sm);if(!c)return null;var f=function(m,v){return{x:m.x,y:m.y,value:m.value,errorVal:Bn(m.payload,v)}},p={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ie.createElement(mr,p,c.map(function(h){return ie.cloneElement(h,{key:"bar-".concat(h.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(n,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,d=s.dataKey,c=Ot(this.props,!1),f=Ot(l,!0),p=u.map(function(m,v){var g=Ji(Ji(Ji({key:"dot-".concat(v),r:3},c),f),{},{index:v,cx:m.x,cy:m.y,value:m.value,dataKey:d,payload:m.payload,points:u});return t.renderDotItem(l,g)}),h={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return ie.createElement(mr,Jp({className:"recharts-line-dots",key:"dots"},h),p)}},{key:"renderCurveStatically",value:function(n,i,o,a){var s=this.props,l=s.type,u=s.layout,d=s.connectNulls;s.ref;var c=xB(s,e2e),f=Ji(Ji(Ji({},Ot(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:n},a),{},{type:l,layout:u,connectNulls:d});return ie.createElement(ay,Jp({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,c=a.animationDuration,f=a.animationEasing,p=a.animationId,h=a.animateNewValues,m=a.width,v=a.height,g=this.state,_=g.prevPoints,b=g.totalLength;return ie.createElement(qa,{begin:d,duration:c,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var y=w.t;if(_){var x=_.length/s.length,M=s.map(function(F,j){var U=Math.floor(j*x);if(_[U]){var z=_[U],G=oo(z.x,F.x),H=oo(z.y,F.y);return Ji(Ji({},F),{},{x:G(y),y:H(y)})}if(h){var W=oo(m*2,F.x),Y=oo(v/2,F.y);return Ji(Ji({},F),{},{x:W(y),y:Y(y)})}return Ji(Ji({},F),{},{x:F.x,y:F.y})});return o.renderCurveStatically(M,n,i)}var T=oo(0,b),S=T(y),$;if(l){var k="".concat(l).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});$=o.getStrokeDasharray(S,b,k)}else $=o.generateSimpleStrokeDasharray(b,S);return o.renderCurveStatically(s,n,i,{strokeDasharray:$})})}},{key:"renderCurve",value:function(n,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return s&&a&&a.length&&(!u&&d>0||!Em(u,a))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(a,n,i)}},{key:"render",value:function(){var n,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,u=i.xAxis,d=i.yAxis,c=i.top,f=i.left,p=i.width,h=i.height,m=i.isAnimationActive,v=i.id;if(o||!s||!s.length)return null;var g=this.state.isAnimationFinished,_=s.length===1,b=Kt("recharts-line",l),w=u&&u.allowDataOverflow,y=d&&d.allowDataOverflow,x=w||y,M=Vt(v)?this.id:v,T=(n=Ot(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},S=T.r,$=S===void 0?3:S,k=T.strokeWidth,F=k===void 0?2:k,j=Fle(a)?a:{},U=j.clipDot,z=U===void 0?!0:U,G=$*2+F;return ie.createElement(mr,{className:b},w||y?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(M)},ie.createElement("rect",{x:w?f:f-p/2,y:y?c:c-h/2,width:w?p:p*2,height:y?h:h*2})),!z&&ie.createElement("clipPath",{id:"clipPath-dots-".concat(M)},ie.createElement("rect",{x:f-G/2,y:c-G/2,width:p+G,height:h+G}))):null,!_&&this.renderCurve(x,M),this.renderErrorBar(x,M),(_||a)&&this.renderDots(x,z,M),(!m||g)&&xs.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var o=n.length%2!==0?[].concat(Ec(n),[0]):n,a=[],s=0;s<i;++s)a=[].concat(Ec(a),Ec(o));return a}},{key:"renderDotItem",value:function(n,i){var o;if(ie.isValidElement(n))o=ie.cloneElement(n,i);else if(Rt(n))o=n(i);else{var a=i.key,s=xB(i,t2e),l=Kt("recharts-line-dot",typeof n!="boolean"?n.className:"");o=ie.createElement(z0,Jp({key:a},s,{className:l}))}return o}}])}(N.PureComponent);ca(Cm,"displayName","Line");ca(Cm,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ca(Cm,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,a=e.dataKey,s=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,c=l.map(function(f,p){var h=Bn(f,a);return d==="horizontal"?{x:qR({axis:r,ticks:i,bandSize:s,entry:f,index:p}),y:Vt(h)?null:n.scale(h),value:h,payload:f}:{x:Vt(h)?null:r.scale(h),y:qR({axis:n,ticks:o,bandSize:s,entry:f,index:p}),value:h,payload:f}});return Ji({points:c,layout:d},u)});function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function h2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pq(n.key),n)}}function g2e(e,t,r){return t&&m2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _2e(e,t,r){return t=Sy(t),v2e(e,dq()?Reflect.construct(t,r||[],Sy(e).constructor):t.apply(e,r))}function v2e(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y2e(e)}function y2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dq=function(){return!!e})()}function Sy(e){return Sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sy(e)}function b2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MP(e,t)}function fq(e,t,r){return t=pq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pq(e){var t=w2e(e,"string");return Xd(t)=="symbol"?t:t+""}function w2e(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function TP(){return TP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TP.apply(this,arguments)}function x2e(e){var t=e.xAxisId,r=IC(),n=DC(),i=Y9(t);return i==null?null:N.createElement(yf,TP({},i,{className:Kt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return vs(a,!0)}}))}var Xu=function(e){function t(){return h2e(this,t),_2e(this,t,arguments)}return b2e(t,e),g2e(t,[{key:"render",value:function(){return N.createElement(x2e,this.props)}}])}(N.Component);fq(Xu,"displayName","XAxis");fq(Xu,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function M2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gq(n.key),n)}}function P2e(e,t,r){return t&&T2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E2e(e,t,r){return t=Cy(t),S2e(e,hq()?Reflect.construct(t,r||[],Cy(e).constructor):t.apply(e,r))}function S2e(e,t){if(t&&(Qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C2e(e)}function C2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hq=function(){return!!e})()}function Cy(e){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cy(e)}function $2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PP(e,t)}function PP(e,t){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PP(e,t)}function mq(e,t,r){return t=gq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gq(e){var t=A2e(e,"string");return Qd(t)=="symbol"?t:t+""}function A2e(e,t){if(Qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function EP(){return EP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EP.apply(this,arguments)}var O2e=function(t){var r=t.yAxisId,n=IC(),i=DC(),o=Z9(r);return o==null?null:N.createElement(yf,EP({},o,{className:Kt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return vs(s,!0)}}))},Qu=function(e){function t(){return M2e(this,t),E2e(this,t,arguments)}return $2e(t,e),P2e(t,[{key:"render",value:function(){return N.createElement(O2e,this.props)}}])}(N.Component);mq(Qu,"displayName","YAxis");mq(Qu,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function PB(e){return j2e(e)||D2e(e)||I2e(e)||k2e()}function k2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(e,t){if(e){if(typeof e=="string")return SP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SP(e,t)}}function D2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function j2e(e){if(Array.isArray(e))return SP(e)}function SP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var CP=function(t,r,n,i,o){var a=mo(t,FC),s=mo(t,X0),l=[].concat(PB(a),PB(s)),u=mo(t,Y0),d="".concat(i,"Id"),c=i[0],f=r;if(l.length&&(f=l.reduce(function(m,v){if(v.props[d]===n&&Wa(v.props,"extendDomain")&&tt(v.props[c])){var g=v.props[c];return[Math.min(m[0],g),Math.max(m[1],g)]}return m},f)),u.length){var p="".concat(c,"1"),h="".concat(c,"2");f=u.reduce(function(m,v){if(v.props[d]===n&&Wa(v.props,"extendDomain")&&tt(v.props[p])&&tt(v.props[h])){var g=v.props[p],_=v.props[h];return[Math.min(m[0],g,_),Math.max(m[1],g,_)]}return m},f)}return o&&o.length&&(f=o.reduce(function(m,v){return tt(v)?[Math.min(m[0],v),Math.max(m[1],v)]:m},f)),f},_q={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function o(l,u,d,c,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,c||l,f),h=r?r+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,c;if(this._eventsCount===0)return u;for(c in d=this._events)t.call(d,c)&&u.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,c=this._events[d];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,p=c.length,h=new Array(p);f<p;f++)h[f]=c[f].fn;return h},s.prototype.listenerCount=function(u){var d=r?r+u:u,c=this._events[d];return c?c.fn?1:c.length:0},s.prototype.emit=function(u,d,c,f,p,h){var m=r?r+u:u;if(!this._events[m])return!1;var v=this._events[m],g=arguments.length,_,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,c),!0;case 4:return v.fn.call(v.context,d,c,f),!0;case 5:return v.fn.call(v.context,d,c,f,p),!0;case 6:return v.fn.call(v.context,d,c,f,p,h),!0}for(b=1,_=new Array(g-1);b<g;b++)_[b-1]=arguments[b];v.fn.apply(v.context,_)}else{var w=v.length,y;for(b=0;b<w;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),g){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,c);break;case 4:v[b].fn.call(v[b].context,d,c,f);break;default:if(!_)for(y=1,_=new Array(g-1);y<g;y++)_[y-1]=arguments[y];v[b].fn.apply(v[b].context,_)}}return!0},s.prototype.on=function(u,d,c){return o(this,u,d,c,!1)},s.prototype.once=function(u,d,c){return o(this,u,d,c,!0)},s.prototype.removeListener=function(u,d,c,f){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var h=this._events[p];if(h.fn)h.fn===d&&(!f||h.once)&&(!c||h.context===c)&&a(this,p);else{for(var m=0,v=[],g=h.length;m<g;m++)(h[m].fn!==d||f&&!h[m].once||c&&h[m].context!==c)&&v.push(h[m]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(_q);var F2e=_q.exports;const L2e=xr(F2e);var S1=new L2e,C1="recharts.syncMouseEvents";function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function N2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R2e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vq(n.key),n)}}function z2e(e,t,r){return t&&R2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $1(e,t,r){return t=vq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vq(e){var t=B2e(e,"string");return im(t)=="symbol"?t:t+""}function B2e(e,t){if(im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var U2e=function(){function e(){N2e(this,e),$1(this,"activeIndex",0),$1(this,"coordinateList",[]),$1(this,"layout","horizontal")}return z2e(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,o=i===void 0?null:i,a=r.container,s=a===void 0?null:a,l=r.layout,u=l===void 0?null:l,d=r.offset,c=d===void 0?null:d,f=r.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=c??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,c=o+l+u,f=a+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:c,pageY:f})}}}])}();function W2e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&tt(n)&&tt(i))return!0}return!1}function V2e(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function yq(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,o=e.endAngle,a=Nr(t,r,n,i),s=Nr(t,r,n,o);return{points:[a,s],cx:t,cy:r,radius:n,startAngle:i,endAngle:o}}function G2e(e,t,r){var n,i,o,a;if(e==="horizontal")n=t.x,o=n,i=r.top,a=r.top+r.height;else if(e==="vertical")i=t.y,a=i,n=r.left,o=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,c=t.angle,f=Nr(s,l,u,c),p=Nr(s,l,d,c);n=f.x,i=f.y,o=p.x,a=p.y}else return yq(t);return[{x:n,y:i},{x:o,y:a}]}function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function EB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function y_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EB(Object(r),!0).forEach(function(n){H2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H2e(e,t,r){return t=K2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K2e(e){var t=q2e(e,"string");return om(t)=="symbol"?t:t+""}function q2e(e,t){if(om(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X2e(e){var t,r,n=e.element,i=e.tooltipEventType,o=e.isActive,a=e.activeCoordinate,s=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,c=e.layout,f=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!o||!a||f!=="ScatterChart"&&i!=="axis")return null;var h,m=ay;if(f==="ScatterChart")h=a,m=pPe;else if(f==="BarChart")h=V2e(c,a,l,d),m=$C;else if(c==="radial"){var v=yq(a),g=v.cx,_=v.cy,b=v.radius,w=v.startAngle,y=v.endAngle;h={cx:g,cy:_,startAngle:w,endAngle:y,innerRadius:b,outerRadius:b},m=m9}else h={points:G2e(c,a,l)},m=ay;var x=y_(y_(y_(y_({stroke:"#ccc",pointerEvents:"none"},l),h),Ot(p,!1)),{},{payload:s,payloadIndex:u,className:Kt("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,x):N.createElement(m,x)}var Q2e=["item"],Y2e=["children","className","width","height","style","compact","title","desc"];function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kc.apply(this,arguments)}function SB(e,t){return eAe(e)||J2e(e,t)||wq(e,t)||Z2e()}function Z2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function eAe(e){if(Array.isArray(e))return e}function CB(e,t){if(e==null)return{};var r=tAe(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nAe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xq(n.key),n)}}function iAe(e,t,r){return t&&nAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oAe(e,t,r){return t=$y(t),aAe(e,bq()?Reflect.construct(t,r||[],$y(e).constructor):t.apply(e,r))}function aAe(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sAe(e)}function sAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bq=function(){return!!e})()}function $y(e){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$y(e)}function lAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$P(e,t)}function $P(e,t){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$P(e,t)}function Zd(e){return dAe(e)||cAe(e)||wq(e)||uAe()}function uAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wq(e,t){if(e){if(typeof e=="string")return AP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(e,t)}}function cAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dAe(e){if(Array.isArray(e))return AP(e)}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$B(Object(r),!0).forEach(function(n){Dt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$B(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dt(e,t,r){return t=xq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xq(e){var t=fAe(e,"string");return Yd(t)=="symbol"?t:t+""}function fAe(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pAe={xAxis:["bottom","top"],yAxis:["left","right"]},hAe={width:"100%",height:"100%"},Mq={x:0,y:0};function b_(e){return e}var mAe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},gAe=function(t,r,n,i){var o=r.find(function(d){return d&&d.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:o.coordinate};if(t==="centric"){var a=o.coordinate,s=i.radius;return Le(Le(Le({},i),Nr(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,u=i.angle;return Le(Le(Le({},i),Nr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return Mq},Z0=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,a=(n??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Zd(s),Zd(u)):s},[]);return a.length>0?a:t&&t.length&&tt(i)&&tt(o)?t.slice(i,o+1):[]};function Tq(e){return e==="number"?[0,"auto"]:void 0}var OP=function(t,r,n,i){var o=t.graphicalItems,a=t.tooltipAxis,s=Z0(r,t);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(l,u){var d,c=(d=u.props.data)!==null&&d!==void 0?d:r;c&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(c=c.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(a.dataKey&&!a.allowDuplicatedCategory){var p=c===void 0?s:c;f=$v(p,a.dataKey,i)}else f=c&&c[n]||s[n];return f?[].concat(Zd(l),[u9(u,f)]):l},[])},AB=function(t,r,n,i){var o=i||{x:t.chartX,y:t.chartY},a=mAe(o,n),s=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=Lxe(a,s,u,l);if(d>=0&&u){var c=u[d]&&u[d].value,f=OP(t,r,d,c),p=gAe(n,s,d,o);return{activeTooltipIndex:d,activeLabel:c,activePayload:f,activeCoordinate:p}}return null},_Ae=function(t,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,c=t.children,f=t.stackOffset,p=n9(d,o);return n.reduce(function(h,m){var v,g=m.type.defaultProps!==void 0?Le(Le({},m.type.defaultProps),m.props):m.props,_=g.type,b=g.dataKey,w=g.allowDataOverflow,y=g.allowDuplicatedCategory,x=g.scale,M=g.ticks,T=g.includeHidden,S=g[a];if(h[S])return h;var $=Z0(t.data,{graphicalItems:i.filter(function(I){var K,ae=a in I.props?I.props[a]:(K=I.type.defaultProps)===null||K===void 0?void 0:K[a];return ae===S}),dataStartIndex:l,dataEndIndex:u}),k=$.length,F,j,U;W2e(g.domain,w,_)&&(F=VT(g.domain,null,w),p&&(_==="number"||x!=="auto")&&(U=Xp($,b,"category")));var z=Tq(_);if(!F||F.length===0){var G,H=(G=g.domain)!==null&&G!==void 0?G:z;if(b){if(F=Xp($,b,_),_==="category"&&p){var W=Ele(F);y&&W?(j=F,F=gy(0,k)):y||(F=ZR(H,F,m).reduce(function(I,K){return I.indexOf(K)>=0?I:[].concat(Zd(I),[K])},[]))}else if(_==="category")y?F=F.filter(function(I){return I!==""&&!Vt(I)}):F=ZR(H,F,m).reduce(function(I,K){return I.indexOf(K)>=0||K===""||Vt(K)?I:[].concat(Zd(I),[K])},[]);else if(_==="number"){var Y=Uxe($,i.filter(function(I){var K,ae,pe=a in I.props?I.props[a]:(K=I.type.defaultProps)===null||K===void 0?void 0:K[a],de="hide"in I.props?I.props.hide:(ae=I.type.defaultProps)===null||ae===void 0?void 0:ae.hide;return pe===S&&(T||!de)}),b,o,d);Y&&(F=Y)}p&&(_==="number"||x!=="auto")&&(U=Xp($,b,"category"))}else p?F=gy(0,k):s&&s[S]&&s[S].hasStack&&_==="number"?F=f==="expand"?[0,1]:l9(s[S].stackGroups,l,u):F=r9($,i.filter(function(I){var K=a in I.props?I.props[a]:I.type.defaultProps[a],ae="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return K===S&&(T||!ae)}),_,d,!0);if(_==="number")F=CP(c,F,S,o,M),H&&(F=VT(H,F,w));else if(_==="category"&&H){var te=H,V=F.every(function(I){return te.indexOf(I)>=0});V&&(F=te)}}return Le(Le({},h),{},Dt({},S,Le(Le({},g),{},{axisType:o,domain:F,categoricalDomain:U,duplicateDomain:j,originalDomain:(v=g.domain)!==null&&v!==void 0?v:z,isCategorical:p,layout:d})))},{})},vAe=function(t,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,c=t.children,f=Z0(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=f.length,h=n9(d,o),m=-1;return n.reduce(function(v,g){var _=g.type.defaultProps!==void 0?Le(Le({},g.type.defaultProps),g.props):g.props,b=_[a],w=Tq("number");if(!v[b]){m++;var y;return h?y=gy(0,p):s&&s[b]&&s[b].hasStack?(y=l9(s[b].stackGroups,l,u),y=CP(c,y,b,o)):(y=VT(w,r9(f,n.filter(function(x){var M,T,S=a in x.props?x.props[a]:(M=x.type.defaultProps)===null||M===void 0?void 0:M[a],$="hide"in x.props?x.props.hide:(T=x.type.defaultProps)===null||T===void 0?void 0:T.hide;return S===b&&!$}),"number",d),i.defaultProps.allowDataOverflow),y=CP(c,y,b,o)),Le(Le({},v),{},Dt({},b,Le(Le({axisType:o},i.defaultProps),{},{hide:!0,orientation:ho(pAe,"".concat(o,".").concat(m%2),null),domain:y,originalDomain:w,isCategorical:h,layout:d})))}return v},{})},yAe=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,a=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.children,c="".concat(i,"Id"),f=mo(d,o),p={};return f&&f.length?p=_Ae(t,{axes:f,graphicalItems:a,axisType:i,axisIdKey:c,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(p=vAe(t,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:c,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},bAe=function(t){var r=il(t),n=vs(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:rC(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:ny(r,n)}},OB=function(t){var r=t.children,n=t.defaultShowTooltip,i=ro(r,Ud),o=0,a=0;return t.data&&t.data.length!==0&&(a=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},wAe=function(t){return!t||!t.length?!1:t.some(function(r){var n=bs(r&&r.type);return n&&n.indexOf("Bar")>=0})},kB=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xAe=function(t,r){var n=t.props,i=t.graphicalItems,o=t.xAxisMap,a=o===void 0?{}:o,s=t.yAxisMap,l=s===void 0?{}:s,u=n.width,d=n.height,c=n.children,f=n.margin||{},p=ro(c,Ud),h=ro(c,od),m=Object.keys(l).reduce(function(y,x){var M=l[x],T=M.orientation;return!M.mirror&&!M.hide?Le(Le({},y),{},Dt({},T,y[T]+M.width)):y},{left:f.left||0,right:f.right||0}),v=Object.keys(a).reduce(function(y,x){var M=a[x],T=M.orientation;return!M.mirror&&!M.hide?Le(Le({},y),{},Dt({},T,ho(y,"".concat(T))+M.height)):y},{top:f.top||0,bottom:f.bottom||0}),g=Le(Le({},v),m),_=g.bottom;p&&(g.bottom+=p.props.height||Ud.defaultProps.height),h&&r&&(g=zxe(g,i,n,r));var b=u-g.left-g.right,w=d-g.top-g.bottom;return Le(Le({brushBottom:_},g),{},{width:Math.max(b,0),height:Math.max(w,0)})},MAe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},RC=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,o=i===void 0?"axis":i,a=t.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,c=t.defaultProps,f=function(g,_){var b=_.graphicalItems,w=_.stackGroups,y=_.offset,x=_.updateId,M=_.dataStartIndex,T=_.dataEndIndex,S=g.barSize,$=g.layout,k=g.barGap,F=g.barCategoryGap,j=g.maxBarSize,U=kB($),z=U.numericAxisName,G=U.cateAxisName,H=wAe(b),W=[];return b.forEach(function(Y,te){var V=Z0(g.data,{graphicalItems:[Y],dataStartIndex:M,dataEndIndex:T}),I=Y.type.defaultProps!==void 0?Le(Le({},Y.type.defaultProps),Y.props):Y.props,K=I.dataKey,ae=I.maxBarSize,pe=I["".concat(z,"Id")],de=I["".concat(G,"Id")],be={},Ne=l.reduce(function(ze,Xe){var Ce=_["".concat(Xe.axisType,"Map")],st=I["".concat(Xe.axisType,"Id")];Ce&&Ce[st]||Xe.axisType==="zAxis"||Ku();var Ye=Ce[st];return Le(Le({},ze),{},Dt(Dt({},Xe.axisType,Ye),"".concat(Xe.axisType,"Ticks"),vs(Ye)))},be),Te=Ne[G],ge=Ne["".concat(G,"Ticks")],re=w&&w[pe]&&w[pe].hasStack&&Yxe(Y,w[pe].stackGroups),ne=bs(Y.type).indexOf("Bar")>=0,Z=ny(Te,ge),ve=[],Ae=H&&Nxe({barSize:S,stackGroups:w,totalSize:MAe(Ne,G)});if(ne){var Ee,we,$e=Vt(ae)?j:ae,Me=(Ee=(we=ny(Te,ge,!0))!==null&&we!==void 0?we:$e)!==null&&Ee!==void 0?Ee:0;ve=Rxe({barGap:k,barCategoryGap:F,bandSize:Me!==Z?Me:Z,sizeList:Ae[de],maxBarSize:$e}),Me!==Z&&(ve=ve.map(function(ze){return Le(Le({},ze),{},{position:Le(Le({},ze.position),{},{offset:ze.position.offset-Me/2})})}))}var je=Y&&Y.type&&Y.type.getComposedData;je&&W.push({props:Le(Le({},je(Le(Le({},Ne),{},{displayedData:V,props:g,dataKey:K,item:Y,bandSize:Z,barPosition:ve,offset:y,stackedData:re,layout:$,dataStartIndex:M,dataEndIndex:T}))),{},Dt(Dt(Dt({key:Y.key||"item-".concat(te)},z,Ne[z]),G,Ne[G]),"animationId",x)),childIndex:Rle(Y,g.children),item:Y})}),W},p=function(g,_){var b=g.props,w=g.dataStartIndex,y=g.dataEndIndex,x=g.updateId;if(!GN({props:b}))return null;var M=b.children,T=b.layout,S=b.stackOffset,$=b.data,k=b.reverseStackOrder,F=kB(T),j=F.numericAxisName,U=F.cateAxisName,z=mo(M,n),G=Xxe($,z,"".concat(j,"Id"),"".concat(U,"Id"),S,k),H=l.reduce(function(I,K){var ae="".concat(K.axisType,"Map");return Le(Le({},I),{},Dt({},ae,yAe(b,Le(Le({},K),{},{graphicalItems:z,stackGroups:K.axisType===j&&G,dataStartIndex:w,dataEndIndex:y}))))},{}),W=xAe(Le(Le({},H),{},{props:b,graphicalItems:z}),_==null?void 0:_.legendBBox);Object.keys(H).forEach(function(I){H[I]=d(b,H[I],W,I.replace("Map",""),r)});var Y=H["".concat(U,"Map")],te=bAe(Y),V=f(b,Le(Le({},H),{},{dataStartIndex:w,dataEndIndex:y,updateId:x,graphicalItems:z,stackGroups:G,offset:W}));return Le(Le({formattedGraphicalItems:V,graphicalItems:z,offset:W,stackGroups:G},te),H)},h=function(v){function g(_){var b,w,y;return rAe(this,g),y=oAe(this,g,[_]),Dt(y,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Dt(y,"accessibilityManager",new U2e),Dt(y,"handleLegendBBoxUpdate",function(x){if(x){var M=y.state,T=M.dataStartIndex,S=M.dataEndIndex,$=M.updateId;y.setState(Le({legendBBox:x},p({props:y.props,dataStartIndex:T,dataEndIndex:S,updateId:$},Le(Le({},y.state),{},{legendBBox:x}))))}}),Dt(y,"handleReceiveSyncEvent",function(x,M,T){if(y.props.syncId===x){if(T===y.eventEmitterSymbol&&typeof y.props.syncMethod!="function")return;y.applySyncEvent(M)}}),Dt(y,"handleBrushChange",function(x){var M=x.startIndex,T=x.endIndex;if(M!==y.state.dataStartIndex||T!==y.state.dataEndIndex){var S=y.state.updateId;y.setState(function(){return Le({dataStartIndex:M,dataEndIndex:T},p({props:y.props,dataStartIndex:M,dataEndIndex:T,updateId:S},y.state))}),y.triggerSyncEvent({dataStartIndex:M,dataEndIndex:T})}}),Dt(y,"handleMouseEnter",function(x){var M=y.getMouseInfo(x);if(M){var T=Le(Le({},M),{},{isTooltipActive:!0});y.setState(T),y.triggerSyncEvent(T);var S=y.props.onMouseEnter;Rt(S)&&S(T,x)}}),Dt(y,"triggeredAfterMouseMove",function(x){var M=y.getMouseInfo(x),T=M?Le(Le({},M),{},{isTooltipActive:!0}):{isTooltipActive:!1};y.setState(T),y.triggerSyncEvent(T);var S=y.props.onMouseMove;Rt(S)&&S(T,x)}),Dt(y,"handleItemMouseEnter",function(x){y.setState(function(){return{isTooltipActive:!0,activeItem:x,activePayload:x.tooltipPayload,activeCoordinate:x.tooltipPosition||{x:x.cx,y:x.cy}}})}),Dt(y,"handleItemMouseLeave",function(){y.setState(function(){return{isTooltipActive:!1}})}),Dt(y,"handleMouseMove",function(x){x.persist(),y.throttleTriggeredAfterMouseMove(x)}),Dt(y,"handleMouseLeave",function(x){y.throttleTriggeredAfterMouseMove.cancel();var M={isTooltipActive:!1};y.setState(M),y.triggerSyncEvent(M);var T=y.props.onMouseLeave;Rt(T)&&T(M,x)}),Dt(y,"handleOuterEvent",function(x){var M=Nle(x),T=ho(y.props,"".concat(M));if(M&&Rt(T)){var S,$;/.*touch.*/i.test(M)?$=y.getMouseInfo(x.changedTouches[0]):$=y.getMouseInfo(x),T((S=$)!==null&&S!==void 0?S:{},x)}}),Dt(y,"handleClick",function(x){var M=y.getMouseInfo(x);if(M){var T=Le(Le({},M),{},{isTooltipActive:!0});y.setState(T),y.triggerSyncEvent(T);var S=y.props.onClick;Rt(S)&&S(T,x)}}),Dt(y,"handleMouseDown",function(x){var M=y.props.onMouseDown;if(Rt(M)){var T=y.getMouseInfo(x);M(T,x)}}),Dt(y,"handleMouseUp",function(x){var M=y.props.onMouseUp;if(Rt(M)){var T=y.getMouseInfo(x);M(T,x)}}),Dt(y,"handleTouchMove",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.throttleTriggeredAfterMouseMove(x.changedTouches[0])}),Dt(y,"handleTouchStart",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseDown(x.changedTouches[0])}),Dt(y,"handleTouchEnd",function(x){x.changedTouches!=null&&x.changedTouches.length>0&&y.handleMouseUp(x.changedTouches[0])}),Dt(y,"handleDoubleClick",function(x){var M=y.props.onDoubleClick;if(Rt(M)){var T=y.getMouseInfo(x);M(T,x)}}),Dt(y,"handleContextMenu",function(x){var M=y.props.onContextMenu;if(Rt(M)){var T=y.getMouseInfo(x);M(T,x)}}),Dt(y,"triggerSyncEvent",function(x){y.props.syncId!==void 0&&S1.emit(C1,y.props.syncId,x,y.eventEmitterSymbol)}),Dt(y,"applySyncEvent",function(x){var M=y.props,T=M.layout,S=M.syncMethod,$=y.state.updateId,k=x.dataStartIndex,F=x.dataEndIndex;if(x.dataStartIndex!==void 0||x.dataEndIndex!==void 0)y.setState(Le({dataStartIndex:k,dataEndIndex:F},p({props:y.props,dataStartIndex:k,dataEndIndex:F,updateId:$},y.state)));else if(x.activeTooltipIndex!==void 0){var j=x.chartX,U=x.chartY,z=x.activeTooltipIndex,G=y.state,H=G.offset,W=G.tooltipTicks;if(!H)return;if(typeof S=="function")z=S(W,x);else if(S==="value"){z=-1;for(var Y=0;Y<W.length;Y++)if(W[Y].value===x.activeLabel){z=Y;break}}var te=Le(Le({},H),{},{x:H.left,y:H.top}),V=Math.min(j,te.x+te.width),I=Math.min(U,te.y+te.height),K=W[z]&&W[z].value,ae=OP(y.state,y.props.data,z),pe=W[z]?{x:T==="horizontal"?W[z].coordinate:V,y:T==="horizontal"?I:W[z].coordinate}:Mq;y.setState(Le(Le({},x),{},{activeLabel:K,activeCoordinate:pe,activePayload:ae,activeTooltipIndex:z}))}else y.setState(x)}),Dt(y,"renderCursor",function(x){var M,T=y.state,S=T.isTooltipActive,$=T.activeCoordinate,k=T.activePayload,F=T.offset,j=T.activeTooltipIndex,U=T.tooltipAxisBandSize,z=y.getTooltipEventType(),G=(M=x.props.active)!==null&&M!==void 0?M:S,H=y.props.layout,W=x.key||"_recharts-cursor";return ie.createElement(X2e,{key:W,activeCoordinate:$,activePayload:k,activeTooltipIndex:j,chartName:r,element:x,isActive:G,layout:H,offset:F,tooltipAxisBandSize:U,tooltipEventType:z})}),Dt(y,"renderPolarAxis",function(x,M,T){var S=ho(x,"type.axisType"),$=ho(y.state,"".concat(S,"Map")),k=x.type.defaultProps,F=k!==void 0?Le(Le({},k),x.props):x.props,j=$&&$[F["".concat(S,"Id")]];return N.cloneElement(x,Le(Le({},j),{},{className:Kt(S,j.className),key:x.key||"".concat(M,"-").concat(T),ticks:vs(j,!0)}))}),Dt(y,"renderPolarGrid",function(x){var M=x.props,T=M.radialLines,S=M.polarAngles,$=M.polarRadius,k=y.state,F=k.radiusAxisMap,j=k.angleAxisMap,U=il(F),z=il(j),G=z.cx,H=z.cy,W=z.innerRadius,Y=z.outerRadius;return N.cloneElement(x,{polarAngles:Array.isArray(S)?S:vs(z,!0).map(function(te){return te.coordinate}),polarRadius:Array.isArray($)?$:vs(U,!0).map(function(te){return te.coordinate}),cx:G,cy:H,innerRadius:W,outerRadius:Y,key:x.key||"polar-grid",radialLines:T})}),Dt(y,"renderLegend",function(){var x=y.state.formattedGraphicalItems,M=y.props,T=M.children,S=M.width,$=M.height,k=y.props.margin||{},F=S-(k.left||0)-(k.right||0),j=e9({children:T,formattedGraphicalItems:x,legendWidth:F,legendContent:u});if(!j)return null;var U=j.item,z=CB(j,Q2e);return N.cloneElement(U,Le(Le({},z),{},{chartWidth:S,chartHeight:$,margin:k,onBBoxUpdate:y.handleLegendBBoxUpdate}))}),Dt(y,"renderTooltip",function(){var x,M=y.props,T=M.children,S=M.accessibilityLayer,$=ro(T,Co);if(!$)return null;var k=y.state,F=k.isTooltipActive,j=k.activeCoordinate,U=k.activePayload,z=k.activeLabel,G=k.offset,H=(x=$.props.active)!==null&&x!==void 0?x:F;return N.cloneElement($,{viewBox:Le(Le({},G),{},{x:G.left,y:G.top}),active:H,label:z,payload:H?U:[],coordinate:j,accessibilityLayer:S})}),Dt(y,"renderBrush",function(x){var M=y.props,T=M.margin,S=M.data,$=y.state,k=$.offset,F=$.dataStartIndex,j=$.dataEndIndex,U=$.updateId;return N.cloneElement(x,{key:x.key||"_recharts-brush",onChange:m_(y.handleBrushChange,x.props.onChange),data:S,x:tt(x.props.x)?x.props.x:k.left,y:tt(x.props.y)?x.props.y:k.top+k.height+k.brushBottom-(T.bottom||0),width:tt(x.props.width)?x.props.width:k.width,startIndex:F,endIndex:j,updateId:"brush-".concat(U)})}),Dt(y,"renderReferenceElement",function(x,M,T){if(!x)return null;var S=y,$=S.clipPathId,k=y.state,F=k.xAxisMap,j=k.yAxisMap,U=k.offset,z=x.type.defaultProps||{},G=x.props,H=G.xAxisId,W=H===void 0?z.xAxisId:H,Y=G.yAxisId,te=Y===void 0?z.yAxisId:Y;return N.cloneElement(x,{key:x.key||"".concat(M,"-").concat(T),xAxis:F[W],yAxis:j[te],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:$})}),Dt(y,"renderActivePoints",function(x){var M=x.item,T=x.activePoint,S=x.basePoint,$=x.childIndex,k=x.isRange,F=[],j=M.props.key,U=M.item.type.defaultProps!==void 0?Le(Le({},M.item.type.defaultProps),M.item.props):M.item.props,z=U.activeDot,G=U.dataKey,H=Le(Le({index:$,dataKey:G,cx:T.x,cy:T.y,r:4,fill:CC(M.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Ot(z,!1)),Av(z));return F.push(g.renderActiveDot(z,H,"".concat(j,"-activePoint-").concat($))),S?F.push(g.renderActiveDot(z,Le(Le({},H),{},{cx:S.x,cy:S.y}),"".concat(j,"-basePoint-").concat($))):k&&F.push(null),F}),Dt(y,"renderGraphicChild",function(x,M,T){var S=y.filterFormatItem(x,M,T);if(!S)return null;var $=y.getTooltipEventType(),k=y.state,F=k.isTooltipActive,j=k.tooltipAxis,U=k.activeTooltipIndex,z=k.activeLabel,G=y.props.children,H=ro(G,Co),W=S.props,Y=W.points,te=W.isRange,V=W.baseLine,I=S.item.type.defaultProps!==void 0?Le(Le({},S.item.type.defaultProps),S.item.props):S.item.props,K=I.activeDot,ae=I.hide,pe=I.activeBar,de=I.activeShape,be=!!(!ae&&F&&H&&(K||pe||de)),Ne={};$!=="axis"&&H&&H.props.trigger==="click"?Ne={onClick:m_(y.handleItemMouseEnter,x.props.onClick)}:$!=="axis"&&(Ne={onMouseLeave:m_(y.handleItemMouseLeave,x.props.onMouseLeave),onMouseEnter:m_(y.handleItemMouseEnter,x.props.onMouseEnter)});var Te=N.cloneElement(x,Le(Le({},S.props),Ne));function ge(Xe){return typeof j.dataKey=="function"?j.dataKey(Xe.payload):null}if(be)if(U>=0){var re,ne;if(j.dataKey&&!j.allowDuplicatedCategory){var Z=typeof j.dataKey=="function"?ge:"payload.".concat(j.dataKey.toString());re=$v(Y,Z,z),ne=te&&V&&$v(V,Z,z)}else re=Y==null?void 0:Y[U],ne=te&&V&&V[U];if(de||pe){var ve=x.props.activeIndex!==void 0?x.props.activeIndex:U;return[N.cloneElement(x,Le(Le(Le({},S.props),Ne),{},{activeIndex:ve})),null,null]}if(!Vt(re))return[Te].concat(Zd(y.renderActivePoints({item:S,activePoint:re,basePoint:ne,childIndex:U,isRange:te})))}else{var Ae,Ee=(Ae=y.getItemByXY(y.state.activeCoordinate))!==null&&Ae!==void 0?Ae:{graphicalItem:Te},we=Ee.graphicalItem,$e=we.item,Me=$e===void 0?x:$e,je=we.childIndex,ze=Le(Le(Le({},S.props),Ne),{},{activeIndex:je});return[N.cloneElement(Me,ze),null,null]}return te?[Te,null,null]:[Te,null]}),Dt(y,"renderCustomized",function(x,M,T){return N.cloneElement(x,Le(Le({key:"recharts-customized-".concat(T)},y.props),y.state))}),Dt(y,"renderMap",{CartesianGrid:{handler:b_,once:!0},ReferenceArea:{handler:y.renderReferenceElement},ReferenceLine:{handler:b_},ReferenceDot:{handler:y.renderReferenceElement},XAxis:{handler:b_},YAxis:{handler:b_},Brush:{handler:y.renderBrush,once:!0},Bar:{handler:y.renderGraphicChild},Line:{handler:y.renderGraphicChild},Area:{handler:y.renderGraphicChild},Radar:{handler:y.renderGraphicChild},RadialBar:{handler:y.renderGraphicChild},Scatter:{handler:y.renderGraphicChild},Pie:{handler:y.renderGraphicChild},Funnel:{handler:y.renderGraphicChild},Tooltip:{handler:y.renderCursor,once:!0},PolarGrid:{handler:y.renderPolarGrid,once:!0},PolarAngleAxis:{handler:y.renderPolarAxis},PolarRadiusAxis:{handler:y.renderPolarAxis},Customized:{handler:y.renderCustomized}}),y.clipPathId="".concat((b=_.id)!==null&&b!==void 0?b:ff("recharts"),"-clip"),y.throttleTriggeredAfterMouseMove=JH(y.triggeredAfterMouseMove,(w=_.throttleDelay)!==null&&w!==void 0?w:1e3/60),y.state={},y}return lAe(g,v),iAe(g,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,y=b.data,x=b.height,M=b.layout,T=ro(w,Co);if(T){var S=T.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,k=OP(this.state,y,S,$),F=this.state.tooltipTicks[S].coordinate,j=(this.state.offset.top+x)/2,U=M==="horizontal",z=U?{x:F,y:j}:{y:F,x:j},G=this.state.formattedGraphicalItems.find(function(W){var Y=W.item;return Y.type.name==="Scatter"});G&&(z=Le(Le({},z),G.props.points[S].tooltipPosition),k=G.props.points[S].tooltipPayload);var H={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:$,activePayload:k,activeCoordinate:z};this.setState(H),this.renderCursor(T),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var y,x;this.accessibilityManager.setDetails({offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0}})}return null}},{key:"componentDidUpdate",value:function(b){oT([ro(b.children,Co)],[ro(this.props.children,Co)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ro(this.props.children,Co);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return s.indexOf(w)>=0?w:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,y=w.getBoundingClientRect(),x=dye(y),M={chartX:Math.round(b.pageX-x.left),chartY:Math.round(b.pageY-x.top)},T=y.width/w.offsetWidth||1,S=this.inRange(M.chartX,M.chartY,T);if(!S)return null;var $=this.state,k=$.xAxisMap,F=$.yAxisMap,j=this.getTooltipEventType(),U=AB(this.state,this.props.data,this.props.layout,S);if(j!=="axis"&&k&&F){var z=il(k).scale,G=il(F).scale,H=z&&z.invert?z.invert(M.chartX):null,W=G&&G.invert?G.invert(M.chartY):null;return Le(Le({},M),{},{xValue:H,yValue:W},U)}return U?Le(Le({},M),U):null}},{key:"inRange",value:function(b,w){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=this.props.layout,M=b/y,T=w/y;if(x==="horizontal"||x==="vertical"){var S=this.state.offset,$=M>=S.left&&M<=S.left+S.width&&T>=S.top&&T<=S.top+S.height;return $?{x:M,y:T}:null}var k=this.state,F=k.angleAxisMap,j=k.radiusAxisMap;if(F&&j){var U=il(F);return tz({x:M,y:T},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),y=ro(b,Co),x={};y&&w==="axis"&&(y.props.trigger==="click"?x={onClick:this.handleClick}:x={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var M=Av(this.props,this.handleOuterEvent);return Le(Le({},M),x)}},{key:"addListener",value:function(){S1.on(C1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){S1.removeListener(C1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,y){for(var x=this.state.formattedGraphicalItems,M=0,T=x.length;M<T;M++){var S=x[M];if(S.item===b||S.props.key===b.key||w===bs(S.item.type)&&y===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,y=w.left,x=w.top,M=w.height,T=w.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:b},ie.createElement("rect",{x:y,y:x,height:M,width:T})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,y){var x=SB(y,2),M=x[0],T=x[1];return Le(Le({},w),{},Dt({},M,T.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,y){var x=SB(y,2),M=x[0],T=x[1];return Le(Le({},w),{},Dt({},M,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,y=w.formattedGraphicalItems,x=w.activeItem;if(y&&y.length)for(var M=0,T=y.length;M<T;M++){var S=y[M],$=S.props,k=S.item,F=k.type.defaultProps!==void 0?Le(Le({},k.type.defaultProps),k.props):k.props,j=bs(k.type);if(j==="Bar"){var U=($.data||[]).find(function(W){return KTe(b,W)});if(U)return{graphicalItem:S,payload:U}}else if(j==="RadialBar"){var z=($.data||[]).find(function(W){return tz(b,W)});if(z)return{graphicalItem:S,payload:z}}else if(G0(S,x)||H0(S,x)||Jh(S,x)){var G=jEe({graphicalItem:S,activeTooltipItem:x,itemData:F.data}),H=F.activeIndex===void 0?G:F.activeIndex;return{graphicalItem:Le(Le({},S),{},{childIndex:H}),payload:Jh(S,x)?F.data[G]:S.props.data[G]}}}return null}},{key:"render",value:function(){var b=this;if(!GN(this))return null;var w=this.props,y=w.children,x=w.className,M=w.width,T=w.height,S=w.style,$=w.compact,k=w.title,F=w.desc,j=CB(w,Y2e),U=Ot(j,!1);if($)return ie.createElement(uB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(sT,Kc({},U,{width:M,height:T,title:k,desc:F}),this.renderClipPath(),KN(y,this.renderMap)));if(this.props.accessibilityLayer){var z,G;U.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,U.role=(G=this.props.role)!==null&&G!==void 0?G:"application",U.onKeyDown=function(W){b.accessibilityManager.keyboardEvent(W)},U.onFocus=function(){b.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return ie.createElement(uB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",Kc({className:Kt("recharts-wrapper",x),style:Le({position:"relative",cursor:"default",width:M,height:T},S)},H,{ref:function(Y){b.container=Y}}),ie.createElement(sT,Kc({},U,{width:M,height:T,title:k,desc:F,style:hAe}),this.renderClipPath(),KN(y,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);Dt(h,"displayName",r),Dt(h,"defaultProps",Le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},c)),Dt(h,"getDerivedStateFromProps",function(v,g){var _=v.dataKey,b=v.data,w=v.children,y=v.width,x=v.height,M=v.layout,T=v.stackOffset,S=v.margin,$=g.dataStartIndex,k=g.dataEndIndex;if(g.updateId===void 0){var F=OB(v);return Le(Le(Le({},F),{},{updateId:0},p(Le(Le({props:v},F),{},{updateId:0}),g)),{},{prevDataKey:_,prevData:b,prevWidth:y,prevHeight:x,prevLayout:M,prevStackOffset:T,prevMargin:S,prevChildren:w})}if(_!==g.prevDataKey||b!==g.prevData||y!==g.prevWidth||x!==g.prevHeight||M!==g.prevLayout||T!==g.prevStackOffset||!id(S,g.prevMargin)){var j=OB(v),U={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},z=Le(Le({},AB(g,b,M)),{},{updateId:g.updateId+1}),G=Le(Le(Le({},j),U),z);return Le(Le(Le({},G),p(Le({props:v},G),g)),{},{prevDataKey:_,prevData:b,prevWidth:y,prevHeight:x,prevLayout:M,prevStackOffset:T,prevMargin:S,prevChildren:w})}if(!oT(w,g.prevChildren)){var H,W,Y,te,V=ro(w,Ud),I=V&&(H=(W=V.props)===null||W===void 0?void 0:W.startIndex)!==null&&H!==void 0?H:$,K=V&&(Y=(te=V.props)===null||te===void 0?void 0:te.endIndex)!==null&&Y!==void 0?Y:k,ae=I!==$||K!==k,pe=!Vt(b),de=pe&&!ae?g.updateId:g.updateId+1;return Le(Le({updateId:de},p(Le(Le({props:v},g),{},{updateId:de,dataStartIndex:I,dataEndIndex:K}),g)),{},{prevChildren:w,dataStartIndex:I,dataEndIndex:K})}return null}),Dt(h,"renderActiveDot",function(v,g,_){var b;return N.isValidElement(v)?b=N.cloneElement(v,g):Rt(v)?b=v(g):b=ie.createElement(z0,g),ie.createElement(mr,{className:"recharts-active-dot",key:_},b)});var m=N.forwardRef(function(g,_){return ie.createElement(h,Kc({},g,{ref:_}))});return m.displayName=h.displayName,m},TAe=RC({chartName:"LineChart",GraphicalChild:Cm,axisComponents:[{axisType:"xAxis",AxisComp:Xu},{axisType:"yAxis",AxisComp:Qu}],formatAxisMap:W9}),Pq=RC({chartName:"BarChart",GraphicalChild:Va,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Xu},{axisType:"yAxis",AxisComp:Qu}],formatAxisMap:W9}),Eq=RC({chartName:"PieChart",GraphicalChild:Ja,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:V0},{axisType:"radiusAxis",AxisComp:U0}],formatAxisMap:s1e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const PAe=({detections:e})=>{const t=e.reduce((a,s)=>(a[s.animalType]=(a[s.animalType]||0)+1,a),{}),r=Array.from({length:24},(a,s)=>{const l=e.filter(u=>u.timestamp.getHours()===s).length;return{hour:`${s}:00`,count:l}}),n=Object.entries(t).map(([a,s])=>({name:a,value:s,color:i(a)}));function i(a){return{deer:"#8B5A3C",rabbit:"#A0522D",bird:"#228B22",fox:"#FF4500"}[a]||"#666666"}const o=e.length>0?e.reduce((a,s)=>a+s.confidence,0)/e.length:0;return L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[L.jsxs(Cn,{className:"shadow-farm",children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2 text-primary",children:[L.jsx(lZ,{className:"h-5 w-5"}),"النشاط الساعي"]})}),L.jsx(Rn,{children:L.jsx(Hp,{width:"100%",height:200,children:L.jsxs(Pq,{data:r,children:[L.jsx(Xu,{dataKey:"hour",tick:{fontSize:12},interval:3}),L.jsx(Qu,{tick:{fontSize:12}}),L.jsx(Va,{dataKey:"count",fill:"hsl(var(--farm-green))",radius:[2,2,0,0]})]})})})]}),L.jsxs(Cn,{className:"shadow-farm",children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2 text-primary",children:[L.jsx(SM,{className:"h-5 w-5"}),"توزيع الحيوانات"]})}),L.jsx(Rn,{children:n.length>0?L.jsx(Hp,{width:"100%",height:200,children:L.jsx(Eq,{children:L.jsx(Ja,{data:n,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,label:({name:a,value:s})=>`${a}: ${s}`,children:n.map((a,s)=>L.jsx(wm,{fill:a.color},`cell-${s}`))})})}):L.jsx("div",{className:"h-48 flex items-center justify-center text-muted-foreground",children:"لا توجد بيانات للعرض"})})]}),L.jsxs(Cn,{className:"shadow-farm md:col-span-2",children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2 text-primary",children:[L.jsx(fv,{className:"h-5 w-5"}),"أداء النظام"]})}),L.jsx(Rn,{children:L.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[L.jsxs("div",{className:"text-center p-4 bg-gradient-earth rounded-lg",children:[L.jsxs("div",{className:"text-2xl font-bold text-farm-green",children:[Math.round(o*100),"%"]}),L.jsx("div",{className:"text-sm text-muted-foreground",children:"متوسط الثقة"})]}),L.jsxs("div",{className:"text-center p-4 bg-gradient-earth rounded-lg",children:[L.jsx("div",{className:"text-2xl font-bold text-farm-green",children:e.length}),L.jsx("div",{className:"text-sm text-muted-foreground",children:"إجمالي الاكتشافات"})]}),L.jsxs("div",{className:"text-center p-4 bg-gradient-earth rounded-lg",children:[L.jsx("div",{className:"text-2xl font-bold text-farm-green",children:Object.keys(t).length}),L.jsx("div",{className:"text-sm text-muted-foreground",children:"الأنواع المكتشفة"})]})]})})]})]})};function Sq(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var J0="Switch",[EAe,EOe]=Is(J0),[SAe,CAe]=EAe(J0),Cq=N.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:i,defaultChecked:o,required:a,disabled:s,value:l="on",onCheckedChange:u,form:d,...c}=e,[f,p]=N.useState(null),h=Rr(t,b=>p(b)),m=N.useRef(!1),v=f?d||!!f.closest("form"):!0,[g,_]=hm({prop:i,defaultProp:o??!1,onChange:u,caller:J0});return L.jsxs(SAe,{scope:r,checked:g,disabled:s,children:[L.jsx(_r.button,{type:"button",role:"switch","aria-checked":g,"aria-required":a,"data-state":kq(g),"data-disabled":s?"":void 0,disabled:s,value:l,...c,ref:h,onClick:qt(e.onClick,b=>{_(w=>!w),v&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),v&&L.jsx(Oq,{control:f,bubbles:!m.current,name:n,value:l,checked:g,required:a,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});Cq.displayName=J0;var $q="SwitchThumb",Aq=N.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=CAe($q,r);return L.jsx(_r.span,{"data-state":kq(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});Aq.displayName=$q;var $Ae="SwitchBubbleInput",Oq=N.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...i},o)=>{const a=N.useRef(null),s=Rr(a,o),l=Sq(r),u=HE(t);return N.useEffect(()=>{const d=a.current;if(!d)return;const c=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(c,"checked").set;if(l!==r&&p){const h=new Event("click",{bubbles:n});p.call(d,r),d.dispatchEvent(h)}},[l,r,n]),L.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:s,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Oq.displayName=$Ae;function kq(e){return e?"checked":"unchecked"}var Iq=Cq,AAe=Aq;const Dq=N.forwardRef(({className:e,...t},r)=>L.jsx(Iq,{className:sn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:L.jsx(AAe,{className:sn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Dq.displayName=Iq.displayName;var jq=["PageUp","PageDown"],Fq=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Lq={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},bf="Slider",[kP,OAe,kAe]=OE(bf),[Nq,SOe]=Is(bf,[kAe]),[IAe,eb]=Nq(bf),Rq=N.forwardRef((e,t)=>{const{name:r,min:n=0,max:i=100,step:o=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[n],value:d,onValueChange:c=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:h,...m}=e,v=N.useRef(new Set),g=N.useRef(0),b=a==="horizontal"?DAe:jAe,[w=[],y]=hm({prop:d,defaultProp:u,onChange:k=>{var j;(j=[...v.current][g.current])==null||j.focus(),c(k)}}),x=N.useRef(w);function M(k){const F=zAe(w,k);$(k,F)}function T(k){$(k,g.current)}function S(){const k=x.current[g.current];w[g.current]!==k&&f(w)}function $(k,F,{commit:j}={commit:!1}){const U=VAe(o),z=GAe(Math.round((k-n)/o)*o+n,U),G=CS(z,[n,i]);y((H=[])=>{const W=NAe(H,G,F);if(WAe(W,l*o)){g.current=W.indexOf(G);const Y=String(W)!==String(H);return Y&&j&&f(W),Y?W:H}else return H})}return L.jsx(IAe,{scope:e.__scopeSlider,name:r,disabled:s,min:n,max:i,valueIndexToChangeRef:g,thumbs:v.current,values:w,orientation:a,form:h,children:L.jsx(kP.Provider,{scope:e.__scopeSlider,children:L.jsx(kP.Slot,{scope:e.__scopeSlider,children:L.jsx(b,{"aria-disabled":s,"data-disabled":s?"":void 0,...m,ref:t,onPointerDown:qt(m.onPointerDown,()=>{s||(x.current=w)}),min:n,max:i,inverted:p,onSlideStart:s?void 0:M,onSlideMove:s?void 0:T,onSlideEnd:s?void 0:S,onHomeKeyDown:()=>!s&&$(n,0,{commit:!0}),onEndKeyDown:()=>!s&&$(i,w.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:F})=>{if(!s){const z=jq.includes(k.key)||k.shiftKey&&Fq.includes(k.key)?10:1,G=g.current,H=w[G],W=o*z*F;$(H+W,G,{commit:!0})}}})})})})});Rq.displayName=bf;var[zq,Bq]=Nq(bf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),DAe=N.forwardRef((e,t)=>{const{min:r,max:n,dir:i,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:l,onStepKeyDown:u,...d}=e,[c,f]=N.useState(null),p=Rr(t,b=>f(b)),h=N.useRef(void 0),m=i0(i),v=m==="ltr",g=v&&!o||!v&&o;function _(b){const w=h.current||c.getBoundingClientRect(),y=[0,w.width],M=zC(y,g?[r,n]:[n,r]);return h.current=w,M(b-w.left)}return L.jsx(zq,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:L.jsx(Uq,{dir:m,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const w=_(b.clientX);a==null||a(w)},onSlideMove:b=>{const w=_(b.clientX);s==null||s(w)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:b=>{const y=Lq[g?"from-left":"from-right"].includes(b.key);u==null||u({event:b,direction:y?-1:1})}})})}),jAe=N.forwardRef((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:s,onStepKeyDown:l,...u}=e,d=N.useRef(null),c=Rr(t,d),f=N.useRef(void 0),p=!i;function h(m){const v=f.current||d.current.getBoundingClientRect(),g=[0,v.height],b=zC(g,p?[n,r]:[r,n]);return f.current=v,b(m-v.top)}return L.jsx(zq,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:L.jsx(Uq,{"data-orientation":"vertical",...u,ref:c,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const v=h(m.clientY);o==null||o(v)},onSlideMove:m=>{const v=h(m.clientY);a==null||a(v)},onSlideEnd:()=>{f.current=void 0,s==null||s()},onStepKeyDown:m=>{const g=Lq[p?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:g?-1:1})}})})}),Uq=N.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:l,...u}=e,d=eb(bf,r);return L.jsx(_r.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,c=>{c.key==="Home"?(a(c),c.preventDefault()):c.key==="End"?(s(c),c.preventDefault()):jq.concat(Fq).includes(c.key)&&(l(c),c.preventDefault())}),onPointerDown:qt(e.onPointerDown,c=>{const f=c.target;f.setPointerCapture(c.pointerId),c.preventDefault(),d.thumbs.has(f)?f.focus():n(c)}),onPointerMove:qt(e.onPointerMove,c=>{c.target.hasPointerCapture(c.pointerId)&&i(c)}),onPointerUp:qt(e.onPointerUp,c=>{const f=c.target;f.hasPointerCapture(c.pointerId)&&(f.releasePointerCapture(c.pointerId),o(c))})})}),Wq="SliderTrack",Vq=N.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=eb(Wq,r);return L.jsx(_r.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});Vq.displayName=Wq;var IP="SliderRange",Gq=N.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=eb(IP,r),o=Bq(IP,r),a=N.useRef(null),s=Rr(t,a),l=i.values.length,u=i.values.map(f=>qq(f,i.min,i.max)),d=l>1?Math.min(...u):0,c=100-Math.max(...u);return L.jsx(_r.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:s,style:{...e.style,[o.startEdge]:d+"%",[o.endEdge]:c+"%"}})});Gq.displayName=IP;var DP="SliderThumb",Hq=N.forwardRef((e,t)=>{const r=OAe(e.__scopeSlider),[n,i]=N.useState(null),o=Rr(t,s=>i(s)),a=N.useMemo(()=>n?r().findIndex(s=>s.ref.current===n):-1,[r,n]);return L.jsx(FAe,{...e,ref:o,index:a})}),FAe=N.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:i,...o}=e,a=eb(DP,r),s=Bq(DP,r),[l,u]=N.useState(null),d=Rr(t,_=>u(_)),c=l?a.form||!!l.closest("form"):!0,f=HE(l),p=a.values[n],h=p===void 0?0:qq(p,a.min,a.max),m=RAe(n,a.values.length),v=f==null?void 0:f[s.size],g=v?BAe(v,h,s.direction):0;return N.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),L.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${h}% + ${g}px)`},children:[L.jsx(kP.ItemSlot,{scope:e.__scopeSlider,children:L.jsx(_r.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:d,style:p===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),c&&L.jsx(Kq,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},n)]})});Hq.displayName=DP;var LAe="RadioBubbleInput",Kq=N.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const i=N.useRef(null),o=Rr(i,n),a=Sq(t);return N.useEffect(()=>{const s=i.current;if(!s)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&d){const c=new Event("input",{bubbles:!0});d.call(s,t),s.dispatchEvent(c)}},[a,t]),L.jsx(_r.input,{style:{display:"none"},...r,ref:o,defaultValue:t})});Kq.displayName=LAe;function NAe(e=[],t,r){const n=[...e];return n[r]=t,n.sort((i,o)=>i-o)}function qq(e,t,r){const o=100/(r-t)*(e-t);return CS(o,[0,100])}function RAe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function zAe(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),n=Math.min(...r);return r.indexOf(n)}function BAe(e,t,r){const n=e/2,o=zC([0,50],[0,n]);return(n-o(t)*r)*r}function UAe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function WAe(e,t){if(t>0){const r=UAe(e);return Math.min(...r)>=t}return!0}function zC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function VAe(e){return(String(e).split(".")[1]||"").length}function GAe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var Xq=Rq,HAe=Vq,KAe=Gq,qAe=Hq;const Qq=N.forwardRef(({className:e,...t},r)=>L.jsxs(Xq,{ref:r,className:sn("relative flex w-full touch-none select-none items-center",e),...t,children:[L.jsx(HAe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:L.jsx(KAe,{className:"absolute h-full bg-primary"})}),L.jsx(qAe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Qq.displayName=Xq.displayName;const XAe=()=>{const[e,t]=N.useState([{id:"speaker-001",name:"مكبر صوت فوق صوتي",type:"speaker",isOnline:!0,isActive:!1,intensity:75,batteryLevel:90},{id:"lights-001",name:" وامضة أضواء LED",type:"lights",isOnline:!0,isActive:!1,intensity:80},{id:"sprinkler-001",name:"رشاش المياه",type:"sprinkler",isOnline:!1,isActive:!1,intensity:60,batteryLevel:25},{id:"siren-001",name:"صافرة الطوارئ",type:"siren",isOnline:!0,isActive:!1,intensity:50}]),r=s=>{switch(s){case"speaker":return LE;case"lights":return gZ;case"sprinkler":return mZ;case"siren":return fv;default:return yZ}},n=s=>{t(u=>u.map(d=>d.id===s?{...d,isActive:!d.isActive}:d));const l=e.find(u=>u.id===s);ed({title:l!=null&&l.isActive?"تم إلغاء تفعيل الجهاز":"تم تفعيل الجهاز",description:`${l==null?void 0:l.name} ${l!=null&&l.isActive?"مطفأ":"نشط"} الآن`})},i=(s,l)=>{t(u=>u.map(d=>d.id===s?{...d,intensity:l}:d))},o=()=>{t(s=>s.map(l=>({...l,isActive:l.isOnline}))),ed({title:"تم تفعيل بروتوكول الطوارئ",description:"تم تفعيل جميع أجهزة الردع",variant:"destructive"})},a=()=>{t(s=>s.map(l=>({...l,isActive:!1}))),ed({title:"تم إلغاء تفعيل جميع الأجهزة",description:"تم إيقاف جميع أجهزة الردع"})};return L.jsxs(Cn,{children:[L.jsxs(ao,{children:[L.jsxs(so,{className:"flex items-center gap-2",children:[L.jsx(IW,{className:"h-5 w-5"}),"أجهزة الردع الذكية"]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsxs(Ba,{onClick:o,variant:"destructive",size:"sm",className:"flex items-center gap-2",children:[L.jsx(_Z,{className:"h-4 w-4"}),"بروتوكول الطوارئ"]}),L.jsxs(Ba,{onClick:a,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[L.jsx(wZ,{className:"h-4 w-4"}),"إيقاف الكل"]})]})]}),L.jsx(Rn,{className:"space-y-4",children:e.map(s=>{const l=r(s.type);return L.jsxs(Cn,{className:"p-4",children:[L.jsxs("div",{className:"flex items-center justify-between mb-3",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:L.jsx(l,{className:"h-5 w-5 text-primary"})}),L.jsxs("div",{children:[L.jsx("h4",{className:"font-semibold",children:s.name}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(_m,{variant:s.isOnline?"default":"destructive",className:"text-xs",children:s.isOnline?"متصل":"غير متصل"}),s.batteryLevel&&L.jsxs("span",{className:"text-xs text-muted-foreground",children:["البطارية: ",s.batteryLevel,"%"]})]})]})]}),L.jsx(Dq,{checked:s.isActive,onCheckedChange:()=>n(s.id),disabled:!s.isOnline})]}),L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("label",{className:"text-sm font-medium",children:"الشدة"}),L.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.intensity,"%"]})]}),L.jsx(Qq,{value:[s.intensity],onValueChange:u=>i(s.id,u[0]),max:100,step:5,disabled:!s.isOnline,className:"w-full"})]}),s.isActive&&L.jsx("div",{className:"mt-3 p-2 bg-green-50 dark:bg-green-950 rounded-lg",children:L.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"✓ الجهاز يردع الحيوانات بنشاط"})})]},s.id)})})]})},QAe=({detections:e})=>{const t=[{day:"الاثنين",detections:12,prevented:10,damage:2},{day:"الثلاثاء",detections:8,prevented:7,damage:1},{day:"الأربعاء",detections:15,prevented:13,damage:2},{day:"الخميس",detections:6,prevented:6,damage:0},{day:"الجمعة",detections:11,prevented:9,damage:2},{day:"السبت",detections:18,prevented:15,damage:3},{day:"الأحد",detections:14,prevented:12,damage:2}],r=[{level:"منخفض",count:45,color:"#22c55e"},{level:"متوسط",count:28,color:"#f59e0b"},{level:"عالي",count:12,color:"#ef4444"},{level:"خطير",count:3,color:"#dc2626"}],n={totalSaved:2850,potentialLoss:3420,roi:492},i=[{location:"الحقل الشمالي أ",incidents:23,trend:"up"},{location:"مصدر المياه",incidents:18,trend:"down"},{location:"البوابة الجنوبية",incidents:15,trend:"stable"},{location:"الحدود الخلفية",incidents:9,trend:"up"}],o=[{condition:"مشمس",detections:8},{condition:"ماطر",detections:15},{condition:"غائم",detections:12},{condition:"عاصف",detections:6}];return L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[L.jsx(Cn,{children:L.jsx(Rn,{className:"p-4",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(hZ,{className:"h-5 w-5 text-green-500"}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-muted-foreground",children:"قيمة المحاصيل المحفوظة"}),L.jsxs("p",{className:"text-2xl font-bold text-green-500",children:["$",n.totalSaved]})]})]})})}),L.jsx(Cn,{children:L.jsx(Rn,{className:"p-4",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(kW,{className:"h-5 w-5 text-red-500"}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-muted-foreground",children:"الخسائر المحتملة"}),L.jsxs("p",{className:"text-2xl font-bold text-red-500",children:["$",n.potentialLoss]})]})]})})}),L.jsx(Cn,{children:L.jsx(Rn,{className:"p-4",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(xZ,{className:"h-5 w-5 text-blue-500"}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-muted-foreground",children:"معدل الوقاية"}),L.jsx("p",{className:"text-2xl font-bold text-blue-500",children:"87%"})]})]})})}),L.jsx(Cn,{children:L.jsx(Rn,{className:"p-4",children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(SM,{className:"h-5 w-5 text-primary"}),L.jsxs("div",{children:[L.jsx("p",{className:"text-sm text-muted-foreground",children:"عائد الاستثمار"}),L.jsxs("p",{className:"text-2xl font-bold text-primary",children:[n.roi,"%"]})]})]})})})]}),L.jsxs(Cn,{children:[L.jsx(ao,{children:L.jsx(so,{children:"اتجاهات الكشف والوقاية الأسبوعية"})}),L.jsx(Rn,{children:L.jsx(Hp,{width:"100%",height:300,children:L.jsxs(Pq,{data:t,children:[L.jsx(bP,{strokeDasharray:"3 3"}),L.jsx(Xu,{dataKey:"day"}),L.jsx(Qu,{}),L.jsx(Co,{}),L.jsx(Va,{dataKey:"detections",fill:"#ef4444",name:"الاكتشافات"}),L.jsx(Va,{dataKey:"prevented",fill:"#22c55e",name:"تم منعها"}),L.jsx(Va,{dataKey:"damage",fill:"#f59e0b",name:"حوادث الضرر"})]})})})]}),L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[L.jsxs(Cn,{children:[L.jsx(ao,{children:L.jsx(so,{children:"توزيع مستويات التهديد"})}),L.jsx(Rn,{children:L.jsx(Hp,{width:"100%",height:250,children:L.jsxs(Eq,{children:[L.jsx(Ja,{data:r,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"count",label:({level:a,count:s})=>`${a}: ${s}`,children:r.map((a,s)=>L.jsx(wm,{fill:a.color},`cell-${s}`))}),L.jsx(Co,{})]})})})]}),L.jsxs(Cn,{children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2",children:[L.jsx(pZ,{className:"h-5 w-5"}),"تحليل تأثير الطقس"]})}),L.jsx(Rn,{children:L.jsx(Hp,{width:"100%",height:250,children:L.jsxs(TAe,{data:o,children:[L.jsx(bP,{strokeDasharray:"3 3"}),L.jsx(Xu,{dataKey:"condition"}),L.jsx(Qu,{}),L.jsx(Co,{}),L.jsx(Cm,{type:"monotone",dataKey:"detections",stroke:"#2563eb",strokeWidth:3})]})})})]})]}),L.jsxs(Cn,{children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2",children:[L.jsx(OW,{className:"h-5 w-5"}),"نقاط النشاط الساخنة"]})}),L.jsx(Rn,{children:L.jsx("div",{className:"space-y-4",children:i.map((a,s)=>L.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),L.jsx("span",{className:"font-medium",children:a.location})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.incidents," حوادث"]}),L.jsxs(_m,{variant:a.trend==="up"?"destructive":a.trend==="down"?"default":"secondary",children:[a.trend==="up"&&L.jsx(SM,{className:"h-3 w-3 mr-1"}),a.trend==="down"&&L.jsx(TZ,{className:"h-3 w-3 mr-1"}),a.trend]})]})]},s))})})]}),L.jsxs(Cn,{children:[L.jsx(ao,{children:L.jsxs(so,{className:"flex items-center gap-2",children:[L.jsx(AW,{className:"h-5 w-5"}),"رؤى وتوقعات الذكاء الاصطناعي"]})}),L.jsxs(Rn,{className:"space-y-4",children:[L.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[L.jsx("h4",{className:"font-semibold text-blue-700 dark:text-blue-300 mb-2",children:"توقع ذروة النشاط"}),L.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"بناءً على البيانات التاريخية، توقع زيادة نشاط الحيوانات بنسبة 40% بين الساعة 5-7 صباحاً غداً بسبب توقعات الأمطار."})]}),L.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-950 rounded-lg",children:[L.jsx("h4",{className:"font-semibold text-yellow-700 dark:text-yellow-300 mb-2",children:"تنبيه الصيانة"}),L.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"مستوى البطارية في الكاميرا 3 منخفض (15%). جدولة الصيانة خلال 24 ساعة."})]}),L.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[L.jsx("h4",{className:"font-semibold text-green-700 dark:text-green-300 mb-2",children:"تحسين الكفاءة"}),L.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"ازدادت فعالية الردع بنسبة 23% بعد تعديل إعدادات التردد فوق الصوتي."})]})]})]})]})};var A1="rovingFocusGroup.onEntryFocus",YAe={bubbles:!1,cancelable:!0},$m="RovingFocusGroup",[jP,Yq,ZAe]=OE($m),[JAe,Zq]=Is($m,[ZAe]),[eOe,tOe]=JAe($m),Jq=N.forwardRef((e,t)=>L.jsx(jP.Provider,{scope:e.__scopeRovingFocusGroup,children:L.jsx(jP.Slot,{scope:e.__scopeRovingFocusGroup,children:L.jsx(rOe,{...e,ref:t})})}));Jq.displayName=$m;var rOe=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...c}=e,f=N.useRef(null),p=Rr(t,f),h=i0(o),[m,v]=hm({prop:a,defaultProp:s??null,onChange:l,caller:$m}),[g,_]=N.useState(!1),b=xi(u),w=Yq(r),y=N.useRef(!1),[x,M]=N.useState(0);return N.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(A1,b),()=>T.removeEventListener(A1,b)},[b]),L.jsx(eOe,{scope:r,orientation:n,dir:h,loop:i,currentTabStopId:m,onItemFocus:N.useCallback(T=>v(T),[v]),onItemShiftTab:N.useCallback(()=>_(!0),[]),onFocusableItemAdd:N.useCallback(()=>M(T=>T+1),[]),onFocusableItemRemove:N.useCallback(()=>M(T=>T-1),[]),children:L.jsx(_r.div,{tabIndex:g||x===0?-1:0,"data-orientation":n,...c,ref:p,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{y.current=!0}),onFocus:qt(e.onFocus,T=>{const S=!y.current;if(T.target===T.currentTarget&&S&&!g){const $=new CustomEvent(A1,YAe);if(T.currentTarget.dispatchEvent($),!$.defaultPrevented){const k=w().filter(G=>G.focusable),F=k.find(G=>G.active),j=k.find(G=>G.id===m),z=[F,j,...k].filter(Boolean).map(G=>G.ref.current);r7(z,d)}}y.current=!1}),onBlur:qt(e.onBlur,()=>_(!1))})})}),e7="RovingFocusGroupItem",t7=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:o,children:a,...s}=e,l=VW(),u=o||l,d=tOe(e7,r),c=d.currentTabStopId===u,f=Yq(r),{onFocusableItemAdd:p,onFocusableItemRemove:h,currentTabStopId:m}=d;return N.useEffect(()=>{if(n)return p(),()=>h()},[n,p,h]),L.jsx(jP.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:L.jsx(_r.span,{tabIndex:c?0:-1,"data-orientation":d.orientation,...s,ref:t,onMouseDown:qt(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=oOe(v,d.orientation,d.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=f().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const w=b.indexOf(v.currentTarget);b=d.loop?aOe(b,w+1):b.slice(w+1)}setTimeout(()=>r7(b))}}),children:typeof a=="function"?a({isCurrentTabStop:c,hasTabStop:m!=null}):a})})});t7.displayName=e7;var nOe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iOe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oOe(e,t,r){const n=iOe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return nOe[n]}function r7(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function aOe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var sOe=Jq,lOe=t7,tb="Tabs",[uOe,COe]=Is(tb,[Zq]),n7=Zq(),[cOe,BC]=uOe(tb),i7=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:s,activationMode:l="automatic",...u}=e,d=i0(s),[c,f]=hm({prop:n,onChange:i,defaultProp:o??"",caller:tb});return L.jsx(cOe,{scope:r,baseId:VW(),value:c,onValueChange:f,orientation:a,dir:d,activationMode:l,children:L.jsx(_r.div,{dir:d,"data-orientation":a,...u,ref:t})})});i7.displayName=tb;var o7="TabsList",a7=N.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,o=BC(o7,r),a=n7(r);return L.jsx(sOe,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:L.jsx(_r.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});a7.displayName=o7;var s7="TabsTrigger",l7=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...o}=e,a=BC(s7,r),s=n7(r),l=d7(a.baseId,n),u=f7(a.baseId,n),d=n===a.value;return L.jsx(lOe,{asChild:!0,...s,focusable:!i,active:d,children:L.jsx(_r.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:t,onMouseDown:qt(e.onMouseDown,c=>{!i&&c.button===0&&c.ctrlKey===!1?a.onValueChange(n):c.preventDefault()}),onKeyDown:qt(e.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&a.onValueChange(n)}),onFocus:qt(e.onFocus,()=>{const c=a.activationMode!=="manual";!d&&!i&&c&&a.onValueChange(n)})})})});l7.displayName=s7;var u7="TabsContent",c7=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:o,...a}=e,s=BC(u7,r),l=d7(s.baseId,n),u=f7(s.baseId,n),d=n===s.value,c=N.useRef(d);return N.useEffect(()=>{const f=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(f)},[]),L.jsx(Ol,{present:i||d,children:({present:f})=>L.jsx(_r.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:c.current?"0s":void 0},children:f&&o})})});c7.displayName=u7;function d7(e,t){return`${e}-trigger-${t}`}function f7(e,t){return`${e}-content-${t}`}var dOe=i7,p7=a7,h7=l7,m7=c7;const fOe=dOe,g7=N.forwardRef(({className:e,...t},r)=>L.jsx(p7,{ref:r,className:sn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));g7.displayName=p7.displayName;const Ip=N.forwardRef(({className:e,...t},r)=>L.jsx(h7,{ref:r,className:sn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ip.displayName=h7.displayName;const Dp=N.forwardRef(({className:e,...t},r)=>L.jsx(m7,{ref:r,className:sn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dp.displayName=m7.displayName;const pOe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),i=a=>{t(s=>[a,...s.slice(0,49)])},o=e[0]||null;return L.jsxs("div",{className:"min-h-screen bg-background",dir:"rtl",children:[L.jsx("header",{className:"bg-gradient-success text-primary-foreground shadow-farm",dir:"rtl",style:{textAlign:"right",direction:"rtl"},children:L.jsx("div",{className:"container mx-auto px-4 py-6",style:{textAlign:"right"},children:L.jsxs("div",{className:"flex items-center gap-3",style:{justifyContent:"flex-end",flexDirection:"row-reverse"},children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("img",{src:"/logo.jpg",alt:"EcoGuard Logo",className:"h-10 w-10 rounded-lg object-contain bg-white/10 p-1",onError:a=>{a.currentTarget.style.display="none";const s=a.currentTarget.nextElementSibling;s&&(s.style.display="block")}}),L.jsx("div",{className:"p-2 bg-primary-foreground/20 rounded-lg",style:{display:"none"},children:L.jsx(MZ,{className:"h-8 w-8"})})]}),L.jsxs("div",{style:{textAlign:"right"},children:[L.jsx("h1",{className:"text-2xl font-bold",style:{textAlign:"right"},children:"الحارس البيئي | EcoGuard"}),L.jsx("p",{className:"text-primary-foreground/80",style:{textAlign:"right"},children:"نظام كشف الحيوانات بالذكاء الاصطناعي"})]})]})})}),L.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[L.jsx("div",{className:"bg-gradient-earth rounded-lg p-4",dir:"rtl",style:{textAlign:"right",direction:"rtl"},children:L.jsx("div",{style:{textAlign:"right"},children:L.jsxs("div",{className:"flex items-center gap-3",style:{justifyContent:"flex-end",flexDirection:"row-reverse"},children:[L.jsxs("div",{style:{textAlign:"right"},children:[L.jsxs("h2",{className:"font-semibold text-foreground",style:{textAlign:"right"},children:["حالة النظام: ",r?"مراقبة نشطة":"في الانتظار"]}),L.jsx("p",{className:"text-sm text-muted-foreground",style:{textAlign:"right"},children:r?"الذكاء الاصطناعي يقوم بمسح نشط للحيوانات في ممتلكاتك":'انقر على "بدء المراقبة" لبدء كشف الحيوانات'})]}),L.jsx("div",{className:"p-2 bg-farm-green/20 rounded-lg",children:r?L.jsx(_h,{className:"h-6 w-6 text-farm-green"}):L.jsx(fv,{className:"h-6 w-6 text-muted-foreground"})})]})})}),L.jsxs(fOe,{defaultValue:"monitoring",className:"space-y-6",dir:"rtl",children:[L.jsxs(g7,{className:"grid w-full grid-cols-4",style:{direction:"rtl"},children:[L.jsxs(Ip,{value:"monitoring",className:"flex items-center gap-2",style:{flexDirection:"row-reverse"},children:[L.jsx(_h,{className:"h-4 w-4"}),"المراقبة"]}),L.jsxs(Ip,{value:"devices",className:"flex items-center gap-2",style:{flexDirection:"row-reverse"},children:[L.jsx(IW,{className:"h-4 w-4"}),"الأجهزة"]}),L.jsxs(Ip,{value:"analytics",className:"flex items-center gap-2",style:{flexDirection:"row-reverse"},children:[L.jsx(fZ,{className:"h-4 w-4"}),"التحليلات"]}),L.jsxs(Ip,{value:"history",className:"flex items-center gap-2",style:{flexDirection:"row-reverse"},children:[L.jsx(fv,{className:"h-4 w-4"}),"السجل"]})]}),L.jsxs(Dp,{value:"monitoring",className:"space-y-6",children:[L.jsx(kie,{onDetection:i}),L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[L.jsx("div",{className:"lg:col-span-2",children:L.jsx(PAe,{detections:e})}),L.jsx("div",{children:L.jsx(ON,{latestDetection:o,totalDetections:e.length})})]})]}),L.jsx(Dp,{value:"devices",className:"space-y-6",children:L.jsx(XAe,{})}),L.jsx(Dp,{value:"analytics",className:"space-y-6",children:L.jsx(QAe,{detections:e})}),L.jsx(Dp,{value:"history",className:"space-y-6",children:L.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[L.jsx("div",{className:"lg:col-span-2",children:L.jsx(Kie,{detections:e})}),L.jsx("div",{children:L.jsx(ON,{latestDetection:o,totalDetections:e.length})})]})})]})]}),L.jsx("footer",{className:"bg-muted py-4 text-sm text-muted-foreground",dir:"rtl",children:L.jsx("div",{className:"container mx-auto px-4",children:L.jsx("p",{className:"text-center",style:{textAlign:"center"},children:"الحارس البيئي | EcoGuard © 2024 - حماية محصولك بالذكاء الاصطناعي"})})})]})},hOe=()=>{const e=FV();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),L.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:L.jsxs("div",{className:"text-center",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),L.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"عفواً! الصفحة غير موجودة"}),L.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"العودة للصفحة الرئيسية"})]})})},mOe=new Qte,gOe=()=>L.jsx(Zte,{client:mOe,children:L.jsxs(Ete,{children:[L.jsx(lJ,{}),L.jsx(zJ,{}),L.jsx(Rre,{children:L.jsxs(Fre,{children:[L.jsx(LM,{path:"/",element:L.jsx(pOe,{})}),L.jsx(LM,{path:"*",element:L.jsx(hOe,{})})]})})]})});eW(document.getElementById("root")).render(L.jsx(gOe,{}));
